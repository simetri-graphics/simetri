<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="pdoc 15.0.1"/>
    <title>simetri.canvas.canvas API documentation</title>

    <style>/*! * Bootstrap Reboot v5.0.0 (https://getbootstrap.com/) * Copyright 2011-2021 The Bootstrap Authors * Copyright 2011-2021 Twitter, Inc. * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE) * Forked from Normalize.css, licensed MIT (https://github.com/necolas/normalize.css/blob/master/LICENSE.md) */*,::after,::before{box-sizing:border-box}@media (prefers-reduced-motion:no-preference){:root{scroll-behavior:smooth}}body{margin:0;font-family:system-ui,-apple-system,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans","Liberation Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";font-size:1rem;font-weight:400;line-height:1.5;color:#212529;background-color:#fff;-webkit-text-size-adjust:100%;-webkit-tap-highlight-color:transparent}hr{margin:1rem 0;color:inherit;background-color:currentColor;border:0;opacity:.25}hr:not([size]){height:1px}h1,h2,h3,h4,h5,h6{margin-top:0;margin-bottom:.5rem;font-weight:500;line-height:1.2}h1{font-size:calc(1.375rem + 1.5vw)}@media (min-width:1200px){h1{font-size:2.5rem}}h2{font-size:calc(1.325rem + .9vw)}@media (min-width:1200px){h2{font-size:2rem}}h3{font-size:calc(1.3rem + .6vw)}@media (min-width:1200px){h3{font-size:1.75rem}}h4{font-size:calc(1.275rem + .3vw)}@media (min-width:1200px){h4{font-size:1.5rem}}h5{font-size:1.25rem}h6{font-size:1rem}p{margin-top:0;margin-bottom:1rem}abbr[data-bs-original-title],abbr[title]{-webkit-text-decoration:underline dotted;text-decoration:underline dotted;cursor:help;-webkit-text-decoration-skip-ink:none;text-decoration-skip-ink:none}address{margin-bottom:1rem;font-style:normal;line-height:inherit}ol,ul{padding-left:2rem}dl,ol,ul{margin-top:0;margin-bottom:1rem}ol ol,ol ul,ul ol,ul ul{margin-bottom:0}dt{font-weight:700}dd{margin-bottom:.5rem;margin-left:0}blockquote{margin:0 0 1rem}b,strong{font-weight:bolder}small{font-size:.875em}mark{padding:.2em;background-color:#fcf8e3}sub,sup{position:relative;font-size:.75em;line-height:0;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}a{color:#0d6efd;text-decoration:underline}a:hover{color:#0a58ca}a:not([href]):not([class]),a:not([href]):not([class]):hover{color:inherit;text-decoration:none}code,kbd,pre,samp{font-family:SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;font-size:1em;direction:ltr;unicode-bidi:bidi-override}pre{display:block;margin-top:0;margin-bottom:1rem;overflow:auto;font-size:.875em}pre code{font-size:inherit;color:inherit;word-break:normal}code{font-size:.875em;color:#d63384;word-wrap:break-word}a>code{color:inherit}kbd{padding:.2rem .4rem;font-size:.875em;color:#fff;background-color:#212529;border-radius:.2rem}kbd kbd{padding:0;font-size:1em;font-weight:700}figure{margin:0 0 1rem}img,svg{vertical-align:middle}table{caption-side:bottom;border-collapse:collapse}caption{padding-top:.5rem;padding-bottom:.5rem;color:#6c757d;text-align:left}th{text-align:inherit;text-align:-webkit-match-parent}tbody,td,tfoot,th,thead,tr{border-color:inherit;border-style:solid;border-width:0}label{display:inline-block}button{border-radius:0}button:focus:not(:focus-visible){outline:0}button,input,optgroup,select,textarea{margin:0;font-family:inherit;font-size:inherit;line-height:inherit}button,select{text-transform:none}[role=button]{cursor:pointer}select{word-wrap:normal}select:disabled{opacity:1}[list]::-webkit-calendar-picker-indicator{display:none}[type=button],[type=reset],[type=submit],button{-webkit-appearance:button}[type=button]:not(:disabled),[type=reset]:not(:disabled),[type=submit]:not(:disabled),button:not(:disabled){cursor:pointer}::-moz-focus-inner{padding:0;border-style:none}textarea{resize:vertical}fieldset{min-width:0;padding:0;margin:0;border:0}legend{float:left;width:100%;padding:0;margin-bottom:.5rem;font-size:calc(1.275rem + .3vw);line-height:inherit}@media (min-width:1200px){legend{font-size:1.5rem}}legend+*{clear:left}::-webkit-datetime-edit-day-field,::-webkit-datetime-edit-fields-wrapper,::-webkit-datetime-edit-hour-field,::-webkit-datetime-edit-minute,::-webkit-datetime-edit-month-field,::-webkit-datetime-edit-text,::-webkit-datetime-edit-year-field{padding:0}::-webkit-inner-spin-button{height:auto}[type=search]{outline-offset:-2px;-webkit-appearance:textfield}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-color-swatch-wrapper{padding:0}::file-selector-button{font:inherit}::-webkit-file-upload-button{font:inherit;-webkit-appearance:button}output{display:inline-block}iframe{border:0}summary{display:list-item;cursor:pointer}progress{vertical-align:baseline}[hidden]{display:none!important}</style>
    <style>/*! syntax-highlighting.css */pre{line-height:125%;}span.linenos{color:inherit; background-color:transparent; padding-left:5px; padding-right:20px;}.pdoc-code .hll{background-color:#ffffcc}.pdoc-code{background:#f8f8f8;}.pdoc-code .c{color:#3D7B7B; font-style:italic}.pdoc-code .err{border:1px solid #FF0000}.pdoc-code .k{color:#008000; font-weight:bold}.pdoc-code .o{color:#666666}.pdoc-code .ch{color:#3D7B7B; font-style:italic}.pdoc-code .cm{color:#3D7B7B; font-style:italic}.pdoc-code .cp{color:#9C6500}.pdoc-code .cpf{color:#3D7B7B; font-style:italic}.pdoc-code .c1{color:#3D7B7B; font-style:italic}.pdoc-code .cs{color:#3D7B7B; font-style:italic}.pdoc-code .gd{color:#A00000}.pdoc-code .ge{font-style:italic}.pdoc-code .gr{color:#E40000}.pdoc-code .gh{color:#000080; font-weight:bold}.pdoc-code .gi{color:#008400}.pdoc-code .go{color:#717171}.pdoc-code .gp{color:#000080; font-weight:bold}.pdoc-code .gs{font-weight:bold}.pdoc-code .gu{color:#800080; font-weight:bold}.pdoc-code .gt{color:#0044DD}.pdoc-code .kc{color:#008000; font-weight:bold}.pdoc-code .kd{color:#008000; font-weight:bold}.pdoc-code .kn{color:#008000; font-weight:bold}.pdoc-code .kp{color:#008000}.pdoc-code .kr{color:#008000; font-weight:bold}.pdoc-code .kt{color:#B00040}.pdoc-code .m{color:#666666}.pdoc-code .s{color:#BA2121}.pdoc-code .na{color:#687822}.pdoc-code .nb{color:#008000}.pdoc-code .nc{color:#0000FF; font-weight:bold}.pdoc-code .no{color:#880000}.pdoc-code .nd{color:#AA22FF}.pdoc-code .ni{color:#717171; font-weight:bold}.pdoc-code .ne{color:#CB3F38; font-weight:bold}.pdoc-code .nf{color:#0000FF}.pdoc-code .nl{color:#767600}.pdoc-code .nn{color:#0000FF; font-weight:bold}.pdoc-code .nt{color:#008000; font-weight:bold}.pdoc-code .nv{color:#19177C}.pdoc-code .ow{color:#AA22FF; font-weight:bold}.pdoc-code .w{color:#bbbbbb}.pdoc-code .mb{color:#666666}.pdoc-code .mf{color:#666666}.pdoc-code .mh{color:#666666}.pdoc-code .mi{color:#666666}.pdoc-code .mo{color:#666666}.pdoc-code .sa{color:#BA2121}.pdoc-code .sb{color:#BA2121}.pdoc-code .sc{color:#BA2121}.pdoc-code .dl{color:#BA2121}.pdoc-code .sd{color:#BA2121; font-style:italic}.pdoc-code .s2{color:#BA2121}.pdoc-code .se{color:#AA5D1F; font-weight:bold}.pdoc-code .sh{color:#BA2121}.pdoc-code .si{color:#A45A77; font-weight:bold}.pdoc-code .sx{color:#008000}.pdoc-code .sr{color:#A45A77}.pdoc-code .s1{color:#BA2121}.pdoc-code .ss{color:#19177C}.pdoc-code .bp{color:#008000}.pdoc-code .fm{color:#0000FF}.pdoc-code .vc{color:#19177C}.pdoc-code .vg{color:#19177C}.pdoc-code .vi{color:#19177C}.pdoc-code .vm{color:#19177C}.pdoc-code .il{color:#666666}</style>
    <style>/*! theme.css */:root{--pdoc-background:#fff;}.pdoc{--text:#212529;--muted:#6c757d;--link:#3660a5;--link-hover:#1659c5;--code:#f8f8f8;--active:#fff598;--accent:#eee;--accent2:#c1c1c1;--nav-hover:rgba(255, 255, 255, 0.5);--name:#0066BB;--def:#008800;--annotation:#007020;}</style>
    <style>/*! layout.css */html, body{width:100%;height:100%;}html, main{scroll-behavior:smooth;}body{background-color:var(--pdoc-background);}@media (max-width:769px){#navtoggle{cursor:pointer;position:absolute;width:50px;height:40px;top:1rem;right:1rem;border-color:var(--text);color:var(--text);display:flex;opacity:0.8;z-index:999;}#navtoggle:hover{opacity:1;}#togglestate + div{display:none;}#togglestate:checked + div{display:inherit;}main, header{padding:2rem 3vw;}header + main{margin-top:-3rem;}.git-button{display:none !important;}nav input[type="search"]{max-width:77%;}nav input[type="search"]:first-child{margin-top:-6px;}nav input[type="search"]:valid ~ *{display:none !important;}}@media (min-width:770px){:root{--sidebar-width:clamp(12.5rem, 28vw, 22rem);}nav{position:fixed;overflow:auto;height:100vh;width:var(--sidebar-width);}main, header{padding:3rem 2rem 3rem calc(var(--sidebar-width) + 3rem);width:calc(54rem + var(--sidebar-width));max-width:100%;}header + main{margin-top:-4rem;}#navtoggle{display:none;}}#togglestate{position:absolute;height:0;opacity:0;}nav.pdoc{--pad:clamp(0.5rem, 2vw, 1.75rem);--indent:1.5rem;background-color:var(--accent);border-right:1px solid var(--accent2);box-shadow:0 0 20px rgba(50, 50, 50, .2) inset;padding:0 0 0 var(--pad);overflow-wrap:anywhere;scrollbar-width:thin; scrollbar-color:var(--accent2) transparent; z-index:1}nav.pdoc::-webkit-scrollbar{width:.4rem; }nav.pdoc::-webkit-scrollbar-thumb{background-color:var(--accent2); }nav.pdoc > div{padding:var(--pad) 0;}nav.pdoc .module-list-button{display:inline-flex;align-items:center;color:var(--text);border-color:var(--muted);margin-bottom:1rem;}nav.pdoc .module-list-button:hover{border-color:var(--text);}nav.pdoc input[type=search]{display:block;outline-offset:0;width:calc(100% - var(--pad));}nav.pdoc .logo{max-width:calc(100% - var(--pad));max-height:35vh;display:block;margin:0 auto 1rem;transform:translate(calc(-.5 * var(--pad)), 0);}nav.pdoc ul{list-style:none;padding-left:0;}nav.pdoc > div > ul{margin-left:calc(0px - var(--pad));}nav.pdoc li a{padding:.2rem 0 .2rem calc(var(--pad) + var(--indent));}nav.pdoc > div > ul > li > a{padding-left:var(--pad);}nav.pdoc li{transition:all 100ms;}nav.pdoc li:hover{background-color:var(--nav-hover);}nav.pdoc a, nav.pdoc a:hover{color:var(--text);}nav.pdoc a{display:block;}nav.pdoc > h2:first-of-type{margin-top:1.5rem;}nav.pdoc .class:before{content:"class ";color:var(--muted);}nav.pdoc .function:after{content:"()";color:var(--muted);}nav.pdoc footer:before{content:"";display:block;width:calc(100% - var(--pad));border-top:solid var(--accent2) 1px;margin-top:1.5rem;padding-top:.5rem;}nav.pdoc footer{font-size:small;}</style>
    <style>/*! content.css */.pdoc{color:var(--text);box-sizing:border-box;line-height:1.5;background:none;}.pdoc .pdoc-button{cursor:pointer;display:inline-block;border:solid black 1px;border-radius:2px;font-size:.75rem;padding:calc(0.5em - 1px) 1em;transition:100ms all;}.pdoc .alert{padding:1rem 1rem 1rem calc(1.5rem + 24px);border:1px solid transparent;border-radius:.25rem;background-repeat:no-repeat;background-position:.75rem center;margin-bottom:1rem;}.pdoc .alert > em{display:none;}.pdoc .alert > *:last-child{margin-bottom:0;}.pdoc .alert.note {color:#084298;background-color:#cfe2ff;border-color:#b6d4fe;background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22%23084298%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M8%2016A8%208%200%201%200%208%200a8%208%200%200%200%200%2016zm.93-9.412-1%204.705c-.07.34.029.533.304.533.194%200%20.487-.07.686-.246l-.088.416c-.287.346-.92.598-1.465.598-.703%200-1.002-.422-.808-1.319l.738-3.468c.064-.293.006-.399-.287-.47l-.451-.081.082-.381%202.29-.287zM8%205.5a1%201%200%201%201%200-2%201%201%200%200%201%200%202z%22/%3E%3C/svg%3E");}.pdoc .alert.warning{color:#664d03;background-color:#fff3cd;border-color:#ffecb5;background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22%23664d03%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M8.982%201.566a1.13%201.13%200%200%200-1.96%200L.165%2013.233c-.457.778.091%201.767.98%201.767h13.713c.889%200%201.438-.99.98-1.767L8.982%201.566zM8%205c.535%200%20.954.462.9.995l-.35%203.507a.552.552%200%200%201-1.1%200L7.1%205.995A.905.905%200%200%201%208%205zm.002%206a1%201%200%201%201%200%202%201%201%200%200%201%200-2z%22/%3E%3C/svg%3E");}.pdoc .alert.danger{color:#842029;background-color:#f8d7da;border-color:#f5c2c7;background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22%23842029%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M5.52.359A.5.5%200%200%201%206%200h4a.5.5%200%200%201%20.474.658L8.694%206H12.5a.5.5%200%200%201%20.395.807l-7%209a.5.5%200%200%201-.873-.454L6.823%209.5H3.5a.5.5%200%200%201-.48-.641l2.5-8.5z%22/%3E%3C/svg%3E");}.pdoc .visually-hidden{position:absolute !important;width:1px !important;height:1px !important;padding:0 !important;margin:-1px !important;overflow:hidden !important;clip:rect(0, 0, 0, 0) !important;white-space:nowrap !important;border:0 !important;}.pdoc h1, .pdoc h2, .pdoc h3{font-weight:300;margin:.3em 0;padding:.2em 0;}.pdoc > section:not(.module-info) h1{font-size:1.5rem;font-weight:500;}.pdoc > section:not(.module-info) h2{font-size:1.4rem;font-weight:500;}.pdoc > section:not(.module-info) h3{font-size:1.3rem;font-weight:500;}.pdoc > section:not(.module-info) h4{font-size:1.2rem;}.pdoc > section:not(.module-info) h5{font-size:1.1rem;}.pdoc a{text-decoration:none;color:var(--link);}.pdoc a:hover{color:var(--link-hover);}.pdoc blockquote{margin-left:2rem;}.pdoc pre{border-top:1px solid var(--accent2);border-bottom:1px solid var(--accent2);margin-top:0;margin-bottom:1em;padding:.5rem 0 .5rem .5rem;overflow-x:auto;background-color:var(--code);}.pdoc code{color:var(--text);padding:.2em .4em;margin:0;font-size:85%;background-color:var(--accent);border-radius:6px;}.pdoc a > code{color:inherit;}.pdoc pre > code{display:inline-block;font-size:inherit;background:none;border:none;padding:0;}.pdoc > section:not(.module-info){margin-bottom:1.5rem;}.pdoc .modulename{margin-top:0;font-weight:bold;}.pdoc .modulename a{color:var(--link);transition:100ms all;}.pdoc .git-button{float:right;border:solid var(--link) 1px;}.pdoc .git-button:hover{background-color:var(--link);color:var(--pdoc-background);}.view-source-toggle-state,.view-source-toggle-state ~ .pdoc-code{display:none;}.view-source-toggle-state:checked ~ .pdoc-code{display:block;}.view-source-button{display:inline-block;float:right;font-size:.75rem;line-height:1.5rem;color:var(--muted);padding:0 .4rem 0 1.3rem;cursor:pointer;text-indent:-2px;}.view-source-button > span{visibility:hidden;}.module-info .view-source-button{float:none;display:flex;justify-content:flex-end;margin:-1.2rem .4rem -.2rem 0;}.view-source-button::before{position:absolute;content:"View Source";display:list-item;list-style-type:disclosure-closed;}.view-source-toggle-state:checked ~ .attr .view-source-button::before,.view-source-toggle-state:checked ~ .view-source-button::before{list-style-type:disclosure-open;}.pdoc .docstring{margin-bottom:1.5rem;}.pdoc section:not(.module-info) .docstring{margin-left:clamp(0rem, 5vw - 2rem, 1rem);}.pdoc .docstring .pdoc-code{margin-left:1em;margin-right:1em;}.pdoc h1:target,.pdoc h2:target,.pdoc h3:target,.pdoc h4:target,.pdoc h5:target,.pdoc h6:target,.pdoc .pdoc-code > pre > span:target{background-color:var(--active);box-shadow:-1rem 0 0 0 var(--active);}.pdoc .pdoc-code > pre > span:target{display:block;}.pdoc div:target > .attr,.pdoc section:target > .attr,.pdoc dd:target > a{background-color:var(--active);}.pdoc *{scroll-margin:2rem;}.pdoc .pdoc-code .linenos{user-select:none;}.pdoc .attr:hover{filter:contrast(0.95);}.pdoc section, .pdoc .classattr{position:relative;}.pdoc .headerlink{--width:clamp(1rem, 3vw, 2rem);position:absolute;top:0;left:calc(0rem - var(--width));transition:all 100ms ease-in-out;opacity:0;}.pdoc .headerlink::before{content:"#";display:block;text-align:center;width:var(--width);height:2.3rem;line-height:2.3rem;font-size:1.5rem;}.pdoc .attr:hover ~ .headerlink,.pdoc *:target > .headerlink,.pdoc .headerlink:hover{opacity:1;}.pdoc .attr{display:block;margin:.5rem 0 .5rem;padding:.4rem .4rem .4rem 1rem;background-color:var(--accent);overflow-x:auto;}.pdoc .classattr{margin-left:2rem;}.pdoc .decorator-deprecated{color:#842029;}.pdoc .decorator-deprecated ~ span{filter:grayscale(1) opacity(0.8);}.pdoc .name{color:var(--name);font-weight:bold;}.pdoc .def{color:var(--def);font-weight:bold;}.pdoc .signature{background-color:transparent;}.pdoc .param, .pdoc .return-annotation{white-space:pre;}.pdoc .signature.multiline .param{display:block;}.pdoc .signature.condensed .param{display:inline-block;}.pdoc .annotation{color:var(--annotation);}.pdoc .view-value-toggle-state,.pdoc .view-value-toggle-state ~ .default_value{display:none;}.pdoc .view-value-toggle-state:checked ~ .default_value{display:inherit;}.pdoc .view-value-button{font-size:.5rem;vertical-align:middle;border-style:dashed;margin-top:-0.1rem;}.pdoc .view-value-button:hover{background:white;}.pdoc .view-value-button::before{content:"show";text-align:center;width:2.2em;display:inline-block;}.pdoc .view-value-toggle-state:checked ~ .view-value-button::before{content:"hide";}.pdoc .inherited{margin-left:2rem;}.pdoc .inherited dt{font-weight:700;}.pdoc .inherited dt, .pdoc .inherited dd{display:inline;margin-left:0;margin-bottom:.5rem;}.pdoc .inherited dd:not(:last-child):after{content:", ";}.pdoc .inherited .class:before{content:"class ";}.pdoc .inherited .function a:after{content:"()";}.pdoc .search-result .docstring{overflow:auto;max-height:25vh;}.pdoc .search-result.focused > .attr{background-color:var(--active);}.pdoc .attribution{margin-top:2rem;display:block;opacity:0.5;transition:all 200ms;filter:grayscale(100%);}.pdoc .attribution:hover{opacity:1;filter:grayscale(0%);}.pdoc .attribution img{margin-left:5px;height:35px;vertical-align:middle;width:70px;transition:all 200ms;}.pdoc table{display:block;width:max-content;max-width:100%;overflow:auto;margin-bottom:1rem;}.pdoc table th{font-weight:600;}.pdoc table th, .pdoc table td{padding:6px 13px;border:1px solid var(--accent2);}</style>
    <style>/*! custom.css */</style></head>
<body>
    <nav class="pdoc">
        <label id="navtoggle" for="togglestate" class="pdoc-button"><svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 30 30'><path stroke-linecap='round' stroke="currentColor" stroke-miterlimit='10' stroke-width='2' d='M4 7h22M4 15h22M4 23h22'/></svg></label>
        <input id="togglestate" type="checkbox" aria-hidden="true" tabindex="-1">
        <div>            <a class="pdoc-button module-list-button" href="../canvas.html">
<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-box-arrow-in-left" viewBox="0 0 16 16">
  <path fill-rule="evenodd" d="M10 3.5a.5.5 0 0 0-.5-.5h-8a.5.5 0 0 0-.5.5v9a.5.5 0 0 0 .5.5h8a.5.5 0 0 0 .5-.5v-2a.5.5 0 0 1 1 0v2A1.5 1.5 0 0 1 9.5 14h-8A1.5 1.5 0 0 1 0 12.5v-9A1.5 1.5 0 0 1 1.5 2h8A1.5 1.5 0 0 1 11 3.5v2a.5.5 0 0 1-1 0v-2z"/>
  <path fill-rule="evenodd" d="M4.146 8.354a.5.5 0 0 1 0-.708l3-3a.5.5 0 1 1 .708.708L5.707 7.5H14.5a.5.5 0 0 1 0 1H5.707l2.147 2.146a.5.5 0 0 1-.708.708l-3-3z"/>
</svg>                &nbsp;simetri.canvas</a>


            <input type="search" placeholder="Search..." role="searchbox" aria-label="search"
                   pattern=".+" required>



            <h2>API Documentation</h2>
                <ul class="memberlist">
            <li>
                    <a class="class" href="#Canvas">Canvas</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#Canvas.__init__">Canvas</a>
                        </li>
                        <li>
                                <a class="variable" href="#Canvas.border">border</a>
                        </li>
                        <li>
                                <a class="variable" href="#Canvas.type">type</a>
                        </li>
                        <li>
                                <a class="variable" href="#Canvas.subtype">subtype</a>
                        </li>
                        <li>
                                <a class="variable" href="#Canvas.preamble">preamble</a>
                        </li>
                        <li>
                                <a class="variable" href="#Canvas.back_color">back_color</a>
                        </li>
                        <li>
                                <a class="variable" href="#Canvas.pages">pages</a>
                        </li>
                        <li>
                                <a class="variable" href="#Canvas.active_page">active_page</a>
                        </li>
                        <li>
                                <a class="variable" href="#Canvas.blend_mode">blend_mode</a>
                        </li>
                        <li>
                                <a class="variable" href="#Canvas.blend_group">blend_group</a>
                        </li>
                        <li>
                                <a class="variable" href="#Canvas.transparency_group">transparency_group</a>
                        </li>
                        <li>
                                <a class="variable" href="#Canvas.alpha">alpha</a>
                        </li>
                        <li>
                                <a class="variable" href="#Canvas.line_alpha">line_alpha</a>
                        </li>
                        <li>
                                <a class="variable" href="#Canvas.fill_alpha">fill_alpha</a>
                        </li>
                        <li>
                                <a class="variable" href="#Canvas.text_alpha">text_alpha</a>
                        </li>
                        <li>
                                <a class="variable" href="#Canvas.clip">clip</a>
                        </li>
                        <li>
                                <a class="variable" href="#Canvas.mask">mask</a>
                        </li>
                        <li>
                                <a class="variable" href="#Canvas.even_odd_rule">even_odd_rule</a>
                        </li>
                        <li>
                                <a class="variable" href="#Canvas.draw_grid">draw_grid</a>
                        </li>
                        <li>
                                <a class="variable" href="#Canvas.tex">tex</a>
                        </li>
                        <li>
                                <a class="variable" href="#Canvas.render">render</a>
                        </li>
                        <li>
                                <a class="function" href="#Canvas.display">display</a>
                        </li>
                        <li>
                                <a class="variable" href="#Canvas.size">size</a>
                        </li>
                        <li>
                                <a class="variable" href="#Canvas.origin">origin</a>
                        </li>
                        <li>
                                <a class="variable" href="#Canvas.limits">limits</a>
                        </li>
                        <li>
                                <a class="function" href="#Canvas.image">image</a>
                        </li>
                        <li>
                                <a class="function" href="#Canvas.insert_code">insert_code</a>
                        </li>
                        <li>
                                <a class="function" href="#Canvas.arc">arc</a>
                        </li>
                        <li>
                                <a class="function" href="#Canvas.bezier">bezier</a>
                        </li>
                        <li>
                                <a class="function" href="#Canvas.circle">circle</a>
                        </li>
                        <li>
                                <a class="function" href="#Canvas.ellipse">ellipse</a>
                        </li>
                        <li>
                                <a class="function" href="#Canvas.text">text</a>
                        </li>
                        <li>
                                <a class="function" href="#Canvas.help_lines">help_lines</a>
                        </li>
                        <li>
                                <a class="function" href="#Canvas.grid">grid</a>
                        </li>
                        <li>
                                <a class="function" href="#Canvas.line">line</a>
                        </li>
                        <li>
                                <a class="function" href="#Canvas.rectangle">rectangle</a>
                        </li>
                        <li>
                                <a class="function" href="#Canvas.square">square</a>
                        </li>
                        <li>
                                <a class="function" href="#Canvas.lines">lines</a>
                        </li>
                        <li>
                                <a class="function" href="#Canvas.draw_lace">draw_lace</a>
                        </li>
                        <li>
                                <a class="function" href="#Canvas.draw_dimension">draw_dimension</a>
                        </li>
                        <li>
                                <a class="function" href="#Canvas.draw">draw</a>
                        </li>
                        <li>
                                <a class="function" href="#Canvas.draw_CS">draw_CS</a>
                        </li>
                        <li>
                                <a class="function" href="#Canvas.draw_image">draw_image</a>
                        </li>
                        <li>
                                <a class="function" href="#Canvas.draw_frame">draw_frame</a>
                        </li>
                        <li>
                                <a class="function" href="#Canvas.reset">reset</a>
                        </li>
                        <li>
                                <a class="variable" href="#Canvas.pos">pos</a>
                        </li>
                        <li>
                                <a class="variable" href="#Canvas.angle">angle</a>
                        </li>
                        <li>
                                <a class="variable" href="#Canvas.scale">scale</a>
                        </li>
                        <li>
                                <a class="variable" href="#Canvas.xform_matrix">xform_matrix</a>
                        </li>
                        <li>
                                <a class="function" href="#Canvas.transform">transform</a>
                        </li>
                        <li>
                                <a class="function" href="#Canvas.reset_transform">reset_transform</a>
                        </li>
                        <li>
                                <a class="function" href="#Canvas.translate">translate</a>
                        </li>
                        <li>
                                <a class="function" href="#Canvas.rotate">rotate</a>
                        </li>
                        <li>
                                <a class="function" href="#Canvas.flip_x_axis">flip_x_axis</a>
                        </li>
                        <li>
                                <a class="function" href="#Canvas.flip_y_axis">flip_y_axis</a>
                        </li>
                        <li>
                                <a class="variable" href="#Canvas.x">x</a>
                        </li>
                        <li>
                                <a class="variable" href="#Canvas.y">y</a>
                        </li>
                        <li>
                                <a class="function" href="#Canvas.batch_graph">batch_graph</a>
                        </li>
                        <li>
                                <a class="function" href="#Canvas.get_fonts_list">get_fonts_list</a>
                        </li>
                        <li>
                                <a class="function" href="#Canvas.save">save</a>
                        </li>
                        <li>
                                <a class="function" href="#Canvas.new_page">new_page</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#PageGrid">PageGrid</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#PageGrid.__init__">PageGrid</a>
                        </li>
                        <li>
                                <a class="variable" href="#PageGrid.spacing">spacing</a>
                        </li>
                        <li>
                                <a class="variable" href="#PageGrid.back_color">back_color</a>
                        </li>
                        <li>
                                <a class="variable" href="#PageGrid.line_color">line_color</a>
                        </li>
                        <li>
                                <a class="variable" href="#PageGrid.line_width">line_width</a>
                        </li>
                        <li>
                                <a class="variable" href="#PageGrid.line_dash_array">line_dash_array</a>
                        </li>
                        <li>
                                <a class="variable" href="#PageGrid.x_shift">x_shift</a>
                        </li>
                        <li>
                                <a class="variable" href="#PageGrid.y_shift">y_shift</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#Page">Page</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#Page.__init__">Page</a>
                        </li>
                        <li>
                                <a class="variable" href="#Page.size">size</a>
                        </li>
                        <li>
                                <a class="variable" href="#Page.back_color">back_color</a>
                        </li>
                        <li>
                                <a class="variable" href="#Page.mask">mask</a>
                        </li>
                        <li>
                                <a class="variable" href="#Page.margins">margins</a>
                        </li>
                        <li>
                                <a class="variable" href="#Page.recto">recto</a>
                        </li>
                        <li>
                                <a class="variable" href="#Page.grid">grid</a>
                        </li>
                        <li>
                                <a class="variable" href="#Page.kwargs">kwargs</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="function" href="#hello">hello</a>
            </li>
    </ul>



        <a class="attribution" title="pdoc: Python API documentation generator" href="https://pdoc.dev" target="_blank">
            built with <span class="visually-hidden">pdoc</span><img
                alt="pdoc logo"
                src="data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20role%3D%22img%22%20aria-label%3D%22pdoc%20logo%22%20width%3D%22300%22%20height%3D%22150%22%20viewBox%3D%22-1%200%2060%2030%22%3E%3Ctitle%3Epdoc%3C/title%3E%3Cpath%20d%3D%22M29.621%2021.293c-.011-.273-.214-.475-.511-.481a.5.5%200%200%200-.489.503l-.044%201.393c-.097.551-.695%201.215-1.566%201.704-.577.428-1.306.486-2.193.182-1.426-.617-2.467-1.654-3.304-2.487l-.173-.172a3.43%203.43%200%200%200-.365-.306.49.49%200%200%200-.286-.196c-1.718-1.06-4.931-1.47-7.353.191l-.219.15c-1.707%201.187-3.413%202.131-4.328%201.03-.02-.027-.49-.685-.141-1.763.233-.721.546-2.408.772-4.076.042-.09.067-.187.046-.288.166-1.347.277-2.625.241-3.351%201.378-1.008%202.271-2.586%202.271-4.362%200-.976-.272-1.935-.788-2.774-.057-.094-.122-.18-.184-.268.033-.167.052-.339.052-.516%200-1.477-1.202-2.679-2.679-2.679-.791%200-1.496.352-1.987.9a6.3%206.3%200%200%200-1.001.029c-.492-.564-1.207-.929-2.012-.929-1.477%200-2.679%201.202-2.679%202.679A2.65%202.65%200%200%200%20.97%206.554c-.383.747-.595%201.572-.595%202.41%200%202.311%201.507%204.29%203.635%205.107-.037.699-.147%202.27-.423%203.294l-.137.461c-.622%202.042-2.515%208.257%201.727%2010.643%201.614.908%203.06%201.248%204.317%201.248%202.665%200%204.492-1.524%205.322-2.401%201.476-1.559%202.886-1.854%206.491.82%201.877%201.393%203.514%201.753%204.861%201.068%202.223-1.713%202.811-3.867%203.399-6.374.077-.846.056-1.469.054-1.537zm-4.835%204.313c-.054.305-.156.586-.242.629-.034-.007-.131-.022-.307-.157-.145-.111-.314-.478-.456-.908.221.121.432.25.675.355.115.039.219.051.33.081zm-2.251-1.238c-.05.33-.158.648-.252.694-.022.001-.125-.018-.307-.157-.217-.166-.488-.906-.639-1.573.358.344.754.693%201.198%201.036zm-3.887-2.337c-.006-.116-.018-.231-.041-.342.635.145%201.189.368%201.599.625.097.231.166.481.174.642-.03.049-.055.101-.067.158-.046.013-.128.026-.298.004-.278-.037-.901-.57-1.367-1.087zm-1.127-.497c.116.306.176.625.12.71-.019.014-.117.045-.345.016-.206-.027-.604-.332-.986-.695.41-.051.816-.056%201.211-.031zm-4.535%201.535c.209.22.379.47.358.598-.006.041-.088.138-.351.234-.144.055-.539-.063-.979-.259a11.66%2011.66%200%200%200%20.972-.573zm.983-.664c.359-.237.738-.418%201.126-.554.25.237.479.548.457.694-.006.042-.087.138-.351.235-.174.064-.694-.105-1.232-.375zm-3.381%201.794c-.022.145-.061.29-.149.401-.133.166-.358.248-.69.251h-.002c-.133%200-.306-.26-.45-.621.417.091.854.07%201.291-.031zm-2.066-8.077a4.78%204.78%200%200%201-.775-.584c.172-.115.505-.254.88-.378l-.105.962zm-.331%202.302a10.32%2010.32%200%200%201-.828-.502c.202-.143.576-.328.984-.49l-.156.992zm-.45%202.157l-.701-.403c.214-.115.536-.249.891-.376a11.57%2011.57%200%200%201-.19.779zm-.181%201.716c.064.398.194.702.298.893-.194-.051-.435-.162-.736-.398.061-.119.224-.3.438-.495zM8.87%204.141c0%20.152-.123.276-.276.276s-.275-.124-.275-.276.123-.276.276-.276.275.124.275.276zm-.735-.389a1.15%201.15%200%200%200-.314.783%201.16%201.16%200%200%200%201.162%201.162c.457%200%20.842-.27%201.032-.653.026.117.042.238.042.362a1.68%201.68%200%200%201-1.679%201.679%201.68%201.68%200%200%201-1.679-1.679c0-.843.626-1.535%201.436-1.654zM5.059%205.406A1.68%201.68%200%200%201%203.38%207.085a1.68%201.68%200%200%201-1.679-1.679c0-.037.009-.072.011-.109.21.3.541.508.935.508a1.16%201.16%200%200%200%201.162-1.162%201.14%201.14%200%200%200-.474-.912c.015%200%20.03-.005.045-.005.926.001%201.679.754%201.679%201.68zM3.198%204.141c0%20.152-.123.276-.276.276s-.275-.124-.275-.276.123-.276.276-.276.275.124.275.276zM1.375%208.964c0-.52.103-1.035.288-1.52.466.394%201.06.64%201.717.64%201.144%200%202.116-.725%202.499-1.738.383%201.012%201.355%201.738%202.499%201.738.867%200%201.631-.421%202.121-1.062.307.605.478%201.267.478%201.942%200%202.486-2.153%204.51-4.801%204.51s-4.801-2.023-4.801-4.51zm24.342%2019.349c-.985.498-2.267.168-3.813-.979-3.073-2.281-5.453-3.199-7.813-.705-1.315%201.391-4.163%203.365-8.423.97-3.174-1.786-2.239-6.266-1.261-9.479l.146-.492c.276-1.02.395-2.457.444-3.268a6.11%206.11%200%200%200%201.18.115%206.01%206.01%200%200%200%202.536-.562l-.006.175c-.802.215-1.848.612-2.021%201.25-.079.295.021.601.274.837.219.203.415.364.598.501-.667.304-1.243.698-1.311%201.179-.02.144-.022.507.393.787.213.144.395.26.564.365-1.285.521-1.361.96-1.381%201.126-.018.142-.011.496.427.746l.854.489c-.473.389-.971.914-.999%201.429-.018.278.095.532.316.713.675.556%201.231.721%201.653.721.059%200%20.104-.014.158-.02.207.707.641%201.64%201.513%201.64h.013c.8-.008%201.236-.345%201.462-.626.173-.216.268-.457.325-.692.424.195.93.374%201.372.374.151%200%20.294-.021.423-.068.732-.27.944-.704.993-1.021.009-.061.003-.119.002-.179.266.086.538.147.789.147.15%200%20.294-.021.423-.069.542-.2.797-.489.914-.754.237.147.478.258.704.288.106.014.205.021.296.021.356%200%20.595-.101.767-.229.438.435%201.094.992%201.656%201.067.106.014.205.021.296.021a1.56%201.56%200%200%200%20.323-.035c.17.575.453%201.289.866%201.605.358.273.665.362.914.362a.99.99%200%200%200%20.421-.093%201.03%201.03%200%200%200%20.245-.164c.168.428.39.846.68%201.068.358.273.665.362.913.362a.99.99%200%200%200%20.421-.093c.317-.148.512-.448.639-.762.251.157.495.257.726.257.127%200%20.25-.024.37-.071.427-.17.706-.617.841-1.314.022-.015.047-.022.068-.038.067-.051.133-.104.196-.159-.443%201.486-1.107%202.761-2.086%203.257zM8.66%209.925a.5.5%200%201%200-1%200c0%20.653-.818%201.205-1.787%201.205s-1.787-.552-1.787-1.205a.5.5%200%201%200-1%200c0%201.216%201.25%202.205%202.787%202.205s2.787-.989%202.787-2.205zm4.4%2015.965l-.208.097c-2.661%201.258-4.708%201.436-6.086.527-1.542-1.017-1.88-3.19-1.844-4.198a.4.4%200%200%200-.385-.414c-.242-.029-.406.164-.414.385-.046%201.249.367%203.686%202.202%204.896.708.467%201.547.7%202.51.7%201.248%200%202.706-.392%204.362-1.174l.185-.086a.4.4%200%200%200%20.205-.527c-.089-.204-.326-.291-.527-.206zM9.547%202.292c.093.077.205.114.317.114a.5.5%200%200%200%20.318-.886L8.817.397a.5.5%200%200%200-.703.068.5.5%200%200%200%20.069.703l1.364%201.124zm-7.661-.065c.086%200%20.173-.022.253-.068l1.523-.893a.5.5%200%200%200-.506-.863l-1.523.892a.5.5%200%200%200-.179.685c.094.158.261.247.432.247z%22%20transform%3D%22matrix%28-1%200%200%201%2058%200%29%22%20fill%3D%22%233bb300%22/%3E%3Cpath%20d%3D%22M.3%2021.86V10.18q0-.46.02-.68.04-.22.18-.5.28-.54%201.34-.54%201.06%200%201.42.28.38.26.44.78.76-1.04%202.38-1.04%201.64%200%203.1%201.54%201.46%201.54%201.46%203.58%200%202.04-1.46%203.58-1.44%201.54-3.08%201.54-1.64%200-2.38-.92v4.04q0%20.46-.04.68-.02.22-.18.5-.14.3-.5.42-.36.12-.98.12-.62%200-1-.12-.36-.12-.52-.4-.14-.28-.18-.5-.02-.22-.02-.68zm3.96-9.42q-.46.54-.46%201.18%200%20.64.46%201.18.48.52%201.2.52.74%200%201.24-.52.52-.52.52-1.18%200-.66-.48-1.18-.48-.54-1.26-.54-.76%200-1.22.54zm14.741-8.36q.16-.3.54-.42.38-.12%201-.12.64%200%201.02.12.38.12.52.42.16.3.18.54.04.22.04.68v11.94q0%20.46-.04.7-.02.22-.18.5-.3.54-1.7.54-1.38%200-1.54-.98-.84.96-2.34.96-1.8%200-3.28-1.56-1.48-1.58-1.48-3.66%200-2.1%201.48-3.68%201.5-1.58%203.28-1.58%201.48%200%202.3%201v-4.2q0-.46.02-.68.04-.24.18-.52zm-3.24%2010.86q.52.54%201.26.54.74%200%201.22-.54.5-.54.5-1.18%200-.66-.48-1.22-.46-.56-1.26-.56-.8%200-1.28.56-.48.54-.48%201.2%200%20.66.52%201.2zm7.833-1.2q0-2.4%201.68-3.96%201.68-1.56%203.84-1.56%202.16%200%203.82%201.56%201.66%201.54%201.66%203.94%200%201.66-.86%202.96-.86%201.28-2.1%201.9-1.22.6-2.54.6-1.32%200-2.56-.64-1.24-.66-2.1-1.92-.84-1.28-.84-2.88zm4.18%201.44q.64.48%201.3.48.66%200%201.32-.5.66-.5.66-1.48%200-.98-.62-1.46-.62-.48-1.34-.48-.72%200-1.34.5-.62.5-.62%201.48%200%20.96.64%201.46zm11.412-1.44q0%20.84.56%201.32.56.46%201.18.46.64%200%201.18-.36.56-.38.9-.38.6%200%201.46%201.06.46.58.46%201.04%200%20.76-1.1%201.42-1.14.8-2.8.8-1.86%200-3.58-1.34-.82-.64-1.34-1.7-.52-1.08-.52-2.36%200-1.3.52-2.34.52-1.06%201.34-1.7%201.66-1.32%203.54-1.32.76%200%201.48.22.72.2%201.06.4l.32.2q.36.24.56.38.52.4.52.92%200%20.5-.42%201.14-.72%201.1-1.38%201.1-.38%200-1.08-.44-.36-.34-1.04-.34-.66%200-1.24.48-.58.48-.58%201.34z%22%20fill%3D%22green%22/%3E%3C/svg%3E"/>
        </a>
</div>
    </nav>
    <main class="pdoc">
            <section class="module-info">
                    <h1 class="modulename">
<a href="./../../simetri.html">simetri</a><wbr>.<a href="./../canvas.html">canvas</a><wbr>.canvas    </h1>

                        <div class="docstring"><p>Canvas class for drawing shapes and text on a page. All drawing
operations are handled by the Canvas class. Canvas class can draw all
graphics objects and text objects. It also provides methods for
drawing basic shapes like lines, circles, and polygons.</p>
</div>

                        <input id="mod-canvas-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">

                        <label class="view-source-button" for="mod-canvas-view-source"><span>View Source</span></label>

                        <div class="pdoc-code codehilite"><pre><span></span><span id="L-1"><a href="#L-1"><span class="linenos">   1</span></a><span class="sd">&quot;&quot;&quot;Canvas class for drawing shapes and text on a page. All drawing</span>
</span><span id="L-2"><a href="#L-2"><span class="linenos">   2</span></a><span class="sd">operations are handled by the Canvas class. Canvas class can draw all</span>
</span><span id="L-3"><a href="#L-3"><span class="linenos">   3</span></a><span class="sd">graphics objects and text objects. It also provides methods for</span>
</span><span id="L-4"><a href="#L-4"><span class="linenos">   4</span></a><span class="sd">drawing basic shapes like lines, circles, and polygons.</span>
</span><span id="L-5"><a href="#L-5"><span class="linenos">   5</span></a><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-6"><a href="#L-6"><span class="linenos">   6</span></a>
</span><span id="L-7"><a href="#L-7"><span class="linenos">   7</span></a><span class="kn">import</span> <span class="nn">os</span>
</span><span id="L-8"><a href="#L-8"><span class="linenos">   8</span></a><span class="kn">import</span> <span class="nn">time</span>
</span><span id="L-9"><a href="#L-9"><span class="linenos">   9</span></a><span class="kn">import</span> <span class="nn">tempfile</span>
</span><span id="L-10"><a href="#L-10"><span class="linenos">  10</span></a><span class="kn">import</span> <span class="nn">shutil</span>
</span><span id="L-11"><a href="#L-11"><span class="linenos">  11</span></a><span class="kn">import</span> <span class="nn">webbrowser</span>
</span><span id="L-12"><a href="#L-12"><span class="linenos">  12</span></a><span class="kn">import</span> <span class="nn">subprocess</span>
</span><span id="L-13"><a href="#L-13"><span class="linenos">  13</span></a><span class="kn">import</span> <span class="nn">warnings</span>
</span><span id="L-14"><a href="#L-14"><span class="linenos">  14</span></a><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Optional</span><span class="p">,</span> <span class="n">Any</span><span class="p">,</span> <span class="n">Tuple</span><span class="p">,</span> <span class="n">Sequence</span>
</span><span id="L-15"><a href="#L-15"><span class="linenos">  15</span></a><span class="kn">from</span> <span class="nn">pathlib</span> <span class="kn">import</span> <span class="n">Path</span>
</span><span id="L-16"><a href="#L-16"><span class="linenos">  16</span></a><span class="kn">from</span> <span class="nn">dataclasses</span> <span class="kn">import</span> <span class="n">dataclass</span>
</span><span id="L-17"><a href="#L-17"><span class="linenos">  17</span></a><span class="kn">from</span> <span class="nn">math</span> <span class="kn">import</span> <span class="n">pi</span>
</span><span id="L-18"><a href="#L-18"><span class="linenos">  18</span></a>
</span><span id="L-19"><a href="#L-19"><span class="linenos">  19</span></a><span class="kn">from</span> <span class="nn">typing_extensions</span> <span class="kn">import</span> <span class="n">Self</span><span class="p">,</span> <span class="n">Union</span>
</span><span id="L-20"><a href="#L-20"><span class="linenos">  20</span></a><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
</span><span id="L-21"><a href="#L-21"><span class="linenos">  21</span></a><span class="kn">import</span> <span class="nn">networkx</span> <span class="k">as</span> <span class="nn">nx</span>
</span><span id="L-22"><a href="#L-22"><span class="linenos">  22</span></a><span class="kn">import</span> <span class="nn">fitz</span>
</span><span id="L-23"><a href="#L-23"><span class="linenos">  23</span></a>
</span><span id="L-24"><a href="#L-24"><span class="linenos">  24</span></a><span class="kn">from</span> <span class="nn">simetri.graphics.affine</span> <span class="kn">import</span> <span class="p">(</span>
</span><span id="L-25"><a href="#L-25"><span class="linenos">  25</span></a>    <span class="n">rotation_matrix</span><span class="p">,</span>
</span><span id="L-26"><a href="#L-26"><span class="linenos">  26</span></a>    <span class="n">translation_matrix</span><span class="p">,</span>
</span><span id="L-27"><a href="#L-27"><span class="linenos">  27</span></a>    <span class="n">scale_matrix</span><span class="p">,</span>
</span><span id="L-28"><a href="#L-28"><span class="linenos">  28</span></a>    <span class="n">scale_in_place_matrix</span><span class="p">,</span>
</span><span id="L-29"><a href="#L-29"><span class="linenos">  29</span></a>    <span class="n">identity_matrix</span><span class="p">,</span>
</span><span id="L-30"><a href="#L-30"><span class="linenos">  30</span></a><span class="p">)</span>
</span><span id="L-31"><a href="#L-31"><span class="linenos">  31</span></a><span class="kn">from</span> <span class="nn">simetri.graphics.common</span> <span class="kn">import</span> <span class="n">common_properties</span><span class="p">,</span> <span class="n">_set_Nones</span><span class="p">,</span> <span class="n">VOID</span><span class="p">,</span> <span class="n">Point</span><span class="p">,</span> <span class="n">Vec2</span>
</span><span id="L-32"><a href="#L-32"><span class="linenos">  32</span></a><span class="kn">from</span> <span class="nn">simetri.graphics.all_enums</span> <span class="kn">import</span> <span class="p">(</span>
</span><span id="L-33"><a href="#L-33"><span class="linenos">  33</span></a>    <span class="n">Types</span><span class="p">,</span>
</span><span id="L-34"><a href="#L-34"><span class="linenos">  34</span></a>    <span class="n">Drawable</span><span class="p">,</span>
</span><span id="L-35"><a href="#L-35"><span class="linenos">  35</span></a>    <span class="n">Result</span><span class="p">,</span>
</span><span id="L-36"><a href="#L-36"><span class="linenos">  36</span></a>    <span class="n">Anchor</span><span class="p">,</span>
</span><span id="L-37"><a href="#L-37"><span class="linenos">  37</span></a>    <span class="n">TexLoc</span><span class="p">,</span>
</span><span id="L-38"><a href="#L-38"><span class="linenos">  38</span></a>    <span class="n">Align</span><span class="p">,</span>
</span><span id="L-39"><a href="#L-39"><span class="linenos">  39</span></a>    <span class="n">Axis</span><span class="p">,</span>
</span><span id="L-40"><a href="#L-40"><span class="linenos">  40</span></a><span class="p">)</span>
</span><span id="L-41"><a href="#L-41"><span class="linenos">  41</span></a><span class="kn">from</span> <span class="nn">simetri.settings.settings</span> <span class="kn">import</span> <span class="n">defaults</span>
</span><span id="L-42"><a href="#L-42"><span class="linenos">  42</span></a><span class="kn">from</span> <span class="nn">simetri.graphics.bbox</span> <span class="kn">import</span> <span class="n">bounding_box</span>
</span><span id="L-43"><a href="#L-43"><span class="linenos">  43</span></a><span class="kn">from</span> <span class="nn">simetri.graphics.batch</span> <span class="kn">import</span> <span class="n">Batch</span>
</span><span id="L-44"><a href="#L-44"><span class="linenos">  44</span></a><span class="kn">from</span> <span class="nn">simetri.graphics.shape</span> <span class="kn">import</span> <span class="n">Shape</span>
</span><span id="L-45"><a href="#L-45"><span class="linenos">  45</span></a><span class="kn">from</span> <span class="nn">simetri.colors.colors</span> <span class="kn">import</span> <span class="n">Color</span><span class="p">,</span> <span class="n">light_gray</span>
</span><span id="L-46"><a href="#L-46"><span class="linenos">  46</span></a><span class="kn">from</span> <span class="nn">simetri.canvas</span> <span class="kn">import</span> <span class="n">draw</span>
</span><span id="L-47"><a href="#L-47"><span class="linenos">  47</span></a><span class="kn">from</span> <span class="nn">simetri.helpers.utilities</span> <span class="kn">import</span> <span class="n">wait_for_file_availability</span>
</span><span id="L-48"><a href="#L-48"><span class="linenos">  48</span></a><span class="kn">from</span> <span class="nn">simetri.helpers.illustration</span> <span class="kn">import</span> <span class="n">logo</span>
</span><span id="L-49"><a href="#L-49"><span class="linenos">  49</span></a><span class="kn">from</span> <span class="nn">simetri.tikz.tikz</span> <span class="kn">import</span> <span class="n">Tex</span><span class="p">,</span> <span class="n">get_tex_code</span>
</span><span id="L-50"><a href="#L-50"><span class="linenos">  50</span></a><span class="kn">from</span> <span class="nn">simetri.helpers.validation</span> <span class="kn">import</span> <span class="n">validate_args</span>
</span><span id="L-51"><a href="#L-51"><span class="linenos">  51</span></a><span class="kn">from</span> <span class="nn">simetri.canvas.style_map</span> <span class="kn">import</span> <span class="n">canvas_args</span>
</span><span id="L-52"><a href="#L-52"><span class="linenos">  52</span></a><span class="kn">from</span> <span class="nn">simetri.notebook</span> <span class="kn">import</span> <span class="n">display</span>
</span><span id="L-53"><a href="#L-53"><span class="linenos">  53</span></a><span class="kn">from</span> <span class="nn">simetri.image.image</span> <span class="kn">import</span> <span class="n">Image</span><span class="p">,</span> <span class="n">create_image_from_data</span>
</span><span id="L-54"><a href="#L-54"><span class="linenos">  54</span></a>
</span><span id="L-55"><a href="#L-55"><span class="linenos">  55</span></a>
</span><span id="L-56"><a href="#L-56"><span class="linenos">  56</span></a>
</span><span id="L-57"><a href="#L-57"><span class="linenos">  57</span></a><span class="k">class</span> <span class="nc">Canvas</span><span class="p">:</span>
</span><span id="L-58"><a href="#L-58"><span class="linenos">  58</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Canvas class for drawing shapes and text on a page. All drawing</span>
</span><span id="L-59"><a href="#L-59"><span class="linenos">  59</span></a><span class="sd">    operations are handled by the Canvas class. Canvas class can draw all</span>
</span><span id="L-60"><a href="#L-60"><span class="linenos">  60</span></a><span class="sd">    graphics objects and text objects. It also provides methods for</span>
</span><span id="L-61"><a href="#L-61"><span class="linenos">  61</span></a><span class="sd">    drawing basic shapes like lines, circles, and polygons.</span>
</span><span id="L-62"><a href="#L-62"><span class="linenos">  62</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-63"><a href="#L-63"><span class="linenos">  63</span></a>
</span><span id="L-64"><a href="#L-64"><span class="linenos">  64</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
</span><span id="L-65"><a href="#L-65"><span class="linenos">  65</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="L-66"><a href="#L-66"><span class="linenos">  66</span></a>        <span class="n">back_color</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="s1">&#39;Color&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="L-67"><a href="#L-67"><span class="linenos">  67</span></a>        <span class="n">border</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="L-68"><a href="#L-68"><span class="linenos">  68</span></a>        <span class="n">size</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Vec2</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="L-69"><a href="#L-69"><span class="linenos">  69</span></a>        <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
</span><span id="L-70"><a href="#L-70"><span class="linenos">  70</span></a>    <span class="p">):</span>
</span><span id="L-71"><a href="#L-71"><span class="linenos">  71</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-72"><a href="#L-72"><span class="linenos">  72</span></a><span class="sd">        Initialize the Canvas.</span>
</span><span id="L-73"><a href="#L-73"><span class="linenos">  73</span></a>
</span><span id="L-74"><a href="#L-74"><span class="linenos">  74</span></a><span class="sd">        Args:</span>
</span><span id="L-75"><a href="#L-75"><span class="linenos">  75</span></a><span class="sd">            back_color (Optional[Color]): The background color of the canvas.</span>
</span><span id="L-76"><a href="#L-76"><span class="linenos">  76</span></a><span class="sd">            border (Optional[float]): The border width of the canvas.</span>
</span><span id="L-77"><a href="#L-77"><span class="linenos">  77</span></a><span class="sd">            size (Vec2, optional): The size of the canvas with canvas.origin at (0, 0).</span>
</span><span id="L-78"><a href="#L-78"><span class="linenos">  78</span></a><span class="sd">            kwargs (dict): Additional keyword arguments. Rarely used.</span>
</span><span id="L-79"><a href="#L-79"><span class="linenos">  79</span></a>
</span><span id="L-80"><a href="#L-80"><span class="linenos">  80</span></a><span class="sd">            You should not need to specify &quot;size&quot; since it is calculated.</span>
</span><span id="L-81"><a href="#L-81"><span class="linenos">  81</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-82"><a href="#L-82"><span class="linenos">  82</span></a>        <span class="n">validate_args</span><span class="p">(</span><span class="n">kwargs</span><span class="p">,</span> <span class="n">canvas_args</span><span class="p">)</span>
</span><span id="L-83"><a href="#L-83"><span class="linenos">  83</span></a>        <span class="n">_set_Nones</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="p">[</span><span class="s2">&quot;back_color&quot;</span><span class="p">,</span> <span class="s2">&quot;border&quot;</span><span class="p">],</span> <span class="p">[</span><span class="n">back_color</span><span class="p">,</span> <span class="n">border</span><span class="p">])</span>
</span><span id="L-84"><a href="#L-84"><span class="linenos">  84</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_size</span> <span class="o">=</span> <span class="n">size</span>
</span><span id="L-85"><a href="#L-85"><span class="linenos">  85</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">border</span> <span class="o">=</span> <span class="n">border</span>
</span><span id="L-86"><a href="#L-86"><span class="linenos">  86</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;This value is added to the bounding box of the canvas to expand the output size.&quot;&quot;&quot;</span>
</span><span id="L-87"><a href="#L-87"><span class="linenos">  87</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">type</span> <span class="o">=</span> <span class="n">Types</span><span class="o">.</span><span class="n">CANVAS</span>
</span><span id="L-88"><a href="#L-88"><span class="linenos">  88</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Used internally to identify the type of object. Do not change it!.</span>
</span><span id="L-89"><a href="#L-89"><span class="linenos">  89</span></a><span class="sd">        Most objects in simetri has a type and subtype attribute. See ... for</span>
</span><span id="L-90"><a href="#L-90"><span class="linenos">  90</span></a><span class="sd">        using this for user defined objects.</span>
</span><span id="L-91"><a href="#L-91"><span class="linenos">  91</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-92"><a href="#L-92"><span class="linenos">  92</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">subtype</span> <span class="o">=</span> <span class="n">Types</span><span class="o">.</span><span class="n">CANVAS</span>
</span><span id="L-93"><a href="#L-93"><span class="linenos">  93</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Used internally to identify the type of object. Do not change it!.</span>
</span><span id="L-94"><a href="#L-94"><span class="linenos">  94</span></a><span class="sd">        Most objects in simetri has a type and subtype attribute. See ... for</span>
</span><span id="L-95"><a href="#L-95"><span class="linenos">  95</span></a><span class="sd">        using this for user defined objects.</span>
</span><span id="L-96"><a href="#L-96"><span class="linenos">  96</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-97"><a href="#L-97"><span class="linenos">  97</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_code</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="L-98"><a href="#L-98"><span class="linenos">  98</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_font_list</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="L-99"><a href="#L-99"><span class="linenos">  99</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">preamble</span> <span class="o">=</span> <span class="n">defaults</span><span class="p">[</span><span class="s2">&quot;preamble&quot;</span><span class="p">]</span>
</span><span id="L-100"><a href="#L-100"><span class="linenos"> 100</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Used for generating TikZ code.&quot;&quot;&quot;</span>
</span><span id="L-101"><a href="#L-101"><span class="linenos"> 101</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">back_color</span> <span class="o">=</span> <span class="n">back_color</span>
</span><span id="L-102"><a href="#L-102"><span class="linenos"> 102</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Background color of the canvas.&quot;&quot;&quot;</span>
</span><span id="L-103"><a href="#L-103"><span class="linenos"> 103</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">pages</span> <span class="o">=</span> <span class="p">[</span><span class="n">Page</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">size</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">back_color</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">border</span><span class="p">)]</span>
</span><span id="L-104"><a href="#L-104"><span class="linenos"> 104</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Each page of the canvas is a Page object.</span>
</span><span id="L-105"><a href="#L-105"><span class="linenos"> 105</span></a><span class="sd">        The canvas can have multiple pages that result in multi-page PDF output,</span>
</span><span id="L-106"><a href="#L-106"><span class="linenos"> 106</span></a><span class="sd">        or multiple images with image_name_1.svg, image_name_2.svg, etc.&quot;&quot;&quot;</span>
</span><span id="L-107"><a href="#L-107"><span class="linenos"> 107</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">active_page</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pages</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="L-108"><a href="#L-108"><span class="linenos"> 108</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;canvas.draw() draws on the active page. If there are multiple pages,</span>
</span><span id="L-109"><a href="#L-109"><span class="linenos"> 109</span></a><span class="sd">        the active page is the last page created.&quot;&quot;&quot;</span>
</span><span id="L-110"><a href="#L-110"><span class="linenos"> 110</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_all_vertices</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="L-111"><a href="#L-111"><span class="linenos"> 111</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">blend_mode</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="L-112"><a href="#L-112"><span class="linenos"> 112</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">blend_group</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="L-113"><a href="#L-113"><span class="linenos"> 113</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">transparency_group</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="L-114"><a href="#L-114"><span class="linenos"> 114</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">alpha</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="L-115"><a href="#L-115"><span class="linenos"> 115</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">line_alpha</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="L-116"><a href="#L-116"><span class="linenos"> 116</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">fill_alpha</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="L-117"><a href="#L-117"><span class="linenos"> 117</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">text_alpha</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="L-118"><a href="#L-118"><span class="linenos"> 118</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">clip</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># if True then clip the canvas to the mask</span>
</span><span id="L-119"><a href="#L-119"><span class="linenos"> 119</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">mask</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># Mask object</span>
</span><span id="L-120"><a href="#L-120"><span class="linenos"> 120</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">even_odd_rule</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># True or False</span>
</span><span id="L-121"><a href="#L-121"><span class="linenos"> 121</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">draw_grid</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="L-122"><a href="#L-122"><span class="linenos"> 122</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_origin</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span>
</span><span id="L-123"><a href="#L-123"><span class="linenos"> 123</span></a>        <span class="n">common_properties</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</span><span id="L-124"><a href="#L-124"><span class="linenos"> 124</span></a>
</span><span id="L-125"><a href="#L-125"><span class="linenos"> 125</span></a>        <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
</span><span id="L-126"><a href="#L-126"><span class="linenos"> 126</span></a>            <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span><span class="p">)</span>
</span><span id="L-127"><a href="#L-127"><span class="linenos"> 127</span></a>
</span><span id="L-128"><a href="#L-128"><span class="linenos"> 128</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_xform_matrix</span> <span class="o">=</span> <span class="n">identity_matrix</span><span class="p">()</span>
</span><span id="L-129"><a href="#L-129"><span class="linenos"> 129</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_sketch_xform_matrix</span> <span class="o">=</span> <span class="n">identity_matrix</span><span class="p">()</span>
</span><span id="L-130"><a href="#L-130"><span class="linenos"> 130</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">tex</span><span class="p">:</span> <span class="n">Tex</span> <span class="o">=</span> <span class="n">Tex</span><span class="p">()</span>
</span><span id="L-131"><a href="#L-131"><span class="linenos"> 131</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">render</span> <span class="o">=</span> <span class="n">defaults</span><span class="p">[</span><span class="s2">&quot;render&quot;</span><span class="p">]</span>
</span><span id="L-132"><a href="#L-132"><span class="linenos"> 132</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_size</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-133"><a href="#L-133"><span class="linenos"> 133</span></a>            <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">origin</span><span class="p">[:</span><span class="mi">2</span><span class="p">]</span>
</span><span id="L-134"><a href="#L-134"><span class="linenos"> 134</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_limits</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">x</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">size</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">y</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">size</span><span class="p">[</span><span class="mi">1</span><span class="p">]]</span>
</span><span id="L-135"><a href="#L-135"><span class="linenos"> 135</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="L-136"><a href="#L-136"><span class="linenos"> 136</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_limits</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="L-137"><a href="#L-137"><span class="linenos"> 137</span></a>
</span><span id="L-138"><a href="#L-138"><span class="linenos"> 138</span></a>    <span class="k">def</span> <span class="fm">__setattr__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
</span><span id="L-139"><a href="#L-139"><span class="linenos"> 139</span></a>        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;active_page&quot;</span><span class="p">)</span> <span class="ow">and</span> <span class="n">name</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;back_color&quot;</span><span class="p">,</span> <span class="s2">&quot;border&quot;</span><span class="p">]:</span>
</span><span id="L-140"><a href="#L-140"><span class="linenos"> 140</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">active_page</span><span class="o">.</span><span class="fm">__setattr__</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
</span><span id="L-141"><a href="#L-141"><span class="linenos"> 141</span></a>            <span class="bp">self</span><span class="o">.</span><span class="vm">__dict__</span><span class="p">[</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
</span><span id="L-142"><a href="#L-142"><span class="linenos"> 142</span></a>        <span class="k">elif</span> <span class="n">name</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;size&quot;</span><span class="p">,</span> <span class="s2">&quot;origin&quot;</span><span class="p">,</span> <span class="s2">&quot;limits&quot;</span><span class="p">]:</span>
</span><span id="L-143"><a href="#L-143"><span class="linenos"> 143</span></a>            <span class="k">if</span> <span class="n">name</span> <span class="o">==</span> <span class="s2">&quot;size&quot;</span><span class="p">:</span>
</span><span id="L-144"><a href="#L-144"><span class="linenos"> 144</span></a>                <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">size</span><span class="o">.</span><span class="n">fset</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
</span><span id="L-145"><a href="#L-145"><span class="linenos"> 145</span></a>            <span class="k">elif</span> <span class="n">name</span> <span class="o">==</span> <span class="s2">&quot;origin&quot;</span><span class="p">:</span>
</span><span id="L-146"><a href="#L-146"><span class="linenos"> 146</span></a>                <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">origin</span><span class="o">.</span><span class="n">fset</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
</span><span id="L-147"><a href="#L-147"><span class="linenos"> 147</span></a>            <span class="k">elif</span> <span class="n">name</span> <span class="o">==</span> <span class="s2">&quot;limits&quot;</span><span class="p">:</span>
</span><span id="L-148"><a href="#L-148"><span class="linenos"> 148</span></a>                <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">limits</span><span class="o">.</span><span class="n">fset</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
</span><span id="L-149"><a href="#L-149"><span class="linenos"> 149</span></a>        <span class="k">elif</span> <span class="n">name</span> <span class="o">==</span> <span class="s2">&quot;scale&quot;</span><span class="p">:</span>
</span><span id="L-150"><a href="#L-150"><span class="linenos"> 150</span></a>            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="p">(</span><span class="nb">list</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">)):</span>
</span><span id="L-151"><a href="#L-151"><span class="linenos"> 151</span></a>                <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">scale</span><span class="o">.</span><span class="n">fset</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">value</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
</span><span id="L-152"><a href="#L-152"><span class="linenos"> 152</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="L-153"><a href="#L-153"><span class="linenos"> 153</span></a>                <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">scale</span><span class="o">.</span><span class="n">fset</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
</span><span id="L-154"><a href="#L-154"><span class="linenos"> 154</span></a>        <span class="k">elif</span> <span class="n">name</span> <span class="o">==</span> <span class="s2">&quot;pos&quot;</span><span class="p">:</span>
</span><span id="L-155"><a href="#L-155"><span class="linenos"> 155</span></a>            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="p">(</span><span class="nb">list</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)):</span>
</span><span id="L-156"><a href="#L-156"><span class="linenos"> 156</span></a>                <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">pos</span><span class="o">.</span><span class="n">fset</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
</span><span id="L-157"><a href="#L-157"><span class="linenos"> 157</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="L-158"><a href="#L-158"><span class="linenos"> 158</span></a>                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;pos must be a list, tuple or np.ndarray.&quot;</span><span class="p">)</span>
</span><span id="L-159"><a href="#L-159"><span class="linenos"> 159</span></a>        <span class="k">elif</span> <span class="n">name</span> <span class="o">==</span> <span class="s2">&quot;angle&quot;</span><span class="p">:</span>
</span><span id="L-160"><a href="#L-160"><span class="linenos"> 160</span></a>            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">)):</span>
</span><span id="L-161"><a href="#L-161"><span class="linenos"> 161</span></a>                <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">angle</span><span class="o">.</span><span class="n">fset</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
</span><span id="L-162"><a href="#L-162"><span class="linenos"> 162</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="L-163"><a href="#L-163"><span class="linenos"> 163</span></a>                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;angle must be a number.&quot;</span><span class="p">)</span>
</span><span id="L-164"><a href="#L-164"><span class="linenos"> 164</span></a>
</span><span id="L-165"><a href="#L-165"><span class="linenos"> 165</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="L-166"><a href="#L-166"><span class="linenos"> 166</span></a>            <span class="bp">self</span><span class="o">.</span><span class="vm">__dict__</span><span class="p">[</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
</span><span id="L-167"><a href="#L-167"><span class="linenos"> 167</span></a>
</span><span id="L-168"><a href="#L-168"><span class="linenos"> 168</span></a>    <span class="k">def</span> <span class="nf">display</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Self</span><span class="p">:</span>
</span><span id="L-169"><a href="#L-169"><span class="linenos"> 169</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Show the canvas in a notebook cell.&quot;&quot;&quot;</span>
</span><span id="L-170"><a href="#L-170"><span class="linenos"> 170</span></a>        <span class="n">display</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</span><span id="L-171"><a href="#L-171"><span class="linenos"> 171</span></a>
</span><span id="L-172"><a href="#L-172"><span class="linenos"> 172</span></a>    <span class="nd">@property</span>
</span><span id="L-173"><a href="#L-173"><span class="linenos"> 173</span></a>    <span class="k">def</span> <span class="nf">size</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Vec2</span><span class="p">:</span>
</span><span id="L-174"><a href="#L-174"><span class="linenos"> 174</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-175"><a href="#L-175"><span class="linenos"> 175</span></a><span class="sd">        The size of the canvas.</span>
</span><span id="L-176"><a href="#L-176"><span class="linenos"> 176</span></a>
</span><span id="L-177"><a href="#L-177"><span class="linenos"> 177</span></a><span class="sd">        Returns:</span>
</span><span id="L-178"><a href="#L-178"><span class="linenos"> 178</span></a><span class="sd">            Vec2: The size of the canvas.</span>
</span><span id="L-179"><a href="#L-179"><span class="linenos"> 179</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-180"><a href="#L-180"><span class="linenos"> 180</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_size</span>
</span><span id="L-181"><a href="#L-181"><span class="linenos"> 181</span></a>
</span><span id="L-182"><a href="#L-182"><span class="linenos"> 182</span></a>    <span class="nd">@size</span><span class="o">.</span><span class="n">setter</span>
</span><span id="L-183"><a href="#L-183"><span class="linenos"> 183</span></a>    <span class="k">def</span> <span class="nf">size</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="n">Vec2</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-184"><a href="#L-184"><span class="linenos"> 184</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-185"><a href="#L-185"><span class="linenos"> 185</span></a><span class="sd">        Set the size of the canvas.</span>
</span><span id="L-186"><a href="#L-186"><span class="linenos"> 186</span></a>
</span><span id="L-187"><a href="#L-187"><span class="linenos"> 187</span></a><span class="sd">        Args:</span>
</span><span id="L-188"><a href="#L-188"><span class="linenos"> 188</span></a><span class="sd">            value (Vec2): The size of the canvas.</span>
</span><span id="L-189"><a href="#L-189"><span class="linenos"> 189</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-190"><a href="#L-190"><span class="linenos"> 190</span></a>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">value</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
</span><span id="L-191"><a href="#L-191"><span class="linenos"> 191</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_size</span> <span class="o">=</span> <span class="n">value</span>
</span><span id="L-192"><a href="#L-192"><span class="linenos"> 192</span></a>            <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">origin</span><span class="p">[:</span><span class="mi">2</span><span class="p">]</span>
</span><span id="L-193"><a href="#L-193"><span class="linenos"> 193</span></a>            <span class="n">w</span><span class="p">,</span> <span class="n">h</span> <span class="o">=</span> <span class="n">value</span>
</span><span id="L-194"><a href="#L-194"><span class="linenos"> 194</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_limits</span> <span class="o">=</span> <span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">x</span> <span class="o">+</span> <span class="n">w</span><span class="p">,</span> <span class="n">y</span> <span class="o">+</span> <span class="n">h</span><span class="p">)</span>
</span><span id="L-195"><a href="#L-195"><span class="linenos"> 195</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="L-196"><a href="#L-196"><span class="linenos"> 196</span></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Size must be a tuple of 2 values.&quot;</span><span class="p">)</span>
</span><span id="L-197"><a href="#L-197"><span class="linenos"> 197</span></a>
</span><span id="L-198"><a href="#L-198"><span class="linenos"> 198</span></a>    <span class="nd">@property</span>
</span><span id="L-199"><a href="#L-199"><span class="linenos"> 199</span></a>    <span class="k">def</span> <span class="nf">origin</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Vec2</span><span class="p">:</span>
</span><span id="L-200"><a href="#L-200"><span class="linenos"> 200</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-201"><a href="#L-201"><span class="linenos"> 201</span></a><span class="sd">        The origin of the canvas.</span>
</span><span id="L-202"><a href="#L-202"><span class="linenos"> 202</span></a>
</span><span id="L-203"><a href="#L-203"><span class="linenos"> 203</span></a><span class="sd">        Returns:</span>
</span><span id="L-204"><a href="#L-204"><span class="linenos"> 204</span></a><span class="sd">            Vec2: The origin of the canvas.</span>
</span><span id="L-205"><a href="#L-205"><span class="linenos"> 205</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-206"><a href="#L-206"><span class="linenos"> 206</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_origin</span><span class="p">[:</span><span class="mi">2</span><span class="p">]</span>
</span><span id="L-207"><a href="#L-207"><span class="linenos"> 207</span></a>
</span><span id="L-208"><a href="#L-208"><span class="linenos"> 208</span></a>    <span class="nd">@origin</span><span class="o">.</span><span class="n">setter</span>
</span><span id="L-209"><a href="#L-209"><span class="linenos"> 209</span></a>    <span class="k">def</span> <span class="nf">origin</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="n">Vec2</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-210"><a href="#L-210"><span class="linenos"> 210</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-211"><a href="#L-211"><span class="linenos"> 211</span></a><span class="sd">        Set the origin of the canvas.</span>
</span><span id="L-212"><a href="#L-212"><span class="linenos"> 212</span></a>
</span><span id="L-213"><a href="#L-213"><span class="linenos"> 213</span></a><span class="sd">        Args:</span>
</span><span id="L-214"><a href="#L-214"><span class="linenos"> 214</span></a><span class="sd">            value (Vec2): The origin of the canvas.</span>
</span><span id="L-215"><a href="#L-215"><span class="linenos"> 215</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-216"><a href="#L-216"><span class="linenos"> 216</span></a>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">value</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
</span><span id="L-217"><a href="#L-217"><span class="linenos"> 217</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_origin</span> <span class="o">=</span> <span class="n">value</span>
</span><span id="L-218"><a href="#L-218"><span class="linenos"> 218</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="L-219"><a href="#L-219"><span class="linenos"> 219</span></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Origin must be a tuple of 2 values.&quot;</span><span class="p">)</span>
</span><span id="L-220"><a href="#L-220"><span class="linenos"> 220</span></a>
</span><span id="L-221"><a href="#L-221"><span class="linenos"> 221</span></a>    <span class="nd">@property</span>
</span><span id="L-222"><a href="#L-222"><span class="linenos"> 222</span></a>    <span class="k">def</span> <span class="nf">limits</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Vec2</span><span class="p">:</span>
</span><span id="L-223"><a href="#L-223"><span class="linenos"> 223</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-224"><a href="#L-224"><span class="linenos"> 224</span></a><span class="sd">        The limits of the canvas.</span>
</span><span id="L-225"><a href="#L-225"><span class="linenos"> 225</span></a><span class="sd">        [min_x, min_y, max_x, max_y]</span>
</span><span id="L-226"><a href="#L-226"><span class="linenos"> 226</span></a>
</span><span id="L-227"><a href="#L-227"><span class="linenos"> 227</span></a><span class="sd">        Returns:</span>
</span><span id="L-228"><a href="#L-228"><span class="linenos"> 228</span></a><span class="sd">            Vec2: The limits of the canvas.</span>
</span><span id="L-229"><a href="#L-229"><span class="linenos"> 229</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-230"><a href="#L-230"><span class="linenos"> 230</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">size</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-231"><a href="#L-231"><span class="linenos"> 231</span></a>            <span class="n">res</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="L-232"><a href="#L-232"><span class="linenos"> 232</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="L-233"><a href="#L-233"><span class="linenos"> 233</span></a>            <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">origin</span><span class="p">[:</span><span class="mi">2</span><span class="p">]</span>
</span><span id="L-234"><a href="#L-234"><span class="linenos"> 234</span></a>            <span class="n">w</span><span class="p">,</span> <span class="n">h</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">size</span>
</span><span id="L-235"><a href="#L-235"><span class="linenos"> 235</span></a>            <span class="n">res</span> <span class="o">=</span> <span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">x</span> <span class="o">+</span> <span class="n">w</span><span class="p">,</span> <span class="n">y</span> <span class="o">+</span> <span class="n">h</span><span class="p">)</span>
</span><span id="L-236"><a href="#L-236"><span class="linenos"> 236</span></a>
</span><span id="L-237"><a href="#L-237"><span class="linenos"> 237</span></a>        <span class="k">return</span> <span class="n">res</span>
</span><span id="L-238"><a href="#L-238"><span class="linenos"> 238</span></a>
</span><span id="L-239"><a href="#L-239"><span class="linenos"> 239</span></a>    <span class="nd">@limits</span><span class="o">.</span><span class="n">setter</span>
</span><span id="L-240"><a href="#L-240"><span class="linenos"> 240</span></a>    <span class="k">def</span> <span class="nf">limits</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="n">Vec2</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-241"><a href="#L-241"><span class="linenos"> 241</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-242"><a href="#L-242"><span class="linenos"> 242</span></a><span class="sd">        Set the limits of the canvas.</span>
</span><span id="L-243"><a href="#L-243"><span class="linenos"> 243</span></a><span class="sd">        [min_x, min_y, max_x, max_y]</span>
</span><span id="L-244"><a href="#L-244"><span class="linenos"> 244</span></a>
</span><span id="L-245"><a href="#L-245"><span class="linenos"> 245</span></a><span class="sd">        Args:</span>
</span><span id="L-246"><a href="#L-246"><span class="linenos"> 246</span></a><span class="sd">            value (Vec2): The limits of the canvas.</span>
</span><span id="L-247"><a href="#L-247"><span class="linenos"> 247</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-248"><a href="#L-248"><span class="linenos"> 248</span></a>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">value</span><span class="p">)</span> <span class="o">==</span> <span class="mi">4</span><span class="p">:</span>
</span><span id="L-249"><a href="#L-249"><span class="linenos"> 249</span></a>            <span class="n">x1</span><span class="p">,</span> <span class="n">y1</span><span class="p">,</span> <span class="n">x2</span><span class="p">,</span> <span class="n">y2</span> <span class="o">=</span> <span class="n">value</span>
</span><span id="L-250"><a href="#L-250"><span class="linenos"> 250</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_size</span> <span class="o">=</span> <span class="p">(</span><span class="n">x2</span> <span class="o">-</span> <span class="n">x1</span><span class="p">,</span> <span class="n">y2</span> <span class="o">-</span> <span class="n">y1</span><span class="p">)</span>
</span><span id="L-251"><a href="#L-251"><span class="linenos"> 251</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_origin</span> <span class="o">=</span> <span class="p">(</span><span class="n">x1</span><span class="p">,</span> <span class="n">y1</span><span class="p">)</span>
</span><span id="L-252"><a href="#L-252"><span class="linenos"> 252</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="L-253"><a href="#L-253"><span class="linenos"> 253</span></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Limits must be a tuple of 4 values.&quot;</span><span class="p">)</span>
</span><span id="L-254"><a href="#L-254"><span class="linenos"> 254</span></a>
</span><span id="L-255"><a href="#L-255"><span class="linenos"> 255</span></a>    <span class="k">def</span> <span class="nf">image</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Image</span><span class="p">:</span>
</span><span id="L-256"><a href="#L-256"><span class="linenos"> 256</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-257"><a href="#L-257"><span class="linenos"> 257</span></a><span class="sd">        Create an image from the canvas.</span>
</span><span id="L-258"><a href="#L-258"><span class="linenos"> 258</span></a>
</span><span id="L-259"><a href="#L-259"><span class="linenos"> 259</span></a><span class="sd">        Returns:</span>
</span><span id="L-260"><a href="#L-260"><span class="linenos"> 260</span></a><span class="sd">            Image: The Image object.</span>
</span><span id="L-261"><a href="#L-261"><span class="linenos"> 261</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-262"><a href="#L-262"><span class="linenos"> 262</span></a>        <span class="n">tmpdirname</span> <span class="o">=</span> <span class="n">tempfile</span><span class="o">.</span><span class="n">TemporaryDirectory</span><span class="p">()</span><span class="o">.</span><span class="n">name</span>
</span><span id="L-263"><a href="#L-263"><span class="linenos"> 263</span></a>        <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">tmpdirname</span><span class="p">,</span> <span class="n">exist_ok</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="L-264"><a href="#L-264"><span class="linenos"> 264</span></a>        <span class="n">file_name</span> <span class="o">=</span> <span class="nb">next</span><span class="p">(</span><span class="n">tempfile</span><span class="o">.</span><span class="n">_get_candidate_names</span><span class="p">())</span>
</span><span id="L-265"><a href="#L-265"><span class="linenos"> 265</span></a>        <span class="n">file_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">tmpdirname</span><span class="p">,</span> <span class="n">file_name</span> <span class="o">+</span> <span class="s2">&quot;.ps&quot;</span><span class="p">)</span>
</span><span id="L-266"><a href="#L-266"><span class="linenos"> 266</span></a>
</span><span id="L-267"><a href="#L-267"><span class="linenos"> 267</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">file_path</span><span class="p">,</span> <span class="n">show</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">print_output</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">remove_aux</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</span><span id="L-268"><a href="#L-268"><span class="linenos"> 268</span></a>        <span class="n">wait_for_file_availability</span><span class="p">(</span><span class="n">file_path</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
</span><span id="L-269"><a href="#L-269"><span class="linenos"> 269</span></a>        <span class="n">temp_img</span> <span class="o">=</span> <span class="n">create_image_from_data</span><span class="p">(</span><span class="n">file_path</span><span class="p">)</span>
</span><span id="L-270"><a href="#L-270"><span class="linenos"> 270</span></a>
</span><span id="L-271"><a href="#L-271"><span class="linenos"> 271</span></a>        <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
</span><span id="L-272"><a href="#L-272"><span class="linenos"> 272</span></a>        <span class="n">shutil</span><span class="o">.</span><span class="n">rmtree</span><span class="p">(</span><span class="n">tmpdirname</span><span class="p">,</span> <span class="n">ignore_errors</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="L-273"><a href="#L-273"><span class="linenos"> 273</span></a>        <span class="k">return</span> <span class="n">temp_img</span>
</span><span id="L-274"><a href="#L-274"><span class="linenos"> 274</span></a>
</span><span id="L-275"><a href="#L-275"><span class="linenos"> 275</span></a>
</span><span id="L-276"><a href="#L-276"><span class="linenos"> 276</span></a>
</span><span id="L-277"><a href="#L-277"><span class="linenos"> 277</span></a>
</span><span id="L-278"><a href="#L-278"><span class="linenos"> 278</span></a>    <span class="k">def</span> <span class="nf">insert_code</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">code</span><span class="p">,</span> <span class="n">loc</span><span class="p">:</span> <span class="n">TexLoc</span> <span class="o">=</span> <span class="n">TexLoc</span><span class="o">.</span><span class="n">PICTURE</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Self</span><span class="p">:</span>
</span><span id="L-279"><a href="#L-279"><span class="linenos"> 279</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-280"><a href="#L-280"><span class="linenos"> 280</span></a><span class="sd">        Insert code into the canvas.</span>
</span><span id="L-281"><a href="#L-281"><span class="linenos"> 281</span></a>
</span><span id="L-282"><a href="#L-282"><span class="linenos"> 282</span></a><span class="sd">        Args:</span>
</span><span id="L-283"><a href="#L-283"><span class="linenos"> 283</span></a><span class="sd">            code (str): The code to insert.</span>
</span><span id="L-284"><a href="#L-284"><span class="linenos"> 284</span></a><span class="sd">            loc (TexLoc): The location to insert the code.</span>
</span><span id="L-285"><a href="#L-285"><span class="linenos"> 285</span></a>
</span><span id="L-286"><a href="#L-286"><span class="linenos"> 286</span></a><span class="sd">        Returns:</span>
</span><span id="L-287"><a href="#L-287"><span class="linenos"> 287</span></a><span class="sd">            Self: The canvas object.</span>
</span><span id="L-288"><a href="#L-288"><span class="linenos"> 288</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-289"><a href="#L-289"><span class="linenos"> 289</span></a>        <span class="n">draw</span><span class="o">.</span><span class="n">insert_code</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">code</span><span class="p">,</span> <span class="n">loc</span><span class="p">)</span>
</span><span id="L-290"><a href="#L-290"><span class="linenos"> 290</span></a>        <span class="k">return</span> <span class="bp">self</span>
</span><span id="L-291"><a href="#L-291"><span class="linenos"> 291</span></a>
</span><span id="L-292"><a href="#L-292"><span class="linenos"> 292</span></a>    <span class="k">def</span> <span class="nf">arc</span><span class="p">(</span>
</span><span id="L-293"><a href="#L-293"><span class="linenos"> 293</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="L-294"><a href="#L-294"><span class="linenos"> 294</span></a>        <span class="n">center</span><span class="p">:</span> <span class="n">Point</span><span class="p">,</span>
</span><span id="L-295"><a href="#L-295"><span class="linenos"> 295</span></a>        <span class="n">radius_x</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="L-296"><a href="#L-296"><span class="linenos"> 296</span></a>        <span class="n">radius_y</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="L-297"><a href="#L-297"><span class="linenos"> 297</span></a>        <span class="n">start_angle</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
</span><span id="L-298"><a href="#L-298"><span class="linenos"> 298</span></a>        <span class="n">span_angle</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">pi</span> <span class="o">/</span> <span class="mi">2</span><span class="p">,</span>
</span><span id="L-299"><a href="#L-299"><span class="linenos"> 299</span></a>        <span class="n">rot_angle</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
</span><span id="L-300"><a href="#L-300"><span class="linenos"> 300</span></a>        <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
</span><span id="L-301"><a href="#L-301"><span class="linenos"> 301</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Self</span><span class="p">:</span>
</span><span id="L-302"><a href="#L-302"><span class="linenos"> 302</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-303"><a href="#L-303"><span class="linenos"> 303</span></a><span class="sd">        Draw an arc with the given center, radius, start angle and end angle.</span>
</span><span id="L-304"><a href="#L-304"><span class="linenos"> 304</span></a>
</span><span id="L-305"><a href="#L-305"><span class="linenos"> 305</span></a><span class="sd">        Args:</span>
</span><span id="L-306"><a href="#L-306"><span class="linenos"> 306</span></a><span class="sd">            center (Point): The center of the arc.</span>
</span><span id="L-307"><a href="#L-307"><span class="linenos"> 307</span></a><span class="sd">            radius_x (float): The radius of the arc.</span>
</span><span id="L-308"><a href="#L-308"><span class="linenos"> 308</span></a><span class="sd">            radius_y (float, optional): The second radius of the arc, defaults to None.</span>
</span><span id="L-309"><a href="#L-309"><span class="linenos"> 309</span></a><span class="sd">            start_angle (float): The start angle of the arc.</span>
</span><span id="L-310"><a href="#L-310"><span class="linenos"> 310</span></a><span class="sd">            end_angle (float): The end angle of the arc.</span>
</span><span id="L-311"><a href="#L-311"><span class="linenos"> 311</span></a><span class="sd">            rot_angle (float, optional): The rotation angle of the arc, defaults to 0.</span>
</span><span id="L-312"><a href="#L-312"><span class="linenos"> 312</span></a><span class="sd">            kwargs (dict): Additional keyword arguments.</span>
</span><span id="L-313"><a href="#L-313"><span class="linenos"> 313</span></a>
</span><span id="L-314"><a href="#L-314"><span class="linenos"> 314</span></a><span class="sd">        Returns:</span>
</span><span id="L-315"><a href="#L-315"><span class="linenos"> 315</span></a><span class="sd">            Self: The canvas object.</span>
</span><span id="L-316"><a href="#L-316"><span class="linenos"> 316</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-317"><a href="#L-317"><span class="linenos"> 317</span></a>        <span class="k">if</span> <span class="n">radius_y</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-318"><a href="#L-318"><span class="linenos"> 318</span></a>            <span class="n">radius_y</span> <span class="o">=</span> <span class="n">radius_x</span>
</span><span id="L-319"><a href="#L-319"><span class="linenos"> 319</span></a>        <span class="n">draw</span><span class="o">.</span><span class="n">arc</span><span class="p">(</span>
</span><span id="L-320"><a href="#L-320"><span class="linenos"> 320</span></a>            <span class="bp">self</span><span class="p">,</span>
</span><span id="L-321"><a href="#L-321"><span class="linenos"> 321</span></a>            <span class="n">center</span><span class="p">,</span>
</span><span id="L-322"><a href="#L-322"><span class="linenos"> 322</span></a>            <span class="n">radius_x</span><span class="p">,</span>
</span><span id="L-323"><a href="#L-323"><span class="linenos"> 323</span></a>            <span class="n">radius_y</span><span class="p">,</span>
</span><span id="L-324"><a href="#L-324"><span class="linenos"> 324</span></a>            <span class="n">start_angle</span><span class="p">,</span>
</span><span id="L-325"><a href="#L-325"><span class="linenos"> 325</span></a>            <span class="n">span_angle</span><span class="p">,</span>
</span><span id="L-326"><a href="#L-326"><span class="linenos"> 326</span></a>            <span class="n">rot_angle</span><span class="p">,</span>
</span><span id="L-327"><a href="#L-327"><span class="linenos"> 327</span></a>            <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
</span><span id="L-328"><a href="#L-328"><span class="linenos"> 328</span></a>        <span class="p">)</span>
</span><span id="L-329"><a href="#L-329"><span class="linenos"> 329</span></a>        <span class="k">return</span> <span class="bp">self</span>
</span><span id="L-330"><a href="#L-330"><span class="linenos"> 330</span></a>
</span><span id="L-331"><a href="#L-331"><span class="linenos"> 331</span></a>    <span class="k">def</span> <span class="nf">bezier</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">control_points</span><span class="p">:</span> <span class="n">Sequence</span><span class="p">[</span><span class="n">Point</span><span class="p">],</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Self</span><span class="p">:</span>
</span><span id="L-332"><a href="#L-332"><span class="linenos"> 332</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-333"><a href="#L-333"><span class="linenos"> 333</span></a><span class="sd">        Draw a bezier curve.</span>
</span><span id="L-334"><a href="#L-334"><span class="linenos"> 334</span></a>
</span><span id="L-335"><a href="#L-335"><span class="linenos"> 335</span></a><span class="sd">        Args:</span>
</span><span id="L-336"><a href="#L-336"><span class="linenos"> 336</span></a><span class="sd">            control_points (Sequence[Point]): The control points of the bezier curve.</span>
</span><span id="L-337"><a href="#L-337"><span class="linenos"> 337</span></a><span class="sd">            kwargs (dict): Additional keyword arguments.</span>
</span><span id="L-338"><a href="#L-338"><span class="linenos"> 338</span></a>
</span><span id="L-339"><a href="#L-339"><span class="linenos"> 339</span></a><span class="sd">        Returns:</span>
</span><span id="L-340"><a href="#L-340"><span class="linenos"> 340</span></a><span class="sd">            Self: The canvas object.</span>
</span><span id="L-341"><a href="#L-341"><span class="linenos"> 341</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-342"><a href="#L-342"><span class="linenos"> 342</span></a>        <span class="n">draw</span><span class="o">.</span><span class="n">bezier</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">control_points</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</span><span id="L-343"><a href="#L-343"><span class="linenos"> 343</span></a>        <span class="k">return</span> <span class="bp">self</span>
</span><span id="L-344"><a href="#L-344"><span class="linenos"> 344</span></a>
</span><span id="L-345"><a href="#L-345"><span class="linenos"> 345</span></a>    <span class="k">def</span> <span class="nf">circle</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">center</span><span class="p">:</span> <span class="n">Point</span><span class="p">,</span> <span class="n">radius</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Self</span><span class="p">:</span>
</span><span id="L-346"><a href="#L-346"><span class="linenos"> 346</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-347"><a href="#L-347"><span class="linenos"> 347</span></a><span class="sd">        Draw a circle with the given center and radius.</span>
</span><span id="L-348"><a href="#L-348"><span class="linenos"> 348</span></a>
</span><span id="L-349"><a href="#L-349"><span class="linenos"> 349</span></a><span class="sd">        Args:</span>
</span><span id="L-350"><a href="#L-350"><span class="linenos"> 350</span></a><span class="sd">            center (Point): The center of the circle.</span>
</span><span id="L-351"><a href="#L-351"><span class="linenos"> 351</span></a><span class="sd">            radius (float): The radius of the circle.</span>
</span><span id="L-352"><a href="#L-352"><span class="linenos"> 352</span></a><span class="sd">            kwargs (dict): Additional keyword arguments.</span>
</span><span id="L-353"><a href="#L-353"><span class="linenos"> 353</span></a>
</span><span id="L-354"><a href="#L-354"><span class="linenos"> 354</span></a><span class="sd">        Returns:</span>
</span><span id="L-355"><a href="#L-355"><span class="linenos"> 355</span></a><span class="sd">            Self: The canvas object.</span>
</span><span id="L-356"><a href="#L-356"><span class="linenos"> 356</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-357"><a href="#L-357"><span class="linenos"> 357</span></a>        <span class="n">draw</span><span class="o">.</span><span class="n">circle</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">center</span><span class="p">,</span> <span class="n">radius</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</span><span id="L-358"><a href="#L-358"><span class="linenos"> 358</span></a>        <span class="k">return</span> <span class="bp">self</span>
</span><span id="L-359"><a href="#L-359"><span class="linenos"> 359</span></a>
</span><span id="L-360"><a href="#L-360"><span class="linenos"> 360</span></a>    <span class="k">def</span> <span class="nf">ellipse</span><span class="p">(</span>
</span><span id="L-361"><a href="#L-361"><span class="linenos"> 361</span></a>        <span class="bp">self</span><span class="p">,</span> <span class="n">center</span><span class="p">:</span> <span class="n">Point</span><span class="p">,</span> <span class="n">width</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">height</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">angle</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span>
</span><span id="L-362"><a href="#L-362"><span class="linenos"> 362</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Self</span><span class="p">:</span>
</span><span id="L-363"><a href="#L-363"><span class="linenos"> 363</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-364"><a href="#L-364"><span class="linenos"> 364</span></a><span class="sd">        Draw an ellipse with the given center and radius.</span>
</span><span id="L-365"><a href="#L-365"><span class="linenos"> 365</span></a>
</span><span id="L-366"><a href="#L-366"><span class="linenos"> 366</span></a><span class="sd">        Args:</span>
</span><span id="L-367"><a href="#L-367"><span class="linenos"> 367</span></a><span class="sd">            center (Point): The center of the ellipse.</span>
</span><span id="L-368"><a href="#L-368"><span class="linenos"> 368</span></a><span class="sd">            width (float): The width of the ellipse.</span>
</span><span id="L-369"><a href="#L-369"><span class="linenos"> 369</span></a><span class="sd">            height (float): The height of the ellipse.</span>
</span><span id="L-370"><a href="#L-370"><span class="linenos"> 370</span></a><span class="sd">            angle (float, optional): The angle of the ellipse, defaults to 0.</span>
</span><span id="L-371"><a href="#L-371"><span class="linenos"> 371</span></a><span class="sd">            kwargs (dict): Additional keyword arguments.</span>
</span><span id="L-372"><a href="#L-372"><span class="linenos"> 372</span></a>
</span><span id="L-373"><a href="#L-373"><span class="linenos"> 373</span></a><span class="sd">        Returns:</span>
</span><span id="L-374"><a href="#L-374"><span class="linenos"> 374</span></a><span class="sd">            Self: The canvas object.</span>
</span><span id="L-375"><a href="#L-375"><span class="linenos"> 375</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-376"><a href="#L-376"><span class="linenos"> 376</span></a>        <span class="n">draw</span><span class="o">.</span><span class="n">ellipse</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">center</span><span class="p">,</span> <span class="n">width</span><span class="p">,</span> <span class="n">height</span><span class="p">,</span> <span class="n">angle</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</span><span id="L-377"><a href="#L-377"><span class="linenos"> 377</span></a>        <span class="k">return</span> <span class="bp">self</span>
</span><span id="L-378"><a href="#L-378"><span class="linenos"> 378</span></a>
</span><span id="L-379"><a href="#L-379"><span class="linenos"> 379</span></a>    <span class="k">def</span> <span class="nf">text</span><span class="p">(</span>
</span><span id="L-380"><a href="#L-380"><span class="linenos"> 380</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="L-381"><a href="#L-381"><span class="linenos"> 381</span></a>        <span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
</span><span id="L-382"><a href="#L-382"><span class="linenos"> 382</span></a>        <span class="n">pos</span><span class="p">:</span> <span class="n">Point</span><span class="p">,</span>
</span><span id="L-383"><a href="#L-383"><span class="linenos"> 383</span></a>        <span class="n">font_family</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="L-384"><a href="#L-384"><span class="linenos"> 384</span></a>        <span class="n">font_size</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="L-385"><a href="#L-385"><span class="linenos"> 385</span></a>        <span class="n">anchor</span><span class="p">:</span> <span class="n">Anchor</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="L-386"><a href="#L-386"><span class="linenos"> 386</span></a>        <span class="n">align</span><span class="p">:</span> <span class="n">Align</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="L-387"><a href="#L-387"><span class="linenos"> 387</span></a>        <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
</span><span id="L-388"><a href="#L-388"><span class="linenos"> 388</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Self</span><span class="p">:</span>
</span><span id="L-389"><a href="#L-389"><span class="linenos"> 389</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-390"><a href="#L-390"><span class="linenos"> 390</span></a><span class="sd">        Draw text at the given point.</span>
</span><span id="L-391"><a href="#L-391"><span class="linenos"> 391</span></a>
</span><span id="L-392"><a href="#L-392"><span class="linenos"> 392</span></a><span class="sd">        Args:</span>
</span><span id="L-393"><a href="#L-393"><span class="linenos"> 393</span></a><span class="sd">            text (str): The text to draw.</span>
</span><span id="L-394"><a href="#L-394"><span class="linenos"> 394</span></a><span class="sd">            pos (Point): The position to draw the text.</span>
</span><span id="L-395"><a href="#L-395"><span class="linenos"> 395</span></a><span class="sd">            font_family (str, optional): The font family of the text, defaults to None.</span>
</span><span id="L-396"><a href="#L-396"><span class="linenos"> 396</span></a><span class="sd">            font_size (int, optional): The font size of the text, defaults to None.</span>
</span><span id="L-397"><a href="#L-397"><span class="linenos"> 397</span></a><span class="sd">            anchor (Anchor, optional): The anchor of the text, defaults to None.</span>
</span><span id="L-398"><a href="#L-398"><span class="linenos"> 398</span></a><span class="sd">            anchor options: BASE, BASE_EAST, BASE_WEST, BOTTOM, CENTER, EAST, NORTH,</span>
</span><span id="L-399"><a href="#L-399"><span class="linenos"> 399</span></a><span class="sd">            NORTHEAST, NORTHWEST, SOUTH, SOUTHEAST, SOUTHWEST, WEST, MIDEAST, MIDWEST, RIGHT,</span>
</span><span id="L-400"><a href="#L-400"><span class="linenos"> 400</span></a><span class="sd">            LEFT, TOP</span>
</span><span id="L-401"><a href="#L-401"><span class="linenos"> 401</span></a><span class="sd">            align (Align, optional): The alignment of the text, defaults to Align.CENTER.</span>
</span><span id="L-402"><a href="#L-402"><span class="linenos"> 402</span></a><span class="sd">            align options: CENTER, FLUSH_CENTER, FLUSH_LEFT, FLUSH_RIGHT, JUSTIFY, LEFT, RIGHT</span>
</span><span id="L-403"><a href="#L-403"><span class="linenos"> 403</span></a><span class="sd">            kwargs (dict): Additional keyword arguments.</span>
</span><span id="L-404"><a href="#L-404"><span class="linenos"> 404</span></a><span class="sd">            common kwargs: fill_color, line_color, line_width, fill, line, alpha, font_color</span>
</span><span id="L-405"><a href="#L-405"><span class="linenos"> 405</span></a>
</span><span id="L-406"><a href="#L-406"><span class="linenos"> 406</span></a><span class="sd">        Returns:</span>
</span><span id="L-407"><a href="#L-407"><span class="linenos"> 407</span></a><span class="sd">            Self: The canvas object.</span>
</span><span id="L-408"><a href="#L-408"><span class="linenos"> 408</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-409"><a href="#L-409"><span class="linenos"> 409</span></a>        <span class="n">pos</span> <span class="o">=</span> <span class="p">[</span><span class="n">pos</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">pos</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="mi">1</span><span class="p">]</span>
</span><span id="L-410"><a href="#L-410"><span class="linenos"> 410</span></a>        <span class="n">pos</span> <span class="o">=</span> <span class="n">pos</span> <span class="o">@</span> <span class="bp">self</span><span class="o">.</span><span class="n">_xform_matrix</span>
</span><span id="L-411"><a href="#L-411"><span class="linenos"> 411</span></a>        <span class="n">draw</span><span class="o">.</span><span class="n">text</span><span class="p">(</span>
</span><span id="L-412"><a href="#L-412"><span class="linenos"> 412</span></a>            <span class="bp">self</span><span class="p">,</span>
</span><span id="L-413"><a href="#L-413"><span class="linenos"> 413</span></a>            <span class="n">txt</span><span class="o">=</span><span class="n">text</span><span class="p">,</span>
</span><span id="L-414"><a href="#L-414"><span class="linenos"> 414</span></a>            <span class="n">pos</span><span class="o">=</span><span class="n">pos</span><span class="p">,</span>
</span><span id="L-415"><a href="#L-415"><span class="linenos"> 415</span></a>            <span class="n">font_family</span><span class="o">=</span><span class="n">font_family</span><span class="p">,</span>
</span><span id="L-416"><a href="#L-416"><span class="linenos"> 416</span></a>            <span class="n">font_size</span><span class="o">=</span><span class="n">font_size</span><span class="p">,</span>
</span><span id="L-417"><a href="#L-417"><span class="linenos"> 417</span></a>            <span class="n">anchor</span><span class="o">=</span><span class="n">anchor</span><span class="p">,</span>
</span><span id="L-418"><a href="#L-418"><span class="linenos"> 418</span></a>            <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
</span><span id="L-419"><a href="#L-419"><span class="linenos"> 419</span></a>        <span class="p">)</span>
</span><span id="L-420"><a href="#L-420"><span class="linenos"> 420</span></a>        <span class="k">return</span> <span class="bp">self</span>
</span><span id="L-421"><a href="#L-421"><span class="linenos"> 421</span></a>
</span><span id="L-422"><a href="#L-422"><span class="linenos"> 422</span></a>    <span class="k">def</span> <span class="nf">help_lines</span><span class="p">(</span>
</span><span id="L-423"><a href="#L-423"><span class="linenos"> 423</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="L-424"><a href="#L-424"><span class="linenos"> 424</span></a>        <span class="n">pos</span><span class="o">=</span><span class="p">(</span><span class="o">-</span><span class="mi">100</span><span class="p">,</span> <span class="o">-</span><span class="mi">100</span><span class="p">),</span>
</span><span id="L-425"><a href="#L-425"><span class="linenos"> 425</span></a>        <span class="n">width</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mi">400</span><span class="p">,</span>
</span><span id="L-426"><a href="#L-426"><span class="linenos"> 426</span></a>        <span class="n">height</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mi">400</span><span class="p">,</span>
</span><span id="L-427"><a href="#L-427"><span class="linenos"> 427</span></a>        <span class="n">spacing</span><span class="o">=</span><span class="mi">25</span><span class="p">,</span>
</span><span id="L-428"><a href="#L-428"><span class="linenos"> 428</span></a>        <span class="n">cs_size</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mi">25</span><span class="p">,</span>
</span><span id="L-429"><a href="#L-429"><span class="linenos"> 429</span></a>        <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
</span><span id="L-430"><a href="#L-430"><span class="linenos"> 430</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Self</span><span class="p">:</span>
</span><span id="L-431"><a href="#L-431"><span class="linenos"> 431</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-432"><a href="#L-432"><span class="linenos"> 432</span></a><span class="sd">        Draw help lines on the canvas.</span>
</span><span id="L-433"><a href="#L-433"><span class="linenos"> 433</span></a>
</span><span id="L-434"><a href="#L-434"><span class="linenos"> 434</span></a><span class="sd">        Args:</span>
</span><span id="L-435"><a href="#L-435"><span class="linenos"> 435</span></a><span class="sd">            pos (tuple): The lower-left corner of the grid.</span>
</span><span id="L-436"><a href="#L-436"><span class="linenos"> 436</span></a><span class="sd">            width (float): The length of the help lines along the x-axis.</span>
</span><span id="L-437"><a href="#L-437"><span class="linenos"> 437</span></a><span class="sd">            height (float): The length of the help lines along the y-axis.</span>
</span><span id="L-438"><a href="#L-438"><span class="linenos"> 438</span></a><span class="sd">            spacing (int): The spacing between the help lines.</span>
</span><span id="L-439"><a href="#L-439"><span class="linenos"> 439</span></a><span class="sd">            cs_size (float): The size of the coordinate system.</span>
</span><span id="L-440"><a href="#L-440"><span class="linenos"> 440</span></a><span class="sd">            kwargs (dict): Additional keyword arguments.</span>
</span><span id="L-441"><a href="#L-441"><span class="linenos"> 441</span></a>
</span><span id="L-442"><a href="#L-442"><span class="linenos"> 442</span></a><span class="sd">        Returns:</span>
</span><span id="L-443"><a href="#L-443"><span class="linenos"> 443</span></a><span class="sd">            Self: The canvas object.</span>
</span><span id="L-444"><a href="#L-444"><span class="linenos"> 444</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-445"><a href="#L-445"><span class="linenos"> 445</span></a>        <span class="n">draw</span><span class="o">.</span><span class="n">help_lines</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pos</span><span class="p">,</span> <span class="n">width</span><span class="p">,</span> <span class="n">height</span><span class="p">,</span> <span class="n">spacing</span><span class="p">,</span> <span class="n">cs_size</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</span><span id="L-446"><a href="#L-446"><span class="linenos"> 446</span></a>        <span class="k">return</span> <span class="bp">self</span>
</span><span id="L-447"><a href="#L-447"><span class="linenos"> 447</span></a>
</span><span id="L-448"><a href="#L-448"><span class="linenos"> 448</span></a>    <span class="k">def</span> <span class="nf">grid</span><span class="p">(</span>
</span><span id="L-449"><a href="#L-449"><span class="linenos"> 449</span></a>        <span class="bp">self</span><span class="p">,</span> <span class="n">pos</span><span class="p">:</span> <span class="n">Point</span><span class="p">,</span> <span class="n">width</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">height</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">spacing</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span>
</span><span id="L-450"><a href="#L-450"><span class="linenos"> 450</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Self</span><span class="p">:</span>
</span><span id="L-451"><a href="#L-451"><span class="linenos"> 451</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-452"><a href="#L-452"><span class="linenos"> 452</span></a><span class="sd">        Draw a grid with the given size and spacing.</span>
</span><span id="L-453"><a href="#L-453"><span class="linenos"> 453</span></a>
</span><span id="L-454"><a href="#L-454"><span class="linenos"> 454</span></a><span class="sd">        Args:</span>
</span><span id="L-455"><a href="#L-455"><span class="linenos"> 455</span></a><span class="sd">            pos (Point): The position to start drawing the grid.</span>
</span><span id="L-456"><a href="#L-456"><span class="linenos"> 456</span></a><span class="sd">            width (float): The length of the grid along the x-axis.</span>
</span><span id="L-457"><a href="#L-457"><span class="linenos"> 457</span></a><span class="sd">            height (float): The length of the grid along the y-axis.</span>
</span><span id="L-458"><a href="#L-458"><span class="linenos"> 458</span></a><span class="sd">            spacing (float): The spacing between the grid lines.</span>
</span><span id="L-459"><a href="#L-459"><span class="linenos"> 459</span></a><span class="sd">            kwargs (dict): Additional keyword arguments.</span>
</span><span id="L-460"><a href="#L-460"><span class="linenos"> 460</span></a>
</span><span id="L-461"><a href="#L-461"><span class="linenos"> 461</span></a><span class="sd">        Returns:</span>
</span><span id="L-462"><a href="#L-462"><span class="linenos"> 462</span></a><span class="sd">            Self: The canvas object.</span>
</span><span id="L-463"><a href="#L-463"><span class="linenos"> 463</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-464"><a href="#L-464"><span class="linenos"> 464</span></a>        <span class="n">draw</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pos</span><span class="p">,</span> <span class="n">width</span><span class="p">,</span> <span class="n">height</span><span class="p">,</span> <span class="n">spacing</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</span><span id="L-465"><a href="#L-465"><span class="linenos"> 465</span></a>        <span class="k">return</span> <span class="bp">self</span>
</span><span id="L-466"><a href="#L-466"><span class="linenos"> 466</span></a>
</span><span id="L-467"><a href="#L-467"><span class="linenos"> 467</span></a>    <span class="k">def</span> <span class="nf">line</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">start</span><span class="p">:</span> <span class="n">Point</span><span class="p">,</span> <span class="n">end</span><span class="p">:</span> <span class="n">Point</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Self</span><span class="p">:</span>
</span><span id="L-468"><a href="#L-468"><span class="linenos"> 468</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-469"><a href="#L-469"><span class="linenos"> 469</span></a><span class="sd">        Draw a line from start to end.</span>
</span><span id="L-470"><a href="#L-470"><span class="linenos"> 470</span></a>
</span><span id="L-471"><a href="#L-471"><span class="linenos"> 471</span></a><span class="sd">        Args:</span>
</span><span id="L-472"><a href="#L-472"><span class="linenos"> 472</span></a><span class="sd">            start (Point): The starting point of the line.</span>
</span><span id="L-473"><a href="#L-473"><span class="linenos"> 473</span></a><span class="sd">            end (Point): The ending point of the line.</span>
</span><span id="L-474"><a href="#L-474"><span class="linenos"> 474</span></a><span class="sd">            kwargs (dict): Additional keyword arguments.</span>
</span><span id="L-475"><a href="#L-475"><span class="linenos"> 475</span></a>
</span><span id="L-476"><a href="#L-476"><span class="linenos"> 476</span></a><span class="sd">        Returns:</span>
</span><span id="L-477"><a href="#L-477"><span class="linenos"> 477</span></a><span class="sd">            Self: The canvas object.</span>
</span><span id="L-478"><a href="#L-478"><span class="linenos"> 478</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-479"><a href="#L-479"><span class="linenos"> 479</span></a>        <span class="n">draw</span><span class="o">.</span><span class="n">line</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">start</span><span class="p">,</span> <span class="n">end</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</span><span id="L-480"><a href="#L-480"><span class="linenos"> 480</span></a>        <span class="k">return</span> <span class="bp">self</span>
</span><span id="L-481"><a href="#L-481"><span class="linenos"> 481</span></a>
</span><span id="L-482"><a href="#L-482"><span class="linenos"> 482</span></a>    <span class="k">def</span> <span class="nf">rectangle</span><span class="p">(</span>
</span><span id="L-483"><a href="#L-483"><span class="linenos"> 483</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="L-484"><a href="#L-484"><span class="linenos"> 484</span></a>        <span class="n">center</span><span class="p">:</span> <span class="n">Point</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
</span><span id="L-485"><a href="#L-485"><span class="linenos"> 485</span></a>        <span class="n">width</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mi">100</span><span class="p">,</span>
</span><span id="L-486"><a href="#L-486"><span class="linenos"> 486</span></a>        <span class="n">height</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mi">100</span><span class="p">,</span>
</span><span id="L-487"><a href="#L-487"><span class="linenos"> 487</span></a>        <span class="n">angle</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
</span><span id="L-488"><a href="#L-488"><span class="linenos"> 488</span></a>        <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
</span><span id="L-489"><a href="#L-489"><span class="linenos"> 489</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Self</span><span class="p">:</span>
</span><span id="L-490"><a href="#L-490"><span class="linenos"> 490</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-491"><a href="#L-491"><span class="linenos"> 491</span></a><span class="sd">        Draw a rectangle.</span>
</span><span id="L-492"><a href="#L-492"><span class="linenos"> 492</span></a>
</span><span id="L-493"><a href="#L-493"><span class="linenos"> 493</span></a><span class="sd">        Args:</span>
</span><span id="L-494"><a href="#L-494"><span class="linenos"> 494</span></a><span class="sd">            center (Point): The center of the rectangle.</span>
</span><span id="L-495"><a href="#L-495"><span class="linenos"> 495</span></a><span class="sd">            width (float): The width of the rectangle.</span>
</span><span id="L-496"><a href="#L-496"><span class="linenos"> 496</span></a><span class="sd">            height (float): The height of the rectangle.</span>
</span><span id="L-497"><a href="#L-497"><span class="linenos"> 497</span></a><span class="sd">            angle (float, optional): The angle of the rectangle, defaults to 0.</span>
</span><span id="L-498"><a href="#L-498"><span class="linenos"> 498</span></a><span class="sd">            kwargs (dict): Additional keyword arguments.</span>
</span><span id="L-499"><a href="#L-499"><span class="linenos"> 499</span></a>
</span><span id="L-500"><a href="#L-500"><span class="linenos"> 500</span></a><span class="sd">        Returns:</span>
</span><span id="L-501"><a href="#L-501"><span class="linenos"> 501</span></a><span class="sd">            Self: The canvas object.</span>
</span><span id="L-502"><a href="#L-502"><span class="linenos"> 502</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-503"><a href="#L-503"><span class="linenos"> 503</span></a>        <span class="n">draw</span><span class="o">.</span><span class="n">rectangle</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">center</span><span class="p">,</span> <span class="n">width</span><span class="p">,</span> <span class="n">height</span><span class="p">,</span> <span class="n">angle</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</span><span id="L-504"><a href="#L-504"><span class="linenos"> 504</span></a>        <span class="k">return</span> <span class="bp">self</span>
</span><span id="L-505"><a href="#L-505"><span class="linenos"> 505</span></a>
</span><span id="L-506"><a href="#L-506"><span class="linenos"> 506</span></a>    <span class="k">def</span> <span class="nf">square</span><span class="p">(</span>
</span><span id="L-507"><a href="#L-507"><span class="linenos"> 507</span></a>        <span class="bp">self</span><span class="p">,</span> <span class="n">center</span><span class="p">:</span> <span class="n">Point</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="n">size</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mi">100</span><span class="p">,</span> <span class="n">angle</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span>
</span><span id="L-508"><a href="#L-508"><span class="linenos"> 508</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Self</span><span class="p">:</span>
</span><span id="L-509"><a href="#L-509"><span class="linenos"> 509</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-510"><a href="#L-510"><span class="linenos"> 510</span></a><span class="sd">        Draw a square with the given center and size.</span>
</span><span id="L-511"><a href="#L-511"><span class="linenos"> 511</span></a>
</span><span id="L-512"><a href="#L-512"><span class="linenos"> 512</span></a><span class="sd">        Args:</span>
</span><span id="L-513"><a href="#L-513"><span class="linenos"> 513</span></a><span class="sd">            center (Point): The center of the square.</span>
</span><span id="L-514"><a href="#L-514"><span class="linenos"> 514</span></a><span class="sd">            size (float): The size of the square.</span>
</span><span id="L-515"><a href="#L-515"><span class="linenos"> 515</span></a><span class="sd">            angle (float, optional): The angle of the square, defaults to 0.</span>
</span><span id="L-516"><a href="#L-516"><span class="linenos"> 516</span></a><span class="sd">            kwargs (dict): Additional keyword arguments.</span>
</span><span id="L-517"><a href="#L-517"><span class="linenos"> 517</span></a>
</span><span id="L-518"><a href="#L-518"><span class="linenos"> 518</span></a><span class="sd">        Returns:</span>
</span><span id="L-519"><a href="#L-519"><span class="linenos"> 519</span></a><span class="sd">            Self: The canvas object.</span>
</span><span id="L-520"><a href="#L-520"><span class="linenos"> 520</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-521"><a href="#L-521"><span class="linenos"> 521</span></a>        <span class="n">draw</span><span class="o">.</span><span class="n">rectangle</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">center</span><span class="p">,</span> <span class="n">size</span><span class="p">,</span> <span class="n">size</span><span class="p">,</span> <span class="n">angle</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</span><span id="L-522"><a href="#L-522"><span class="linenos"> 522</span></a>        <span class="k">return</span> <span class="bp">self</span>
</span><span id="L-523"><a href="#L-523"><span class="linenos"> 523</span></a>
</span><span id="L-524"><a href="#L-524"><span class="linenos"> 524</span></a>    <span class="k">def</span> <span class="nf">lines</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">points</span><span class="p">:</span> <span class="n">Sequence</span><span class="p">[</span><span class="n">Point</span><span class="p">],</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Self</span><span class="p">:</span>
</span><span id="L-525"><a href="#L-525"><span class="linenos"> 525</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-526"><a href="#L-526"><span class="linenos"> 526</span></a><span class="sd">        Draw a polyline through the given points.</span>
</span><span id="L-527"><a href="#L-527"><span class="linenos"> 527</span></a>
</span><span id="L-528"><a href="#L-528"><span class="linenos"> 528</span></a><span class="sd">        Args:</span>
</span><span id="L-529"><a href="#L-529"><span class="linenos"> 529</span></a><span class="sd">            points (Sequence[Point]): The points to draw the polyline through.</span>
</span><span id="L-530"><a href="#L-530"><span class="linenos"> 530</span></a><span class="sd">            kwargs (dict): Additional keyword arguments.</span>
</span><span id="L-531"><a href="#L-531"><span class="linenos"> 531</span></a>
</span><span id="L-532"><a href="#L-532"><span class="linenos"> 532</span></a><span class="sd">        Returns:</span>
</span><span id="L-533"><a href="#L-533"><span class="linenos"> 533</span></a><span class="sd">            Self: The canvas object.</span>
</span><span id="L-534"><a href="#L-534"><span class="linenos"> 534</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-535"><a href="#L-535"><span class="linenos"> 535</span></a>        <span class="n">draw</span><span class="o">.</span><span class="n">lines</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">points</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</span><span id="L-536"><a href="#L-536"><span class="linenos"> 536</span></a>        <span class="k">return</span> <span class="bp">self</span>
</span><span id="L-537"><a href="#L-537"><span class="linenos"> 537</span></a>
</span><span id="L-538"><a href="#L-538"><span class="linenos"> 538</span></a>    <span class="k">def</span> <span class="nf">draw_lace</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">lace</span><span class="p">:</span> <span class="n">Batch</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Self</span><span class="p">:</span>
</span><span id="L-539"><a href="#L-539"><span class="linenos"> 539</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-540"><a href="#L-540"><span class="linenos"> 540</span></a><span class="sd">        Draw the lace.</span>
</span><span id="L-541"><a href="#L-541"><span class="linenos"> 541</span></a>
</span><span id="L-542"><a href="#L-542"><span class="linenos"> 542</span></a><span class="sd">        Args:</span>
</span><span id="L-543"><a href="#L-543"><span class="linenos"> 543</span></a><span class="sd">            lace (Batch): The lace to draw.</span>
</span><span id="L-544"><a href="#L-544"><span class="linenos"> 544</span></a><span class="sd">            kwargs (dict): Additional keyword arguments.</span>
</span><span id="L-545"><a href="#L-545"><span class="linenos"> 545</span></a>
</span><span id="L-546"><a href="#L-546"><span class="linenos"> 546</span></a><span class="sd">        Returns:</span>
</span><span id="L-547"><a href="#L-547"><span class="linenos"> 547</span></a><span class="sd">            Self: The canvas object.</span>
</span><span id="L-548"><a href="#L-548"><span class="linenos"> 548</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-549"><a href="#L-549"><span class="linenos"> 549</span></a>        <span class="n">draw</span><span class="o">.</span><span class="n">draw_lace</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">lace</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</span><span id="L-550"><a href="#L-550"><span class="linenos"> 550</span></a>        <span class="k">return</span> <span class="bp">self</span>
</span><span id="L-551"><a href="#L-551"><span class="linenos"> 551</span></a>
</span><span id="L-552"><a href="#L-552"><span class="linenos"> 552</span></a>    <span class="k">def</span> <span class="nf">draw_dimension</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dim</span><span class="p">:</span> <span class="n">Shape</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Self</span><span class="p">:</span>
</span><span id="L-553"><a href="#L-553"><span class="linenos"> 553</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-554"><a href="#L-554"><span class="linenos"> 554</span></a><span class="sd">        Draw the dimension.</span>
</span><span id="L-555"><a href="#L-555"><span class="linenos"> 555</span></a>
</span><span id="L-556"><a href="#L-556"><span class="linenos"> 556</span></a><span class="sd">        Args:</span>
</span><span id="L-557"><a href="#L-557"><span class="linenos"> 557</span></a><span class="sd">            dim (Shape): The dimension to draw.</span>
</span><span id="L-558"><a href="#L-558"><span class="linenos"> 558</span></a><span class="sd">            kwargs (dict): Additional keyword arguments.</span>
</span><span id="L-559"><a href="#L-559"><span class="linenos"> 559</span></a>
</span><span id="L-560"><a href="#L-560"><span class="linenos"> 560</span></a><span class="sd">        Returns:</span>
</span><span id="L-561"><a href="#L-561"><span class="linenos"> 561</span></a><span class="sd">            Self: The canvas object.</span>
</span><span id="L-562"><a href="#L-562"><span class="linenos"> 562</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-563"><a href="#L-563"><span class="linenos"> 563</span></a>        <span class="n">draw</span><span class="o">.</span><span class="n">draw_dimension</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dim</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</span><span id="L-564"><a href="#L-564"><span class="linenos"> 564</span></a>        <span class="k">return</span> <span class="bp">self</span>
</span><span id="L-565"><a href="#L-565"><span class="linenos"> 565</span></a>
</span><span id="L-566"><a href="#L-566"><span class="linenos"> 566</span></a>    <span class="k">def</span> <span class="nf">draw</span><span class="p">(</span>
</span><span id="L-567"><a href="#L-567"><span class="linenos"> 567</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="L-568"><a href="#L-568"><span class="linenos"> 568</span></a>        <span class="n">item_s</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">Drawable</span><span class="p">,</span> <span class="nb">list</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">],</span>
</span><span id="L-569"><a href="#L-569"><span class="linenos"> 569</span></a>        <span class="n">pos</span><span class="p">:</span> <span class="n">Point</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="L-570"><a href="#L-570"><span class="linenos"> 570</span></a>        <span class="n">angle</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
</span><span id="L-571"><a href="#L-571"><span class="linenos"> 571</span></a>        <span class="n">rotocenter</span><span class="p">:</span> <span class="n">Point</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
</span><span id="L-572"><a href="#L-572"><span class="linenos"> 572</span></a>        <span class="n">scale</span><span class="o">=</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
</span><span id="L-573"><a href="#L-573"><span class="linenos"> 573</span></a>        <span class="n">about</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
</span><span id="L-574"><a href="#L-574"><span class="linenos"> 574</span></a>        <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
</span><span id="L-575"><a href="#L-575"><span class="linenos"> 575</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Self</span><span class="p">:</span>
</span><span id="L-576"><a href="#L-576"><span class="linenos"> 576</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-577"><a href="#L-577"><span class="linenos"> 577</span></a><span class="sd">        Draw the item_s. item_s can be a single item or a list of items.</span>
</span><span id="L-578"><a href="#L-578"><span class="linenos"> 578</span></a>
</span><span id="L-579"><a href="#L-579"><span class="linenos"> 579</span></a><span class="sd">        Args:</span>
</span><span id="L-580"><a href="#L-580"><span class="linenos"> 580</span></a><span class="sd">            item_s (Union[Drawable, list, tuple]): The item(s) to draw.</span>
</span><span id="L-581"><a href="#L-581"><span class="linenos"> 581</span></a><span class="sd">            pos (Point, optional): The position to draw the item(s), defaults to None.</span>
</span><span id="L-582"><a href="#L-582"><span class="linenos"> 582</span></a><span class="sd">            angle (float, optional): The angle to rotate the item(s), defaults to 0.</span>
</span><span id="L-583"><a href="#L-583"><span class="linenos"> 583</span></a><span class="sd">            rotocenter (Point, optional): The point about which to rotate, defaults to (0, 0).</span>
</span><span id="L-584"><a href="#L-584"><span class="linenos"> 584</span></a><span class="sd">            scale (tuple, optional): The scale factors for the x and y axes, defaults to (1, 1).</span>
</span><span id="L-585"><a href="#L-585"><span class="linenos"> 585</span></a><span class="sd">            about (tuple, optional): The point about which to scale, defaults to (0, 0).</span>
</span><span id="L-586"><a href="#L-586"><span class="linenos"> 586</span></a><span class="sd">            kwargs (dict): Additional keyword arguments.</span>
</span><span id="L-587"><a href="#L-587"><span class="linenos"> 587</span></a>
</span><span id="L-588"><a href="#L-588"><span class="linenos"> 588</span></a><span class="sd">        Returns:</span>
</span><span id="L-589"><a href="#L-589"><span class="linenos"> 589</span></a><span class="sd">            Self: The canvas object.</span>
</span><span id="L-590"><a href="#L-590"><span class="linenos"> 590</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-591"><a href="#L-591"><span class="linenos"> 591</span></a>        <span class="n">sketch_xform</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_sketch_xform_matrix</span>
</span><span id="L-592"><a href="#L-592"><span class="linenos"> 592</span></a>        <span class="k">if</span> <span class="n">pos</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-593"><a href="#L-593"><span class="linenos"> 593</span></a>            <span class="n">sketch_xform</span> <span class="o">=</span> <span class="n">translation_matrix</span><span class="p">(</span><span class="o">*</span><span class="n">pos</span><span class="p">[:</span><span class="mi">2</span><span class="p">])</span> <span class="o">@</span> <span class="n">sketch_xform</span>
</span><span id="L-594"><a href="#L-594"><span class="linenos"> 594</span></a>        <span class="k">if</span> <span class="n">scale</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">!=</span> <span class="mi">1</span> <span class="ow">or</span> <span class="n">scale</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">!=</span> <span class="mi">1</span><span class="p">:</span>
</span><span id="L-595"><a href="#L-595"><span class="linenos"> 595</span></a>            <span class="n">sketch_xform</span> <span class="o">=</span> <span class="n">scale_in_place_matrix</span><span class="p">(</span><span class="o">*</span><span class="n">pos</span><span class="p">[:</span><span class="mi">2</span><span class="p">],</span> <span class="n">about</span><span class="p">)</span> <span class="o">@</span> <span class="n">sketch_xform</span>
</span><span id="L-596"><a href="#L-596"><span class="linenos"> 596</span></a>        <span class="k">if</span> <span class="n">angle</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="L-597"><a href="#L-597"><span class="linenos"> 597</span></a>            <span class="n">sketch_xform</span> <span class="o">=</span> <span class="n">rotation_matrix</span><span class="p">(</span><span class="n">angle</span><span class="p">,</span> <span class="n">rotocenter</span><span class="p">)</span> <span class="o">@</span> <span class="n">sketch_xform</span>
</span><span id="L-598"><a href="#L-598"><span class="linenos"> 598</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_sketch_xform_matrix</span> <span class="o">=</span> <span class="n">sketch_xform</span> <span class="o">@</span> <span class="bp">self</span><span class="o">.</span><span class="n">_xform_matrix</span>
</span><span id="L-599"><a href="#L-599"><span class="linenos"> 599</span></a>
</span><span id="L-600"><a href="#L-600"><span class="linenos"> 600</span></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">item_s</span><span class="p">,</span> <span class="p">(</span><span class="nb">list</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">)):</span>
</span><span id="L-601"><a href="#L-601"><span class="linenos"> 601</span></a>            <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">item_s</span><span class="p">:</span>
</span><span id="L-602"><a href="#L-602"><span class="linenos"> 602</span></a>                <span class="n">draw</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</span><span id="L-603"><a href="#L-603"><span class="linenos"> 603</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="L-604"><a href="#L-604"><span class="linenos"> 604</span></a>            <span class="n">draw</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item_s</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</span><span id="L-605"><a href="#L-605"><span class="linenos"> 605</span></a>
</span><span id="L-606"><a href="#L-606"><span class="linenos"> 606</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_sketch_xform_matrix</span> <span class="o">=</span> <span class="n">identity_matrix</span><span class="p">()</span>
</span><span id="L-607"><a href="#L-607"><span class="linenos"> 607</span></a>
</span><span id="L-608"><a href="#L-608"><span class="linenos"> 608</span></a>        <span class="k">return</span> <span class="bp">self</span>
</span><span id="L-609"><a href="#L-609"><span class="linenos"> 609</span></a>
</span><span id="L-610"><a href="#L-610"><span class="linenos"> 610</span></a>    <span class="k">def</span> <span class="nf">draw_CS</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">size</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Self</span><span class="p">:</span>
</span><span id="L-611"><a href="#L-611"><span class="linenos"> 611</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-612"><a href="#L-612"><span class="linenos"> 612</span></a><span class="sd">        Draw the Canvas coordinate system.</span>
</span><span id="L-613"><a href="#L-613"><span class="linenos"> 613</span></a>
</span><span id="L-614"><a href="#L-614"><span class="linenos"> 614</span></a><span class="sd">        Args:</span>
</span><span id="L-615"><a href="#L-615"><span class="linenos"> 615</span></a><span class="sd">            size (float, optional): The size of the coordinate system, defaults to None.</span>
</span><span id="L-616"><a href="#L-616"><span class="linenos"> 616</span></a><span class="sd">            kwargs (dict): Additional keyword arguments.</span>
</span><span id="L-617"><a href="#L-617"><span class="linenos"> 617</span></a>
</span><span id="L-618"><a href="#L-618"><span class="linenos"> 618</span></a><span class="sd">        Returns:</span>
</span><span id="L-619"><a href="#L-619"><span class="linenos"> 619</span></a><span class="sd">            Self: The canvas object.</span>
</span><span id="L-620"><a href="#L-620"><span class="linenos"> 620</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-621"><a href="#L-621"><span class="linenos"> 621</span></a>        <span class="n">draw</span><span class="o">.</span><span class="n">draw_CS</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">size</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</span><span id="L-622"><a href="#L-622"><span class="linenos"> 622</span></a>        <span class="k">return</span> <span class="bp">self</span>
</span><span id="L-623"><a href="#L-623"><span class="linenos"> 623</span></a>
</span><span id="L-624"><a href="#L-624"><span class="linenos"> 624</span></a>    <span class="k">def</span> <span class="nf">draw_image</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">image</span><span class="p">:</span><span class="n">Image</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Self</span><span class="p">:</span>
</span><span id="L-625"><a href="#L-625"><span class="linenos"> 625</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-626"><a href="#L-626"><span class="linenos"> 626</span></a><span class="sd">        Draw an image on the canvas.</span>
</span><span id="L-627"><a href="#L-627"><span class="linenos"> 627</span></a>
</span><span id="L-628"><a href="#L-628"><span class="linenos"> 628</span></a><span class="sd">        Args:</span>
</span><span id="L-629"><a href="#L-629"><span class="linenos"> 629</span></a><span class="sd">            image (Image): The image to draw.</span>
</span><span id="L-630"><a href="#L-630"><span class="linenos"> 630</span></a>
</span><span id="L-631"><a href="#L-631"><span class="linenos"> 631</span></a><span class="sd">        Returns:</span>
</span><span id="L-632"><a href="#L-632"><span class="linenos"> 632</span></a><span class="sd">            Self: The canvas object.</span>
</span><span id="L-633"><a href="#L-633"><span class="linenos"> 633</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-634"><a href="#L-634"><span class="linenos"> 634</span></a>        <span class="n">draw</span><span class="o">.</span><span class="n">draw_image</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">image</span><span class="p">)</span>
</span><span id="L-635"><a href="#L-635"><span class="linenos"> 635</span></a>        <span class="k">return</span> <span class="bp">self</span>
</span><span id="L-636"><a href="#L-636"><span class="linenos"> 636</span></a>
</span><span id="L-637"><a href="#L-637"><span class="linenos"> 637</span></a>    <span class="k">def</span> <span class="nf">draw_frame</span><span class="p">(</span>
</span><span id="L-638"><a href="#L-638"><span class="linenos"> 638</span></a>        <span class="bp">self</span><span class="p">,</span> <span class="n">margin</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span>
</span><span id="L-639"><a href="#L-639"><span class="linenos"> 639</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Self</span><span class="p">:</span>
</span><span id="L-640"><a href="#L-640"><span class="linenos"> 640</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-641"><a href="#L-641"><span class="linenos"> 641</span></a><span class="sd">        Draw a frame around the canvas.</span>
</span><span id="L-642"><a href="#L-642"><span class="linenos"> 642</span></a>
</span><span id="L-643"><a href="#L-643"><span class="linenos"> 643</span></a><span class="sd">        Args:</span>
</span><span id="L-644"><a href="#L-644"><span class="linenos"> 644</span></a><span class="sd">            margins (Union[float, Sequence]): The margins of the frame.</span>
</span><span id="L-645"><a href="#L-645"><span class="linenos"> 645</span></a><span class="sd">            kwargs (dict): Additional keyword arguments.</span>
</span><span id="L-646"><a href="#L-646"><span class="linenos"> 646</span></a>
</span><span id="L-647"><a href="#L-647"><span class="linenos"> 647</span></a><span class="sd">        Returns:</span>
</span><span id="L-648"><a href="#L-648"><span class="linenos"> 648</span></a><span class="sd">            Self: The canvas object.</span>
</span><span id="L-649"><a href="#L-649"><span class="linenos"> 649</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-650"><a href="#L-650"><span class="linenos"> 650</span></a>        <span class="c1"># to do: add shadow and frame color, shadow width. Check canvas.clip.</span>
</span><span id="L-651"><a href="#L-651"><span class="linenos"> 651</span></a>        <span class="k">if</span> <span class="n">margin</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-652"><a href="#L-652"><span class="linenos"> 652</span></a>            <span class="n">margin</span> <span class="o">=</span> <span class="n">defaults</span><span class="p">[</span><span class="s2">&quot;canvas_frame_margin&quot;</span><span class="p">]</span>
</span><span id="L-653"><a href="#L-653"><span class="linenos"> 653</span></a>        <span class="k">if</span> <span class="n">width</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-654"><a href="#L-654"><span class="linenos"> 654</span></a>            <span class="n">width</span> <span class="o">=</span> <span class="n">defaults</span><span class="p">[</span><span class="s2">&quot;canvas_frame_width&quot;</span><span class="p">]</span>
</span><span id="L-655"><a href="#L-655"><span class="linenos"> 655</span></a>        <span class="n">b_box</span> <span class="o">=</span> <span class="n">bounding_box</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_all_vertices</span><span class="p">)</span>
</span><span id="L-656"><a href="#L-656"><span class="linenos"> 656</span></a>        <span class="n">box2</span> <span class="o">=</span> <span class="n">b_box</span><span class="o">.</span><span class="n">get_inflated_b_box</span><span class="p">(</span><span class="n">margin</span><span class="p">)</span>
</span><span id="L-657"><a href="#L-657"><span class="linenos"> 657</span></a>        <span class="n">box3</span> <span class="o">=</span> <span class="n">box2</span><span class="o">.</span><span class="n">get_inflated_b_box</span><span class="p">(</span><span class="mi">15</span><span class="p">)</span>
</span><span id="L-658"><a href="#L-658"><span class="linenos"> 658</span></a>        <span class="n">shadow</span> <span class="o">=</span> <span class="n">Shape</span><span class="p">([</span><span class="n">box3</span><span class="o">.</span><span class="n">northwest</span><span class="p">,</span> <span class="n">box3</span><span class="o">.</span><span class="n">southwest</span><span class="p">,</span> <span class="n">box3</span><span class="o">.</span><span class="n">southeast</span><span class="p">])</span>
</span><span id="L-659"><a href="#L-659"><span class="linenos"> 659</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="n">shadow</span><span class="p">,</span> <span class="n">line_color</span><span class="o">=</span><span class="n">light_gray</span><span class="p">,</span> <span class="n">line_width</span><span class="o">=</span><span class="n">width</span><span class="p">)</span>
</span><span id="L-660"><a href="#L-660"><span class="linenos"> 660</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="n">Shape</span><span class="p">(</span><span class="n">box2</span><span class="o">.</span><span class="n">corners</span><span class="p">,</span> <span class="n">closed</span><span class="o">=</span><span class="kc">True</span><span class="p">),</span> <span class="n">fill</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">line_width</span><span class="o">=</span><span class="n">width</span><span class="p">)</span>
</span><span id="L-661"><a href="#L-661"><span class="linenos"> 661</span></a>
</span><span id="L-662"><a href="#L-662"><span class="linenos"> 662</span></a>        <span class="k">return</span> <span class="bp">self</span>
</span><span id="L-663"><a href="#L-663"><span class="linenos"> 663</span></a>
</span><span id="L-664"><a href="#L-664"><span class="linenos"> 664</span></a>    <span class="k">def</span> <span class="nf">reset</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Self</span><span class="p">:</span>
</span><span id="L-665"><a href="#L-665"><span class="linenos"> 665</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-666"><a href="#L-666"><span class="linenos"> 666</span></a><span class="sd">        Reset the canvas to its initial state.</span>
</span><span id="L-667"><a href="#L-667"><span class="linenos"> 667</span></a>
</span><span id="L-668"><a href="#L-668"><span class="linenos"> 668</span></a><span class="sd">        Returns:</span>
</span><span id="L-669"><a href="#L-669"><span class="linenos"> 669</span></a><span class="sd">            Self: The canvas object.</span>
</span><span id="L-670"><a href="#L-670"><span class="linenos"> 670</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-671"><a href="#L-671"><span class="linenos"> 671</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_code</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="L-672"><a href="#L-672"><span class="linenos"> 672</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">preamble</span> <span class="o">=</span> <span class="n">defaults</span><span class="p">[</span><span class="s2">&quot;preamble&quot;</span><span class="p">]</span>
</span><span id="L-673"><a href="#L-673"><span class="linenos"> 673</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">pages</span> <span class="o">=</span> <span class="p">[</span><span class="n">Page</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">size</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">back_color</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">border</span><span class="p">)]</span>
</span><span id="L-674"><a href="#L-674"><span class="linenos"> 674</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">active_page</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pages</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="L-675"><a href="#L-675"><span class="linenos"> 675</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_all_vertices</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="L-676"><a href="#L-676"><span class="linenos"> 676</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">tex</span><span class="p">:</span> <span class="n">Tex</span> <span class="o">=</span> <span class="n">Tex</span><span class="p">()</span>
</span><span id="L-677"><a href="#L-677"><span class="linenos"> 677</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">clip</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>  <span class="c1"># if true then clip the canvas to the mask</span>
</span><span id="L-678"><a href="#L-678"><span class="linenos"> 678</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_xform_matrix</span> <span class="o">=</span> <span class="n">identity_matrix</span><span class="p">()</span>
</span><span id="L-679"><a href="#L-679"><span class="linenos"> 679</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_sketch_xform_matrix</span> <span class="o">=</span> <span class="n">identity_matrix</span><span class="p">()</span>
</span><span id="L-680"><a href="#L-680"><span class="linenos"> 680</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">active_page</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pages</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="L-681"><a href="#L-681"><span class="linenos"> 681</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_all_vertices</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="L-682"><a href="#L-682"><span class="linenos"> 682</span></a>        <span class="k">return</span> <span class="bp">self</span>
</span><span id="L-683"><a href="#L-683"><span class="linenos"> 683</span></a>
</span><span id="L-684"><a href="#L-684"><span class="linenos"> 684</span></a>    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="L-685"><a href="#L-685"><span class="linenos"> 685</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-686"><a href="#L-686"><span class="linenos"> 686</span></a><span class="sd">        Return a string representation of the canvas.</span>
</span><span id="L-687"><a href="#L-687"><span class="linenos"> 687</span></a>
</span><span id="L-688"><a href="#L-688"><span class="linenos"> 688</span></a><span class="sd">        Returns:</span>
</span><span id="L-689"><a href="#L-689"><span class="linenos"> 689</span></a><span class="sd">            str: The string representation of the canvas.</span>
</span><span id="L-690"><a href="#L-690"><span class="linenos"> 690</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-691"><a href="#L-691"><span class="linenos"> 691</span></a>        <span class="k">return</span> <span class="s2">&quot;Canvas()&quot;</span>
</span><span id="L-692"><a href="#L-692"><span class="linenos"> 692</span></a>
</span><span id="L-693"><a href="#L-693"><span class="linenos"> 693</span></a>    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="L-694"><a href="#L-694"><span class="linenos"> 694</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-695"><a href="#L-695"><span class="linenos"> 695</span></a><span class="sd">        Return a string representation of the canvas.</span>
</span><span id="L-696"><a href="#L-696"><span class="linenos"> 696</span></a>
</span><span id="L-697"><a href="#L-697"><span class="linenos"> 697</span></a><span class="sd">        Returns:</span>
</span><span id="L-698"><a href="#L-698"><span class="linenos"> 698</span></a><span class="sd">            str: The string representation of the canvas.</span>
</span><span id="L-699"><a href="#L-699"><span class="linenos"> 699</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-700"><a href="#L-700"><span class="linenos"> 700</span></a>        <span class="k">return</span> <span class="s2">&quot;Canvas()&quot;</span>
</span><span id="L-701"><a href="#L-701"><span class="linenos"> 701</span></a>
</span><span id="L-702"><a href="#L-702"><span class="linenos"> 702</span></a>    <span class="nd">@property</span>
</span><span id="L-703"><a href="#L-703"><span class="linenos"> 703</span></a>    <span class="k">def</span> <span class="nf">pos</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Point</span><span class="p">:</span>
</span><span id="L-704"><a href="#L-704"><span class="linenos"> 704</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-705"><a href="#L-705"><span class="linenos"> 705</span></a><span class="sd">        The position of the canvas.</span>
</span><span id="L-706"><a href="#L-706"><span class="linenos"> 706</span></a>
</span><span id="L-707"><a href="#L-707"><span class="linenos"> 707</span></a><span class="sd">        Args:</span>
</span><span id="L-708"><a href="#L-708"><span class="linenos"> 708</span></a><span class="sd">            point (Point, optional): The point to set the position to.</span>
</span><span id="L-709"><a href="#L-709"><span class="linenos"> 709</span></a>
</span><span id="L-710"><a href="#L-710"><span class="linenos"> 710</span></a><span class="sd">        Returns:</span>
</span><span id="L-711"><a href="#L-711"><span class="linenos"> 711</span></a><span class="sd">            Point: The position of the canvas.</span>
</span><span id="L-712"><a href="#L-712"><span class="linenos"> 712</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-713"><a href="#L-713"><span class="linenos"> 713</span></a>
</span><span id="L-714"><a href="#L-714"><span class="linenos"> 714</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_xform_matrix</span><span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="p">:</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">tolist</span><span class="p">()[:</span><span class="mi">2</span><span class="p">]</span>
</span><span id="L-715"><a href="#L-715"><span class="linenos"> 715</span></a>
</span><span id="L-716"><a href="#L-716"><span class="linenos"> 716</span></a>    <span class="nd">@pos</span><span class="o">.</span><span class="n">setter</span>
</span><span id="L-717"><a href="#L-717"><span class="linenos"> 717</span></a>    <span class="k">def</span> <span class="nf">pos</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">point</span><span class="p">:</span> <span class="n">Point</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-718"><a href="#L-718"><span class="linenos"> 718</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-719"><a href="#L-719"><span class="linenos"> 719</span></a><span class="sd">        Set the position of the canvas.</span>
</span><span id="L-720"><a href="#L-720"><span class="linenos"> 720</span></a>
</span><span id="L-721"><a href="#L-721"><span class="linenos"> 721</span></a><span class="sd">        Args:</span>
</span><span id="L-722"><a href="#L-722"><span class="linenos"> 722</span></a><span class="sd">            point (Point): The point to set the position to.</span>
</span><span id="L-723"><a href="#L-723"><span class="linenos"> 723</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-724"><a href="#L-724"><span class="linenos"> 724</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_xform_matrix</span><span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="p">:</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="n">point</span><span class="p">[:</span><span class="mi">2</span><span class="p">]</span>
</span><span id="L-725"><a href="#L-725"><span class="linenos"> 725</span></a>
</span><span id="L-726"><a href="#L-726"><span class="linenos"> 726</span></a>    <span class="nd">@property</span>
</span><span id="L-727"><a href="#L-727"><span class="linenos"> 727</span></a>    <span class="k">def</span> <span class="nf">angle</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
</span><span id="L-728"><a href="#L-728"><span class="linenos"> 728</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-729"><a href="#L-729"><span class="linenos"> 729</span></a><span class="sd">        The angle of the canvas.</span>
</span><span id="L-730"><a href="#L-730"><span class="linenos"> 730</span></a>
</span><span id="L-731"><a href="#L-731"><span class="linenos"> 731</span></a><span class="sd">        Returns:</span>
</span><span id="L-732"><a href="#L-732"><span class="linenos"> 732</span></a><span class="sd">            float: The angle of the canvas.</span>
</span><span id="L-733"><a href="#L-733"><span class="linenos"> 733</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-734"><a href="#L-734"><span class="linenos"> 734</span></a>        <span class="n">xform</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_xform_matrix</span>
</span><span id="L-735"><a href="#L-735"><span class="linenos"> 735</span></a>
</span><span id="L-736"><a href="#L-736"><span class="linenos"> 736</span></a>        <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">arctan2</span><span class="p">(</span><span class="n">xform</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="n">xform</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">])</span>
</span><span id="L-737"><a href="#L-737"><span class="linenos"> 737</span></a>
</span><span id="L-738"><a href="#L-738"><span class="linenos"> 738</span></a>    <span class="nd">@angle</span><span class="o">.</span><span class="n">setter</span>
</span><span id="L-739"><a href="#L-739"><span class="linenos"> 739</span></a>    <span class="k">def</span> <span class="nf">angle</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">angle</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-740"><a href="#L-740"><span class="linenos"> 740</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-741"><a href="#L-741"><span class="linenos"> 741</span></a><span class="sd">        Set the angle of the canvas.</span>
</span><span id="L-742"><a href="#L-742"><span class="linenos"> 742</span></a>
</span><span id="L-743"><a href="#L-743"><span class="linenos"> 743</span></a><span class="sd">        Args:</span>
</span><span id="L-744"><a href="#L-744"><span class="linenos"> 744</span></a><span class="sd">            angle (float): The angle to set the canvas to.</span>
</span><span id="L-745"><a href="#L-745"><span class="linenos"> 745</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-746"><a href="#L-746"><span class="linenos"> 746</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_xform_matrix</span> <span class="o">=</span> <span class="n">rotation_matrix</span><span class="p">(</span><span class="n">angle</span><span class="p">)</span> <span class="o">@</span> <span class="bp">self</span><span class="o">.</span><span class="n">_xform_matrix</span>
</span><span id="L-747"><a href="#L-747"><span class="linenos"> 747</span></a>
</span><span id="L-748"><a href="#L-748"><span class="linenos"> 748</span></a>    <span class="nd">@property</span>
</span><span id="L-749"><a href="#L-749"><span class="linenos"> 749</span></a>    <span class="k">def</span> <span class="nf">scale</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Vec2</span><span class="p">:</span>
</span><span id="L-750"><a href="#L-750"><span class="linenos"> 750</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-751"><a href="#L-751"><span class="linenos"> 751</span></a><span class="sd">        The scale of the canvas.</span>
</span><span id="L-752"><a href="#L-752"><span class="linenos"> 752</span></a>
</span><span id="L-753"><a href="#L-753"><span class="linenos"> 753</span></a><span class="sd">        Returns:</span>
</span><span id="L-754"><a href="#L-754"><span class="linenos"> 754</span></a><span class="sd">            Vec2: The scale of the canvas.</span>
</span><span id="L-755"><a href="#L-755"><span class="linenos"> 755</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-756"><a href="#L-756"><span class="linenos"> 756</span></a>        <span class="n">xform</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_xform_matrix</span>
</span><span id="L-757"><a href="#L-757"><span class="linenos"> 757</span></a>
</span><span id="L-758"><a href="#L-758"><span class="linenos"> 758</span></a>        <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">linalg</span><span class="o">.</span><span class="n">norm</span><span class="p">(</span><span class="n">xform</span><span class="p">[:</span><span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">]),</span> <span class="n">np</span><span class="o">.</span><span class="n">linalg</span><span class="o">.</span><span class="n">norm</span><span class="p">(</span><span class="n">xform</span><span class="p">[:</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">])</span>
</span><span id="L-759"><a href="#L-759"><span class="linenos"> 759</span></a>
</span><span id="L-760"><a href="#L-760"><span class="linenos"> 760</span></a>    <span class="nd">@scale</span><span class="o">.</span><span class="n">setter</span>
</span><span id="L-761"><a href="#L-761"><span class="linenos"> 761</span></a>    <span class="k">def</span> <span class="nf">scale</span><span class="p">(</span>
</span><span id="L-762"><a href="#L-762"><span class="linenos"> 762</span></a>        <span class="bp">self</span><span class="p">,</span> <span class="n">scale_x</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">scale_y</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">about</span><span class="p">:</span> <span class="n">Point</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
</span><span id="L-763"><a href="#L-763"><span class="linenos"> 763</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-764"><a href="#L-764"><span class="linenos"> 764</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-765"><a href="#L-765"><span class="linenos"> 765</span></a><span class="sd">        Set the scale of the canvas.</span>
</span><span id="L-766"><a href="#L-766"><span class="linenos"> 766</span></a>
</span><span id="L-767"><a href="#L-767"><span class="linenos"> 767</span></a><span class="sd">        Args:</span>
</span><span id="L-768"><a href="#L-768"><span class="linenos"> 768</span></a><span class="sd">            scale_x (float): The x-scale to set the canvas to.</span>
</span><span id="L-769"><a href="#L-769"><span class="linenos"> 769</span></a><span class="sd">            scale_y (float): The y-scale to set the canvas to.</span>
</span><span id="L-770"><a href="#L-770"><span class="linenos"> 770</span></a><span class="sd">            about (Point): The point about which to scale the canvas.</span>
</span><span id="L-771"><a href="#L-771"><span class="linenos"> 771</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-772"><a href="#L-772"><span class="linenos"> 772</span></a>        <span class="k">if</span> <span class="n">scale_y</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-773"><a href="#L-773"><span class="linenos"> 773</span></a>            <span class="n">scale_y</span> <span class="o">=</span> <span class="n">scale_x</span>
</span><span id="L-774"><a href="#L-774"><span class="linenos"> 774</span></a>
</span><span id="L-775"><a href="#L-775"><span class="linenos"> 775</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_xform_matrix</span> <span class="o">=</span> <span class="p">(</span>
</span><span id="L-776"><a href="#L-776"><span class="linenos"> 776</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_xform_matrix</span> <span class="o">@</span> <span class="n">scale_in_place_matrix</span><span class="p">(</span><span class="n">scale_x</span><span class="p">,</span> <span class="n">scale_y</span><span class="p">,</span> <span class="n">about</span><span class="o">=</span><span class="n">about</span><span class="p">)</span>
</span><span id="L-777"><a href="#L-777"><span class="linenos"> 777</span></a>        <span class="p">)</span>
</span><span id="L-778"><a href="#L-778"><span class="linenos"> 778</span></a>
</span><span id="L-779"><a href="#L-779"><span class="linenos"> 779</span></a>    <span class="nd">@property</span>
</span><span id="L-780"><a href="#L-780"><span class="linenos"> 780</span></a>    <span class="k">def</span> <span class="nf">xform_matrix</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;np.ndarray&quot;</span><span class="p">:</span>
</span><span id="L-781"><a href="#L-781"><span class="linenos"> 781</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-782"><a href="#L-782"><span class="linenos"> 782</span></a><span class="sd">        The transformation matrix of the canvas.</span>
</span><span id="L-783"><a href="#L-783"><span class="linenos"> 783</span></a>
</span><span id="L-784"><a href="#L-784"><span class="linenos"> 784</span></a><span class="sd">        Returns:</span>
</span><span id="L-785"><a href="#L-785"><span class="linenos"> 785</span></a><span class="sd">            np.ndarray: The transformation matrix of the canvas.</span>
</span><span id="L-786"><a href="#L-786"><span class="linenos"> 786</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-787"><a href="#L-787"><span class="linenos"> 787</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_xform_matrix</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
</span><span id="L-788"><a href="#L-788"><span class="linenos"> 788</span></a>
</span><span id="L-789"><a href="#L-789"><span class="linenos"> 789</span></a>    <span class="k">def</span> <span class="nf">transform</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">transform_matrix</span><span class="p">:</span> <span class="s2">&quot;np.ndarray&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Self</span><span class="p">:</span>
</span><span id="L-790"><a href="#L-790"><span class="linenos"> 790</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-791"><a href="#L-791"><span class="linenos"> 791</span></a><span class="sd">        Transforms the canvas by the given transformation matrix.</span>
</span><span id="L-792"><a href="#L-792"><span class="linenos"> 792</span></a>
</span><span id="L-793"><a href="#L-793"><span class="linenos"> 793</span></a><span class="sd">        Args:</span>
</span><span id="L-794"><a href="#L-794"><span class="linenos"> 794</span></a><span class="sd">            transform_matrix (np.ndarray): The transformation matrix.</span>
</span><span id="L-795"><a href="#L-795"><span class="linenos"> 795</span></a>
</span><span id="L-796"><a href="#L-796"><span class="linenos"> 796</span></a><span class="sd">        Returns:</span>
</span><span id="L-797"><a href="#L-797"><span class="linenos"> 797</span></a><span class="sd">            Self: The Canvas object.</span>
</span><span id="L-798"><a href="#L-798"><span class="linenos"> 798</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-799"><a href="#L-799"><span class="linenos"> 799</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_xform_matrix</span> <span class="o">=</span> <span class="n">transform_matrix</span> <span class="o">@</span> <span class="bp">self</span><span class="o">.</span><span class="n">_xform_matrix</span>
</span><span id="L-800"><a href="#L-800"><span class="linenos"> 800</span></a>
</span><span id="L-801"><a href="#L-801"><span class="linenos"> 801</span></a>        <span class="k">return</span> <span class="bp">self</span>
</span><span id="L-802"><a href="#L-802"><span class="linenos"> 802</span></a>
</span><span id="L-803"><a href="#L-803"><span class="linenos"> 803</span></a>    <span class="k">def</span> <span class="nf">reset_transform</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Self</span><span class="p">:</span>
</span><span id="L-804"><a href="#L-804"><span class="linenos"> 804</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-805"><a href="#L-805"><span class="linenos"> 805</span></a><span class="sd">        Reset the transformation matrix of the canvas.</span>
</span><span id="L-806"><a href="#L-806"><span class="linenos"> 806</span></a><span class="sd">        The canvas origin is at (0, 0) and the orientation angle is 0.</span>
</span><span id="L-807"><a href="#L-807"><span class="linenos"> 807</span></a><span class="sd">        Transformation matrix is the identity matrix.</span>
</span><span id="L-808"><a href="#L-808"><span class="linenos"> 808</span></a>
</span><span id="L-809"><a href="#L-809"><span class="linenos"> 809</span></a><span class="sd">        Returns:</span>
</span><span id="L-810"><a href="#L-810"><span class="linenos"> 810</span></a><span class="sd">            Self: The canvas object.</span>
</span><span id="L-811"><a href="#L-811"><span class="linenos"> 811</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-812"><a href="#L-812"><span class="linenos"> 812</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_xform_matrix</span> <span class="o">=</span> <span class="n">identity_matrix</span><span class="p">()</span>
</span><span id="L-813"><a href="#L-813"><span class="linenos"> 813</span></a>
</span><span id="L-814"><a href="#L-814"><span class="linenos"> 814</span></a>        <span class="k">return</span> <span class="bp">self</span>
</span><span id="L-815"><a href="#L-815"><span class="linenos"> 815</span></a>
</span><span id="L-816"><a href="#L-816"><span class="linenos"> 816</span></a>    <span class="k">def</span> <span class="nf">translate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dx</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">dy</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Self</span><span class="p">:</span>
</span><span id="L-817"><a href="#L-817"><span class="linenos"> 817</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-818"><a href="#L-818"><span class="linenos"> 818</span></a><span class="sd">        Translate the canvas by dx and dy.</span>
</span><span id="L-819"><a href="#L-819"><span class="linenos"> 819</span></a>
</span><span id="L-820"><a href="#L-820"><span class="linenos"> 820</span></a><span class="sd">        Args:</span>
</span><span id="L-821"><a href="#L-821"><span class="linenos"> 821</span></a><span class="sd">            dx (float): The translation distance along the x-axis.</span>
</span><span id="L-822"><a href="#L-822"><span class="linenos"> 822</span></a><span class="sd">            dy (float): The translation distance along the y-axis.</span>
</span><span id="L-823"><a href="#L-823"><span class="linenos"> 823</span></a>
</span><span id="L-824"><a href="#L-824"><span class="linenos"> 824</span></a><span class="sd">        Returns:</span>
</span><span id="L-825"><a href="#L-825"><span class="linenos"> 825</span></a><span class="sd">            Self: The canvas object.</span>
</span><span id="L-826"><a href="#L-826"><span class="linenos"> 826</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-827"><a href="#L-827"><span class="linenos"> 827</span></a>
</span><span id="L-828"><a href="#L-828"><span class="linenos"> 828</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_xform_matrix</span> <span class="o">=</span> <span class="n">translation_matrix</span><span class="p">(</span><span class="n">dx</span><span class="p">,</span> <span class="n">dy</span><span class="p">)</span> <span class="o">@</span> <span class="bp">self</span><span class="o">.</span><span class="n">_xform_matrix</span>
</span><span id="L-829"><a href="#L-829"><span class="linenos"> 829</span></a>
</span><span id="L-830"><a href="#L-830"><span class="linenos"> 830</span></a>        <span class="k">return</span> <span class="bp">self</span>
</span><span id="L-831"><a href="#L-831"><span class="linenos"> 831</span></a>
</span><span id="L-832"><a href="#L-832"><span class="linenos"> 832</span></a>    <span class="k">def</span> <span class="nf">rotate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">angle</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">about</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span> <span class="o">-&gt;</span> <span class="n">Self</span><span class="p">:</span>
</span><span id="L-833"><a href="#L-833"><span class="linenos"> 833</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-834"><a href="#L-834"><span class="linenos"> 834</span></a><span class="sd">        Rotate the canvas by angle in radians about the given point.</span>
</span><span id="L-835"><a href="#L-835"><span class="linenos"> 835</span></a>
</span><span id="L-836"><a href="#L-836"><span class="linenos"> 836</span></a><span class="sd">        Args:</span>
</span><span id="L-837"><a href="#L-837"><span class="linenos"> 837</span></a><span class="sd">            angle (float): The rotation angle in radians.</span>
</span><span id="L-838"><a href="#L-838"><span class="linenos"> 838</span></a><span class="sd">            about (tuple): The point about which to rotate the canvas.</span>
</span><span id="L-839"><a href="#L-839"><span class="linenos"> 839</span></a>
</span><span id="L-840"><a href="#L-840"><span class="linenos"> 840</span></a><span class="sd">        Returns:</span>
</span><span id="L-841"><a href="#L-841"><span class="linenos"> 841</span></a><span class="sd">            Self: The canvas object.</span>
</span><span id="L-842"><a href="#L-842"><span class="linenos"> 842</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-843"><a href="#L-843"><span class="linenos"> 843</span></a>
</span><span id="L-844"><a href="#L-844"><span class="linenos"> 844</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_xform_matrix</span> <span class="o">=</span> <span class="n">rotation_matrix</span><span class="p">(</span><span class="n">angle</span><span class="p">,</span> <span class="n">about</span><span class="p">)</span> <span class="o">@</span> <span class="bp">self</span><span class="o">.</span><span class="n">_xform_matrix</span>
</span><span id="L-845"><a href="#L-845"><span class="linenos"> 845</span></a>
</span><span id="L-846"><a href="#L-846"><span class="linenos"> 846</span></a>        <span class="k">return</span> <span class="bp">self</span>
</span><span id="L-847"><a href="#L-847"><span class="linenos"> 847</span></a>
</span><span id="L-848"><a href="#L-848"><span class="linenos"> 848</span></a>    <span class="k">def</span> <span class="nf">_flip</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">axis</span><span class="p">:</span> <span class="n">Axis</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Self</span><span class="p">:</span>
</span><span id="L-849"><a href="#L-849"><span class="linenos"> 849</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-850"><a href="#L-850"><span class="linenos"> 850</span></a><span class="sd">        Flip the canvas along the specified axis.</span>
</span><span id="L-851"><a href="#L-851"><span class="linenos"> 851</span></a>
</span><span id="L-852"><a href="#L-852"><span class="linenos"> 852</span></a><span class="sd">        Args:</span>
</span><span id="L-853"><a href="#L-853"><span class="linenos"> 853</span></a><span class="sd">            axis (str): The axis to flip the canvas along (&#39;x&#39; or &#39;y&#39;).</span>
</span><span id="L-854"><a href="#L-854"><span class="linenos"> 854</span></a>
</span><span id="L-855"><a href="#L-855"><span class="linenos"> 855</span></a><span class="sd">        Returns:</span>
</span><span id="L-856"><a href="#L-856"><span class="linenos"> 856</span></a><span class="sd">            Self: The canvas object.</span>
</span><span id="L-857"><a href="#L-857"><span class="linenos"> 857</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-858"><a href="#L-858"><span class="linenos"> 858</span></a>        <span class="k">if</span> <span class="n">axis</span> <span class="o">==</span> <span class="n">Axis</span><span class="o">.</span><span class="n">X</span><span class="p">:</span>
</span><span id="L-859"><a href="#L-859"><span class="linenos"> 859</span></a>            <span class="n">sx</span> <span class="o">=</span> <span class="o">-</span><span class="bp">self</span><span class="o">.</span><span class="n">scale</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="L-860"><a href="#L-860"><span class="linenos"> 860</span></a>            <span class="n">sy</span> <span class="o">=</span> <span class="mi">1</span>
</span><span id="L-861"><a href="#L-861"><span class="linenos"> 861</span></a>        <span class="k">elif</span> <span class="n">axis</span> <span class="o">==</span> <span class="n">Axis</span><span class="o">.</span><span class="n">Y</span><span class="p">:</span>
</span><span id="L-862"><a href="#L-862"><span class="linenos"> 862</span></a>            <span class="n">sx</span> <span class="o">=</span> <span class="mi">1</span>
</span><span id="L-863"><a href="#L-863"><span class="linenos"> 863</span></a>            <span class="n">sy</span> <span class="o">=</span> <span class="o">-</span><span class="bp">self</span><span class="o">.</span><span class="n">scale</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
</span><span id="L-864"><a href="#L-864"><span class="linenos"> 864</span></a>
</span><span id="L-865"><a href="#L-865"><span class="linenos"> 865</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_xform_matrix</span> <span class="o">=</span> <span class="n">scale_matrix</span><span class="p">(</span><span class="n">sx</span><span class="p">,</span> <span class="n">sy</span><span class="p">)</span> <span class="o">@</span> <span class="bp">self</span><span class="o">.</span><span class="n">_xform_matrix</span>
</span><span id="L-866"><a href="#L-866"><span class="linenos"> 866</span></a>
</span><span id="L-867"><a href="#L-867"><span class="linenos"> 867</span></a>        <span class="k">return</span> <span class="bp">self</span>
</span><span id="L-868"><a href="#L-868"><span class="linenos"> 868</span></a>
</span><span id="L-869"><a href="#L-869"><span class="linenos"> 869</span></a>    <span class="k">def</span> <span class="nf">flip_x_axis</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Self</span><span class="p">:</span>
</span><span id="L-870"><a href="#L-870"><span class="linenos"> 870</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-871"><a href="#L-871"><span class="linenos"> 871</span></a><span class="sd">        Flip the x-axis direction. Warning: This will reverse the positive rotation direction.</span>
</span><span id="L-872"><a href="#L-872"><span class="linenos"> 872</span></a>
</span><span id="L-873"><a href="#L-873"><span class="linenos"> 873</span></a><span class="sd">        Returns:</span>
</span><span id="L-874"><a href="#L-874"><span class="linenos"> 874</span></a><span class="sd">            Self: The canvas object.</span>
</span><span id="L-875"><a href="#L-875"><span class="linenos"> 875</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-876"><a href="#L-876"><span class="linenos"> 876</span></a>        <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span>
</span><span id="L-877"><a href="#L-877"><span class="linenos"> 877</span></a>            <span class="s2">&quot;Flipping the x-axis will change the positive rotation direction.&quot;</span>
</span><span id="L-878"><a href="#L-878"><span class="linenos"> 878</span></a>        <span class="p">)</span>
</span><span id="L-879"><a href="#L-879"><span class="linenos"> 879</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_flip</span><span class="p">(</span><span class="n">Axis</span><span class="o">.</span><span class="n">X</span><span class="p">)</span>
</span><span id="L-880"><a href="#L-880"><span class="linenos"> 880</span></a>
</span><span id="L-881"><a href="#L-881"><span class="linenos"> 881</span></a>    <span class="k">def</span> <span class="nf">flip_y_axis</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Self</span><span class="p">:</span>
</span><span id="L-882"><a href="#L-882"><span class="linenos"> 882</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-883"><a href="#L-883"><span class="linenos"> 883</span></a><span class="sd">        Flip the y-axis direction.</span>
</span><span id="L-884"><a href="#L-884"><span class="linenos"> 884</span></a>
</span><span id="L-885"><a href="#L-885"><span class="linenos"> 885</span></a><span class="sd">        Returns:</span>
</span><span id="L-886"><a href="#L-886"><span class="linenos"> 886</span></a><span class="sd">            Self: The canvas object.</span>
</span><span id="L-887"><a href="#L-887"><span class="linenos"> 887</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-888"><a href="#L-888"><span class="linenos"> 888</span></a>        <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span>
</span><span id="L-889"><a href="#L-889"><span class="linenos"> 889</span></a>            <span class="s2">&quot;Flipping the y-axis will reverse the positive rotation direction.&quot;</span>
</span><span id="L-890"><a href="#L-890"><span class="linenos"> 890</span></a>        <span class="p">)</span>
</span><span id="L-891"><a href="#L-891"><span class="linenos"> 891</span></a>
</span><span id="L-892"><a href="#L-892"><span class="linenos"> 892</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_flip</span><span class="p">(</span><span class="n">Axis</span><span class="o">.</span><span class="n">Y</span><span class="p">)</span>
</span><span id="L-893"><a href="#L-893"><span class="linenos"> 893</span></a>
</span><span id="L-894"><a href="#L-894"><span class="linenos"> 894</span></a>    <span class="nd">@property</span>
</span><span id="L-895"><a href="#L-895"><span class="linenos"> 895</span></a>    <span class="k">def</span> <span class="nf">x</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
</span><span id="L-896"><a href="#L-896"><span class="linenos"> 896</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-897"><a href="#L-897"><span class="linenos"> 897</span></a><span class="sd">        The x coordinate of the canvas origin.</span>
</span><span id="L-898"><a href="#L-898"><span class="linenos"> 898</span></a>
</span><span id="L-899"><a href="#L-899"><span class="linenos"> 899</span></a><span class="sd">        Returns:</span>
</span><span id="L-900"><a href="#L-900"><span class="linenos"> 900</span></a><span class="sd">            float: The x coordinate of the canvas origin.</span>
</span><span id="L-901"><a href="#L-901"><span class="linenos"> 901</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-902"><a href="#L-902"><span class="linenos"> 902</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">pos</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="L-903"><a href="#L-903"><span class="linenos"> 903</span></a>
</span><span id="L-904"><a href="#L-904"><span class="linenos"> 904</span></a>    <span class="nd">@x</span><span class="o">.</span><span class="n">setter</span>
</span><span id="L-905"><a href="#L-905"><span class="linenos"> 905</span></a>    <span class="k">def</span> <span class="nf">x</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-906"><a href="#L-906"><span class="linenos"> 906</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-907"><a href="#L-907"><span class="linenos"> 907</span></a><span class="sd">        Set the x coordinate of the canvas origin.</span>
</span><span id="L-908"><a href="#L-908"><span class="linenos"> 908</span></a>
</span><span id="L-909"><a href="#L-909"><span class="linenos"> 909</span></a><span class="sd">        Args:</span>
</span><span id="L-910"><a href="#L-910"><span class="linenos"> 910</span></a><span class="sd">            value (float): The x coordinate to set.</span>
</span><span id="L-911"><a href="#L-911"><span class="linenos"> 911</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-912"><a href="#L-912"><span class="linenos"> 912</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">pos</span> <span class="o">=</span> <span class="p">[</span><span class="n">value</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">pos</span><span class="p">[</span><span class="mi">1</span><span class="p">]]</span>
</span><span id="L-913"><a href="#L-913"><span class="linenos"> 913</span></a>
</span><span id="L-914"><a href="#L-914"><span class="linenos"> 914</span></a>    <span class="nd">@property</span>
</span><span id="L-915"><a href="#L-915"><span class="linenos"> 915</span></a>    <span class="k">def</span> <span class="nf">y</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
</span><span id="L-916"><a href="#L-916"><span class="linenos"> 916</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-917"><a href="#L-917"><span class="linenos"> 917</span></a><span class="sd">        The y coordinate of the canvas origin.</span>
</span><span id="L-918"><a href="#L-918"><span class="linenos"> 918</span></a>
</span><span id="L-919"><a href="#L-919"><span class="linenos"> 919</span></a><span class="sd">        Returns:</span>
</span><span id="L-920"><a href="#L-920"><span class="linenos"> 920</span></a><span class="sd">            float: The y coordinate of the canvas origin.</span>
</span><span id="L-921"><a href="#L-921"><span class="linenos"> 921</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-922"><a href="#L-922"><span class="linenos"> 922</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">pos</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
</span><span id="L-923"><a href="#L-923"><span class="linenos"> 923</span></a>
</span><span id="L-924"><a href="#L-924"><span class="linenos"> 924</span></a>    <span class="nd">@y</span><span class="o">.</span><span class="n">setter</span>
</span><span id="L-925"><a href="#L-925"><span class="linenos"> 925</span></a>    <span class="k">def</span> <span class="nf">y</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-926"><a href="#L-926"><span class="linenos"> 926</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-927"><a href="#L-927"><span class="linenos"> 927</span></a><span class="sd">        Set the y coordinate of the canvas origin.</span>
</span><span id="L-928"><a href="#L-928"><span class="linenos"> 928</span></a>
</span><span id="L-929"><a href="#L-929"><span class="linenos"> 929</span></a><span class="sd">        Args:</span>
</span><span id="L-930"><a href="#L-930"><span class="linenos"> 930</span></a><span class="sd">            value (float): The y coordinate to set.</span>
</span><span id="L-931"><a href="#L-931"><span class="linenos"> 931</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-932"><a href="#L-932"><span class="linenos"> 932</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">pos</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">pos</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">value</span><span class="p">]</span>
</span><span id="L-933"><a href="#L-933"><span class="linenos"> 933</span></a>
</span><span id="L-934"><a href="#L-934"><span class="linenos"> 934</span></a>    <span class="k">def</span> <span class="nf">batch_graph</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">batch</span><span class="p">:</span> <span class="s2">&quot;Batch&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">nx</span><span class="o">.</span><span class="n">DiGraph</span><span class="p">:</span>
</span><span id="L-935"><a href="#L-935"><span class="linenos"> 935</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-936"><a href="#L-936"><span class="linenos"> 936</span></a><span class="sd">        Return a directed graph of the batch and its elements.</span>
</span><span id="L-937"><a href="#L-937"><span class="linenos"> 937</span></a><span class="sd">        Canvas is the root of the graph.</span>
</span><span id="L-938"><a href="#L-938"><span class="linenos"> 938</span></a><span class="sd">        Graph nodes are the ids of the elements.</span>
</span><span id="L-939"><a href="#L-939"><span class="linenos"> 939</span></a>
</span><span id="L-940"><a href="#L-940"><span class="linenos"> 940</span></a><span class="sd">        Args:</span>
</span><span id="L-941"><a href="#L-941"><span class="linenos"> 941</span></a><span class="sd">            batch (Batch): The batch to create the graph from.</span>
</span><span id="L-942"><a href="#L-942"><span class="linenos"> 942</span></a>
</span><span id="L-943"><a href="#L-943"><span class="linenos"> 943</span></a><span class="sd">        Returns:</span>
</span><span id="L-944"><a href="#L-944"><span class="linenos"> 944</span></a><span class="sd">            nx.DiGraph: The directed graph of the batch and its elements.</span>
</span><span id="L-945"><a href="#L-945"><span class="linenos"> 945</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-946"><a href="#L-946"><span class="linenos"> 946</span></a>
</span><span id="L-947"><a href="#L-947"><span class="linenos"> 947</span></a>        <span class="k">def</span> <span class="nf">add_batch</span><span class="p">(</span><span class="n">batch</span><span class="p">,</span> <span class="n">graph</span><span class="p">):</span>
</span><span id="L-948"><a href="#L-948"><span class="linenos"> 948</span></a>            <span class="n">graph</span><span class="o">.</span><span class="n">add_node</span><span class="p">(</span><span class="n">batch</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
</span><span id="L-949"><a href="#L-949"><span class="linenos"> 949</span></a>            <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">batch</span><span class="o">.</span><span class="n">elements</span><span class="p">:</span>
</span><span id="L-950"><a href="#L-950"><span class="linenos"> 950</span></a>                <span class="n">graph</span><span class="o">.</span><span class="n">add_edge</span><span class="p">(</span><span class="n">batch</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="n">item</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
</span><span id="L-951"><a href="#L-951"><span class="linenos"> 951</span></a>                <span class="k">if</span> <span class="n">item</span><span class="o">.</span><span class="n">subtype</span> <span class="o">==</span> <span class="n">Types</span><span class="o">.</span><span class="n">BATCH</span><span class="p">:</span>
</span><span id="L-952"><a href="#L-952"><span class="linenos"> 952</span></a>                    <span class="n">add_batch</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="n">graph</span><span class="p">)</span>
</span><span id="L-953"><a href="#L-953"><span class="linenos"> 953</span></a>            <span class="k">return</span> <span class="n">graph</span>
</span><span id="L-954"><a href="#L-954"><span class="linenos"> 954</span></a>
</span><span id="L-955"><a href="#L-955"><span class="linenos"> 955</span></a>        <span class="n">di_graph</span> <span class="o">=</span> <span class="n">nx</span><span class="o">.</span><span class="n">DiGraph</span><span class="p">()</span>
</span><span id="L-956"><a href="#L-956"><span class="linenos"> 956</span></a>        <span class="n">di_graph</span><span class="o">.</span><span class="n">add_edge</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="n">batch</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
</span><span id="L-957"><a href="#L-957"><span class="linenos"> 957</span></a>        <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">batch</span><span class="o">.</span><span class="n">elements</span><span class="p">:</span>
</span><span id="L-958"><a href="#L-958"><span class="linenos"> 958</span></a>            <span class="k">if</span> <span class="n">item</span><span class="o">.</span><span class="n">subtype</span> <span class="o">==</span> <span class="n">Types</span><span class="o">.</span><span class="n">BATCH</span><span class="p">:</span>
</span><span id="L-959"><a href="#L-959"><span class="linenos"> 959</span></a>                <span class="n">di_graph</span><span class="o">.</span><span class="n">add_edge</span><span class="p">(</span><span class="n">batch</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="n">item</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
</span><span id="L-960"><a href="#L-960"><span class="linenos"> 960</span></a>                <span class="n">add_batch</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="n">di_graph</span><span class="p">)</span>
</span><span id="L-961"><a href="#L-961"><span class="linenos"> 961</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="L-962"><a href="#L-962"><span class="linenos"> 962</span></a>                <span class="n">di_graph</span><span class="o">.</span><span class="n">add_edge</span><span class="p">(</span><span class="n">batch</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="n">item</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
</span><span id="L-963"><a href="#L-963"><span class="linenos"> 963</span></a>
</span><span id="L-964"><a href="#L-964"><span class="linenos"> 964</span></a>        <span class="k">return</span> <span class="n">di_graph</span>
</span><span id="L-965"><a href="#L-965"><span class="linenos"> 965</span></a>
</span><span id="L-966"><a href="#L-966"><span class="linenos"> 966</span></a>    <span class="k">def</span> <span class="nf">_resolve_property</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item</span><span class="p">:</span> <span class="n">Drawable</span><span class="p">,</span> <span class="n">property_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
</span><span id="L-967"><a href="#L-967"><span class="linenos"> 967</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-968"><a href="#L-968"><span class="linenos"> 968</span></a><span class="sd">        Handles None values for properties.</span>
</span><span id="L-969"><a href="#L-969"><span class="linenos"> 969</span></a><span class="sd">        try item.property_name first,</span>
</span><span id="L-970"><a href="#L-970"><span class="linenos"> 970</span></a><span class="sd">        then try canvas.property_name,</span>
</span><span id="L-971"><a href="#L-971"><span class="linenos"> 971</span></a><span class="sd">        finally use the default value.</span>
</span><span id="L-972"><a href="#L-972"><span class="linenos"> 972</span></a>
</span><span id="L-973"><a href="#L-973"><span class="linenos"> 973</span></a><span class="sd">        Args:</span>
</span><span id="L-974"><a href="#L-974"><span class="linenos"> 974</span></a><span class="sd">            item (Drawable): The item to resolve the property for.</span>
</span><span id="L-975"><a href="#L-975"><span class="linenos"> 975</span></a><span class="sd">            property_name (str): The name of the property to resolve.</span>
</span><span id="L-976"><a href="#L-976"><span class="linenos"> 976</span></a>
</span><span id="L-977"><a href="#L-977"><span class="linenos"> 977</span></a><span class="sd">        Returns:</span>
</span><span id="L-978"><a href="#L-978"><span class="linenos"> 978</span></a><span class="sd">            Any: The resolved property value.</span>
</span><span id="L-979"><a href="#L-979"><span class="linenos"> 979</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-980"><a href="#L-980"><span class="linenos"> 980</span></a>        <span class="n">value</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="n">property_name</span><span class="p">)</span>
</span><span id="L-981"><a href="#L-981"><span class="linenos"> 981</span></a>        <span class="k">if</span> <span class="n">value</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-982"><a href="#L-982"><span class="linenos"> 982</span></a>            <span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__dict__</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">property_name</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
</span><span id="L-983"><a href="#L-983"><span class="linenos"> 983</span></a>            <span class="k">if</span> <span class="n">value</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-984"><a href="#L-984"><span class="linenos"> 984</span></a>                <span class="n">value</span> <span class="o">=</span> <span class="n">defaults</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">property_name</span><span class="p">,</span> <span class="n">VOID</span><span class="p">)</span>
</span><span id="L-985"><a href="#L-985"><span class="linenos"> 985</span></a>            <span class="k">if</span> <span class="n">value</span> <span class="o">==</span> <span class="n">VOID</span><span class="p">:</span>
</span><span id="L-986"><a href="#L-986"><span class="linenos"> 986</span></a>                <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Property </span><span class="si">{</span><span class="n">property_name</span><span class="si">}</span><span class="s2"> is not in defaults.&quot;</span><span class="p">)</span>
</span><span id="L-987"><a href="#L-987"><span class="linenos"> 987</span></a>                <span class="n">value</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="L-988"><a href="#L-988"><span class="linenos"> 988</span></a>        <span class="k">return</span> <span class="n">value</span>
</span><span id="L-989"><a href="#L-989"><span class="linenos"> 989</span></a>
</span><span id="L-990"><a href="#L-990"><span class="linenos"> 990</span></a>    <span class="k">def</span> <span class="nf">get_fonts_list</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
</span><span id="L-991"><a href="#L-991"><span class="linenos"> 991</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-992"><a href="#L-992"><span class="linenos"> 992</span></a><span class="sd">        Get the list of fonts used in the canvas.</span>
</span><span id="L-993"><a href="#L-993"><span class="linenos"> 993</span></a>
</span><span id="L-994"><a href="#L-994"><span class="linenos"> 994</span></a><span class="sd">        Returns:</span>
</span><span id="L-995"><a href="#L-995"><span class="linenos"> 995</span></a><span class="sd">            list[str]: The list of fonts used in the canvas.</span>
</span><span id="L-996"><a href="#L-996"><span class="linenos"> 996</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-997"><a href="#L-997"><span class="linenos"> 997</span></a>        <span class="n">user_fonts</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_font_list</span><span class="p">)</span>
</span><span id="L-998"><a href="#L-998"><span class="linenos"> 998</span></a>
</span><span id="L-999"><a href="#L-999"><span class="linenos"> 999</span></a>        <span class="n">latex_fonts</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span>
</span><span id="L-1000"><a href="#L-1000"><span class="linenos">1000</span></a>            <span class="p">[</span>
</span><span id="L-1001"><a href="#L-1001"><span class="linenos">1001</span></a>                <span class="n">defaults</span><span class="p">[</span><span class="s2">&quot;main_font&quot;</span><span class="p">],</span>
</span><span id="L-1002"><a href="#L-1002"><span class="linenos">1002</span></a>                <span class="n">defaults</span><span class="p">[</span><span class="s2">&quot;sans_font&quot;</span><span class="p">],</span>
</span><span id="L-1003"><a href="#L-1003"><span class="linenos">1003</span></a>                <span class="n">defaults</span><span class="p">[</span><span class="s2">&quot;mono_font&quot;</span><span class="p">],</span>
</span><span id="L-1004"><a href="#L-1004"><span class="linenos">1004</span></a>                <span class="s2">&quot;serif&quot;</span><span class="p">,</span>
</span><span id="L-1005"><a href="#L-1005"><span class="linenos">1005</span></a>                <span class="s2">&quot;sansserif&quot;</span><span class="p">,</span>
</span><span id="L-1006"><a href="#L-1006"><span class="linenos">1006</span></a>                <span class="s2">&quot;monospace&quot;</span><span class="p">,</span>
</span><span id="L-1007"><a href="#L-1007"><span class="linenos">1007</span></a>            <span class="p">]</span>
</span><span id="L-1008"><a href="#L-1008"><span class="linenos">1008</span></a>        <span class="p">)</span>
</span><span id="L-1009"><a href="#L-1009"><span class="linenos">1009</span></a>        <span class="k">for</span> <span class="n">sketch</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">active_page</span><span class="o">.</span><span class="n">sketches</span><span class="p">:</span>
</span><span id="L-1010"><a href="#L-1010"><span class="linenos">1010</span></a>            <span class="k">if</span> <span class="n">sketch</span><span class="o">.</span><span class="n">subtype</span> <span class="o">==</span> <span class="n">Types</span><span class="o">.</span><span class="n">TAG_SKETCH</span><span class="p">:</span>
</span><span id="L-1011"><a href="#L-1011"><span class="linenos">1011</span></a>                <span class="n">name</span> <span class="o">=</span> <span class="n">sketch</span><span class="o">.</span><span class="n">font_family</span>
</span><span id="L-1012"><a href="#L-1012"><span class="linenos">1012</span></a>                <span class="k">if</span> <span class="n">name</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">latex_fonts</span><span class="p">:</span>
</span><span id="L-1013"><a href="#L-1013"><span class="linenos">1013</span></a>                    <span class="n">user_fonts</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
</span><span id="L-1014"><a href="#L-1014"><span class="linenos">1014</span></a>        <span class="k">return</span> <span class="nb">list</span><span class="p">(</span><span class="n">user_fonts</span><span class="o">.</span><span class="n">difference</span><span class="p">(</span><span class="n">latex_fonts</span><span class="p">))</span>
</span><span id="L-1015"><a href="#L-1015"><span class="linenos">1015</span></a>
</span><span id="L-1016"><a href="#L-1016"><span class="linenos">1016</span></a>    <span class="k">def</span> <span class="nf">_calculate_size</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">border</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">b_box</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span> <span class="nb">float</span><span class="p">]:</span>
</span><span id="L-1017"><a href="#L-1017"><span class="linenos">1017</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-1018"><a href="#L-1018"><span class="linenos">1018</span></a><span class="sd">        Calculate the size of the canvas based on the bounding box and border.</span>
</span><span id="L-1019"><a href="#L-1019"><span class="linenos">1019</span></a>
</span><span id="L-1020"><a href="#L-1020"><span class="linenos">1020</span></a><span class="sd">        Args:</span>
</span><span id="L-1021"><a href="#L-1021"><span class="linenos">1021</span></a><span class="sd">            border (float, optional): The border of the canvas, defaults to None.</span>
</span><span id="L-1022"><a href="#L-1022"><span class="linenos">1022</span></a><span class="sd">            b_box (Any, optional): The bounding box of the canvas, defaults to None.</span>
</span><span id="L-1023"><a href="#L-1023"><span class="linenos">1023</span></a>
</span><span id="L-1024"><a href="#L-1024"><span class="linenos">1024</span></a><span class="sd">        Returns:</span>
</span><span id="L-1025"><a href="#L-1025"><span class="linenos">1025</span></a><span class="sd">            Tuple[float, float]: The size of the canvas.</span>
</span><span id="L-1026"><a href="#L-1026"><span class="linenos">1026</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-1027"><a href="#L-1027"><span class="linenos">1027</span></a>        <span class="n">vertices</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_all_vertices</span>
</span><span id="L-1028"><a href="#L-1028"><span class="linenos">1028</span></a>        <span class="k">if</span> <span class="n">vertices</span><span class="p">:</span>
</span><span id="L-1029"><a href="#L-1029"><span class="linenos">1029</span></a>            <span class="k">if</span> <span class="n">b_box</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-1030"><a href="#L-1030"><span class="linenos">1030</span></a>                <span class="n">b_box</span> <span class="o">=</span> <span class="n">bounding_box</span><span class="p">(</span><span class="n">vertices</span><span class="p">)</span>
</span><span id="L-1031"><a href="#L-1031"><span class="linenos">1031</span></a>
</span><span id="L-1032"><a href="#L-1032"><span class="linenos">1032</span></a>            <span class="k">if</span> <span class="n">border</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-1033"><a href="#L-1033"><span class="linenos">1033</span></a>                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">border</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-1034"><a href="#L-1034"><span class="linenos">1034</span></a>                    <span class="n">border</span> <span class="o">=</span> <span class="n">defaults</span><span class="p">[</span><span class="s2">&quot;border&quot;</span><span class="p">]</span>
</span><span id="L-1035"><a href="#L-1035"><span class="linenos">1035</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="L-1036"><a href="#L-1036"><span class="linenos">1036</span></a>                    <span class="n">border</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">border</span>
</span><span id="L-1037"><a href="#L-1037"><span class="linenos">1037</span></a>            <span class="n">w</span> <span class="o">=</span> <span class="n">b_box</span><span class="o">.</span><span class="n">width</span> <span class="o">+</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">border</span>
</span><span id="L-1038"><a href="#L-1038"><span class="linenos">1038</span></a>            <span class="n">h</span> <span class="o">=</span> <span class="n">b_box</span><span class="o">.</span><span class="n">height</span> <span class="o">+</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">border</span>
</span><span id="L-1039"><a href="#L-1039"><span class="linenos">1039</span></a>            <span class="n">offset_x</span><span class="p">,</span> <span class="n">offset_y</span> <span class="o">=</span> <span class="n">b_box</span><span class="o">.</span><span class="n">southwest</span>
</span><span id="L-1040"><a href="#L-1040"><span class="linenos">1040</span></a>            <span class="n">res</span> <span class="o">=</span> <span class="n">w</span><span class="p">,</span> <span class="n">h</span><span class="p">,</span> <span class="n">offset_x</span> <span class="o">-</span> <span class="n">border</span><span class="p">,</span> <span class="n">offset_y</span> <span class="o">-</span> <span class="n">border</span>
</span><span id="L-1041"><a href="#L-1041"><span class="linenos">1041</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="L-1042"><a href="#L-1042"><span class="linenos">1042</span></a>            <span class="n">res</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="L-1043"><a href="#L-1043"><span class="linenos">1043</span></a>        <span class="k">return</span> <span class="n">res</span>
</span><span id="L-1044"><a href="#L-1044"><span class="linenos">1044</span></a>
</span><span id="L-1045"><a href="#L-1045"><span class="linenos">1045</span></a>    <span class="k">def</span> <span class="nf">_show_browser</span><span class="p">(</span>
</span><span id="L-1046"><a href="#L-1046"><span class="linenos">1046</span></a>        <span class="bp">self</span><span class="p">,</span> <span class="n">file_path</span><span class="p">:</span> <span class="n">Path</span><span class="p">,</span> <span class="n">show_browser</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span> <span class="n">multi_page_svg</span><span class="p">:</span> <span class="nb">bool</span>
</span><span id="L-1047"><a href="#L-1047"><span class="linenos">1047</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-1048"><a href="#L-1048"><span class="linenos">1048</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-1049"><a href="#L-1049"><span class="linenos">1049</span></a><span class="sd">        Show the file in the browser.</span>
</span><span id="L-1050"><a href="#L-1050"><span class="linenos">1050</span></a>
</span><span id="L-1051"><a href="#L-1051"><span class="linenos">1051</span></a><span class="sd">        Args:</span>
</span><span id="L-1052"><a href="#L-1052"><span class="linenos">1052</span></a><span class="sd">            file_path (Path): The path to the file.</span>
</span><span id="L-1053"><a href="#L-1053"><span class="linenos">1053</span></a><span class="sd">            show_browser (bool): Whether to show the file in the browser.</span>
</span><span id="L-1054"><a href="#L-1054"><span class="linenos">1054</span></a><span class="sd">            multi_page_svg (bool): Whether the file is a multi-page SVG.</span>
</span><span id="L-1055"><a href="#L-1055"><span class="linenos">1055</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-1056"><a href="#L-1056"><span class="linenos">1056</span></a>        <span class="k">if</span> <span class="n">show_browser</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-1057"><a href="#L-1057"><span class="linenos">1057</span></a>            <span class="n">show_browser</span> <span class="o">=</span> <span class="n">defaults</span><span class="p">[</span><span class="s2">&quot;show_browser&quot;</span><span class="p">]</span>
</span><span id="L-1058"><a href="#L-1058"><span class="linenos">1058</span></a>        <span class="k">if</span> <span class="n">show_browser</span><span class="p">:</span>
</span><span id="L-1059"><a href="#L-1059"><span class="linenos">1059</span></a>            <span class="n">file_path</span> <span class="o">=</span> <span class="s2">&quot;file:///&quot;</span> <span class="o">+</span> <span class="n">file_path</span>
</span><span id="L-1060"><a href="#L-1060"><span class="linenos">1060</span></a>            <span class="k">if</span> <span class="n">multi_page_svg</span><span class="p">:</span>
</span><span id="L-1061"><a href="#L-1061"><span class="linenos">1061</span></a>                <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pages</span><span class="p">):</span>
</span><span id="L-1062"><a href="#L-1062"><span class="linenos">1062</span></a>                    <span class="n">f_path</span> <span class="o">=</span> <span class="n">file_path</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;.svg&quot;</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;_page</span><span class="si">{</span><span class="n">i</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="si">}</span><span class="s2">.svg&quot;</span><span class="p">)</span>
</span><span id="L-1063"><a href="#L-1063"><span class="linenos">1063</span></a>                    <span class="n">webbrowser</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">f_path</span><span class="p">)</span>
</span><span id="L-1064"><a href="#L-1064"><span class="linenos">1064</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="L-1065"><a href="#L-1065"><span class="linenos">1065</span></a>                <span class="n">webbrowser</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">file_path</span><span class="p">)</span>
</span><span id="L-1066"><a href="#L-1066"><span class="linenos">1066</span></a>
</span><span id="L-1067"><a href="#L-1067"><span class="linenos">1067</span></a>    <span class="k">def</span> <span class="nf">save</span><span class="p">(</span>
</span><span id="L-1068"><a href="#L-1068"><span class="linenos">1068</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="L-1069"><a href="#L-1069"><span class="linenos">1069</span></a>        <span class="n">file_path</span><span class="p">:</span> <span class="n">Path</span><span class="p">,</span>
</span><span id="L-1070"><a href="#L-1070"><span class="linenos">1070</span></a>        <span class="n">overwrite</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="L-1071"><a href="#L-1071"><span class="linenos">1071</span></a>        <span class="n">show</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="L-1072"><a href="#L-1072"><span class="linenos">1072</span></a>        <span class="n">print_output</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
</span><span id="L-1073"><a href="#L-1073"><span class="linenos">1073</span></a>        <span class="n">remove_aux</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
</span><span id="L-1074"><a href="#L-1074"><span class="linenos">1074</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Self</span><span class="p">:</span>
</span><span id="L-1075"><a href="#L-1075"><span class="linenos">1075</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-1076"><a href="#L-1076"><span class="linenos">1076</span></a><span class="sd">        Save the canvas to a file.</span>
</span><span id="L-1077"><a href="#L-1077"><span class="linenos">1077</span></a>
</span><span id="L-1078"><a href="#L-1078"><span class="linenos">1078</span></a><span class="sd">        Args:</span>
</span><span id="L-1079"><a href="#L-1079"><span class="linenos">1079</span></a><span class="sd">            file_path (Path, optional): The path to save the file.</span>
</span><span id="L-1080"><a href="#L-1080"><span class="linenos">1080</span></a><span class="sd">            overwrite (bool, optional): Whether to overwrite the file if it exists.</span>
</span><span id="L-1081"><a href="#L-1081"><span class="linenos">1081</span></a><span class="sd">            show (bool, optional): Whether to show the file in the browser.</span>
</span><span id="L-1082"><a href="#L-1082"><span class="linenos">1082</span></a><span class="sd">            print_output (bool, optional): Whether to print the output of the compilation.</span>
</span><span id="L-1083"><a href="#L-1083"><span class="linenos">1083</span></a>
</span><span id="L-1084"><a href="#L-1084"><span class="linenos">1084</span></a><span class="sd">        Returns:</span>
</span><span id="L-1085"><a href="#L-1085"><span class="linenos">1085</span></a><span class="sd">            Self: The canvas object.</span>
</span><span id="L-1086"><a href="#L-1086"><span class="linenos">1086</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-1087"><a href="#L-1087"><span class="linenos">1087</span></a>
</span><span id="L-1088"><a href="#L-1088"><span class="linenos">1088</span></a>        <span class="k">def</span> <span class="nf">validate_file_path</span><span class="p">(</span><span class="n">file_path</span><span class="p">:</span> <span class="n">Path</span><span class="p">,</span> <span class="n">overwrite</span><span class="p">:</span> <span class="nb">bool</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Result</span><span class="p">:</span>
</span><span id="L-1089"><a href="#L-1089"><span class="linenos">1089</span></a><span class="w">            </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-1090"><a href="#L-1090"><span class="linenos">1090</span></a><span class="sd">            Validate the file path.</span>
</span><span id="L-1091"><a href="#L-1091"><span class="linenos">1091</span></a>
</span><span id="L-1092"><a href="#L-1092"><span class="linenos">1092</span></a><span class="sd">            Args:</span>
</span><span id="L-1093"><a href="#L-1093"><span class="linenos">1093</span></a><span class="sd">                file_path (Path): The path to the file.</span>
</span><span id="L-1094"><a href="#L-1094"><span class="linenos">1094</span></a><span class="sd">                overwrite (bool): Whether to overwrite the file if it exists.</span>
</span><span id="L-1095"><a href="#L-1095"><span class="linenos">1095</span></a>
</span><span id="L-1096"><a href="#L-1096"><span class="linenos">1096</span></a><span class="sd">            Returns:</span>
</span><span id="L-1097"><a href="#L-1097"><span class="linenos">1097</span></a><span class="sd">                Result: The parent directory, file name, and extension.</span>
</span><span id="L-1098"><a href="#L-1098"><span class="linenos">1098</span></a><span class="sd">            &quot;&quot;&quot;</span>
</span><span id="L-1099"><a href="#L-1099"><span class="linenos">1099</span></a>            <span class="n">path_exists</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">file_path</span><span class="p">)</span>
</span><span id="L-1100"><a href="#L-1100"><span class="linenos">1100</span></a>            <span class="k">if</span> <span class="n">path_exists</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">overwrite</span><span class="p">:</span>
</span><span id="L-1101"><a href="#L-1101"><span class="linenos">1101</span></a>                <span class="k">raise</span> <span class="ne">FileExistsError</span><span class="p">(</span>
</span><span id="L-1102"><a href="#L-1102"><span class="linenos">1102</span></a>                    <span class="sa">f</span><span class="s2">&quot;File </span><span class="si">{</span><span class="n">file_path</span><span class="si">}</span><span class="s2"> already exists. </span><span class="se">\n</span><span class="s2">&quot;</span>
</span><span id="L-1103"><a href="#L-1103"><span class="linenos">1103</span></a>                    <span class="s2">&quot;Use canvas.save(file_path, overwrite=True) to overwrite the file.&quot;</span>
</span><span id="L-1104"><a href="#L-1104"><span class="linenos">1104</span></a>                <span class="p">)</span>
</span><span id="L-1105"><a href="#L-1105"><span class="linenos">1105</span></a>            <span class="n">parent_dir</span><span class="p">,</span> <span class="n">file_name</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">file_path</span><span class="p">)</span>
</span><span id="L-1106"><a href="#L-1106"><span class="linenos">1106</span></a>            <span class="n">file_name</span><span class="p">,</span> <span class="n">extension</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">splitext</span><span class="p">(</span><span class="n">file_name</span><span class="p">)</span>
</span><span id="L-1107"><a href="#L-1107"><span class="linenos">1107</span></a>            <span class="k">if</span> <span class="n">extension</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;.pdf&quot;</span><span class="p">,</span> <span class="s2">&quot;.eps&quot;</span><span class="p">,</span> <span class="s2">&quot;.ps&quot;</span><span class="p">,</span> <span class="s2">&quot;.svg&quot;</span><span class="p">,</span> <span class="s2">&quot;.png&quot;</span><span class="p">,</span> <span class="s2">&quot;.tex&quot;</span><span class="p">]:</span>
</span><span id="L-1108"><a href="#L-1108"><span class="linenos">1108</span></a>                <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s2">&quot;File type is not supported.&quot;</span><span class="p">)</span>
</span><span id="L-1109"><a href="#L-1109"><span class="linenos">1109</span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">parent_dir</span><span class="p">):</span>
</span><span id="L-1110"><a href="#L-1110"><span class="linenos">1110</span></a>                <span class="k">raise</span> <span class="ne">NotADirectoryError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Directory </span><span class="si">{</span><span class="n">parent_dir</span><span class="si">}</span><span class="s2"> does not exist.&quot;</span><span class="p">)</span>
</span><span id="L-1111"><a href="#L-1111"><span class="linenos">1111</span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">access</span><span class="p">(</span><span class="n">parent_dir</span><span class="p">,</span> <span class="n">os</span><span class="o">.</span><span class="n">W_OK</span><span class="p">):</span>
</span><span id="L-1112"><a href="#L-1112"><span class="linenos">1112</span></a>                <span class="k">raise</span> <span class="ne">PermissionError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Directory </span><span class="si">{</span><span class="n">parent_dir</span><span class="si">}</span><span class="s2"> is not writable.&quot;</span><span class="p">)</span>
</span><span id="L-1113"><a href="#L-1113"><span class="linenos">1113</span></a>
</span><span id="L-1114"><a href="#L-1114"><span class="linenos">1114</span></a>            <span class="k">return</span> <span class="n">parent_dir</span><span class="p">,</span> <span class="n">file_name</span><span class="p">,</span> <span class="n">extension</span>
</span><span id="L-1115"><a href="#L-1115"><span class="linenos">1115</span></a>
</span><span id="L-1116"><a href="#L-1116"><span class="linenos">1116</span></a>        <span class="k">def</span> <span class="nf">compile_tex</span><span class="p">(</span><span class="n">cmd</span><span class="p">):</span>
</span><span id="L-1117"><a href="#L-1117"><span class="linenos">1117</span></a><span class="w">            </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-1118"><a href="#L-1118"><span class="linenos">1118</span></a><span class="sd">            Compile the TeX file.</span>
</span><span id="L-1119"><a href="#L-1119"><span class="linenos">1119</span></a>
</span><span id="L-1120"><a href="#L-1120"><span class="linenos">1120</span></a><span class="sd">            Args:</span>
</span><span id="L-1121"><a href="#L-1121"><span class="linenos">1121</span></a><span class="sd">                cmd (str): The command to compile the TeX file.</span>
</span><span id="L-1122"><a href="#L-1122"><span class="linenos">1122</span></a>
</span><span id="L-1123"><a href="#L-1123"><span class="linenos">1123</span></a><span class="sd">            Returns:</span>
</span><span id="L-1124"><a href="#L-1124"><span class="linenos">1124</span></a><span class="sd">                str: The output of the compilation.</span>
</span><span id="L-1125"><a href="#L-1125"><span class="linenos">1125</span></a><span class="sd">            &quot;&quot;&quot;</span>
</span><span id="L-1126"><a href="#L-1126"><span class="linenos">1126</span></a>            <span class="n">os</span><span class="o">.</span><span class="n">chdir</span><span class="p">(</span><span class="n">parent_dir</span><span class="p">)</span>
</span><span id="L-1127"><a href="#L-1127"><span class="linenos">1127</span></a>            <span class="k">with</span> <span class="n">subprocess</span><span class="o">.</span><span class="n">Popen</span><span class="p">(</span>
</span><span id="L-1128"><a href="#L-1128"><span class="linenos">1128</span></a>                <span class="n">cmd</span><span class="p">,</span>
</span><span id="L-1129"><a href="#L-1129"><span class="linenos">1129</span></a>                <span class="n">stdin</span><span class="o">=</span><span class="n">subprocess</span><span class="o">.</span><span class="n">PIPE</span><span class="p">,</span>
</span><span id="L-1130"><a href="#L-1130"><span class="linenos">1130</span></a>                <span class="n">stdout</span><span class="o">=</span><span class="n">subprocess</span><span class="o">.</span><span class="n">PIPE</span><span class="p">,</span>
</span><span id="L-1131"><a href="#L-1131"><span class="linenos">1131</span></a>                <span class="n">shell</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
</span><span id="L-1132"><a href="#L-1132"><span class="linenos">1132</span></a>                <span class="n">text</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
</span><span id="L-1133"><a href="#L-1133"><span class="linenos">1133</span></a>            <span class="p">)</span> <span class="k">as</span> <span class="n">p</span><span class="p">:</span>
</span><span id="L-1134"><a href="#L-1134"><span class="linenos">1134</span></a>                <span class="n">output</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="n">communicate</span><span class="p">(</span><span class="s2">&quot;_s</span><span class="se">\n</span><span class="s2">_l</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="L-1135"><a href="#L-1135"><span class="linenos">1135</span></a>            <span class="k">if</span> <span class="n">print_output</span><span class="p">:</span>
</span><span id="L-1136"><a href="#L-1136"><span class="linenos">1136</span></a>                <span class="nb">print</span><span class="p">(</span><span class="n">output</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)[</span><span class="o">-</span><span class="mi">3</span><span class="p">:])</span>
</span><span id="L-1137"><a href="#L-1137"><span class="linenos">1137</span></a>            <span class="k">return</span> <span class="n">output</span>
</span><span id="L-1138"><a href="#L-1138"><span class="linenos">1138</span></a>
</span><span id="L-1139"><a href="#L-1139"><span class="linenos">1139</span></a>        <span class="k">def</span> <span class="nf">remove_aux_files</span><span class="p">(</span><span class="n">file_path</span><span class="p">):</span>
</span><span id="L-1140"><a href="#L-1140"><span class="linenos">1140</span></a><span class="w">            </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-1141"><a href="#L-1141"><span class="linenos">1141</span></a><span class="sd">            Remove auxiliary files generated during compilation.</span>
</span><span id="L-1142"><a href="#L-1142"><span class="linenos">1142</span></a>
</span><span id="L-1143"><a href="#L-1143"><span class="linenos">1143</span></a><span class="sd">            Args:</span>
</span><span id="L-1144"><a href="#L-1144"><span class="linenos">1144</span></a><span class="sd">                file_path (Path): The path to the file.</span>
</span><span id="L-1145"><a href="#L-1145"><span class="linenos">1145</span></a><span class="sd">            &quot;&quot;&quot;</span>
</span><span id="L-1146"><a href="#L-1146"><span class="linenos">1146</span></a>            <span class="n">time_out</span> <span class="o">=</span> <span class="mi">1</span>  <span class="c1"># seconds</span>
</span><span id="L-1147"><a href="#L-1147"><span class="linenos">1147</span></a>            <span class="n">parent_dir</span><span class="p">,</span> <span class="n">file_name</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">file_path</span><span class="p">)</span>
</span><span id="L-1148"><a href="#L-1148"><span class="linenos">1148</span></a>            <span class="n">file_name</span><span class="p">,</span> <span class="n">extension</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">splitext</span><span class="p">(</span><span class="n">file_name</span><span class="p">)</span>
</span><span id="L-1149"><a href="#L-1149"><span class="linenos">1149</span></a>            <span class="n">aux_file</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">parent_dir</span><span class="p">,</span> <span class="n">file_name</span> <span class="o">+</span> <span class="s2">&quot;.aux&quot;</span><span class="p">)</span>
</span><span id="L-1150"><a href="#L-1150"><span class="linenos">1150</span></a>            <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">aux_file</span><span class="p">):</span>
</span><span id="L-1151"><a href="#L-1151"><span class="linenos">1151</span></a>                <span class="k">if</span> <span class="ow">not</span> <span class="n">wait_for_file_availability</span><span class="p">(</span><span class="n">aux_file</span><span class="p">,</span> <span class="n">time_out</span><span class="p">):</span>
</span><span id="L-1152"><a href="#L-1152"><span class="linenos">1152</span></a>                    <span class="nb">print</span><span class="p">(</span>
</span><span id="L-1153"><a href="#L-1153"><span class="linenos">1153</span></a>                        <span class="p">(</span>
</span><span id="L-1154"><a href="#L-1154"><span class="linenos">1154</span></a>                            <span class="sa">f</span><span class="s2">&quot;File &#39;</span><span class="si">{</span><span class="n">aux_file</span><span class="si">}</span><span class="s2">&#39; is not available after waiting for &quot;</span>
</span><span id="L-1155"><a href="#L-1155"><span class="linenos">1155</span></a>                            <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">time_out</span><span class="si">}</span><span class="s2"> seconds.&quot;</span>
</span><span id="L-1156"><a href="#L-1156"><span class="linenos">1156</span></a>                        <span class="p">)</span>
</span><span id="L-1157"><a href="#L-1157"><span class="linenos">1157</span></a>                    <span class="p">)</span>
</span><span id="L-1158"><a href="#L-1158"><span class="linenos">1158</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="L-1159"><a href="#L-1159"><span class="linenos">1159</span></a>                    <span class="n">os</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">aux_file</span><span class="p">)</span>
</span><span id="L-1160"><a href="#L-1160"><span class="linenos">1160</span></a>            <span class="n">log_file</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">parent_dir</span><span class="p">,</span> <span class="n">file_name</span> <span class="o">+</span> <span class="s2">&quot;.log&quot;</span><span class="p">)</span>
</span><span id="L-1161"><a href="#L-1161"><span class="linenos">1161</span></a>            <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">log_file</span><span class="p">):</span>
</span><span id="L-1162"><a href="#L-1162"><span class="linenos">1162</span></a>                <span class="k">if</span> <span class="ow">not</span> <span class="n">wait_for_file_availability</span><span class="p">(</span><span class="n">log_file</span><span class="p">,</span> <span class="n">time_out</span><span class="p">):</span>
</span><span id="L-1163"><a href="#L-1163"><span class="linenos">1163</span></a>                    <span class="nb">print</span><span class="p">(</span>
</span><span id="L-1164"><a href="#L-1164"><span class="linenos">1164</span></a>                        <span class="p">(</span>
</span><span id="L-1165"><a href="#L-1165"><span class="linenos">1165</span></a>                            <span class="sa">f</span><span class="s2">&quot;File &#39;</span><span class="si">{</span><span class="n">log_file</span><span class="si">}</span><span class="s2">&#39; is not available after waiting for &quot;</span>
</span><span id="L-1166"><a href="#L-1166"><span class="linenos">1166</span></a>                            <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">time_out</span><span class="si">}</span><span class="s2"> seconds.&quot;</span>
</span><span id="L-1167"><a href="#L-1167"><span class="linenos">1167</span></a>                        <span class="p">)</span>
</span><span id="L-1168"><a href="#L-1168"><span class="linenos">1168</span></a>                    <span class="p">)</span>
</span><span id="L-1169"><a href="#L-1169"><span class="linenos">1169</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="L-1170"><a href="#L-1170"><span class="linenos">1170</span></a>                    <span class="k">if</span> <span class="ow">not</span> <span class="n">defaults</span><span class="p">[</span><span class="s2">&quot;keep_log_files&quot;</span><span class="p">]:</span>
</span><span id="L-1171"><a href="#L-1171"><span class="linenos">1171</span></a>                        <span class="n">os</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">log_file</span><span class="p">)</span>
</span><span id="L-1172"><a href="#L-1172"><span class="linenos">1172</span></a>            <span class="n">tex_file</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">parent_dir</span><span class="p">,</span> <span class="n">file_name</span> <span class="o">+</span> <span class="s2">&quot;.tex&quot;</span><span class="p">)</span>
</span><span id="L-1173"><a href="#L-1173"><span class="linenos">1173</span></a>            <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">tex_file</span><span class="p">):</span>
</span><span id="L-1174"><a href="#L-1174"><span class="linenos">1174</span></a>                <span class="k">if</span> <span class="ow">not</span> <span class="n">wait_for_file_availability</span><span class="p">(</span><span class="n">tex_file</span><span class="p">,</span> <span class="n">time_out</span><span class="p">):</span>
</span><span id="L-1175"><a href="#L-1175"><span class="linenos">1175</span></a>                    <span class="nb">print</span><span class="p">(</span>
</span><span id="L-1176"><a href="#L-1176"><span class="linenos">1176</span></a>                        <span class="p">(</span>
</span><span id="L-1177"><a href="#L-1177"><span class="linenos">1177</span></a>                            <span class="sa">f</span><span class="s2">&quot;File &#39;</span><span class="si">{</span><span class="n">tex_file</span><span class="si">}</span><span class="s2">&#39; is not available after waiting for &quot;</span>
</span><span id="L-1178"><a href="#L-1178"><span class="linenos">1178</span></a>                            <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">time_out</span><span class="si">}</span><span class="s2"> seconds.&quot;</span>
</span><span id="L-1179"><a href="#L-1179"><span class="linenos">1179</span></a>                        <span class="p">)</span>
</span><span id="L-1180"><a href="#L-1180"><span class="linenos">1180</span></a>                    <span class="p">)</span>
</span><span id="L-1181"><a href="#L-1181"><span class="linenos">1181</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="L-1182"><a href="#L-1182"><span class="linenos">1182</span></a>                    <span class="n">os</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">tex_file</span><span class="p">)</span>
</span><span id="L-1183"><a href="#L-1183"><span class="linenos">1183</span></a>            <span class="n">file_name</span><span class="p">,</span> <span class="n">extension</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">splitext</span><span class="p">(</span><span class="n">file_name</span><span class="p">)</span>
</span><span id="L-1184"><a href="#L-1184"><span class="linenos">1184</span></a>            <span class="k">if</span> <span class="n">extension</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;.pdf&quot;</span><span class="p">,</span> <span class="s2">&quot;.tex&quot;</span><span class="p">]:</span>
</span><span id="L-1185"><a href="#L-1185"><span class="linenos">1185</span></a>                <span class="n">pdf_file</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">parent_dir</span><span class="p">,</span> <span class="n">file_name</span> <span class="o">+</span> <span class="s2">&quot;.pdf&quot;</span><span class="p">)</span>
</span><span id="L-1186"><a href="#L-1186"><span class="linenos">1186</span></a>                <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">pdf_file</span><span class="p">):</span>
</span><span id="L-1187"><a href="#L-1187"><span class="linenos">1187</span></a>                    <span class="k">if</span> <span class="ow">not</span> <span class="n">wait_for_file_availability</span><span class="p">(</span><span class="n">pdf_file</span><span class="p">,</span> <span class="n">time_out</span><span class="p">):</span>
</span><span id="L-1188"><a href="#L-1188"><span class="linenos">1188</span></a>                        <span class="nb">print</span><span class="p">(</span>
</span><span id="L-1189"><a href="#L-1189"><span class="linenos">1189</span></a>                            <span class="p">(</span>
</span><span id="L-1190"><a href="#L-1190"><span class="linenos">1190</span></a>                                <span class="sa">f</span><span class="s2">&quot;File &#39;</span><span class="si">{</span><span class="n">pdf_file</span><span class="si">}</span><span class="s2">&#39; is not available after waiting for &quot;</span>
</span><span id="L-1191"><a href="#L-1191"><span class="linenos">1191</span></a>                                <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">time_out</span><span class="si">}</span><span class="s2"> seconds.&quot;</span>
</span><span id="L-1192"><a href="#L-1192"><span class="linenos">1192</span></a>                            <span class="p">)</span>
</span><span id="L-1193"><a href="#L-1193"><span class="linenos">1193</span></a>                        <span class="p">)</span>
</span><span id="L-1194"><a href="#L-1194"><span class="linenos">1194</span></a>                    <span class="k">else</span><span class="p">:</span>
</span><span id="L-1195"><a href="#L-1195"><span class="linenos">1195</span></a>                        <span class="c1"># os.remove(pdf_file)</span>
</span><span id="L-1196"><a href="#L-1196"><span class="linenos">1196</span></a>                        <span class="k">pass</span>
</span><span id="L-1197"><a href="#L-1197"><span class="linenos">1197</span></a>            <span class="n">log_file</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">parent_dir</span><span class="p">,</span> <span class="s2">&quot;simetri.log&quot;</span><span class="p">)</span>
</span><span id="L-1198"><a href="#L-1198"><span class="linenos">1198</span></a>            <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">log_file</span><span class="p">):</span>
</span><span id="L-1199"><a href="#L-1199"><span class="linenos">1199</span></a>                <span class="k">try</span><span class="p">:</span>
</span><span id="L-1200"><a href="#L-1200"><span class="linenos">1200</span></a>                    <span class="n">os</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">log_file</span><span class="p">)</span>
</span><span id="L-1201"><a href="#L-1201"><span class="linenos">1201</span></a>                <span class="k">except</span> <span class="ne">PermissionError</span><span class="p">:</span>
</span><span id="L-1202"><a href="#L-1202"><span class="linenos">1202</span></a>                    <span class="c1"># to do: log the error</span>
</span><span id="L-1203"><a href="#L-1203"><span class="linenos">1203</span></a>                    <span class="k">pass</span>
</span><span id="L-1204"><a href="#L-1204"><span class="linenos">1204</span></a>
</span><span id="L-1205"><a href="#L-1205"><span class="linenos">1205</span></a>        <span class="k">def</span> <span class="nf">run_job</span><span class="p">():</span>
</span><span id="L-1206"><a href="#L-1206"><span class="linenos">1206</span></a><span class="w">            </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-1207"><a href="#L-1207"><span class="linenos">1207</span></a><span class="sd">            Run the job to compile and save the file.</span>
</span><span id="L-1208"><a href="#L-1208"><span class="linenos">1208</span></a>
</span><span id="L-1209"><a href="#L-1209"><span class="linenos">1209</span></a><span class="sd">            Returns:</span>
</span><span id="L-1210"><a href="#L-1210"><span class="linenos">1210</span></a><span class="sd">                None</span>
</span><span id="L-1211"><a href="#L-1211"><span class="linenos">1211</span></a><span class="sd">            &quot;&quot;&quot;</span>
</span><span id="L-1212"><a href="#L-1212"><span class="linenos">1212</span></a>            <span class="n">output_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">parent_dir</span><span class="p">,</span> <span class="n">file_name</span> <span class="o">+</span> <span class="n">extension</span><span class="p">)</span>
</span><span id="L-1213"><a href="#L-1213"><span class="linenos">1213</span></a>            <span class="n">cmd</span> <span class="o">=</span> <span class="s2">&quot;xelatex &quot;</span> <span class="o">+</span> <span class="n">tex_path</span> <span class="o">+</span> <span class="s2">&quot; --output-directory &quot;</span> <span class="o">+</span> <span class="n">parent_dir</span>
</span><span id="L-1214"><a href="#L-1214"><span class="linenos">1214</span></a>            <span class="n">res</span> <span class="o">=</span> <span class="n">compile_tex</span><span class="p">(</span><span class="n">cmd</span><span class="p">)</span>
</span><span id="L-1215"><a href="#L-1215"><span class="linenos">1215</span></a>            <span class="k">if</span> <span class="s2">&quot;No pages of output&quot;</span> <span class="ow">in</span> <span class="n">res</span><span class="p">:</span>
</span><span id="L-1216"><a href="#L-1216"><span class="linenos">1216</span></a>                <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s2">&quot;Failed to compile the tex file.&quot;</span><span class="p">)</span>
</span><span id="L-1217"><a href="#L-1217"><span class="linenos">1217</span></a>            <span class="n">pdf_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">parent_dir</span><span class="p">,</span> <span class="n">file_name</span> <span class="o">+</span> <span class="s2">&quot;.pdf&quot;</span><span class="p">)</span>
</span><span id="L-1218"><a href="#L-1218"><span class="linenos">1218</span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">pdf_path</span><span class="p">):</span>
</span><span id="L-1219"><a href="#L-1219"><span class="linenos">1219</span></a>                <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s2">&quot;Failed to compile the tex file.&quot;</span><span class="p">)</span>
</span><span id="L-1220"><a href="#L-1220"><span class="linenos">1220</span></a>
</span><span id="L-1221"><a href="#L-1221"><span class="linenos">1221</span></a>            <span class="k">if</span> <span class="n">extension</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;.eps&quot;</span><span class="p">,</span> <span class="s2">&quot;.ps&quot;</span><span class="p">]:</span>
</span><span id="L-1222"><a href="#L-1222"><span class="linenos">1222</span></a>                <span class="n">ps_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">parent_dir</span><span class="p">,</span> <span class="n">file_name</span> <span class="o">+</span> <span class="n">extension</span><span class="p">)</span>
</span><span id="L-1223"><a href="#L-1223"><span class="linenos">1223</span></a>                <span class="n">os</span><span class="o">.</span><span class="n">chdir</span><span class="p">(</span><span class="n">parent_dir</span><span class="p">)</span>
</span><span id="L-1224"><a href="#L-1224"><span class="linenos">1224</span></a>                <span class="n">cmd</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;pdf2ps </span><span class="si">{</span><span class="n">pdf_path</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">ps_path</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="L-1225"><a href="#L-1225"><span class="linenos">1225</span></a>                <span class="n">res</span> <span class="o">=</span> <span class="n">subprocess</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">cmd</span><span class="p">,</span> <span class="n">shell</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">check</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</span><span id="L-1226"><a href="#L-1226"><span class="linenos">1226</span></a>                <span class="k">if</span> <span class="n">res</span><span class="o">.</span><span class="n">returncode</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="L-1227"><a href="#L-1227"><span class="linenos">1227</span></a>                    <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s2">&quot;Failed to convert pdf to ps.&quot;</span><span class="p">)</span>
</span><span id="L-1228"><a href="#L-1228"><span class="linenos">1228</span></a>            <span class="k">elif</span> <span class="n">extension</span> <span class="o">==</span> <span class="s2">&quot;.svg&quot;</span><span class="p">:</span>
</span><span id="L-1229"><a href="#L-1229"><span class="linenos">1229</span></a>                <span class="n">doc</span> <span class="o">=</span> <span class="n">fitz</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">pdf_path</span><span class="p">)</span>
</span><span id="L-1230"><a href="#L-1230"><span class="linenos">1230</span></a>                <span class="n">page</span> <span class="o">=</span> <span class="n">doc</span><span class="o">.</span><span class="n">load_page</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
</span><span id="L-1231"><a href="#L-1231"><span class="linenos">1231</span></a>                <span class="n">svg</span> <span class="o">=</span> <span class="n">page</span><span class="o">.</span><span class="n">get_svg_image</span><span class="p">()</span>
</span><span id="L-1232"><a href="#L-1232"><span class="linenos">1232</span></a>                <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">output_path</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s2">&quot;utf-8&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
</span><span id="L-1233"><a href="#L-1233"><span class="linenos">1233</span></a>                    <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">svg</span><span class="p">)</span>
</span><span id="L-1234"><a href="#L-1234"><span class="linenos">1234</span></a>            <span class="k">elif</span> <span class="n">extension</span> <span class="o">==</span> <span class="s2">&quot;.png&quot;</span><span class="p">:</span>
</span><span id="L-1235"><a href="#L-1235"><span class="linenos">1235</span></a>                <span class="n">pdf_file</span> <span class="o">=</span> <span class="n">fitz</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">pdf_path</span><span class="p">)</span>
</span><span id="L-1236"><a href="#L-1236"><span class="linenos">1236</span></a>                <span class="n">page</span> <span class="o">=</span> <span class="n">pdf_file</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="L-1237"><a href="#L-1237"><span class="linenos">1237</span></a>                <span class="n">pix</span> <span class="o">=</span> <span class="n">page</span><span class="o">.</span><span class="n">get_pixmap</span><span class="p">()</span>
</span><span id="L-1238"><a href="#L-1238"><span class="linenos">1238</span></a>                <span class="n">pix</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">output_path</span><span class="p">)</span>
</span><span id="L-1239"><a href="#L-1239"><span class="linenos">1239</span></a>                <span class="n">pdf_file</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</span><span id="L-1240"><a href="#L-1240"><span class="linenos">1240</span></a>
</span><span id="L-1241"><a href="#L-1241"><span class="linenos">1241</span></a>        <span class="n">parent_dir</span><span class="p">,</span> <span class="n">file_name</span><span class="p">,</span> <span class="n">extension</span> <span class="o">=</span> <span class="n">validate_file_path</span><span class="p">(</span><span class="n">file_path</span><span class="p">,</span> <span class="n">overwrite</span><span class="p">)</span>
</span><span id="L-1242"><a href="#L-1242"><span class="linenos">1242</span></a>
</span><span id="L-1243"><a href="#L-1243"><span class="linenos">1243</span></a>        <span class="n">tex_code</span> <span class="o">=</span> <span class="n">get_tex_code</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</span><span id="L-1244"><a href="#L-1244"><span class="linenos">1244</span></a>        <span class="n">tex_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">parent_dir</span><span class="p">,</span> <span class="n">file_name</span> <span class="o">+</span> <span class="s2">&quot;.tex&quot;</span><span class="p">)</span>
</span><span id="L-1245"><a href="#L-1245"><span class="linenos">1245</span></a>        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">tex_path</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s2">&quot;utf-8&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
</span><span id="L-1246"><a href="#L-1246"><span class="linenos">1246</span></a>            <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">tex_code</span><span class="p">)</span>
</span><span id="L-1247"><a href="#L-1247"><span class="linenos">1247</span></a>        <span class="k">if</span> <span class="n">extension</span> <span class="o">==</span> <span class="s2">&quot;.tex&quot;</span><span class="p">:</span>
</span><span id="L-1248"><a href="#L-1248"><span class="linenos">1248</span></a>            <span class="k">return</span> <span class="bp">self</span>
</span><span id="L-1249"><a href="#L-1249"><span class="linenos">1249</span></a>
</span><span id="L-1250"><a href="#L-1250"><span class="linenos">1250</span></a>        <span class="n">run_job</span><span class="p">()</span>
</span><span id="L-1251"><a href="#L-1251"><span class="linenos">1251</span></a>        <span class="k">if</span> <span class="n">remove_aux</span><span class="p">:</span>
</span><span id="L-1252"><a href="#L-1252"><span class="linenos">1252</span></a>            <span class="n">remove_aux_files</span><span class="p">(</span><span class="n">file_path</span><span class="p">)</span>
</span><span id="L-1253"><a href="#L-1253"><span class="linenos">1253</span></a>
</span><span id="L-1254"><a href="#L-1254"><span class="linenos">1254</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_show_browser</span><span class="p">(</span><span class="n">file_path</span><span class="o">=</span><span class="n">file_path</span><span class="p">,</span> <span class="n">show_browser</span><span class="o">=</span><span class="n">show</span><span class="p">,</span> <span class="n">multi_page_svg</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</span><span id="L-1255"><a href="#L-1255"><span class="linenos">1255</span></a>        <span class="k">return</span> <span class="bp">self</span>
</span><span id="L-1256"><a href="#L-1256"><span class="linenos">1256</span></a>
</span><span id="L-1257"><a href="#L-1257"><span class="linenos">1257</span></a>    <span class="k">def</span> <span class="nf">new_page</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Self</span><span class="p">:</span>
</span><span id="L-1258"><a href="#L-1258"><span class="linenos">1258</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-1259"><a href="#L-1259"><span class="linenos">1259</span></a><span class="sd">        Create a new page and add it to the canvas.pages.</span>
</span><span id="L-1260"><a href="#L-1260"><span class="linenos">1260</span></a>
</span><span id="L-1261"><a href="#L-1261"><span class="linenos">1261</span></a><span class="sd">        Args:</span>
</span><span id="L-1262"><a href="#L-1262"><span class="linenos">1262</span></a><span class="sd">            kwargs (dict): Additional keyword arguments.</span>
</span><span id="L-1263"><a href="#L-1263"><span class="linenos">1263</span></a>
</span><span id="L-1264"><a href="#L-1264"><span class="linenos">1264</span></a><span class="sd">        Returns:</span>
</span><span id="L-1265"><a href="#L-1265"><span class="linenos">1265</span></a><span class="sd">            Self: The canvas object.</span>
</span><span id="L-1266"><a href="#L-1266"><span class="linenos">1266</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-1267"><a href="#L-1267"><span class="linenos">1267</span></a>        <span class="n">page</span> <span class="o">=</span> <span class="n">Page</span><span class="p">()</span>
</span><span id="L-1268"><a href="#L-1268"><span class="linenos">1268</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">pages</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">page</span><span class="p">)</span>
</span><span id="L-1269"><a href="#L-1269"><span class="linenos">1269</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">active_page</span> <span class="o">=</span> <span class="n">page</span>
</span><span id="L-1270"><a href="#L-1270"><span class="linenos">1270</span></a>        <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
</span><span id="L-1271"><a href="#L-1271"><span class="linenos">1271</span></a>            <span class="nb">setattr</span><span class="p">(</span><span class="n">page</span><span class="p">,</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span><span class="p">)</span>
</span><span id="L-1272"><a href="#L-1272"><span class="linenos">1272</span></a>        <span class="k">return</span> <span class="bp">self</span>
</span><span id="L-1273"><a href="#L-1273"><span class="linenos">1273</span></a>
</span><span id="L-1274"><a href="#L-1274"><span class="linenos">1274</span></a>
</span><span id="L-1275"><a href="#L-1275"><span class="linenos">1275</span></a><span class="nd">@dataclass</span>
</span><span id="L-1276"><a href="#L-1276"><span class="linenos">1276</span></a><span class="k">class</span> <span class="nc">PageGrid</span><span class="p">:</span>
</span><span id="L-1277"><a href="#L-1277"><span class="linenos">1277</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-1278"><a href="#L-1278"><span class="linenos">1278</span></a><span class="sd">    Grid class for drawing grids on a page.</span>
</span><span id="L-1279"><a href="#L-1279"><span class="linenos">1279</span></a>
</span><span id="L-1280"><a href="#L-1280"><span class="linenos">1280</span></a><span class="sd">    Args:</span>
</span><span id="L-1281"><a href="#L-1281"><span class="linenos">1281</span></a><span class="sd">        spacing (float, optional): The spacing between grid lines.</span>
</span><span id="L-1282"><a href="#L-1282"><span class="linenos">1282</span></a><span class="sd">        back_color (Color, optional): The background color of the grid.</span>
</span><span id="L-1283"><a href="#L-1283"><span class="linenos">1283</span></a><span class="sd">        line_color (Color, optional): The color of the grid lines.</span>
</span><span id="L-1284"><a href="#L-1284"><span class="linenos">1284</span></a><span class="sd">        line_width (float, optional): The width of the grid lines.</span>
</span><span id="L-1285"><a href="#L-1285"><span class="linenos">1285</span></a><span class="sd">        line_dash_array (Sequence[float], optional): The dash array for the grid lines.</span>
</span><span id="L-1286"><a href="#L-1286"><span class="linenos">1286</span></a><span class="sd">        x_shift (float, optional): The x-axis shift of the grid.</span>
</span><span id="L-1287"><a href="#L-1287"><span class="linenos">1287</span></a><span class="sd">        y_shift (float, optional): The y-axis shift of the grid.</span>
</span><span id="L-1288"><a href="#L-1288"><span class="linenos">1288</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-1289"><a href="#L-1289"><span class="linenos">1289</span></a>
</span><span id="L-1290"><a href="#L-1290"><span class="linenos">1290</span></a>    <span class="n">spacing</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="L-1291"><a href="#L-1291"><span class="linenos">1291</span></a>    <span class="n">back_color</span><span class="p">:</span> <span class="s1">&#39;Color&#39;</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="L-1292"><a href="#L-1292"><span class="linenos">1292</span></a>    <span class="n">line_color</span><span class="p">:</span> <span class="s1">&#39;Color&#39;</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="L-1293"><a href="#L-1293"><span class="linenos">1293</span></a>    <span class="n">line_width</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="L-1294"><a href="#L-1294"><span class="linenos">1294</span></a>    <span class="n">line_dash_array</span><span class="p">:</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="L-1295"><a href="#L-1295"><span class="linenos">1295</span></a>    <span class="n">x_shift</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="L-1296"><a href="#L-1296"><span class="linenos">1296</span></a>    <span class="n">y_shift</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="L-1297"><a href="#L-1297"><span class="linenos">1297</span></a>
</span><span id="L-1298"><a href="#L-1298"><span class="linenos">1298</span></a>    <span class="k">def</span> <span class="nf">__post_init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-1299"><a href="#L-1299"><span class="linenos">1299</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">type</span> <span class="o">=</span> <span class="n">Types</span><span class="o">.</span><span class="n">PAGE_GRID</span>
</span><span id="L-1300"><a href="#L-1300"><span class="linenos">1300</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">subtype</span> <span class="o">=</span> <span class="n">Types</span><span class="o">.</span><span class="n">RECTANGULAR</span>
</span><span id="L-1301"><a href="#L-1301"><span class="linenos">1301</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">spacing</span> <span class="o">=</span> <span class="n">defaults</span><span class="p">[</span><span class="s2">&quot;page_grid_spacing&quot;</span><span class="p">]</span>
</span><span id="L-1302"><a href="#L-1302"><span class="linenos">1302</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">back_color</span> <span class="o">=</span> <span class="n">defaults</span><span class="p">[</span><span class="s2">&quot;page_grid_back_color&quot;</span><span class="p">]</span>
</span><span id="L-1303"><a href="#L-1303"><span class="linenos">1303</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">line_color</span> <span class="o">=</span> <span class="n">defaults</span><span class="p">[</span><span class="s2">&quot;page_grid_line_color&quot;</span><span class="p">]</span>
</span><span id="L-1304"><a href="#L-1304"><span class="linenos">1304</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">line_width</span> <span class="o">=</span> <span class="n">defaults</span><span class="p">[</span><span class="s2">&quot;page_grid_line_width&quot;</span><span class="p">]</span>
</span><span id="L-1305"><a href="#L-1305"><span class="linenos">1305</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">line_dash_array</span> <span class="o">=</span> <span class="n">defaults</span><span class="p">[</span><span class="s2">&quot;page_grid_line_dash_array&quot;</span><span class="p">]</span>
</span><span id="L-1306"><a href="#L-1306"><span class="linenos">1306</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">x_shift</span> <span class="o">=</span> <span class="n">defaults</span><span class="p">[</span><span class="s2">&quot;page_grid_x_shift&quot;</span><span class="p">]</span>
</span><span id="L-1307"><a href="#L-1307"><span class="linenos">1307</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">y_shift</span> <span class="o">=</span> <span class="n">defaults</span><span class="p">[</span><span class="s2">&quot;page_grid_y_shift&quot;</span><span class="p">]</span>
</span><span id="L-1308"><a href="#L-1308"><span class="linenos">1308</span></a>        <span class="n">common_properties</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</span><span id="L-1309"><a href="#L-1309"><span class="linenos">1309</span></a>
</span><span id="L-1310"><a href="#L-1310"><span class="linenos">1310</span></a>
</span><span id="L-1311"><a href="#L-1311"><span class="linenos">1311</span></a><span class="nd">@dataclass</span>
</span><span id="L-1312"><a href="#L-1312"><span class="linenos">1312</span></a><span class="k">class</span> <span class="nc">Page</span><span class="p">:</span>
</span><span id="L-1313"><a href="#L-1313"><span class="linenos">1313</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-1314"><a href="#L-1314"><span class="linenos">1314</span></a><span class="sd">    Page class for drawing sketches and text on a page. All drawing</span>
</span><span id="L-1315"><a href="#L-1315"><span class="linenos">1315</span></a><span class="sd">    operations result as sketches on the canvas.active_page.</span>
</span><span id="L-1316"><a href="#L-1316"><span class="linenos">1316</span></a>
</span><span id="L-1317"><a href="#L-1317"><span class="linenos">1317</span></a><span class="sd">    Args:</span>
</span><span id="L-1318"><a href="#L-1318"><span class="linenos">1318</span></a><span class="sd">        size (Vec2, optional): The size of the page.</span>
</span><span id="L-1319"><a href="#L-1319"><span class="linenos">1319</span></a><span class="sd">        back_color (Color, optional): The background color of the page.</span>
</span><span id="L-1320"><a href="#L-1320"><span class="linenos">1320</span></a><span class="sd">        mask (Any, optional): The mask of the page.</span>
</span><span id="L-1321"><a href="#L-1321"><span class="linenos">1321</span></a><span class="sd">        margins (Any, optional): The margins of the page (left, bottom, right, top).</span>
</span><span id="L-1322"><a href="#L-1322"><span class="linenos">1322</span></a><span class="sd">        recto (bool, optional): Whether the page is recto (True) or verso (False).</span>
</span><span id="L-1323"><a href="#L-1323"><span class="linenos">1323</span></a><span class="sd">        grid (PageGrid, optional): The grid of the page.</span>
</span><span id="L-1324"><a href="#L-1324"><span class="linenos">1324</span></a><span class="sd">        kwargs (dict, optional): Additional keyword arguments.</span>
</span><span id="L-1325"><a href="#L-1325"><span class="linenos">1325</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-1326"><a href="#L-1326"><span class="linenos">1326</span></a>
</span><span id="L-1327"><a href="#L-1327"><span class="linenos">1327</span></a>    <span class="n">size</span><span class="p">:</span> <span class="n">Vec2</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="L-1328"><a href="#L-1328"><span class="linenos">1328</span></a>    <span class="n">back_color</span><span class="p">:</span> <span class="s1">&#39;Color&#39;</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="L-1329"><a href="#L-1329"><span class="linenos">1329</span></a>    <span class="n">mask</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="L-1330"><a href="#L-1330"><span class="linenos">1330</span></a>    <span class="n">margins</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># left, bottom, right, top</span>
</span><span id="L-1331"><a href="#L-1331"><span class="linenos">1331</span></a>    <span class="n">recto</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span>  <span class="c1"># True if page is recto, False if verso</span>
</span><span id="L-1332"><a href="#L-1332"><span class="linenos">1332</span></a>    <span class="n">grid</span><span class="p">:</span> <span class="n">PageGrid</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="L-1333"><a href="#L-1333"><span class="linenos">1333</span></a>    <span class="n">kwargs</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="L-1334"><a href="#L-1334"><span class="linenos">1334</span></a>
</span><span id="L-1335"><a href="#L-1335"><span class="linenos">1335</span></a>    <span class="k">def</span> <span class="nf">__post_init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-1336"><a href="#L-1336"><span class="linenos">1336</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">type</span> <span class="o">=</span> <span class="n">Types</span><span class="o">.</span><span class="n">PAGE</span>
</span><span id="L-1337"><a href="#L-1337"><span class="linenos">1337</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">sketches</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="L-1338"><a href="#L-1338"><span class="linenos">1338</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">grid</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-1339"><a href="#L-1339"><span class="linenos">1339</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">grid</span> <span class="o">=</span> <span class="n">PageGrid</span><span class="p">()</span>
</span><span id="L-1340"><a href="#L-1340"><span class="linenos">1340</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">:</span>
</span><span id="L-1341"><a href="#L-1341"><span class="linenos">1341</span></a>            <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
</span><span id="L-1342"><a href="#L-1342"><span class="linenos">1342</span></a>                <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span><span class="p">)</span>
</span><span id="L-1343"><a href="#L-1343"><span class="linenos">1343</span></a>        <span class="n">common_properties</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</span><span id="L-1344"><a href="#L-1344"><span class="linenos">1344</span></a>
</span><span id="L-1345"><a href="#L-1345"><span class="linenos">1345</span></a>
</span><span id="L-1346"><a href="#L-1346"><span class="linenos">1346</span></a><span class="k">def</span> <span class="nf">hello</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-1347"><a href="#L-1347"><span class="linenos">1347</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-1348"><a href="#L-1348"><span class="linenos">1348</span></a><span class="sd">    Show a hello message.</span>
</span><span id="L-1349"><a href="#L-1349"><span class="linenos">1349</span></a><span class="sd">    Used for testing an installation of simetri.</span>
</span><span id="L-1350"><a href="#L-1350"><span class="linenos">1350</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-1351"><a href="#L-1351"><span class="linenos">1351</span></a>    <span class="n">canvas</span> <span class="o">=</span> <span class="n">Canvas</span><span class="p">()</span>
</span><span id="L-1352"><a href="#L-1352"><span class="linenos">1352</span></a>
</span><span id="L-1353"><a href="#L-1353"><span class="linenos">1353</span></a>    <span class="n">canvas</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="s2">&quot;Hello from simetri.graphics!&quot;</span><span class="p">,</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">130</span><span class="p">),</span> <span class="n">bold</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">font_size</span><span class="o">=</span><span class="mi">20</span><span class="p">)</span>
</span><span id="L-1354"><a href="#L-1354"><span class="linenos">1354</span></a>    <span class="n">canvas</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="n">logo</span><span class="p">())</span>
</span><span id="L-1355"><a href="#L-1355"><span class="linenos">1355</span></a>
</span><span id="L-1356"><a href="#L-1356"><span class="linenos">1356</span></a>    <span class="n">d_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="vm">__file__</span><span class="p">))</span>
</span><span id="L-1357"><a href="#L-1357"><span class="linenos">1357</span></a>    <span class="n">f_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">d_path</span><span class="p">,</span> <span class="s2">&quot;hello.pdf&quot;</span><span class="p">)</span>
</span><span id="L-1358"><a href="#L-1358"><span class="linenos">1358</span></a>
</span><span id="L-1359"><a href="#L-1359"><span class="linenos">1359</span></a>    <span class="n">canvas</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">f_path</span><span class="p">,</span> <span class="n">overwrite</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span></pre></div>


            </section>
                <section id="Canvas">
                            <input id="Canvas-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">Canvas</span>:

                <label class="view-source-button" for="Canvas-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Canvas"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Canvas-58"><a href="#Canvas-58"><span class="linenos">  58</span></a><span class="k">class</span> <span class="nc">Canvas</span><span class="p">:</span>
</span><span id="Canvas-59"><a href="#Canvas-59"><span class="linenos">  59</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Canvas class for drawing shapes and text on a page. All drawing</span>
</span><span id="Canvas-60"><a href="#Canvas-60"><span class="linenos">  60</span></a><span class="sd">    operations are handled by the Canvas class. Canvas class can draw all</span>
</span><span id="Canvas-61"><a href="#Canvas-61"><span class="linenos">  61</span></a><span class="sd">    graphics objects and text objects. It also provides methods for</span>
</span><span id="Canvas-62"><a href="#Canvas-62"><span class="linenos">  62</span></a><span class="sd">    drawing basic shapes like lines, circles, and polygons.</span>
</span><span id="Canvas-63"><a href="#Canvas-63"><span class="linenos">  63</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="Canvas-64"><a href="#Canvas-64"><span class="linenos">  64</span></a>
</span><span id="Canvas-65"><a href="#Canvas-65"><span class="linenos">  65</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
</span><span id="Canvas-66"><a href="#Canvas-66"><span class="linenos">  66</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="Canvas-67"><a href="#Canvas-67"><span class="linenos">  67</span></a>        <span class="n">back_color</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="s1">&#39;Color&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="Canvas-68"><a href="#Canvas-68"><span class="linenos">  68</span></a>        <span class="n">border</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="Canvas-69"><a href="#Canvas-69"><span class="linenos">  69</span></a>        <span class="n">size</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Vec2</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="Canvas-70"><a href="#Canvas-70"><span class="linenos">  70</span></a>        <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
</span><span id="Canvas-71"><a href="#Canvas-71"><span class="linenos">  71</span></a>    <span class="p">):</span>
</span><span id="Canvas-72"><a href="#Canvas-72"><span class="linenos">  72</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Canvas-73"><a href="#Canvas-73"><span class="linenos">  73</span></a><span class="sd">        Initialize the Canvas.</span>
</span><span id="Canvas-74"><a href="#Canvas-74"><span class="linenos">  74</span></a>
</span><span id="Canvas-75"><a href="#Canvas-75"><span class="linenos">  75</span></a><span class="sd">        Args:</span>
</span><span id="Canvas-76"><a href="#Canvas-76"><span class="linenos">  76</span></a><span class="sd">            back_color (Optional[Color]): The background color of the canvas.</span>
</span><span id="Canvas-77"><a href="#Canvas-77"><span class="linenos">  77</span></a><span class="sd">            border (Optional[float]): The border width of the canvas.</span>
</span><span id="Canvas-78"><a href="#Canvas-78"><span class="linenos">  78</span></a><span class="sd">            size (Vec2, optional): The size of the canvas with canvas.origin at (0, 0).</span>
</span><span id="Canvas-79"><a href="#Canvas-79"><span class="linenos">  79</span></a><span class="sd">            kwargs (dict): Additional keyword arguments. Rarely used.</span>
</span><span id="Canvas-80"><a href="#Canvas-80"><span class="linenos">  80</span></a>
</span><span id="Canvas-81"><a href="#Canvas-81"><span class="linenos">  81</span></a><span class="sd">            You should not need to specify &quot;size&quot; since it is calculated.</span>
</span><span id="Canvas-82"><a href="#Canvas-82"><span class="linenos">  82</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Canvas-83"><a href="#Canvas-83"><span class="linenos">  83</span></a>        <span class="n">validate_args</span><span class="p">(</span><span class="n">kwargs</span><span class="p">,</span> <span class="n">canvas_args</span><span class="p">)</span>
</span><span id="Canvas-84"><a href="#Canvas-84"><span class="linenos">  84</span></a>        <span class="n">_set_Nones</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="p">[</span><span class="s2">&quot;back_color&quot;</span><span class="p">,</span> <span class="s2">&quot;border&quot;</span><span class="p">],</span> <span class="p">[</span><span class="n">back_color</span><span class="p">,</span> <span class="n">border</span><span class="p">])</span>
</span><span id="Canvas-85"><a href="#Canvas-85"><span class="linenos">  85</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_size</span> <span class="o">=</span> <span class="n">size</span>
</span><span id="Canvas-86"><a href="#Canvas-86"><span class="linenos">  86</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">border</span> <span class="o">=</span> <span class="n">border</span>
</span><span id="Canvas-87"><a href="#Canvas-87"><span class="linenos">  87</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;This value is added to the bounding box of the canvas to expand the output size.&quot;&quot;&quot;</span>
</span><span id="Canvas-88"><a href="#Canvas-88"><span class="linenos">  88</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">type</span> <span class="o">=</span> <span class="n">Types</span><span class="o">.</span><span class="n">CANVAS</span>
</span><span id="Canvas-89"><a href="#Canvas-89"><span class="linenos">  89</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Used internally to identify the type of object. Do not change it!.</span>
</span><span id="Canvas-90"><a href="#Canvas-90"><span class="linenos">  90</span></a><span class="sd">        Most objects in simetri has a type and subtype attribute. See ... for</span>
</span><span id="Canvas-91"><a href="#Canvas-91"><span class="linenos">  91</span></a><span class="sd">        using this for user defined objects.</span>
</span><span id="Canvas-92"><a href="#Canvas-92"><span class="linenos">  92</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Canvas-93"><a href="#Canvas-93"><span class="linenos">  93</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">subtype</span> <span class="o">=</span> <span class="n">Types</span><span class="o">.</span><span class="n">CANVAS</span>
</span><span id="Canvas-94"><a href="#Canvas-94"><span class="linenos">  94</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Used internally to identify the type of object. Do not change it!.</span>
</span><span id="Canvas-95"><a href="#Canvas-95"><span class="linenos">  95</span></a><span class="sd">        Most objects in simetri has a type and subtype attribute. See ... for</span>
</span><span id="Canvas-96"><a href="#Canvas-96"><span class="linenos">  96</span></a><span class="sd">        using this for user defined objects.</span>
</span><span id="Canvas-97"><a href="#Canvas-97"><span class="linenos">  97</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Canvas-98"><a href="#Canvas-98"><span class="linenos">  98</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_code</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="Canvas-99"><a href="#Canvas-99"><span class="linenos">  99</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_font_list</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="Canvas-100"><a href="#Canvas-100"><span class="linenos"> 100</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">preamble</span> <span class="o">=</span> <span class="n">defaults</span><span class="p">[</span><span class="s2">&quot;preamble&quot;</span><span class="p">]</span>
</span><span id="Canvas-101"><a href="#Canvas-101"><span class="linenos"> 101</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Used for generating TikZ code.&quot;&quot;&quot;</span>
</span><span id="Canvas-102"><a href="#Canvas-102"><span class="linenos"> 102</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">back_color</span> <span class="o">=</span> <span class="n">back_color</span>
</span><span id="Canvas-103"><a href="#Canvas-103"><span class="linenos"> 103</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Background color of the canvas.&quot;&quot;&quot;</span>
</span><span id="Canvas-104"><a href="#Canvas-104"><span class="linenos"> 104</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">pages</span> <span class="o">=</span> <span class="p">[</span><span class="n">Page</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">size</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">back_color</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">border</span><span class="p">)]</span>
</span><span id="Canvas-105"><a href="#Canvas-105"><span class="linenos"> 105</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Each page of the canvas is a Page object.</span>
</span><span id="Canvas-106"><a href="#Canvas-106"><span class="linenos"> 106</span></a><span class="sd">        The canvas can have multiple pages that result in multi-page PDF output,</span>
</span><span id="Canvas-107"><a href="#Canvas-107"><span class="linenos"> 107</span></a><span class="sd">        or multiple images with image_name_1.svg, image_name_2.svg, etc.&quot;&quot;&quot;</span>
</span><span id="Canvas-108"><a href="#Canvas-108"><span class="linenos"> 108</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">active_page</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pages</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="Canvas-109"><a href="#Canvas-109"><span class="linenos"> 109</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;canvas.draw() draws on the active page. If there are multiple pages,</span>
</span><span id="Canvas-110"><a href="#Canvas-110"><span class="linenos"> 110</span></a><span class="sd">        the active page is the last page created.&quot;&quot;&quot;</span>
</span><span id="Canvas-111"><a href="#Canvas-111"><span class="linenos"> 111</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_all_vertices</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="Canvas-112"><a href="#Canvas-112"><span class="linenos"> 112</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">blend_mode</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="Canvas-113"><a href="#Canvas-113"><span class="linenos"> 113</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">blend_group</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="Canvas-114"><a href="#Canvas-114"><span class="linenos"> 114</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">transparency_group</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="Canvas-115"><a href="#Canvas-115"><span class="linenos"> 115</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">alpha</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="Canvas-116"><a href="#Canvas-116"><span class="linenos"> 116</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">line_alpha</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="Canvas-117"><a href="#Canvas-117"><span class="linenos"> 117</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">fill_alpha</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="Canvas-118"><a href="#Canvas-118"><span class="linenos"> 118</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">text_alpha</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="Canvas-119"><a href="#Canvas-119"><span class="linenos"> 119</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">clip</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># if True then clip the canvas to the mask</span>
</span><span id="Canvas-120"><a href="#Canvas-120"><span class="linenos"> 120</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">mask</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># Mask object</span>
</span><span id="Canvas-121"><a href="#Canvas-121"><span class="linenos"> 121</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">even_odd_rule</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># True or False</span>
</span><span id="Canvas-122"><a href="#Canvas-122"><span class="linenos"> 122</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">draw_grid</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="Canvas-123"><a href="#Canvas-123"><span class="linenos"> 123</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_origin</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span>
</span><span id="Canvas-124"><a href="#Canvas-124"><span class="linenos"> 124</span></a>        <span class="n">common_properties</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</span><span id="Canvas-125"><a href="#Canvas-125"><span class="linenos"> 125</span></a>
</span><span id="Canvas-126"><a href="#Canvas-126"><span class="linenos"> 126</span></a>        <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
</span><span id="Canvas-127"><a href="#Canvas-127"><span class="linenos"> 127</span></a>            <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span><span class="p">)</span>
</span><span id="Canvas-128"><a href="#Canvas-128"><span class="linenos"> 128</span></a>
</span><span id="Canvas-129"><a href="#Canvas-129"><span class="linenos"> 129</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_xform_matrix</span> <span class="o">=</span> <span class="n">identity_matrix</span><span class="p">()</span>
</span><span id="Canvas-130"><a href="#Canvas-130"><span class="linenos"> 130</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_sketch_xform_matrix</span> <span class="o">=</span> <span class="n">identity_matrix</span><span class="p">()</span>
</span><span id="Canvas-131"><a href="#Canvas-131"><span class="linenos"> 131</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">tex</span><span class="p">:</span> <span class="n">Tex</span> <span class="o">=</span> <span class="n">Tex</span><span class="p">()</span>
</span><span id="Canvas-132"><a href="#Canvas-132"><span class="linenos"> 132</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">render</span> <span class="o">=</span> <span class="n">defaults</span><span class="p">[</span><span class="s2">&quot;render&quot;</span><span class="p">]</span>
</span><span id="Canvas-133"><a href="#Canvas-133"><span class="linenos"> 133</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_size</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Canvas-134"><a href="#Canvas-134"><span class="linenos"> 134</span></a>            <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">origin</span><span class="p">[:</span><span class="mi">2</span><span class="p">]</span>
</span><span id="Canvas-135"><a href="#Canvas-135"><span class="linenos"> 135</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_limits</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">x</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">size</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">y</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">size</span><span class="p">[</span><span class="mi">1</span><span class="p">]]</span>
</span><span id="Canvas-136"><a href="#Canvas-136"><span class="linenos"> 136</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="Canvas-137"><a href="#Canvas-137"><span class="linenos"> 137</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_limits</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="Canvas-138"><a href="#Canvas-138"><span class="linenos"> 138</span></a>
</span><span id="Canvas-139"><a href="#Canvas-139"><span class="linenos"> 139</span></a>    <span class="k">def</span> <span class="fm">__setattr__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
</span><span id="Canvas-140"><a href="#Canvas-140"><span class="linenos"> 140</span></a>        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;active_page&quot;</span><span class="p">)</span> <span class="ow">and</span> <span class="n">name</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;back_color&quot;</span><span class="p">,</span> <span class="s2">&quot;border&quot;</span><span class="p">]:</span>
</span><span id="Canvas-141"><a href="#Canvas-141"><span class="linenos"> 141</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">active_page</span><span class="o">.</span><span class="fm">__setattr__</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
</span><span id="Canvas-142"><a href="#Canvas-142"><span class="linenos"> 142</span></a>            <span class="bp">self</span><span class="o">.</span><span class="vm">__dict__</span><span class="p">[</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
</span><span id="Canvas-143"><a href="#Canvas-143"><span class="linenos"> 143</span></a>        <span class="k">elif</span> <span class="n">name</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;size&quot;</span><span class="p">,</span> <span class="s2">&quot;origin&quot;</span><span class="p">,</span> <span class="s2">&quot;limits&quot;</span><span class="p">]:</span>
</span><span id="Canvas-144"><a href="#Canvas-144"><span class="linenos"> 144</span></a>            <span class="k">if</span> <span class="n">name</span> <span class="o">==</span> <span class="s2">&quot;size&quot;</span><span class="p">:</span>
</span><span id="Canvas-145"><a href="#Canvas-145"><span class="linenos"> 145</span></a>                <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">size</span><span class="o">.</span><span class="n">fset</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
</span><span id="Canvas-146"><a href="#Canvas-146"><span class="linenos"> 146</span></a>            <span class="k">elif</span> <span class="n">name</span> <span class="o">==</span> <span class="s2">&quot;origin&quot;</span><span class="p">:</span>
</span><span id="Canvas-147"><a href="#Canvas-147"><span class="linenos"> 147</span></a>                <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">origin</span><span class="o">.</span><span class="n">fset</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
</span><span id="Canvas-148"><a href="#Canvas-148"><span class="linenos"> 148</span></a>            <span class="k">elif</span> <span class="n">name</span> <span class="o">==</span> <span class="s2">&quot;limits&quot;</span><span class="p">:</span>
</span><span id="Canvas-149"><a href="#Canvas-149"><span class="linenos"> 149</span></a>                <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">limits</span><span class="o">.</span><span class="n">fset</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
</span><span id="Canvas-150"><a href="#Canvas-150"><span class="linenos"> 150</span></a>        <span class="k">elif</span> <span class="n">name</span> <span class="o">==</span> <span class="s2">&quot;scale&quot;</span><span class="p">:</span>
</span><span id="Canvas-151"><a href="#Canvas-151"><span class="linenos"> 151</span></a>            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="p">(</span><span class="nb">list</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">)):</span>
</span><span id="Canvas-152"><a href="#Canvas-152"><span class="linenos"> 152</span></a>                <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">scale</span><span class="o">.</span><span class="n">fset</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">value</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
</span><span id="Canvas-153"><a href="#Canvas-153"><span class="linenos"> 153</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="Canvas-154"><a href="#Canvas-154"><span class="linenos"> 154</span></a>                <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">scale</span><span class="o">.</span><span class="n">fset</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
</span><span id="Canvas-155"><a href="#Canvas-155"><span class="linenos"> 155</span></a>        <span class="k">elif</span> <span class="n">name</span> <span class="o">==</span> <span class="s2">&quot;pos&quot;</span><span class="p">:</span>
</span><span id="Canvas-156"><a href="#Canvas-156"><span class="linenos"> 156</span></a>            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="p">(</span><span class="nb">list</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)):</span>
</span><span id="Canvas-157"><a href="#Canvas-157"><span class="linenos"> 157</span></a>                <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">pos</span><span class="o">.</span><span class="n">fset</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
</span><span id="Canvas-158"><a href="#Canvas-158"><span class="linenos"> 158</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="Canvas-159"><a href="#Canvas-159"><span class="linenos"> 159</span></a>                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;pos must be a list, tuple or np.ndarray.&quot;</span><span class="p">)</span>
</span><span id="Canvas-160"><a href="#Canvas-160"><span class="linenos"> 160</span></a>        <span class="k">elif</span> <span class="n">name</span> <span class="o">==</span> <span class="s2">&quot;angle&quot;</span><span class="p">:</span>
</span><span id="Canvas-161"><a href="#Canvas-161"><span class="linenos"> 161</span></a>            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">)):</span>
</span><span id="Canvas-162"><a href="#Canvas-162"><span class="linenos"> 162</span></a>                <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">angle</span><span class="o">.</span><span class="n">fset</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
</span><span id="Canvas-163"><a href="#Canvas-163"><span class="linenos"> 163</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="Canvas-164"><a href="#Canvas-164"><span class="linenos"> 164</span></a>                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;angle must be a number.&quot;</span><span class="p">)</span>
</span><span id="Canvas-165"><a href="#Canvas-165"><span class="linenos"> 165</span></a>
</span><span id="Canvas-166"><a href="#Canvas-166"><span class="linenos"> 166</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="Canvas-167"><a href="#Canvas-167"><span class="linenos"> 167</span></a>            <span class="bp">self</span><span class="o">.</span><span class="vm">__dict__</span><span class="p">[</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
</span><span id="Canvas-168"><a href="#Canvas-168"><span class="linenos"> 168</span></a>
</span><span id="Canvas-169"><a href="#Canvas-169"><span class="linenos"> 169</span></a>    <span class="k">def</span> <span class="nf">display</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Self</span><span class="p">:</span>
</span><span id="Canvas-170"><a href="#Canvas-170"><span class="linenos"> 170</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Show the canvas in a notebook cell.&quot;&quot;&quot;</span>
</span><span id="Canvas-171"><a href="#Canvas-171"><span class="linenos"> 171</span></a>        <span class="n">display</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</span><span id="Canvas-172"><a href="#Canvas-172"><span class="linenos"> 172</span></a>
</span><span id="Canvas-173"><a href="#Canvas-173"><span class="linenos"> 173</span></a>    <span class="nd">@property</span>
</span><span id="Canvas-174"><a href="#Canvas-174"><span class="linenos"> 174</span></a>    <span class="k">def</span> <span class="nf">size</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Vec2</span><span class="p">:</span>
</span><span id="Canvas-175"><a href="#Canvas-175"><span class="linenos"> 175</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Canvas-176"><a href="#Canvas-176"><span class="linenos"> 176</span></a><span class="sd">        The size of the canvas.</span>
</span><span id="Canvas-177"><a href="#Canvas-177"><span class="linenos"> 177</span></a>
</span><span id="Canvas-178"><a href="#Canvas-178"><span class="linenos"> 178</span></a><span class="sd">        Returns:</span>
</span><span id="Canvas-179"><a href="#Canvas-179"><span class="linenos"> 179</span></a><span class="sd">            Vec2: The size of the canvas.</span>
</span><span id="Canvas-180"><a href="#Canvas-180"><span class="linenos"> 180</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Canvas-181"><a href="#Canvas-181"><span class="linenos"> 181</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_size</span>
</span><span id="Canvas-182"><a href="#Canvas-182"><span class="linenos"> 182</span></a>
</span><span id="Canvas-183"><a href="#Canvas-183"><span class="linenos"> 183</span></a>    <span class="nd">@size</span><span class="o">.</span><span class="n">setter</span>
</span><span id="Canvas-184"><a href="#Canvas-184"><span class="linenos"> 184</span></a>    <span class="k">def</span> <span class="nf">size</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="n">Vec2</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Canvas-185"><a href="#Canvas-185"><span class="linenos"> 185</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Canvas-186"><a href="#Canvas-186"><span class="linenos"> 186</span></a><span class="sd">        Set the size of the canvas.</span>
</span><span id="Canvas-187"><a href="#Canvas-187"><span class="linenos"> 187</span></a>
</span><span id="Canvas-188"><a href="#Canvas-188"><span class="linenos"> 188</span></a><span class="sd">        Args:</span>
</span><span id="Canvas-189"><a href="#Canvas-189"><span class="linenos"> 189</span></a><span class="sd">            value (Vec2): The size of the canvas.</span>
</span><span id="Canvas-190"><a href="#Canvas-190"><span class="linenos"> 190</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Canvas-191"><a href="#Canvas-191"><span class="linenos"> 191</span></a>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">value</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
</span><span id="Canvas-192"><a href="#Canvas-192"><span class="linenos"> 192</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_size</span> <span class="o">=</span> <span class="n">value</span>
</span><span id="Canvas-193"><a href="#Canvas-193"><span class="linenos"> 193</span></a>            <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">origin</span><span class="p">[:</span><span class="mi">2</span><span class="p">]</span>
</span><span id="Canvas-194"><a href="#Canvas-194"><span class="linenos"> 194</span></a>            <span class="n">w</span><span class="p">,</span> <span class="n">h</span> <span class="o">=</span> <span class="n">value</span>
</span><span id="Canvas-195"><a href="#Canvas-195"><span class="linenos"> 195</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_limits</span> <span class="o">=</span> <span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">x</span> <span class="o">+</span> <span class="n">w</span><span class="p">,</span> <span class="n">y</span> <span class="o">+</span> <span class="n">h</span><span class="p">)</span>
</span><span id="Canvas-196"><a href="#Canvas-196"><span class="linenos"> 196</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="Canvas-197"><a href="#Canvas-197"><span class="linenos"> 197</span></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Size must be a tuple of 2 values.&quot;</span><span class="p">)</span>
</span><span id="Canvas-198"><a href="#Canvas-198"><span class="linenos"> 198</span></a>
</span><span id="Canvas-199"><a href="#Canvas-199"><span class="linenos"> 199</span></a>    <span class="nd">@property</span>
</span><span id="Canvas-200"><a href="#Canvas-200"><span class="linenos"> 200</span></a>    <span class="k">def</span> <span class="nf">origin</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Vec2</span><span class="p">:</span>
</span><span id="Canvas-201"><a href="#Canvas-201"><span class="linenos"> 201</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Canvas-202"><a href="#Canvas-202"><span class="linenos"> 202</span></a><span class="sd">        The origin of the canvas.</span>
</span><span id="Canvas-203"><a href="#Canvas-203"><span class="linenos"> 203</span></a>
</span><span id="Canvas-204"><a href="#Canvas-204"><span class="linenos"> 204</span></a><span class="sd">        Returns:</span>
</span><span id="Canvas-205"><a href="#Canvas-205"><span class="linenos"> 205</span></a><span class="sd">            Vec2: The origin of the canvas.</span>
</span><span id="Canvas-206"><a href="#Canvas-206"><span class="linenos"> 206</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Canvas-207"><a href="#Canvas-207"><span class="linenos"> 207</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_origin</span><span class="p">[:</span><span class="mi">2</span><span class="p">]</span>
</span><span id="Canvas-208"><a href="#Canvas-208"><span class="linenos"> 208</span></a>
</span><span id="Canvas-209"><a href="#Canvas-209"><span class="linenos"> 209</span></a>    <span class="nd">@origin</span><span class="o">.</span><span class="n">setter</span>
</span><span id="Canvas-210"><a href="#Canvas-210"><span class="linenos"> 210</span></a>    <span class="k">def</span> <span class="nf">origin</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="n">Vec2</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Canvas-211"><a href="#Canvas-211"><span class="linenos"> 211</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Canvas-212"><a href="#Canvas-212"><span class="linenos"> 212</span></a><span class="sd">        Set the origin of the canvas.</span>
</span><span id="Canvas-213"><a href="#Canvas-213"><span class="linenos"> 213</span></a>
</span><span id="Canvas-214"><a href="#Canvas-214"><span class="linenos"> 214</span></a><span class="sd">        Args:</span>
</span><span id="Canvas-215"><a href="#Canvas-215"><span class="linenos"> 215</span></a><span class="sd">            value (Vec2): The origin of the canvas.</span>
</span><span id="Canvas-216"><a href="#Canvas-216"><span class="linenos"> 216</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Canvas-217"><a href="#Canvas-217"><span class="linenos"> 217</span></a>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">value</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
</span><span id="Canvas-218"><a href="#Canvas-218"><span class="linenos"> 218</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_origin</span> <span class="o">=</span> <span class="n">value</span>
</span><span id="Canvas-219"><a href="#Canvas-219"><span class="linenos"> 219</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="Canvas-220"><a href="#Canvas-220"><span class="linenos"> 220</span></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Origin must be a tuple of 2 values.&quot;</span><span class="p">)</span>
</span><span id="Canvas-221"><a href="#Canvas-221"><span class="linenos"> 221</span></a>
</span><span id="Canvas-222"><a href="#Canvas-222"><span class="linenos"> 222</span></a>    <span class="nd">@property</span>
</span><span id="Canvas-223"><a href="#Canvas-223"><span class="linenos"> 223</span></a>    <span class="k">def</span> <span class="nf">limits</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Vec2</span><span class="p">:</span>
</span><span id="Canvas-224"><a href="#Canvas-224"><span class="linenos"> 224</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Canvas-225"><a href="#Canvas-225"><span class="linenos"> 225</span></a><span class="sd">        The limits of the canvas.</span>
</span><span id="Canvas-226"><a href="#Canvas-226"><span class="linenos"> 226</span></a><span class="sd">        [min_x, min_y, max_x, max_y]</span>
</span><span id="Canvas-227"><a href="#Canvas-227"><span class="linenos"> 227</span></a>
</span><span id="Canvas-228"><a href="#Canvas-228"><span class="linenos"> 228</span></a><span class="sd">        Returns:</span>
</span><span id="Canvas-229"><a href="#Canvas-229"><span class="linenos"> 229</span></a><span class="sd">            Vec2: The limits of the canvas.</span>
</span><span id="Canvas-230"><a href="#Canvas-230"><span class="linenos"> 230</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Canvas-231"><a href="#Canvas-231"><span class="linenos"> 231</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">size</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Canvas-232"><a href="#Canvas-232"><span class="linenos"> 232</span></a>            <span class="n">res</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="Canvas-233"><a href="#Canvas-233"><span class="linenos"> 233</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="Canvas-234"><a href="#Canvas-234"><span class="linenos"> 234</span></a>            <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">origin</span><span class="p">[:</span><span class="mi">2</span><span class="p">]</span>
</span><span id="Canvas-235"><a href="#Canvas-235"><span class="linenos"> 235</span></a>            <span class="n">w</span><span class="p">,</span> <span class="n">h</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">size</span>
</span><span id="Canvas-236"><a href="#Canvas-236"><span class="linenos"> 236</span></a>            <span class="n">res</span> <span class="o">=</span> <span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">x</span> <span class="o">+</span> <span class="n">w</span><span class="p">,</span> <span class="n">y</span> <span class="o">+</span> <span class="n">h</span><span class="p">)</span>
</span><span id="Canvas-237"><a href="#Canvas-237"><span class="linenos"> 237</span></a>
</span><span id="Canvas-238"><a href="#Canvas-238"><span class="linenos"> 238</span></a>        <span class="k">return</span> <span class="n">res</span>
</span><span id="Canvas-239"><a href="#Canvas-239"><span class="linenos"> 239</span></a>
</span><span id="Canvas-240"><a href="#Canvas-240"><span class="linenos"> 240</span></a>    <span class="nd">@limits</span><span class="o">.</span><span class="n">setter</span>
</span><span id="Canvas-241"><a href="#Canvas-241"><span class="linenos"> 241</span></a>    <span class="k">def</span> <span class="nf">limits</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="n">Vec2</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Canvas-242"><a href="#Canvas-242"><span class="linenos"> 242</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Canvas-243"><a href="#Canvas-243"><span class="linenos"> 243</span></a><span class="sd">        Set the limits of the canvas.</span>
</span><span id="Canvas-244"><a href="#Canvas-244"><span class="linenos"> 244</span></a><span class="sd">        [min_x, min_y, max_x, max_y]</span>
</span><span id="Canvas-245"><a href="#Canvas-245"><span class="linenos"> 245</span></a>
</span><span id="Canvas-246"><a href="#Canvas-246"><span class="linenos"> 246</span></a><span class="sd">        Args:</span>
</span><span id="Canvas-247"><a href="#Canvas-247"><span class="linenos"> 247</span></a><span class="sd">            value (Vec2): The limits of the canvas.</span>
</span><span id="Canvas-248"><a href="#Canvas-248"><span class="linenos"> 248</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Canvas-249"><a href="#Canvas-249"><span class="linenos"> 249</span></a>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">value</span><span class="p">)</span> <span class="o">==</span> <span class="mi">4</span><span class="p">:</span>
</span><span id="Canvas-250"><a href="#Canvas-250"><span class="linenos"> 250</span></a>            <span class="n">x1</span><span class="p">,</span> <span class="n">y1</span><span class="p">,</span> <span class="n">x2</span><span class="p">,</span> <span class="n">y2</span> <span class="o">=</span> <span class="n">value</span>
</span><span id="Canvas-251"><a href="#Canvas-251"><span class="linenos"> 251</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_size</span> <span class="o">=</span> <span class="p">(</span><span class="n">x2</span> <span class="o">-</span> <span class="n">x1</span><span class="p">,</span> <span class="n">y2</span> <span class="o">-</span> <span class="n">y1</span><span class="p">)</span>
</span><span id="Canvas-252"><a href="#Canvas-252"><span class="linenos"> 252</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_origin</span> <span class="o">=</span> <span class="p">(</span><span class="n">x1</span><span class="p">,</span> <span class="n">y1</span><span class="p">)</span>
</span><span id="Canvas-253"><a href="#Canvas-253"><span class="linenos"> 253</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="Canvas-254"><a href="#Canvas-254"><span class="linenos"> 254</span></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Limits must be a tuple of 4 values.&quot;</span><span class="p">)</span>
</span><span id="Canvas-255"><a href="#Canvas-255"><span class="linenos"> 255</span></a>
</span><span id="Canvas-256"><a href="#Canvas-256"><span class="linenos"> 256</span></a>    <span class="k">def</span> <span class="nf">image</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Image</span><span class="p">:</span>
</span><span id="Canvas-257"><a href="#Canvas-257"><span class="linenos"> 257</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Canvas-258"><a href="#Canvas-258"><span class="linenos"> 258</span></a><span class="sd">        Create an image from the canvas.</span>
</span><span id="Canvas-259"><a href="#Canvas-259"><span class="linenos"> 259</span></a>
</span><span id="Canvas-260"><a href="#Canvas-260"><span class="linenos"> 260</span></a><span class="sd">        Returns:</span>
</span><span id="Canvas-261"><a href="#Canvas-261"><span class="linenos"> 261</span></a><span class="sd">            Image: The Image object.</span>
</span><span id="Canvas-262"><a href="#Canvas-262"><span class="linenos"> 262</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Canvas-263"><a href="#Canvas-263"><span class="linenos"> 263</span></a>        <span class="n">tmpdirname</span> <span class="o">=</span> <span class="n">tempfile</span><span class="o">.</span><span class="n">TemporaryDirectory</span><span class="p">()</span><span class="o">.</span><span class="n">name</span>
</span><span id="Canvas-264"><a href="#Canvas-264"><span class="linenos"> 264</span></a>        <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">tmpdirname</span><span class="p">,</span> <span class="n">exist_ok</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="Canvas-265"><a href="#Canvas-265"><span class="linenos"> 265</span></a>        <span class="n">file_name</span> <span class="o">=</span> <span class="nb">next</span><span class="p">(</span><span class="n">tempfile</span><span class="o">.</span><span class="n">_get_candidate_names</span><span class="p">())</span>
</span><span id="Canvas-266"><a href="#Canvas-266"><span class="linenos"> 266</span></a>        <span class="n">file_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">tmpdirname</span><span class="p">,</span> <span class="n">file_name</span> <span class="o">+</span> <span class="s2">&quot;.ps&quot;</span><span class="p">)</span>
</span><span id="Canvas-267"><a href="#Canvas-267"><span class="linenos"> 267</span></a>
</span><span id="Canvas-268"><a href="#Canvas-268"><span class="linenos"> 268</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">file_path</span><span class="p">,</span> <span class="n">show</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">print_output</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">remove_aux</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</span><span id="Canvas-269"><a href="#Canvas-269"><span class="linenos"> 269</span></a>        <span class="n">wait_for_file_availability</span><span class="p">(</span><span class="n">file_path</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
</span><span id="Canvas-270"><a href="#Canvas-270"><span class="linenos"> 270</span></a>        <span class="n">temp_img</span> <span class="o">=</span> <span class="n">create_image_from_data</span><span class="p">(</span><span class="n">file_path</span><span class="p">)</span>
</span><span id="Canvas-271"><a href="#Canvas-271"><span class="linenos"> 271</span></a>
</span><span id="Canvas-272"><a href="#Canvas-272"><span class="linenos"> 272</span></a>        <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
</span><span id="Canvas-273"><a href="#Canvas-273"><span class="linenos"> 273</span></a>        <span class="n">shutil</span><span class="o">.</span><span class="n">rmtree</span><span class="p">(</span><span class="n">tmpdirname</span><span class="p">,</span> <span class="n">ignore_errors</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="Canvas-274"><a href="#Canvas-274"><span class="linenos"> 274</span></a>        <span class="k">return</span> <span class="n">temp_img</span>
</span><span id="Canvas-275"><a href="#Canvas-275"><span class="linenos"> 275</span></a>
</span><span id="Canvas-276"><a href="#Canvas-276"><span class="linenos"> 276</span></a>
</span><span id="Canvas-277"><a href="#Canvas-277"><span class="linenos"> 277</span></a>
</span><span id="Canvas-278"><a href="#Canvas-278"><span class="linenos"> 278</span></a>
</span><span id="Canvas-279"><a href="#Canvas-279"><span class="linenos"> 279</span></a>    <span class="k">def</span> <span class="nf">insert_code</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">code</span><span class="p">,</span> <span class="n">loc</span><span class="p">:</span> <span class="n">TexLoc</span> <span class="o">=</span> <span class="n">TexLoc</span><span class="o">.</span><span class="n">PICTURE</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Self</span><span class="p">:</span>
</span><span id="Canvas-280"><a href="#Canvas-280"><span class="linenos"> 280</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Canvas-281"><a href="#Canvas-281"><span class="linenos"> 281</span></a><span class="sd">        Insert code into the canvas.</span>
</span><span id="Canvas-282"><a href="#Canvas-282"><span class="linenos"> 282</span></a>
</span><span id="Canvas-283"><a href="#Canvas-283"><span class="linenos"> 283</span></a><span class="sd">        Args:</span>
</span><span id="Canvas-284"><a href="#Canvas-284"><span class="linenos"> 284</span></a><span class="sd">            code (str): The code to insert.</span>
</span><span id="Canvas-285"><a href="#Canvas-285"><span class="linenos"> 285</span></a><span class="sd">            loc (TexLoc): The location to insert the code.</span>
</span><span id="Canvas-286"><a href="#Canvas-286"><span class="linenos"> 286</span></a>
</span><span id="Canvas-287"><a href="#Canvas-287"><span class="linenos"> 287</span></a><span class="sd">        Returns:</span>
</span><span id="Canvas-288"><a href="#Canvas-288"><span class="linenos"> 288</span></a><span class="sd">            Self: The canvas object.</span>
</span><span id="Canvas-289"><a href="#Canvas-289"><span class="linenos"> 289</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Canvas-290"><a href="#Canvas-290"><span class="linenos"> 290</span></a>        <span class="n">draw</span><span class="o">.</span><span class="n">insert_code</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">code</span><span class="p">,</span> <span class="n">loc</span><span class="p">)</span>
</span><span id="Canvas-291"><a href="#Canvas-291"><span class="linenos"> 291</span></a>        <span class="k">return</span> <span class="bp">self</span>
</span><span id="Canvas-292"><a href="#Canvas-292"><span class="linenos"> 292</span></a>
</span><span id="Canvas-293"><a href="#Canvas-293"><span class="linenos"> 293</span></a>    <span class="k">def</span> <span class="nf">arc</span><span class="p">(</span>
</span><span id="Canvas-294"><a href="#Canvas-294"><span class="linenos"> 294</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="Canvas-295"><a href="#Canvas-295"><span class="linenos"> 295</span></a>        <span class="n">center</span><span class="p">:</span> <span class="n">Point</span><span class="p">,</span>
</span><span id="Canvas-296"><a href="#Canvas-296"><span class="linenos"> 296</span></a>        <span class="n">radius_x</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="Canvas-297"><a href="#Canvas-297"><span class="linenos"> 297</span></a>        <span class="n">radius_y</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="Canvas-298"><a href="#Canvas-298"><span class="linenos"> 298</span></a>        <span class="n">start_angle</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
</span><span id="Canvas-299"><a href="#Canvas-299"><span class="linenos"> 299</span></a>        <span class="n">span_angle</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">pi</span> <span class="o">/</span> <span class="mi">2</span><span class="p">,</span>
</span><span id="Canvas-300"><a href="#Canvas-300"><span class="linenos"> 300</span></a>        <span class="n">rot_angle</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
</span><span id="Canvas-301"><a href="#Canvas-301"><span class="linenos"> 301</span></a>        <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
</span><span id="Canvas-302"><a href="#Canvas-302"><span class="linenos"> 302</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Self</span><span class="p">:</span>
</span><span id="Canvas-303"><a href="#Canvas-303"><span class="linenos"> 303</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Canvas-304"><a href="#Canvas-304"><span class="linenos"> 304</span></a><span class="sd">        Draw an arc with the given center, radius, start angle and end angle.</span>
</span><span id="Canvas-305"><a href="#Canvas-305"><span class="linenos"> 305</span></a>
</span><span id="Canvas-306"><a href="#Canvas-306"><span class="linenos"> 306</span></a><span class="sd">        Args:</span>
</span><span id="Canvas-307"><a href="#Canvas-307"><span class="linenos"> 307</span></a><span class="sd">            center (Point): The center of the arc.</span>
</span><span id="Canvas-308"><a href="#Canvas-308"><span class="linenos"> 308</span></a><span class="sd">            radius_x (float): The radius of the arc.</span>
</span><span id="Canvas-309"><a href="#Canvas-309"><span class="linenos"> 309</span></a><span class="sd">            radius_y (float, optional): The second radius of the arc, defaults to None.</span>
</span><span id="Canvas-310"><a href="#Canvas-310"><span class="linenos"> 310</span></a><span class="sd">            start_angle (float): The start angle of the arc.</span>
</span><span id="Canvas-311"><a href="#Canvas-311"><span class="linenos"> 311</span></a><span class="sd">            end_angle (float): The end angle of the arc.</span>
</span><span id="Canvas-312"><a href="#Canvas-312"><span class="linenos"> 312</span></a><span class="sd">            rot_angle (float, optional): The rotation angle of the arc, defaults to 0.</span>
</span><span id="Canvas-313"><a href="#Canvas-313"><span class="linenos"> 313</span></a><span class="sd">            kwargs (dict): Additional keyword arguments.</span>
</span><span id="Canvas-314"><a href="#Canvas-314"><span class="linenos"> 314</span></a>
</span><span id="Canvas-315"><a href="#Canvas-315"><span class="linenos"> 315</span></a><span class="sd">        Returns:</span>
</span><span id="Canvas-316"><a href="#Canvas-316"><span class="linenos"> 316</span></a><span class="sd">            Self: The canvas object.</span>
</span><span id="Canvas-317"><a href="#Canvas-317"><span class="linenos"> 317</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Canvas-318"><a href="#Canvas-318"><span class="linenos"> 318</span></a>        <span class="k">if</span> <span class="n">radius_y</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Canvas-319"><a href="#Canvas-319"><span class="linenos"> 319</span></a>            <span class="n">radius_y</span> <span class="o">=</span> <span class="n">radius_x</span>
</span><span id="Canvas-320"><a href="#Canvas-320"><span class="linenos"> 320</span></a>        <span class="n">draw</span><span class="o">.</span><span class="n">arc</span><span class="p">(</span>
</span><span id="Canvas-321"><a href="#Canvas-321"><span class="linenos"> 321</span></a>            <span class="bp">self</span><span class="p">,</span>
</span><span id="Canvas-322"><a href="#Canvas-322"><span class="linenos"> 322</span></a>            <span class="n">center</span><span class="p">,</span>
</span><span id="Canvas-323"><a href="#Canvas-323"><span class="linenos"> 323</span></a>            <span class="n">radius_x</span><span class="p">,</span>
</span><span id="Canvas-324"><a href="#Canvas-324"><span class="linenos"> 324</span></a>            <span class="n">radius_y</span><span class="p">,</span>
</span><span id="Canvas-325"><a href="#Canvas-325"><span class="linenos"> 325</span></a>            <span class="n">start_angle</span><span class="p">,</span>
</span><span id="Canvas-326"><a href="#Canvas-326"><span class="linenos"> 326</span></a>            <span class="n">span_angle</span><span class="p">,</span>
</span><span id="Canvas-327"><a href="#Canvas-327"><span class="linenos"> 327</span></a>            <span class="n">rot_angle</span><span class="p">,</span>
</span><span id="Canvas-328"><a href="#Canvas-328"><span class="linenos"> 328</span></a>            <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
</span><span id="Canvas-329"><a href="#Canvas-329"><span class="linenos"> 329</span></a>        <span class="p">)</span>
</span><span id="Canvas-330"><a href="#Canvas-330"><span class="linenos"> 330</span></a>        <span class="k">return</span> <span class="bp">self</span>
</span><span id="Canvas-331"><a href="#Canvas-331"><span class="linenos"> 331</span></a>
</span><span id="Canvas-332"><a href="#Canvas-332"><span class="linenos"> 332</span></a>    <span class="k">def</span> <span class="nf">bezier</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">control_points</span><span class="p">:</span> <span class="n">Sequence</span><span class="p">[</span><span class="n">Point</span><span class="p">],</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Self</span><span class="p">:</span>
</span><span id="Canvas-333"><a href="#Canvas-333"><span class="linenos"> 333</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Canvas-334"><a href="#Canvas-334"><span class="linenos"> 334</span></a><span class="sd">        Draw a bezier curve.</span>
</span><span id="Canvas-335"><a href="#Canvas-335"><span class="linenos"> 335</span></a>
</span><span id="Canvas-336"><a href="#Canvas-336"><span class="linenos"> 336</span></a><span class="sd">        Args:</span>
</span><span id="Canvas-337"><a href="#Canvas-337"><span class="linenos"> 337</span></a><span class="sd">            control_points (Sequence[Point]): The control points of the bezier curve.</span>
</span><span id="Canvas-338"><a href="#Canvas-338"><span class="linenos"> 338</span></a><span class="sd">            kwargs (dict): Additional keyword arguments.</span>
</span><span id="Canvas-339"><a href="#Canvas-339"><span class="linenos"> 339</span></a>
</span><span id="Canvas-340"><a href="#Canvas-340"><span class="linenos"> 340</span></a><span class="sd">        Returns:</span>
</span><span id="Canvas-341"><a href="#Canvas-341"><span class="linenos"> 341</span></a><span class="sd">            Self: The canvas object.</span>
</span><span id="Canvas-342"><a href="#Canvas-342"><span class="linenos"> 342</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Canvas-343"><a href="#Canvas-343"><span class="linenos"> 343</span></a>        <span class="n">draw</span><span class="o">.</span><span class="n">bezier</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">control_points</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</span><span id="Canvas-344"><a href="#Canvas-344"><span class="linenos"> 344</span></a>        <span class="k">return</span> <span class="bp">self</span>
</span><span id="Canvas-345"><a href="#Canvas-345"><span class="linenos"> 345</span></a>
</span><span id="Canvas-346"><a href="#Canvas-346"><span class="linenos"> 346</span></a>    <span class="k">def</span> <span class="nf">circle</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">center</span><span class="p">:</span> <span class="n">Point</span><span class="p">,</span> <span class="n">radius</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Self</span><span class="p">:</span>
</span><span id="Canvas-347"><a href="#Canvas-347"><span class="linenos"> 347</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Canvas-348"><a href="#Canvas-348"><span class="linenos"> 348</span></a><span class="sd">        Draw a circle with the given center and radius.</span>
</span><span id="Canvas-349"><a href="#Canvas-349"><span class="linenos"> 349</span></a>
</span><span id="Canvas-350"><a href="#Canvas-350"><span class="linenos"> 350</span></a><span class="sd">        Args:</span>
</span><span id="Canvas-351"><a href="#Canvas-351"><span class="linenos"> 351</span></a><span class="sd">            center (Point): The center of the circle.</span>
</span><span id="Canvas-352"><a href="#Canvas-352"><span class="linenos"> 352</span></a><span class="sd">            radius (float): The radius of the circle.</span>
</span><span id="Canvas-353"><a href="#Canvas-353"><span class="linenos"> 353</span></a><span class="sd">            kwargs (dict): Additional keyword arguments.</span>
</span><span id="Canvas-354"><a href="#Canvas-354"><span class="linenos"> 354</span></a>
</span><span id="Canvas-355"><a href="#Canvas-355"><span class="linenos"> 355</span></a><span class="sd">        Returns:</span>
</span><span id="Canvas-356"><a href="#Canvas-356"><span class="linenos"> 356</span></a><span class="sd">            Self: The canvas object.</span>
</span><span id="Canvas-357"><a href="#Canvas-357"><span class="linenos"> 357</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Canvas-358"><a href="#Canvas-358"><span class="linenos"> 358</span></a>        <span class="n">draw</span><span class="o">.</span><span class="n">circle</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">center</span><span class="p">,</span> <span class="n">radius</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</span><span id="Canvas-359"><a href="#Canvas-359"><span class="linenos"> 359</span></a>        <span class="k">return</span> <span class="bp">self</span>
</span><span id="Canvas-360"><a href="#Canvas-360"><span class="linenos"> 360</span></a>
</span><span id="Canvas-361"><a href="#Canvas-361"><span class="linenos"> 361</span></a>    <span class="k">def</span> <span class="nf">ellipse</span><span class="p">(</span>
</span><span id="Canvas-362"><a href="#Canvas-362"><span class="linenos"> 362</span></a>        <span class="bp">self</span><span class="p">,</span> <span class="n">center</span><span class="p">:</span> <span class="n">Point</span><span class="p">,</span> <span class="n">width</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">height</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">angle</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span>
</span><span id="Canvas-363"><a href="#Canvas-363"><span class="linenos"> 363</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Self</span><span class="p">:</span>
</span><span id="Canvas-364"><a href="#Canvas-364"><span class="linenos"> 364</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Canvas-365"><a href="#Canvas-365"><span class="linenos"> 365</span></a><span class="sd">        Draw an ellipse with the given center and radius.</span>
</span><span id="Canvas-366"><a href="#Canvas-366"><span class="linenos"> 366</span></a>
</span><span id="Canvas-367"><a href="#Canvas-367"><span class="linenos"> 367</span></a><span class="sd">        Args:</span>
</span><span id="Canvas-368"><a href="#Canvas-368"><span class="linenos"> 368</span></a><span class="sd">            center (Point): The center of the ellipse.</span>
</span><span id="Canvas-369"><a href="#Canvas-369"><span class="linenos"> 369</span></a><span class="sd">            width (float): The width of the ellipse.</span>
</span><span id="Canvas-370"><a href="#Canvas-370"><span class="linenos"> 370</span></a><span class="sd">            height (float): The height of the ellipse.</span>
</span><span id="Canvas-371"><a href="#Canvas-371"><span class="linenos"> 371</span></a><span class="sd">            angle (float, optional): The angle of the ellipse, defaults to 0.</span>
</span><span id="Canvas-372"><a href="#Canvas-372"><span class="linenos"> 372</span></a><span class="sd">            kwargs (dict): Additional keyword arguments.</span>
</span><span id="Canvas-373"><a href="#Canvas-373"><span class="linenos"> 373</span></a>
</span><span id="Canvas-374"><a href="#Canvas-374"><span class="linenos"> 374</span></a><span class="sd">        Returns:</span>
</span><span id="Canvas-375"><a href="#Canvas-375"><span class="linenos"> 375</span></a><span class="sd">            Self: The canvas object.</span>
</span><span id="Canvas-376"><a href="#Canvas-376"><span class="linenos"> 376</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Canvas-377"><a href="#Canvas-377"><span class="linenos"> 377</span></a>        <span class="n">draw</span><span class="o">.</span><span class="n">ellipse</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">center</span><span class="p">,</span> <span class="n">width</span><span class="p">,</span> <span class="n">height</span><span class="p">,</span> <span class="n">angle</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</span><span id="Canvas-378"><a href="#Canvas-378"><span class="linenos"> 378</span></a>        <span class="k">return</span> <span class="bp">self</span>
</span><span id="Canvas-379"><a href="#Canvas-379"><span class="linenos"> 379</span></a>
</span><span id="Canvas-380"><a href="#Canvas-380"><span class="linenos"> 380</span></a>    <span class="k">def</span> <span class="nf">text</span><span class="p">(</span>
</span><span id="Canvas-381"><a href="#Canvas-381"><span class="linenos"> 381</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="Canvas-382"><a href="#Canvas-382"><span class="linenos"> 382</span></a>        <span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
</span><span id="Canvas-383"><a href="#Canvas-383"><span class="linenos"> 383</span></a>        <span class="n">pos</span><span class="p">:</span> <span class="n">Point</span><span class="p">,</span>
</span><span id="Canvas-384"><a href="#Canvas-384"><span class="linenos"> 384</span></a>        <span class="n">font_family</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="Canvas-385"><a href="#Canvas-385"><span class="linenos"> 385</span></a>        <span class="n">font_size</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="Canvas-386"><a href="#Canvas-386"><span class="linenos"> 386</span></a>        <span class="n">anchor</span><span class="p">:</span> <span class="n">Anchor</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="Canvas-387"><a href="#Canvas-387"><span class="linenos"> 387</span></a>        <span class="n">align</span><span class="p">:</span> <span class="n">Align</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="Canvas-388"><a href="#Canvas-388"><span class="linenos"> 388</span></a>        <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
</span><span id="Canvas-389"><a href="#Canvas-389"><span class="linenos"> 389</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Self</span><span class="p">:</span>
</span><span id="Canvas-390"><a href="#Canvas-390"><span class="linenos"> 390</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Canvas-391"><a href="#Canvas-391"><span class="linenos"> 391</span></a><span class="sd">        Draw text at the given point.</span>
</span><span id="Canvas-392"><a href="#Canvas-392"><span class="linenos"> 392</span></a>
</span><span id="Canvas-393"><a href="#Canvas-393"><span class="linenos"> 393</span></a><span class="sd">        Args:</span>
</span><span id="Canvas-394"><a href="#Canvas-394"><span class="linenos"> 394</span></a><span class="sd">            text (str): The text to draw.</span>
</span><span id="Canvas-395"><a href="#Canvas-395"><span class="linenos"> 395</span></a><span class="sd">            pos (Point): The position to draw the text.</span>
</span><span id="Canvas-396"><a href="#Canvas-396"><span class="linenos"> 396</span></a><span class="sd">            font_family (str, optional): The font family of the text, defaults to None.</span>
</span><span id="Canvas-397"><a href="#Canvas-397"><span class="linenos"> 397</span></a><span class="sd">            font_size (int, optional): The font size of the text, defaults to None.</span>
</span><span id="Canvas-398"><a href="#Canvas-398"><span class="linenos"> 398</span></a><span class="sd">            anchor (Anchor, optional): The anchor of the text, defaults to None.</span>
</span><span id="Canvas-399"><a href="#Canvas-399"><span class="linenos"> 399</span></a><span class="sd">            anchor options: BASE, BASE_EAST, BASE_WEST, BOTTOM, CENTER, EAST, NORTH,</span>
</span><span id="Canvas-400"><a href="#Canvas-400"><span class="linenos"> 400</span></a><span class="sd">            NORTHEAST, NORTHWEST, SOUTH, SOUTHEAST, SOUTHWEST, WEST, MIDEAST, MIDWEST, RIGHT,</span>
</span><span id="Canvas-401"><a href="#Canvas-401"><span class="linenos"> 401</span></a><span class="sd">            LEFT, TOP</span>
</span><span id="Canvas-402"><a href="#Canvas-402"><span class="linenos"> 402</span></a><span class="sd">            align (Align, optional): The alignment of the text, defaults to Align.CENTER.</span>
</span><span id="Canvas-403"><a href="#Canvas-403"><span class="linenos"> 403</span></a><span class="sd">            align options: CENTER, FLUSH_CENTER, FLUSH_LEFT, FLUSH_RIGHT, JUSTIFY, LEFT, RIGHT</span>
</span><span id="Canvas-404"><a href="#Canvas-404"><span class="linenos"> 404</span></a><span class="sd">            kwargs (dict): Additional keyword arguments.</span>
</span><span id="Canvas-405"><a href="#Canvas-405"><span class="linenos"> 405</span></a><span class="sd">            common kwargs: fill_color, line_color, line_width, fill, line, alpha, font_color</span>
</span><span id="Canvas-406"><a href="#Canvas-406"><span class="linenos"> 406</span></a>
</span><span id="Canvas-407"><a href="#Canvas-407"><span class="linenos"> 407</span></a><span class="sd">        Returns:</span>
</span><span id="Canvas-408"><a href="#Canvas-408"><span class="linenos"> 408</span></a><span class="sd">            Self: The canvas object.</span>
</span><span id="Canvas-409"><a href="#Canvas-409"><span class="linenos"> 409</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Canvas-410"><a href="#Canvas-410"><span class="linenos"> 410</span></a>        <span class="n">pos</span> <span class="o">=</span> <span class="p">[</span><span class="n">pos</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">pos</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="mi">1</span><span class="p">]</span>
</span><span id="Canvas-411"><a href="#Canvas-411"><span class="linenos"> 411</span></a>        <span class="n">pos</span> <span class="o">=</span> <span class="n">pos</span> <span class="o">@</span> <span class="bp">self</span><span class="o">.</span><span class="n">_xform_matrix</span>
</span><span id="Canvas-412"><a href="#Canvas-412"><span class="linenos"> 412</span></a>        <span class="n">draw</span><span class="o">.</span><span class="n">text</span><span class="p">(</span>
</span><span id="Canvas-413"><a href="#Canvas-413"><span class="linenos"> 413</span></a>            <span class="bp">self</span><span class="p">,</span>
</span><span id="Canvas-414"><a href="#Canvas-414"><span class="linenos"> 414</span></a>            <span class="n">txt</span><span class="o">=</span><span class="n">text</span><span class="p">,</span>
</span><span id="Canvas-415"><a href="#Canvas-415"><span class="linenos"> 415</span></a>            <span class="n">pos</span><span class="o">=</span><span class="n">pos</span><span class="p">,</span>
</span><span id="Canvas-416"><a href="#Canvas-416"><span class="linenos"> 416</span></a>            <span class="n">font_family</span><span class="o">=</span><span class="n">font_family</span><span class="p">,</span>
</span><span id="Canvas-417"><a href="#Canvas-417"><span class="linenos"> 417</span></a>            <span class="n">font_size</span><span class="o">=</span><span class="n">font_size</span><span class="p">,</span>
</span><span id="Canvas-418"><a href="#Canvas-418"><span class="linenos"> 418</span></a>            <span class="n">anchor</span><span class="o">=</span><span class="n">anchor</span><span class="p">,</span>
</span><span id="Canvas-419"><a href="#Canvas-419"><span class="linenos"> 419</span></a>            <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
</span><span id="Canvas-420"><a href="#Canvas-420"><span class="linenos"> 420</span></a>        <span class="p">)</span>
</span><span id="Canvas-421"><a href="#Canvas-421"><span class="linenos"> 421</span></a>        <span class="k">return</span> <span class="bp">self</span>
</span><span id="Canvas-422"><a href="#Canvas-422"><span class="linenos"> 422</span></a>
</span><span id="Canvas-423"><a href="#Canvas-423"><span class="linenos"> 423</span></a>    <span class="k">def</span> <span class="nf">help_lines</span><span class="p">(</span>
</span><span id="Canvas-424"><a href="#Canvas-424"><span class="linenos"> 424</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="Canvas-425"><a href="#Canvas-425"><span class="linenos"> 425</span></a>        <span class="n">pos</span><span class="o">=</span><span class="p">(</span><span class="o">-</span><span class="mi">100</span><span class="p">,</span> <span class="o">-</span><span class="mi">100</span><span class="p">),</span>
</span><span id="Canvas-426"><a href="#Canvas-426"><span class="linenos"> 426</span></a>        <span class="n">width</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mi">400</span><span class="p">,</span>
</span><span id="Canvas-427"><a href="#Canvas-427"><span class="linenos"> 427</span></a>        <span class="n">height</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mi">400</span><span class="p">,</span>
</span><span id="Canvas-428"><a href="#Canvas-428"><span class="linenos"> 428</span></a>        <span class="n">spacing</span><span class="o">=</span><span class="mi">25</span><span class="p">,</span>
</span><span id="Canvas-429"><a href="#Canvas-429"><span class="linenos"> 429</span></a>        <span class="n">cs_size</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mi">25</span><span class="p">,</span>
</span><span id="Canvas-430"><a href="#Canvas-430"><span class="linenos"> 430</span></a>        <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
</span><span id="Canvas-431"><a href="#Canvas-431"><span class="linenos"> 431</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Self</span><span class="p">:</span>
</span><span id="Canvas-432"><a href="#Canvas-432"><span class="linenos"> 432</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Canvas-433"><a href="#Canvas-433"><span class="linenos"> 433</span></a><span class="sd">        Draw help lines on the canvas.</span>
</span><span id="Canvas-434"><a href="#Canvas-434"><span class="linenos"> 434</span></a>
</span><span id="Canvas-435"><a href="#Canvas-435"><span class="linenos"> 435</span></a><span class="sd">        Args:</span>
</span><span id="Canvas-436"><a href="#Canvas-436"><span class="linenos"> 436</span></a><span class="sd">            pos (tuple): The lower-left corner of the grid.</span>
</span><span id="Canvas-437"><a href="#Canvas-437"><span class="linenos"> 437</span></a><span class="sd">            width (float): The length of the help lines along the x-axis.</span>
</span><span id="Canvas-438"><a href="#Canvas-438"><span class="linenos"> 438</span></a><span class="sd">            height (float): The length of the help lines along the y-axis.</span>
</span><span id="Canvas-439"><a href="#Canvas-439"><span class="linenos"> 439</span></a><span class="sd">            spacing (int): The spacing between the help lines.</span>
</span><span id="Canvas-440"><a href="#Canvas-440"><span class="linenos"> 440</span></a><span class="sd">            cs_size (float): The size of the coordinate system.</span>
</span><span id="Canvas-441"><a href="#Canvas-441"><span class="linenos"> 441</span></a><span class="sd">            kwargs (dict): Additional keyword arguments.</span>
</span><span id="Canvas-442"><a href="#Canvas-442"><span class="linenos"> 442</span></a>
</span><span id="Canvas-443"><a href="#Canvas-443"><span class="linenos"> 443</span></a><span class="sd">        Returns:</span>
</span><span id="Canvas-444"><a href="#Canvas-444"><span class="linenos"> 444</span></a><span class="sd">            Self: The canvas object.</span>
</span><span id="Canvas-445"><a href="#Canvas-445"><span class="linenos"> 445</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Canvas-446"><a href="#Canvas-446"><span class="linenos"> 446</span></a>        <span class="n">draw</span><span class="o">.</span><span class="n">help_lines</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pos</span><span class="p">,</span> <span class="n">width</span><span class="p">,</span> <span class="n">height</span><span class="p">,</span> <span class="n">spacing</span><span class="p">,</span> <span class="n">cs_size</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</span><span id="Canvas-447"><a href="#Canvas-447"><span class="linenos"> 447</span></a>        <span class="k">return</span> <span class="bp">self</span>
</span><span id="Canvas-448"><a href="#Canvas-448"><span class="linenos"> 448</span></a>
</span><span id="Canvas-449"><a href="#Canvas-449"><span class="linenos"> 449</span></a>    <span class="k">def</span> <span class="nf">grid</span><span class="p">(</span>
</span><span id="Canvas-450"><a href="#Canvas-450"><span class="linenos"> 450</span></a>        <span class="bp">self</span><span class="p">,</span> <span class="n">pos</span><span class="p">:</span> <span class="n">Point</span><span class="p">,</span> <span class="n">width</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">height</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">spacing</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span>
</span><span id="Canvas-451"><a href="#Canvas-451"><span class="linenos"> 451</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Self</span><span class="p">:</span>
</span><span id="Canvas-452"><a href="#Canvas-452"><span class="linenos"> 452</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Canvas-453"><a href="#Canvas-453"><span class="linenos"> 453</span></a><span class="sd">        Draw a grid with the given size and spacing.</span>
</span><span id="Canvas-454"><a href="#Canvas-454"><span class="linenos"> 454</span></a>
</span><span id="Canvas-455"><a href="#Canvas-455"><span class="linenos"> 455</span></a><span class="sd">        Args:</span>
</span><span id="Canvas-456"><a href="#Canvas-456"><span class="linenos"> 456</span></a><span class="sd">            pos (Point): The position to start drawing the grid.</span>
</span><span id="Canvas-457"><a href="#Canvas-457"><span class="linenos"> 457</span></a><span class="sd">            width (float): The length of the grid along the x-axis.</span>
</span><span id="Canvas-458"><a href="#Canvas-458"><span class="linenos"> 458</span></a><span class="sd">            height (float): The length of the grid along the y-axis.</span>
</span><span id="Canvas-459"><a href="#Canvas-459"><span class="linenos"> 459</span></a><span class="sd">            spacing (float): The spacing between the grid lines.</span>
</span><span id="Canvas-460"><a href="#Canvas-460"><span class="linenos"> 460</span></a><span class="sd">            kwargs (dict): Additional keyword arguments.</span>
</span><span id="Canvas-461"><a href="#Canvas-461"><span class="linenos"> 461</span></a>
</span><span id="Canvas-462"><a href="#Canvas-462"><span class="linenos"> 462</span></a><span class="sd">        Returns:</span>
</span><span id="Canvas-463"><a href="#Canvas-463"><span class="linenos"> 463</span></a><span class="sd">            Self: The canvas object.</span>
</span><span id="Canvas-464"><a href="#Canvas-464"><span class="linenos"> 464</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Canvas-465"><a href="#Canvas-465"><span class="linenos"> 465</span></a>        <span class="n">draw</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pos</span><span class="p">,</span> <span class="n">width</span><span class="p">,</span> <span class="n">height</span><span class="p">,</span> <span class="n">spacing</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</span><span id="Canvas-466"><a href="#Canvas-466"><span class="linenos"> 466</span></a>        <span class="k">return</span> <span class="bp">self</span>
</span><span id="Canvas-467"><a href="#Canvas-467"><span class="linenos"> 467</span></a>
</span><span id="Canvas-468"><a href="#Canvas-468"><span class="linenos"> 468</span></a>    <span class="k">def</span> <span class="nf">line</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">start</span><span class="p">:</span> <span class="n">Point</span><span class="p">,</span> <span class="n">end</span><span class="p">:</span> <span class="n">Point</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Self</span><span class="p">:</span>
</span><span id="Canvas-469"><a href="#Canvas-469"><span class="linenos"> 469</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Canvas-470"><a href="#Canvas-470"><span class="linenos"> 470</span></a><span class="sd">        Draw a line from start to end.</span>
</span><span id="Canvas-471"><a href="#Canvas-471"><span class="linenos"> 471</span></a>
</span><span id="Canvas-472"><a href="#Canvas-472"><span class="linenos"> 472</span></a><span class="sd">        Args:</span>
</span><span id="Canvas-473"><a href="#Canvas-473"><span class="linenos"> 473</span></a><span class="sd">            start (Point): The starting point of the line.</span>
</span><span id="Canvas-474"><a href="#Canvas-474"><span class="linenos"> 474</span></a><span class="sd">            end (Point): The ending point of the line.</span>
</span><span id="Canvas-475"><a href="#Canvas-475"><span class="linenos"> 475</span></a><span class="sd">            kwargs (dict): Additional keyword arguments.</span>
</span><span id="Canvas-476"><a href="#Canvas-476"><span class="linenos"> 476</span></a>
</span><span id="Canvas-477"><a href="#Canvas-477"><span class="linenos"> 477</span></a><span class="sd">        Returns:</span>
</span><span id="Canvas-478"><a href="#Canvas-478"><span class="linenos"> 478</span></a><span class="sd">            Self: The canvas object.</span>
</span><span id="Canvas-479"><a href="#Canvas-479"><span class="linenos"> 479</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Canvas-480"><a href="#Canvas-480"><span class="linenos"> 480</span></a>        <span class="n">draw</span><span class="o">.</span><span class="n">line</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">start</span><span class="p">,</span> <span class="n">end</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</span><span id="Canvas-481"><a href="#Canvas-481"><span class="linenos"> 481</span></a>        <span class="k">return</span> <span class="bp">self</span>
</span><span id="Canvas-482"><a href="#Canvas-482"><span class="linenos"> 482</span></a>
</span><span id="Canvas-483"><a href="#Canvas-483"><span class="linenos"> 483</span></a>    <span class="k">def</span> <span class="nf">rectangle</span><span class="p">(</span>
</span><span id="Canvas-484"><a href="#Canvas-484"><span class="linenos"> 484</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="Canvas-485"><a href="#Canvas-485"><span class="linenos"> 485</span></a>        <span class="n">center</span><span class="p">:</span> <span class="n">Point</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
</span><span id="Canvas-486"><a href="#Canvas-486"><span class="linenos"> 486</span></a>        <span class="n">width</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mi">100</span><span class="p">,</span>
</span><span id="Canvas-487"><a href="#Canvas-487"><span class="linenos"> 487</span></a>        <span class="n">height</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mi">100</span><span class="p">,</span>
</span><span id="Canvas-488"><a href="#Canvas-488"><span class="linenos"> 488</span></a>        <span class="n">angle</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
</span><span id="Canvas-489"><a href="#Canvas-489"><span class="linenos"> 489</span></a>        <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
</span><span id="Canvas-490"><a href="#Canvas-490"><span class="linenos"> 490</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Self</span><span class="p">:</span>
</span><span id="Canvas-491"><a href="#Canvas-491"><span class="linenos"> 491</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Canvas-492"><a href="#Canvas-492"><span class="linenos"> 492</span></a><span class="sd">        Draw a rectangle.</span>
</span><span id="Canvas-493"><a href="#Canvas-493"><span class="linenos"> 493</span></a>
</span><span id="Canvas-494"><a href="#Canvas-494"><span class="linenos"> 494</span></a><span class="sd">        Args:</span>
</span><span id="Canvas-495"><a href="#Canvas-495"><span class="linenos"> 495</span></a><span class="sd">            center (Point): The center of the rectangle.</span>
</span><span id="Canvas-496"><a href="#Canvas-496"><span class="linenos"> 496</span></a><span class="sd">            width (float): The width of the rectangle.</span>
</span><span id="Canvas-497"><a href="#Canvas-497"><span class="linenos"> 497</span></a><span class="sd">            height (float): The height of the rectangle.</span>
</span><span id="Canvas-498"><a href="#Canvas-498"><span class="linenos"> 498</span></a><span class="sd">            angle (float, optional): The angle of the rectangle, defaults to 0.</span>
</span><span id="Canvas-499"><a href="#Canvas-499"><span class="linenos"> 499</span></a><span class="sd">            kwargs (dict): Additional keyword arguments.</span>
</span><span id="Canvas-500"><a href="#Canvas-500"><span class="linenos"> 500</span></a>
</span><span id="Canvas-501"><a href="#Canvas-501"><span class="linenos"> 501</span></a><span class="sd">        Returns:</span>
</span><span id="Canvas-502"><a href="#Canvas-502"><span class="linenos"> 502</span></a><span class="sd">            Self: The canvas object.</span>
</span><span id="Canvas-503"><a href="#Canvas-503"><span class="linenos"> 503</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Canvas-504"><a href="#Canvas-504"><span class="linenos"> 504</span></a>        <span class="n">draw</span><span class="o">.</span><span class="n">rectangle</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">center</span><span class="p">,</span> <span class="n">width</span><span class="p">,</span> <span class="n">height</span><span class="p">,</span> <span class="n">angle</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</span><span id="Canvas-505"><a href="#Canvas-505"><span class="linenos"> 505</span></a>        <span class="k">return</span> <span class="bp">self</span>
</span><span id="Canvas-506"><a href="#Canvas-506"><span class="linenos"> 506</span></a>
</span><span id="Canvas-507"><a href="#Canvas-507"><span class="linenos"> 507</span></a>    <span class="k">def</span> <span class="nf">square</span><span class="p">(</span>
</span><span id="Canvas-508"><a href="#Canvas-508"><span class="linenos"> 508</span></a>        <span class="bp">self</span><span class="p">,</span> <span class="n">center</span><span class="p">:</span> <span class="n">Point</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="n">size</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mi">100</span><span class="p">,</span> <span class="n">angle</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span>
</span><span id="Canvas-509"><a href="#Canvas-509"><span class="linenos"> 509</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Self</span><span class="p">:</span>
</span><span id="Canvas-510"><a href="#Canvas-510"><span class="linenos"> 510</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Canvas-511"><a href="#Canvas-511"><span class="linenos"> 511</span></a><span class="sd">        Draw a square with the given center and size.</span>
</span><span id="Canvas-512"><a href="#Canvas-512"><span class="linenos"> 512</span></a>
</span><span id="Canvas-513"><a href="#Canvas-513"><span class="linenos"> 513</span></a><span class="sd">        Args:</span>
</span><span id="Canvas-514"><a href="#Canvas-514"><span class="linenos"> 514</span></a><span class="sd">            center (Point): The center of the square.</span>
</span><span id="Canvas-515"><a href="#Canvas-515"><span class="linenos"> 515</span></a><span class="sd">            size (float): The size of the square.</span>
</span><span id="Canvas-516"><a href="#Canvas-516"><span class="linenos"> 516</span></a><span class="sd">            angle (float, optional): The angle of the square, defaults to 0.</span>
</span><span id="Canvas-517"><a href="#Canvas-517"><span class="linenos"> 517</span></a><span class="sd">            kwargs (dict): Additional keyword arguments.</span>
</span><span id="Canvas-518"><a href="#Canvas-518"><span class="linenos"> 518</span></a>
</span><span id="Canvas-519"><a href="#Canvas-519"><span class="linenos"> 519</span></a><span class="sd">        Returns:</span>
</span><span id="Canvas-520"><a href="#Canvas-520"><span class="linenos"> 520</span></a><span class="sd">            Self: The canvas object.</span>
</span><span id="Canvas-521"><a href="#Canvas-521"><span class="linenos"> 521</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Canvas-522"><a href="#Canvas-522"><span class="linenos"> 522</span></a>        <span class="n">draw</span><span class="o">.</span><span class="n">rectangle</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">center</span><span class="p">,</span> <span class="n">size</span><span class="p">,</span> <span class="n">size</span><span class="p">,</span> <span class="n">angle</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</span><span id="Canvas-523"><a href="#Canvas-523"><span class="linenos"> 523</span></a>        <span class="k">return</span> <span class="bp">self</span>
</span><span id="Canvas-524"><a href="#Canvas-524"><span class="linenos"> 524</span></a>
</span><span id="Canvas-525"><a href="#Canvas-525"><span class="linenos"> 525</span></a>    <span class="k">def</span> <span class="nf">lines</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">points</span><span class="p">:</span> <span class="n">Sequence</span><span class="p">[</span><span class="n">Point</span><span class="p">],</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Self</span><span class="p">:</span>
</span><span id="Canvas-526"><a href="#Canvas-526"><span class="linenos"> 526</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Canvas-527"><a href="#Canvas-527"><span class="linenos"> 527</span></a><span class="sd">        Draw a polyline through the given points.</span>
</span><span id="Canvas-528"><a href="#Canvas-528"><span class="linenos"> 528</span></a>
</span><span id="Canvas-529"><a href="#Canvas-529"><span class="linenos"> 529</span></a><span class="sd">        Args:</span>
</span><span id="Canvas-530"><a href="#Canvas-530"><span class="linenos"> 530</span></a><span class="sd">            points (Sequence[Point]): The points to draw the polyline through.</span>
</span><span id="Canvas-531"><a href="#Canvas-531"><span class="linenos"> 531</span></a><span class="sd">            kwargs (dict): Additional keyword arguments.</span>
</span><span id="Canvas-532"><a href="#Canvas-532"><span class="linenos"> 532</span></a>
</span><span id="Canvas-533"><a href="#Canvas-533"><span class="linenos"> 533</span></a><span class="sd">        Returns:</span>
</span><span id="Canvas-534"><a href="#Canvas-534"><span class="linenos"> 534</span></a><span class="sd">            Self: The canvas object.</span>
</span><span id="Canvas-535"><a href="#Canvas-535"><span class="linenos"> 535</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Canvas-536"><a href="#Canvas-536"><span class="linenos"> 536</span></a>        <span class="n">draw</span><span class="o">.</span><span class="n">lines</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">points</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</span><span id="Canvas-537"><a href="#Canvas-537"><span class="linenos"> 537</span></a>        <span class="k">return</span> <span class="bp">self</span>
</span><span id="Canvas-538"><a href="#Canvas-538"><span class="linenos"> 538</span></a>
</span><span id="Canvas-539"><a href="#Canvas-539"><span class="linenos"> 539</span></a>    <span class="k">def</span> <span class="nf">draw_lace</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">lace</span><span class="p">:</span> <span class="n">Batch</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Self</span><span class="p">:</span>
</span><span id="Canvas-540"><a href="#Canvas-540"><span class="linenos"> 540</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Canvas-541"><a href="#Canvas-541"><span class="linenos"> 541</span></a><span class="sd">        Draw the lace.</span>
</span><span id="Canvas-542"><a href="#Canvas-542"><span class="linenos"> 542</span></a>
</span><span id="Canvas-543"><a href="#Canvas-543"><span class="linenos"> 543</span></a><span class="sd">        Args:</span>
</span><span id="Canvas-544"><a href="#Canvas-544"><span class="linenos"> 544</span></a><span class="sd">            lace (Batch): The lace to draw.</span>
</span><span id="Canvas-545"><a href="#Canvas-545"><span class="linenos"> 545</span></a><span class="sd">            kwargs (dict): Additional keyword arguments.</span>
</span><span id="Canvas-546"><a href="#Canvas-546"><span class="linenos"> 546</span></a>
</span><span id="Canvas-547"><a href="#Canvas-547"><span class="linenos"> 547</span></a><span class="sd">        Returns:</span>
</span><span id="Canvas-548"><a href="#Canvas-548"><span class="linenos"> 548</span></a><span class="sd">            Self: The canvas object.</span>
</span><span id="Canvas-549"><a href="#Canvas-549"><span class="linenos"> 549</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Canvas-550"><a href="#Canvas-550"><span class="linenos"> 550</span></a>        <span class="n">draw</span><span class="o">.</span><span class="n">draw_lace</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">lace</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</span><span id="Canvas-551"><a href="#Canvas-551"><span class="linenos"> 551</span></a>        <span class="k">return</span> <span class="bp">self</span>
</span><span id="Canvas-552"><a href="#Canvas-552"><span class="linenos"> 552</span></a>
</span><span id="Canvas-553"><a href="#Canvas-553"><span class="linenos"> 553</span></a>    <span class="k">def</span> <span class="nf">draw_dimension</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dim</span><span class="p">:</span> <span class="n">Shape</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Self</span><span class="p">:</span>
</span><span id="Canvas-554"><a href="#Canvas-554"><span class="linenos"> 554</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Canvas-555"><a href="#Canvas-555"><span class="linenos"> 555</span></a><span class="sd">        Draw the dimension.</span>
</span><span id="Canvas-556"><a href="#Canvas-556"><span class="linenos"> 556</span></a>
</span><span id="Canvas-557"><a href="#Canvas-557"><span class="linenos"> 557</span></a><span class="sd">        Args:</span>
</span><span id="Canvas-558"><a href="#Canvas-558"><span class="linenos"> 558</span></a><span class="sd">            dim (Shape): The dimension to draw.</span>
</span><span id="Canvas-559"><a href="#Canvas-559"><span class="linenos"> 559</span></a><span class="sd">            kwargs (dict): Additional keyword arguments.</span>
</span><span id="Canvas-560"><a href="#Canvas-560"><span class="linenos"> 560</span></a>
</span><span id="Canvas-561"><a href="#Canvas-561"><span class="linenos"> 561</span></a><span class="sd">        Returns:</span>
</span><span id="Canvas-562"><a href="#Canvas-562"><span class="linenos"> 562</span></a><span class="sd">            Self: The canvas object.</span>
</span><span id="Canvas-563"><a href="#Canvas-563"><span class="linenos"> 563</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Canvas-564"><a href="#Canvas-564"><span class="linenos"> 564</span></a>        <span class="n">draw</span><span class="o">.</span><span class="n">draw_dimension</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dim</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</span><span id="Canvas-565"><a href="#Canvas-565"><span class="linenos"> 565</span></a>        <span class="k">return</span> <span class="bp">self</span>
</span><span id="Canvas-566"><a href="#Canvas-566"><span class="linenos"> 566</span></a>
</span><span id="Canvas-567"><a href="#Canvas-567"><span class="linenos"> 567</span></a>    <span class="k">def</span> <span class="nf">draw</span><span class="p">(</span>
</span><span id="Canvas-568"><a href="#Canvas-568"><span class="linenos"> 568</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="Canvas-569"><a href="#Canvas-569"><span class="linenos"> 569</span></a>        <span class="n">item_s</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">Drawable</span><span class="p">,</span> <span class="nb">list</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">],</span>
</span><span id="Canvas-570"><a href="#Canvas-570"><span class="linenos"> 570</span></a>        <span class="n">pos</span><span class="p">:</span> <span class="n">Point</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="Canvas-571"><a href="#Canvas-571"><span class="linenos"> 571</span></a>        <span class="n">angle</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
</span><span id="Canvas-572"><a href="#Canvas-572"><span class="linenos"> 572</span></a>        <span class="n">rotocenter</span><span class="p">:</span> <span class="n">Point</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
</span><span id="Canvas-573"><a href="#Canvas-573"><span class="linenos"> 573</span></a>        <span class="n">scale</span><span class="o">=</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
</span><span id="Canvas-574"><a href="#Canvas-574"><span class="linenos"> 574</span></a>        <span class="n">about</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
</span><span id="Canvas-575"><a href="#Canvas-575"><span class="linenos"> 575</span></a>        <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
</span><span id="Canvas-576"><a href="#Canvas-576"><span class="linenos"> 576</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Self</span><span class="p">:</span>
</span><span id="Canvas-577"><a href="#Canvas-577"><span class="linenos"> 577</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Canvas-578"><a href="#Canvas-578"><span class="linenos"> 578</span></a><span class="sd">        Draw the item_s. item_s can be a single item or a list of items.</span>
</span><span id="Canvas-579"><a href="#Canvas-579"><span class="linenos"> 579</span></a>
</span><span id="Canvas-580"><a href="#Canvas-580"><span class="linenos"> 580</span></a><span class="sd">        Args:</span>
</span><span id="Canvas-581"><a href="#Canvas-581"><span class="linenos"> 581</span></a><span class="sd">            item_s (Union[Drawable, list, tuple]): The item(s) to draw.</span>
</span><span id="Canvas-582"><a href="#Canvas-582"><span class="linenos"> 582</span></a><span class="sd">            pos (Point, optional): The position to draw the item(s), defaults to None.</span>
</span><span id="Canvas-583"><a href="#Canvas-583"><span class="linenos"> 583</span></a><span class="sd">            angle (float, optional): The angle to rotate the item(s), defaults to 0.</span>
</span><span id="Canvas-584"><a href="#Canvas-584"><span class="linenos"> 584</span></a><span class="sd">            rotocenter (Point, optional): The point about which to rotate, defaults to (0, 0).</span>
</span><span id="Canvas-585"><a href="#Canvas-585"><span class="linenos"> 585</span></a><span class="sd">            scale (tuple, optional): The scale factors for the x and y axes, defaults to (1, 1).</span>
</span><span id="Canvas-586"><a href="#Canvas-586"><span class="linenos"> 586</span></a><span class="sd">            about (tuple, optional): The point about which to scale, defaults to (0, 0).</span>
</span><span id="Canvas-587"><a href="#Canvas-587"><span class="linenos"> 587</span></a><span class="sd">            kwargs (dict): Additional keyword arguments.</span>
</span><span id="Canvas-588"><a href="#Canvas-588"><span class="linenos"> 588</span></a>
</span><span id="Canvas-589"><a href="#Canvas-589"><span class="linenos"> 589</span></a><span class="sd">        Returns:</span>
</span><span id="Canvas-590"><a href="#Canvas-590"><span class="linenos"> 590</span></a><span class="sd">            Self: The canvas object.</span>
</span><span id="Canvas-591"><a href="#Canvas-591"><span class="linenos"> 591</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Canvas-592"><a href="#Canvas-592"><span class="linenos"> 592</span></a>        <span class="n">sketch_xform</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_sketch_xform_matrix</span>
</span><span id="Canvas-593"><a href="#Canvas-593"><span class="linenos"> 593</span></a>        <span class="k">if</span> <span class="n">pos</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Canvas-594"><a href="#Canvas-594"><span class="linenos"> 594</span></a>            <span class="n">sketch_xform</span> <span class="o">=</span> <span class="n">translation_matrix</span><span class="p">(</span><span class="o">*</span><span class="n">pos</span><span class="p">[:</span><span class="mi">2</span><span class="p">])</span> <span class="o">@</span> <span class="n">sketch_xform</span>
</span><span id="Canvas-595"><a href="#Canvas-595"><span class="linenos"> 595</span></a>        <span class="k">if</span> <span class="n">scale</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">!=</span> <span class="mi">1</span> <span class="ow">or</span> <span class="n">scale</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">!=</span> <span class="mi">1</span><span class="p">:</span>
</span><span id="Canvas-596"><a href="#Canvas-596"><span class="linenos"> 596</span></a>            <span class="n">sketch_xform</span> <span class="o">=</span> <span class="n">scale_in_place_matrix</span><span class="p">(</span><span class="o">*</span><span class="n">pos</span><span class="p">[:</span><span class="mi">2</span><span class="p">],</span> <span class="n">about</span><span class="p">)</span> <span class="o">@</span> <span class="n">sketch_xform</span>
</span><span id="Canvas-597"><a href="#Canvas-597"><span class="linenos"> 597</span></a>        <span class="k">if</span> <span class="n">angle</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="Canvas-598"><a href="#Canvas-598"><span class="linenos"> 598</span></a>            <span class="n">sketch_xform</span> <span class="o">=</span> <span class="n">rotation_matrix</span><span class="p">(</span><span class="n">angle</span><span class="p">,</span> <span class="n">rotocenter</span><span class="p">)</span> <span class="o">@</span> <span class="n">sketch_xform</span>
</span><span id="Canvas-599"><a href="#Canvas-599"><span class="linenos"> 599</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_sketch_xform_matrix</span> <span class="o">=</span> <span class="n">sketch_xform</span> <span class="o">@</span> <span class="bp">self</span><span class="o">.</span><span class="n">_xform_matrix</span>
</span><span id="Canvas-600"><a href="#Canvas-600"><span class="linenos"> 600</span></a>
</span><span id="Canvas-601"><a href="#Canvas-601"><span class="linenos"> 601</span></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">item_s</span><span class="p">,</span> <span class="p">(</span><span class="nb">list</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">)):</span>
</span><span id="Canvas-602"><a href="#Canvas-602"><span class="linenos"> 602</span></a>            <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">item_s</span><span class="p">:</span>
</span><span id="Canvas-603"><a href="#Canvas-603"><span class="linenos"> 603</span></a>                <span class="n">draw</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</span><span id="Canvas-604"><a href="#Canvas-604"><span class="linenos"> 604</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="Canvas-605"><a href="#Canvas-605"><span class="linenos"> 605</span></a>            <span class="n">draw</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item_s</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</span><span id="Canvas-606"><a href="#Canvas-606"><span class="linenos"> 606</span></a>
</span><span id="Canvas-607"><a href="#Canvas-607"><span class="linenos"> 607</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_sketch_xform_matrix</span> <span class="o">=</span> <span class="n">identity_matrix</span><span class="p">()</span>
</span><span id="Canvas-608"><a href="#Canvas-608"><span class="linenos"> 608</span></a>
</span><span id="Canvas-609"><a href="#Canvas-609"><span class="linenos"> 609</span></a>        <span class="k">return</span> <span class="bp">self</span>
</span><span id="Canvas-610"><a href="#Canvas-610"><span class="linenos"> 610</span></a>
</span><span id="Canvas-611"><a href="#Canvas-611"><span class="linenos"> 611</span></a>    <span class="k">def</span> <span class="nf">draw_CS</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">size</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Self</span><span class="p">:</span>
</span><span id="Canvas-612"><a href="#Canvas-612"><span class="linenos"> 612</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Canvas-613"><a href="#Canvas-613"><span class="linenos"> 613</span></a><span class="sd">        Draw the Canvas coordinate system.</span>
</span><span id="Canvas-614"><a href="#Canvas-614"><span class="linenos"> 614</span></a>
</span><span id="Canvas-615"><a href="#Canvas-615"><span class="linenos"> 615</span></a><span class="sd">        Args:</span>
</span><span id="Canvas-616"><a href="#Canvas-616"><span class="linenos"> 616</span></a><span class="sd">            size (float, optional): The size of the coordinate system, defaults to None.</span>
</span><span id="Canvas-617"><a href="#Canvas-617"><span class="linenos"> 617</span></a><span class="sd">            kwargs (dict): Additional keyword arguments.</span>
</span><span id="Canvas-618"><a href="#Canvas-618"><span class="linenos"> 618</span></a>
</span><span id="Canvas-619"><a href="#Canvas-619"><span class="linenos"> 619</span></a><span class="sd">        Returns:</span>
</span><span id="Canvas-620"><a href="#Canvas-620"><span class="linenos"> 620</span></a><span class="sd">            Self: The canvas object.</span>
</span><span id="Canvas-621"><a href="#Canvas-621"><span class="linenos"> 621</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Canvas-622"><a href="#Canvas-622"><span class="linenos"> 622</span></a>        <span class="n">draw</span><span class="o">.</span><span class="n">draw_CS</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">size</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</span><span id="Canvas-623"><a href="#Canvas-623"><span class="linenos"> 623</span></a>        <span class="k">return</span> <span class="bp">self</span>
</span><span id="Canvas-624"><a href="#Canvas-624"><span class="linenos"> 624</span></a>
</span><span id="Canvas-625"><a href="#Canvas-625"><span class="linenos"> 625</span></a>    <span class="k">def</span> <span class="nf">draw_image</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">image</span><span class="p">:</span><span class="n">Image</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Self</span><span class="p">:</span>
</span><span id="Canvas-626"><a href="#Canvas-626"><span class="linenos"> 626</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Canvas-627"><a href="#Canvas-627"><span class="linenos"> 627</span></a><span class="sd">        Draw an image on the canvas.</span>
</span><span id="Canvas-628"><a href="#Canvas-628"><span class="linenos"> 628</span></a>
</span><span id="Canvas-629"><a href="#Canvas-629"><span class="linenos"> 629</span></a><span class="sd">        Args:</span>
</span><span id="Canvas-630"><a href="#Canvas-630"><span class="linenos"> 630</span></a><span class="sd">            image (Image): The image to draw.</span>
</span><span id="Canvas-631"><a href="#Canvas-631"><span class="linenos"> 631</span></a>
</span><span id="Canvas-632"><a href="#Canvas-632"><span class="linenos"> 632</span></a><span class="sd">        Returns:</span>
</span><span id="Canvas-633"><a href="#Canvas-633"><span class="linenos"> 633</span></a><span class="sd">            Self: The canvas object.</span>
</span><span id="Canvas-634"><a href="#Canvas-634"><span class="linenos"> 634</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Canvas-635"><a href="#Canvas-635"><span class="linenos"> 635</span></a>        <span class="n">draw</span><span class="o">.</span><span class="n">draw_image</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">image</span><span class="p">)</span>
</span><span id="Canvas-636"><a href="#Canvas-636"><span class="linenos"> 636</span></a>        <span class="k">return</span> <span class="bp">self</span>
</span><span id="Canvas-637"><a href="#Canvas-637"><span class="linenos"> 637</span></a>
</span><span id="Canvas-638"><a href="#Canvas-638"><span class="linenos"> 638</span></a>    <span class="k">def</span> <span class="nf">draw_frame</span><span class="p">(</span>
</span><span id="Canvas-639"><a href="#Canvas-639"><span class="linenos"> 639</span></a>        <span class="bp">self</span><span class="p">,</span> <span class="n">margin</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span>
</span><span id="Canvas-640"><a href="#Canvas-640"><span class="linenos"> 640</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Self</span><span class="p">:</span>
</span><span id="Canvas-641"><a href="#Canvas-641"><span class="linenos"> 641</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Canvas-642"><a href="#Canvas-642"><span class="linenos"> 642</span></a><span class="sd">        Draw a frame around the canvas.</span>
</span><span id="Canvas-643"><a href="#Canvas-643"><span class="linenos"> 643</span></a>
</span><span id="Canvas-644"><a href="#Canvas-644"><span class="linenos"> 644</span></a><span class="sd">        Args:</span>
</span><span id="Canvas-645"><a href="#Canvas-645"><span class="linenos"> 645</span></a><span class="sd">            margins (Union[float, Sequence]): The margins of the frame.</span>
</span><span id="Canvas-646"><a href="#Canvas-646"><span class="linenos"> 646</span></a><span class="sd">            kwargs (dict): Additional keyword arguments.</span>
</span><span id="Canvas-647"><a href="#Canvas-647"><span class="linenos"> 647</span></a>
</span><span id="Canvas-648"><a href="#Canvas-648"><span class="linenos"> 648</span></a><span class="sd">        Returns:</span>
</span><span id="Canvas-649"><a href="#Canvas-649"><span class="linenos"> 649</span></a><span class="sd">            Self: The canvas object.</span>
</span><span id="Canvas-650"><a href="#Canvas-650"><span class="linenos"> 650</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Canvas-651"><a href="#Canvas-651"><span class="linenos"> 651</span></a>        <span class="c1"># to do: add shadow and frame color, shadow width. Check canvas.clip.</span>
</span><span id="Canvas-652"><a href="#Canvas-652"><span class="linenos"> 652</span></a>        <span class="k">if</span> <span class="n">margin</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Canvas-653"><a href="#Canvas-653"><span class="linenos"> 653</span></a>            <span class="n">margin</span> <span class="o">=</span> <span class="n">defaults</span><span class="p">[</span><span class="s2">&quot;canvas_frame_margin&quot;</span><span class="p">]</span>
</span><span id="Canvas-654"><a href="#Canvas-654"><span class="linenos"> 654</span></a>        <span class="k">if</span> <span class="n">width</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Canvas-655"><a href="#Canvas-655"><span class="linenos"> 655</span></a>            <span class="n">width</span> <span class="o">=</span> <span class="n">defaults</span><span class="p">[</span><span class="s2">&quot;canvas_frame_width&quot;</span><span class="p">]</span>
</span><span id="Canvas-656"><a href="#Canvas-656"><span class="linenos"> 656</span></a>        <span class="n">b_box</span> <span class="o">=</span> <span class="n">bounding_box</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_all_vertices</span><span class="p">)</span>
</span><span id="Canvas-657"><a href="#Canvas-657"><span class="linenos"> 657</span></a>        <span class="n">box2</span> <span class="o">=</span> <span class="n">b_box</span><span class="o">.</span><span class="n">get_inflated_b_box</span><span class="p">(</span><span class="n">margin</span><span class="p">)</span>
</span><span id="Canvas-658"><a href="#Canvas-658"><span class="linenos"> 658</span></a>        <span class="n">box3</span> <span class="o">=</span> <span class="n">box2</span><span class="o">.</span><span class="n">get_inflated_b_box</span><span class="p">(</span><span class="mi">15</span><span class="p">)</span>
</span><span id="Canvas-659"><a href="#Canvas-659"><span class="linenos"> 659</span></a>        <span class="n">shadow</span> <span class="o">=</span> <span class="n">Shape</span><span class="p">([</span><span class="n">box3</span><span class="o">.</span><span class="n">northwest</span><span class="p">,</span> <span class="n">box3</span><span class="o">.</span><span class="n">southwest</span><span class="p">,</span> <span class="n">box3</span><span class="o">.</span><span class="n">southeast</span><span class="p">])</span>
</span><span id="Canvas-660"><a href="#Canvas-660"><span class="linenos"> 660</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="n">shadow</span><span class="p">,</span> <span class="n">line_color</span><span class="o">=</span><span class="n">light_gray</span><span class="p">,</span> <span class="n">line_width</span><span class="o">=</span><span class="n">width</span><span class="p">)</span>
</span><span id="Canvas-661"><a href="#Canvas-661"><span class="linenos"> 661</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="n">Shape</span><span class="p">(</span><span class="n">box2</span><span class="o">.</span><span class="n">corners</span><span class="p">,</span> <span class="n">closed</span><span class="o">=</span><span class="kc">True</span><span class="p">),</span> <span class="n">fill</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">line_width</span><span class="o">=</span><span class="n">width</span><span class="p">)</span>
</span><span id="Canvas-662"><a href="#Canvas-662"><span class="linenos"> 662</span></a>
</span><span id="Canvas-663"><a href="#Canvas-663"><span class="linenos"> 663</span></a>        <span class="k">return</span> <span class="bp">self</span>
</span><span id="Canvas-664"><a href="#Canvas-664"><span class="linenos"> 664</span></a>
</span><span id="Canvas-665"><a href="#Canvas-665"><span class="linenos"> 665</span></a>    <span class="k">def</span> <span class="nf">reset</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Self</span><span class="p">:</span>
</span><span id="Canvas-666"><a href="#Canvas-666"><span class="linenos"> 666</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Canvas-667"><a href="#Canvas-667"><span class="linenos"> 667</span></a><span class="sd">        Reset the canvas to its initial state.</span>
</span><span id="Canvas-668"><a href="#Canvas-668"><span class="linenos"> 668</span></a>
</span><span id="Canvas-669"><a href="#Canvas-669"><span class="linenos"> 669</span></a><span class="sd">        Returns:</span>
</span><span id="Canvas-670"><a href="#Canvas-670"><span class="linenos"> 670</span></a><span class="sd">            Self: The canvas object.</span>
</span><span id="Canvas-671"><a href="#Canvas-671"><span class="linenos"> 671</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Canvas-672"><a href="#Canvas-672"><span class="linenos"> 672</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_code</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="Canvas-673"><a href="#Canvas-673"><span class="linenos"> 673</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">preamble</span> <span class="o">=</span> <span class="n">defaults</span><span class="p">[</span><span class="s2">&quot;preamble&quot;</span><span class="p">]</span>
</span><span id="Canvas-674"><a href="#Canvas-674"><span class="linenos"> 674</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">pages</span> <span class="o">=</span> <span class="p">[</span><span class="n">Page</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">size</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">back_color</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">border</span><span class="p">)]</span>
</span><span id="Canvas-675"><a href="#Canvas-675"><span class="linenos"> 675</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">active_page</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pages</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="Canvas-676"><a href="#Canvas-676"><span class="linenos"> 676</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_all_vertices</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="Canvas-677"><a href="#Canvas-677"><span class="linenos"> 677</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">tex</span><span class="p">:</span> <span class="n">Tex</span> <span class="o">=</span> <span class="n">Tex</span><span class="p">()</span>
</span><span id="Canvas-678"><a href="#Canvas-678"><span class="linenos"> 678</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">clip</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>  <span class="c1"># if true then clip the canvas to the mask</span>
</span><span id="Canvas-679"><a href="#Canvas-679"><span class="linenos"> 679</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_xform_matrix</span> <span class="o">=</span> <span class="n">identity_matrix</span><span class="p">()</span>
</span><span id="Canvas-680"><a href="#Canvas-680"><span class="linenos"> 680</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_sketch_xform_matrix</span> <span class="o">=</span> <span class="n">identity_matrix</span><span class="p">()</span>
</span><span id="Canvas-681"><a href="#Canvas-681"><span class="linenos"> 681</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">active_page</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pages</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="Canvas-682"><a href="#Canvas-682"><span class="linenos"> 682</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_all_vertices</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="Canvas-683"><a href="#Canvas-683"><span class="linenos"> 683</span></a>        <span class="k">return</span> <span class="bp">self</span>
</span><span id="Canvas-684"><a href="#Canvas-684"><span class="linenos"> 684</span></a>
</span><span id="Canvas-685"><a href="#Canvas-685"><span class="linenos"> 685</span></a>    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="Canvas-686"><a href="#Canvas-686"><span class="linenos"> 686</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Canvas-687"><a href="#Canvas-687"><span class="linenos"> 687</span></a><span class="sd">        Return a string representation of the canvas.</span>
</span><span id="Canvas-688"><a href="#Canvas-688"><span class="linenos"> 688</span></a>
</span><span id="Canvas-689"><a href="#Canvas-689"><span class="linenos"> 689</span></a><span class="sd">        Returns:</span>
</span><span id="Canvas-690"><a href="#Canvas-690"><span class="linenos"> 690</span></a><span class="sd">            str: The string representation of the canvas.</span>
</span><span id="Canvas-691"><a href="#Canvas-691"><span class="linenos"> 691</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Canvas-692"><a href="#Canvas-692"><span class="linenos"> 692</span></a>        <span class="k">return</span> <span class="s2">&quot;Canvas()&quot;</span>
</span><span id="Canvas-693"><a href="#Canvas-693"><span class="linenos"> 693</span></a>
</span><span id="Canvas-694"><a href="#Canvas-694"><span class="linenos"> 694</span></a>    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="Canvas-695"><a href="#Canvas-695"><span class="linenos"> 695</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Canvas-696"><a href="#Canvas-696"><span class="linenos"> 696</span></a><span class="sd">        Return a string representation of the canvas.</span>
</span><span id="Canvas-697"><a href="#Canvas-697"><span class="linenos"> 697</span></a>
</span><span id="Canvas-698"><a href="#Canvas-698"><span class="linenos"> 698</span></a><span class="sd">        Returns:</span>
</span><span id="Canvas-699"><a href="#Canvas-699"><span class="linenos"> 699</span></a><span class="sd">            str: The string representation of the canvas.</span>
</span><span id="Canvas-700"><a href="#Canvas-700"><span class="linenos"> 700</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Canvas-701"><a href="#Canvas-701"><span class="linenos"> 701</span></a>        <span class="k">return</span> <span class="s2">&quot;Canvas()&quot;</span>
</span><span id="Canvas-702"><a href="#Canvas-702"><span class="linenos"> 702</span></a>
</span><span id="Canvas-703"><a href="#Canvas-703"><span class="linenos"> 703</span></a>    <span class="nd">@property</span>
</span><span id="Canvas-704"><a href="#Canvas-704"><span class="linenos"> 704</span></a>    <span class="k">def</span> <span class="nf">pos</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Point</span><span class="p">:</span>
</span><span id="Canvas-705"><a href="#Canvas-705"><span class="linenos"> 705</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Canvas-706"><a href="#Canvas-706"><span class="linenos"> 706</span></a><span class="sd">        The position of the canvas.</span>
</span><span id="Canvas-707"><a href="#Canvas-707"><span class="linenos"> 707</span></a>
</span><span id="Canvas-708"><a href="#Canvas-708"><span class="linenos"> 708</span></a><span class="sd">        Args:</span>
</span><span id="Canvas-709"><a href="#Canvas-709"><span class="linenos"> 709</span></a><span class="sd">            point (Point, optional): The point to set the position to.</span>
</span><span id="Canvas-710"><a href="#Canvas-710"><span class="linenos"> 710</span></a>
</span><span id="Canvas-711"><a href="#Canvas-711"><span class="linenos"> 711</span></a><span class="sd">        Returns:</span>
</span><span id="Canvas-712"><a href="#Canvas-712"><span class="linenos"> 712</span></a><span class="sd">            Point: The position of the canvas.</span>
</span><span id="Canvas-713"><a href="#Canvas-713"><span class="linenos"> 713</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Canvas-714"><a href="#Canvas-714"><span class="linenos"> 714</span></a>
</span><span id="Canvas-715"><a href="#Canvas-715"><span class="linenos"> 715</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_xform_matrix</span><span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="p">:</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">tolist</span><span class="p">()[:</span><span class="mi">2</span><span class="p">]</span>
</span><span id="Canvas-716"><a href="#Canvas-716"><span class="linenos"> 716</span></a>
</span><span id="Canvas-717"><a href="#Canvas-717"><span class="linenos"> 717</span></a>    <span class="nd">@pos</span><span class="o">.</span><span class="n">setter</span>
</span><span id="Canvas-718"><a href="#Canvas-718"><span class="linenos"> 718</span></a>    <span class="k">def</span> <span class="nf">pos</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">point</span><span class="p">:</span> <span class="n">Point</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Canvas-719"><a href="#Canvas-719"><span class="linenos"> 719</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Canvas-720"><a href="#Canvas-720"><span class="linenos"> 720</span></a><span class="sd">        Set the position of the canvas.</span>
</span><span id="Canvas-721"><a href="#Canvas-721"><span class="linenos"> 721</span></a>
</span><span id="Canvas-722"><a href="#Canvas-722"><span class="linenos"> 722</span></a><span class="sd">        Args:</span>
</span><span id="Canvas-723"><a href="#Canvas-723"><span class="linenos"> 723</span></a><span class="sd">            point (Point): The point to set the position to.</span>
</span><span id="Canvas-724"><a href="#Canvas-724"><span class="linenos"> 724</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Canvas-725"><a href="#Canvas-725"><span class="linenos"> 725</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_xform_matrix</span><span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="p">:</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="n">point</span><span class="p">[:</span><span class="mi">2</span><span class="p">]</span>
</span><span id="Canvas-726"><a href="#Canvas-726"><span class="linenos"> 726</span></a>
</span><span id="Canvas-727"><a href="#Canvas-727"><span class="linenos"> 727</span></a>    <span class="nd">@property</span>
</span><span id="Canvas-728"><a href="#Canvas-728"><span class="linenos"> 728</span></a>    <span class="k">def</span> <span class="nf">angle</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
</span><span id="Canvas-729"><a href="#Canvas-729"><span class="linenos"> 729</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Canvas-730"><a href="#Canvas-730"><span class="linenos"> 730</span></a><span class="sd">        The angle of the canvas.</span>
</span><span id="Canvas-731"><a href="#Canvas-731"><span class="linenos"> 731</span></a>
</span><span id="Canvas-732"><a href="#Canvas-732"><span class="linenos"> 732</span></a><span class="sd">        Returns:</span>
</span><span id="Canvas-733"><a href="#Canvas-733"><span class="linenos"> 733</span></a><span class="sd">            float: The angle of the canvas.</span>
</span><span id="Canvas-734"><a href="#Canvas-734"><span class="linenos"> 734</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Canvas-735"><a href="#Canvas-735"><span class="linenos"> 735</span></a>        <span class="n">xform</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_xform_matrix</span>
</span><span id="Canvas-736"><a href="#Canvas-736"><span class="linenos"> 736</span></a>
</span><span id="Canvas-737"><a href="#Canvas-737"><span class="linenos"> 737</span></a>        <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">arctan2</span><span class="p">(</span><span class="n">xform</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="n">xform</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">])</span>
</span><span id="Canvas-738"><a href="#Canvas-738"><span class="linenos"> 738</span></a>
</span><span id="Canvas-739"><a href="#Canvas-739"><span class="linenos"> 739</span></a>    <span class="nd">@angle</span><span class="o">.</span><span class="n">setter</span>
</span><span id="Canvas-740"><a href="#Canvas-740"><span class="linenos"> 740</span></a>    <span class="k">def</span> <span class="nf">angle</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">angle</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Canvas-741"><a href="#Canvas-741"><span class="linenos"> 741</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Canvas-742"><a href="#Canvas-742"><span class="linenos"> 742</span></a><span class="sd">        Set the angle of the canvas.</span>
</span><span id="Canvas-743"><a href="#Canvas-743"><span class="linenos"> 743</span></a>
</span><span id="Canvas-744"><a href="#Canvas-744"><span class="linenos"> 744</span></a><span class="sd">        Args:</span>
</span><span id="Canvas-745"><a href="#Canvas-745"><span class="linenos"> 745</span></a><span class="sd">            angle (float): The angle to set the canvas to.</span>
</span><span id="Canvas-746"><a href="#Canvas-746"><span class="linenos"> 746</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Canvas-747"><a href="#Canvas-747"><span class="linenos"> 747</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_xform_matrix</span> <span class="o">=</span> <span class="n">rotation_matrix</span><span class="p">(</span><span class="n">angle</span><span class="p">)</span> <span class="o">@</span> <span class="bp">self</span><span class="o">.</span><span class="n">_xform_matrix</span>
</span><span id="Canvas-748"><a href="#Canvas-748"><span class="linenos"> 748</span></a>
</span><span id="Canvas-749"><a href="#Canvas-749"><span class="linenos"> 749</span></a>    <span class="nd">@property</span>
</span><span id="Canvas-750"><a href="#Canvas-750"><span class="linenos"> 750</span></a>    <span class="k">def</span> <span class="nf">scale</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Vec2</span><span class="p">:</span>
</span><span id="Canvas-751"><a href="#Canvas-751"><span class="linenos"> 751</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Canvas-752"><a href="#Canvas-752"><span class="linenos"> 752</span></a><span class="sd">        The scale of the canvas.</span>
</span><span id="Canvas-753"><a href="#Canvas-753"><span class="linenos"> 753</span></a>
</span><span id="Canvas-754"><a href="#Canvas-754"><span class="linenos"> 754</span></a><span class="sd">        Returns:</span>
</span><span id="Canvas-755"><a href="#Canvas-755"><span class="linenos"> 755</span></a><span class="sd">            Vec2: The scale of the canvas.</span>
</span><span id="Canvas-756"><a href="#Canvas-756"><span class="linenos"> 756</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Canvas-757"><a href="#Canvas-757"><span class="linenos"> 757</span></a>        <span class="n">xform</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_xform_matrix</span>
</span><span id="Canvas-758"><a href="#Canvas-758"><span class="linenos"> 758</span></a>
</span><span id="Canvas-759"><a href="#Canvas-759"><span class="linenos"> 759</span></a>        <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">linalg</span><span class="o">.</span><span class="n">norm</span><span class="p">(</span><span class="n">xform</span><span class="p">[:</span><span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">]),</span> <span class="n">np</span><span class="o">.</span><span class="n">linalg</span><span class="o">.</span><span class="n">norm</span><span class="p">(</span><span class="n">xform</span><span class="p">[:</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">])</span>
</span><span id="Canvas-760"><a href="#Canvas-760"><span class="linenos"> 760</span></a>
</span><span id="Canvas-761"><a href="#Canvas-761"><span class="linenos"> 761</span></a>    <span class="nd">@scale</span><span class="o">.</span><span class="n">setter</span>
</span><span id="Canvas-762"><a href="#Canvas-762"><span class="linenos"> 762</span></a>    <span class="k">def</span> <span class="nf">scale</span><span class="p">(</span>
</span><span id="Canvas-763"><a href="#Canvas-763"><span class="linenos"> 763</span></a>        <span class="bp">self</span><span class="p">,</span> <span class="n">scale_x</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">scale_y</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">about</span><span class="p">:</span> <span class="n">Point</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
</span><span id="Canvas-764"><a href="#Canvas-764"><span class="linenos"> 764</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Canvas-765"><a href="#Canvas-765"><span class="linenos"> 765</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Canvas-766"><a href="#Canvas-766"><span class="linenos"> 766</span></a><span class="sd">        Set the scale of the canvas.</span>
</span><span id="Canvas-767"><a href="#Canvas-767"><span class="linenos"> 767</span></a>
</span><span id="Canvas-768"><a href="#Canvas-768"><span class="linenos"> 768</span></a><span class="sd">        Args:</span>
</span><span id="Canvas-769"><a href="#Canvas-769"><span class="linenos"> 769</span></a><span class="sd">            scale_x (float): The x-scale to set the canvas to.</span>
</span><span id="Canvas-770"><a href="#Canvas-770"><span class="linenos"> 770</span></a><span class="sd">            scale_y (float): The y-scale to set the canvas to.</span>
</span><span id="Canvas-771"><a href="#Canvas-771"><span class="linenos"> 771</span></a><span class="sd">            about (Point): The point about which to scale the canvas.</span>
</span><span id="Canvas-772"><a href="#Canvas-772"><span class="linenos"> 772</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Canvas-773"><a href="#Canvas-773"><span class="linenos"> 773</span></a>        <span class="k">if</span> <span class="n">scale_y</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Canvas-774"><a href="#Canvas-774"><span class="linenos"> 774</span></a>            <span class="n">scale_y</span> <span class="o">=</span> <span class="n">scale_x</span>
</span><span id="Canvas-775"><a href="#Canvas-775"><span class="linenos"> 775</span></a>
</span><span id="Canvas-776"><a href="#Canvas-776"><span class="linenos"> 776</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_xform_matrix</span> <span class="o">=</span> <span class="p">(</span>
</span><span id="Canvas-777"><a href="#Canvas-777"><span class="linenos"> 777</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_xform_matrix</span> <span class="o">@</span> <span class="n">scale_in_place_matrix</span><span class="p">(</span><span class="n">scale_x</span><span class="p">,</span> <span class="n">scale_y</span><span class="p">,</span> <span class="n">about</span><span class="o">=</span><span class="n">about</span><span class="p">)</span>
</span><span id="Canvas-778"><a href="#Canvas-778"><span class="linenos"> 778</span></a>        <span class="p">)</span>
</span><span id="Canvas-779"><a href="#Canvas-779"><span class="linenos"> 779</span></a>
</span><span id="Canvas-780"><a href="#Canvas-780"><span class="linenos"> 780</span></a>    <span class="nd">@property</span>
</span><span id="Canvas-781"><a href="#Canvas-781"><span class="linenos"> 781</span></a>    <span class="k">def</span> <span class="nf">xform_matrix</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;np.ndarray&quot;</span><span class="p">:</span>
</span><span id="Canvas-782"><a href="#Canvas-782"><span class="linenos"> 782</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Canvas-783"><a href="#Canvas-783"><span class="linenos"> 783</span></a><span class="sd">        The transformation matrix of the canvas.</span>
</span><span id="Canvas-784"><a href="#Canvas-784"><span class="linenos"> 784</span></a>
</span><span id="Canvas-785"><a href="#Canvas-785"><span class="linenos"> 785</span></a><span class="sd">        Returns:</span>
</span><span id="Canvas-786"><a href="#Canvas-786"><span class="linenos"> 786</span></a><span class="sd">            np.ndarray: The transformation matrix of the canvas.</span>
</span><span id="Canvas-787"><a href="#Canvas-787"><span class="linenos"> 787</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Canvas-788"><a href="#Canvas-788"><span class="linenos"> 788</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_xform_matrix</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
</span><span id="Canvas-789"><a href="#Canvas-789"><span class="linenos"> 789</span></a>
</span><span id="Canvas-790"><a href="#Canvas-790"><span class="linenos"> 790</span></a>    <span class="k">def</span> <span class="nf">transform</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">transform_matrix</span><span class="p">:</span> <span class="s2">&quot;np.ndarray&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Self</span><span class="p">:</span>
</span><span id="Canvas-791"><a href="#Canvas-791"><span class="linenos"> 791</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Canvas-792"><a href="#Canvas-792"><span class="linenos"> 792</span></a><span class="sd">        Transforms the canvas by the given transformation matrix.</span>
</span><span id="Canvas-793"><a href="#Canvas-793"><span class="linenos"> 793</span></a>
</span><span id="Canvas-794"><a href="#Canvas-794"><span class="linenos"> 794</span></a><span class="sd">        Args:</span>
</span><span id="Canvas-795"><a href="#Canvas-795"><span class="linenos"> 795</span></a><span class="sd">            transform_matrix (np.ndarray): The transformation matrix.</span>
</span><span id="Canvas-796"><a href="#Canvas-796"><span class="linenos"> 796</span></a>
</span><span id="Canvas-797"><a href="#Canvas-797"><span class="linenos"> 797</span></a><span class="sd">        Returns:</span>
</span><span id="Canvas-798"><a href="#Canvas-798"><span class="linenos"> 798</span></a><span class="sd">            Self: The Canvas object.</span>
</span><span id="Canvas-799"><a href="#Canvas-799"><span class="linenos"> 799</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Canvas-800"><a href="#Canvas-800"><span class="linenos"> 800</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_xform_matrix</span> <span class="o">=</span> <span class="n">transform_matrix</span> <span class="o">@</span> <span class="bp">self</span><span class="o">.</span><span class="n">_xform_matrix</span>
</span><span id="Canvas-801"><a href="#Canvas-801"><span class="linenos"> 801</span></a>
</span><span id="Canvas-802"><a href="#Canvas-802"><span class="linenos"> 802</span></a>        <span class="k">return</span> <span class="bp">self</span>
</span><span id="Canvas-803"><a href="#Canvas-803"><span class="linenos"> 803</span></a>
</span><span id="Canvas-804"><a href="#Canvas-804"><span class="linenos"> 804</span></a>    <span class="k">def</span> <span class="nf">reset_transform</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Self</span><span class="p">:</span>
</span><span id="Canvas-805"><a href="#Canvas-805"><span class="linenos"> 805</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Canvas-806"><a href="#Canvas-806"><span class="linenos"> 806</span></a><span class="sd">        Reset the transformation matrix of the canvas.</span>
</span><span id="Canvas-807"><a href="#Canvas-807"><span class="linenos"> 807</span></a><span class="sd">        The canvas origin is at (0, 0) and the orientation angle is 0.</span>
</span><span id="Canvas-808"><a href="#Canvas-808"><span class="linenos"> 808</span></a><span class="sd">        Transformation matrix is the identity matrix.</span>
</span><span id="Canvas-809"><a href="#Canvas-809"><span class="linenos"> 809</span></a>
</span><span id="Canvas-810"><a href="#Canvas-810"><span class="linenos"> 810</span></a><span class="sd">        Returns:</span>
</span><span id="Canvas-811"><a href="#Canvas-811"><span class="linenos"> 811</span></a><span class="sd">            Self: The canvas object.</span>
</span><span id="Canvas-812"><a href="#Canvas-812"><span class="linenos"> 812</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Canvas-813"><a href="#Canvas-813"><span class="linenos"> 813</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_xform_matrix</span> <span class="o">=</span> <span class="n">identity_matrix</span><span class="p">()</span>
</span><span id="Canvas-814"><a href="#Canvas-814"><span class="linenos"> 814</span></a>
</span><span id="Canvas-815"><a href="#Canvas-815"><span class="linenos"> 815</span></a>        <span class="k">return</span> <span class="bp">self</span>
</span><span id="Canvas-816"><a href="#Canvas-816"><span class="linenos"> 816</span></a>
</span><span id="Canvas-817"><a href="#Canvas-817"><span class="linenos"> 817</span></a>    <span class="k">def</span> <span class="nf">translate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dx</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">dy</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Self</span><span class="p">:</span>
</span><span id="Canvas-818"><a href="#Canvas-818"><span class="linenos"> 818</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Canvas-819"><a href="#Canvas-819"><span class="linenos"> 819</span></a><span class="sd">        Translate the canvas by dx and dy.</span>
</span><span id="Canvas-820"><a href="#Canvas-820"><span class="linenos"> 820</span></a>
</span><span id="Canvas-821"><a href="#Canvas-821"><span class="linenos"> 821</span></a><span class="sd">        Args:</span>
</span><span id="Canvas-822"><a href="#Canvas-822"><span class="linenos"> 822</span></a><span class="sd">            dx (float): The translation distance along the x-axis.</span>
</span><span id="Canvas-823"><a href="#Canvas-823"><span class="linenos"> 823</span></a><span class="sd">            dy (float): The translation distance along the y-axis.</span>
</span><span id="Canvas-824"><a href="#Canvas-824"><span class="linenos"> 824</span></a>
</span><span id="Canvas-825"><a href="#Canvas-825"><span class="linenos"> 825</span></a><span class="sd">        Returns:</span>
</span><span id="Canvas-826"><a href="#Canvas-826"><span class="linenos"> 826</span></a><span class="sd">            Self: The canvas object.</span>
</span><span id="Canvas-827"><a href="#Canvas-827"><span class="linenos"> 827</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Canvas-828"><a href="#Canvas-828"><span class="linenos"> 828</span></a>
</span><span id="Canvas-829"><a href="#Canvas-829"><span class="linenos"> 829</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_xform_matrix</span> <span class="o">=</span> <span class="n">translation_matrix</span><span class="p">(</span><span class="n">dx</span><span class="p">,</span> <span class="n">dy</span><span class="p">)</span> <span class="o">@</span> <span class="bp">self</span><span class="o">.</span><span class="n">_xform_matrix</span>
</span><span id="Canvas-830"><a href="#Canvas-830"><span class="linenos"> 830</span></a>
</span><span id="Canvas-831"><a href="#Canvas-831"><span class="linenos"> 831</span></a>        <span class="k">return</span> <span class="bp">self</span>
</span><span id="Canvas-832"><a href="#Canvas-832"><span class="linenos"> 832</span></a>
</span><span id="Canvas-833"><a href="#Canvas-833"><span class="linenos"> 833</span></a>    <span class="k">def</span> <span class="nf">rotate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">angle</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">about</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span> <span class="o">-&gt;</span> <span class="n">Self</span><span class="p">:</span>
</span><span id="Canvas-834"><a href="#Canvas-834"><span class="linenos"> 834</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Canvas-835"><a href="#Canvas-835"><span class="linenos"> 835</span></a><span class="sd">        Rotate the canvas by angle in radians about the given point.</span>
</span><span id="Canvas-836"><a href="#Canvas-836"><span class="linenos"> 836</span></a>
</span><span id="Canvas-837"><a href="#Canvas-837"><span class="linenos"> 837</span></a><span class="sd">        Args:</span>
</span><span id="Canvas-838"><a href="#Canvas-838"><span class="linenos"> 838</span></a><span class="sd">            angle (float): The rotation angle in radians.</span>
</span><span id="Canvas-839"><a href="#Canvas-839"><span class="linenos"> 839</span></a><span class="sd">            about (tuple): The point about which to rotate the canvas.</span>
</span><span id="Canvas-840"><a href="#Canvas-840"><span class="linenos"> 840</span></a>
</span><span id="Canvas-841"><a href="#Canvas-841"><span class="linenos"> 841</span></a><span class="sd">        Returns:</span>
</span><span id="Canvas-842"><a href="#Canvas-842"><span class="linenos"> 842</span></a><span class="sd">            Self: The canvas object.</span>
</span><span id="Canvas-843"><a href="#Canvas-843"><span class="linenos"> 843</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Canvas-844"><a href="#Canvas-844"><span class="linenos"> 844</span></a>
</span><span id="Canvas-845"><a href="#Canvas-845"><span class="linenos"> 845</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_xform_matrix</span> <span class="o">=</span> <span class="n">rotation_matrix</span><span class="p">(</span><span class="n">angle</span><span class="p">,</span> <span class="n">about</span><span class="p">)</span> <span class="o">@</span> <span class="bp">self</span><span class="o">.</span><span class="n">_xform_matrix</span>
</span><span id="Canvas-846"><a href="#Canvas-846"><span class="linenos"> 846</span></a>
</span><span id="Canvas-847"><a href="#Canvas-847"><span class="linenos"> 847</span></a>        <span class="k">return</span> <span class="bp">self</span>
</span><span id="Canvas-848"><a href="#Canvas-848"><span class="linenos"> 848</span></a>
</span><span id="Canvas-849"><a href="#Canvas-849"><span class="linenos"> 849</span></a>    <span class="k">def</span> <span class="nf">_flip</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">axis</span><span class="p">:</span> <span class="n">Axis</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Self</span><span class="p">:</span>
</span><span id="Canvas-850"><a href="#Canvas-850"><span class="linenos"> 850</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Canvas-851"><a href="#Canvas-851"><span class="linenos"> 851</span></a><span class="sd">        Flip the canvas along the specified axis.</span>
</span><span id="Canvas-852"><a href="#Canvas-852"><span class="linenos"> 852</span></a>
</span><span id="Canvas-853"><a href="#Canvas-853"><span class="linenos"> 853</span></a><span class="sd">        Args:</span>
</span><span id="Canvas-854"><a href="#Canvas-854"><span class="linenos"> 854</span></a><span class="sd">            axis (str): The axis to flip the canvas along (&#39;x&#39; or &#39;y&#39;).</span>
</span><span id="Canvas-855"><a href="#Canvas-855"><span class="linenos"> 855</span></a>
</span><span id="Canvas-856"><a href="#Canvas-856"><span class="linenos"> 856</span></a><span class="sd">        Returns:</span>
</span><span id="Canvas-857"><a href="#Canvas-857"><span class="linenos"> 857</span></a><span class="sd">            Self: The canvas object.</span>
</span><span id="Canvas-858"><a href="#Canvas-858"><span class="linenos"> 858</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Canvas-859"><a href="#Canvas-859"><span class="linenos"> 859</span></a>        <span class="k">if</span> <span class="n">axis</span> <span class="o">==</span> <span class="n">Axis</span><span class="o">.</span><span class="n">X</span><span class="p">:</span>
</span><span id="Canvas-860"><a href="#Canvas-860"><span class="linenos"> 860</span></a>            <span class="n">sx</span> <span class="o">=</span> <span class="o">-</span><span class="bp">self</span><span class="o">.</span><span class="n">scale</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="Canvas-861"><a href="#Canvas-861"><span class="linenos"> 861</span></a>            <span class="n">sy</span> <span class="o">=</span> <span class="mi">1</span>
</span><span id="Canvas-862"><a href="#Canvas-862"><span class="linenos"> 862</span></a>        <span class="k">elif</span> <span class="n">axis</span> <span class="o">==</span> <span class="n">Axis</span><span class="o">.</span><span class="n">Y</span><span class="p">:</span>
</span><span id="Canvas-863"><a href="#Canvas-863"><span class="linenos"> 863</span></a>            <span class="n">sx</span> <span class="o">=</span> <span class="mi">1</span>
</span><span id="Canvas-864"><a href="#Canvas-864"><span class="linenos"> 864</span></a>            <span class="n">sy</span> <span class="o">=</span> <span class="o">-</span><span class="bp">self</span><span class="o">.</span><span class="n">scale</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
</span><span id="Canvas-865"><a href="#Canvas-865"><span class="linenos"> 865</span></a>
</span><span id="Canvas-866"><a href="#Canvas-866"><span class="linenos"> 866</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_xform_matrix</span> <span class="o">=</span> <span class="n">scale_matrix</span><span class="p">(</span><span class="n">sx</span><span class="p">,</span> <span class="n">sy</span><span class="p">)</span> <span class="o">@</span> <span class="bp">self</span><span class="o">.</span><span class="n">_xform_matrix</span>
</span><span id="Canvas-867"><a href="#Canvas-867"><span class="linenos"> 867</span></a>
</span><span id="Canvas-868"><a href="#Canvas-868"><span class="linenos"> 868</span></a>        <span class="k">return</span> <span class="bp">self</span>
</span><span id="Canvas-869"><a href="#Canvas-869"><span class="linenos"> 869</span></a>
</span><span id="Canvas-870"><a href="#Canvas-870"><span class="linenos"> 870</span></a>    <span class="k">def</span> <span class="nf">flip_x_axis</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Self</span><span class="p">:</span>
</span><span id="Canvas-871"><a href="#Canvas-871"><span class="linenos"> 871</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Canvas-872"><a href="#Canvas-872"><span class="linenos"> 872</span></a><span class="sd">        Flip the x-axis direction. Warning: This will reverse the positive rotation direction.</span>
</span><span id="Canvas-873"><a href="#Canvas-873"><span class="linenos"> 873</span></a>
</span><span id="Canvas-874"><a href="#Canvas-874"><span class="linenos"> 874</span></a><span class="sd">        Returns:</span>
</span><span id="Canvas-875"><a href="#Canvas-875"><span class="linenos"> 875</span></a><span class="sd">            Self: The canvas object.</span>
</span><span id="Canvas-876"><a href="#Canvas-876"><span class="linenos"> 876</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Canvas-877"><a href="#Canvas-877"><span class="linenos"> 877</span></a>        <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span>
</span><span id="Canvas-878"><a href="#Canvas-878"><span class="linenos"> 878</span></a>            <span class="s2">&quot;Flipping the x-axis will change the positive rotation direction.&quot;</span>
</span><span id="Canvas-879"><a href="#Canvas-879"><span class="linenos"> 879</span></a>        <span class="p">)</span>
</span><span id="Canvas-880"><a href="#Canvas-880"><span class="linenos"> 880</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_flip</span><span class="p">(</span><span class="n">Axis</span><span class="o">.</span><span class="n">X</span><span class="p">)</span>
</span><span id="Canvas-881"><a href="#Canvas-881"><span class="linenos"> 881</span></a>
</span><span id="Canvas-882"><a href="#Canvas-882"><span class="linenos"> 882</span></a>    <span class="k">def</span> <span class="nf">flip_y_axis</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Self</span><span class="p">:</span>
</span><span id="Canvas-883"><a href="#Canvas-883"><span class="linenos"> 883</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Canvas-884"><a href="#Canvas-884"><span class="linenos"> 884</span></a><span class="sd">        Flip the y-axis direction.</span>
</span><span id="Canvas-885"><a href="#Canvas-885"><span class="linenos"> 885</span></a>
</span><span id="Canvas-886"><a href="#Canvas-886"><span class="linenos"> 886</span></a><span class="sd">        Returns:</span>
</span><span id="Canvas-887"><a href="#Canvas-887"><span class="linenos"> 887</span></a><span class="sd">            Self: The canvas object.</span>
</span><span id="Canvas-888"><a href="#Canvas-888"><span class="linenos"> 888</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Canvas-889"><a href="#Canvas-889"><span class="linenos"> 889</span></a>        <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span>
</span><span id="Canvas-890"><a href="#Canvas-890"><span class="linenos"> 890</span></a>            <span class="s2">&quot;Flipping the y-axis will reverse the positive rotation direction.&quot;</span>
</span><span id="Canvas-891"><a href="#Canvas-891"><span class="linenos"> 891</span></a>        <span class="p">)</span>
</span><span id="Canvas-892"><a href="#Canvas-892"><span class="linenos"> 892</span></a>
</span><span id="Canvas-893"><a href="#Canvas-893"><span class="linenos"> 893</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_flip</span><span class="p">(</span><span class="n">Axis</span><span class="o">.</span><span class="n">Y</span><span class="p">)</span>
</span><span id="Canvas-894"><a href="#Canvas-894"><span class="linenos"> 894</span></a>
</span><span id="Canvas-895"><a href="#Canvas-895"><span class="linenos"> 895</span></a>    <span class="nd">@property</span>
</span><span id="Canvas-896"><a href="#Canvas-896"><span class="linenos"> 896</span></a>    <span class="k">def</span> <span class="nf">x</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
</span><span id="Canvas-897"><a href="#Canvas-897"><span class="linenos"> 897</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Canvas-898"><a href="#Canvas-898"><span class="linenos"> 898</span></a><span class="sd">        The x coordinate of the canvas origin.</span>
</span><span id="Canvas-899"><a href="#Canvas-899"><span class="linenos"> 899</span></a>
</span><span id="Canvas-900"><a href="#Canvas-900"><span class="linenos"> 900</span></a><span class="sd">        Returns:</span>
</span><span id="Canvas-901"><a href="#Canvas-901"><span class="linenos"> 901</span></a><span class="sd">            float: The x coordinate of the canvas origin.</span>
</span><span id="Canvas-902"><a href="#Canvas-902"><span class="linenos"> 902</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Canvas-903"><a href="#Canvas-903"><span class="linenos"> 903</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">pos</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="Canvas-904"><a href="#Canvas-904"><span class="linenos"> 904</span></a>
</span><span id="Canvas-905"><a href="#Canvas-905"><span class="linenos"> 905</span></a>    <span class="nd">@x</span><span class="o">.</span><span class="n">setter</span>
</span><span id="Canvas-906"><a href="#Canvas-906"><span class="linenos"> 906</span></a>    <span class="k">def</span> <span class="nf">x</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Canvas-907"><a href="#Canvas-907"><span class="linenos"> 907</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Canvas-908"><a href="#Canvas-908"><span class="linenos"> 908</span></a><span class="sd">        Set the x coordinate of the canvas origin.</span>
</span><span id="Canvas-909"><a href="#Canvas-909"><span class="linenos"> 909</span></a>
</span><span id="Canvas-910"><a href="#Canvas-910"><span class="linenos"> 910</span></a><span class="sd">        Args:</span>
</span><span id="Canvas-911"><a href="#Canvas-911"><span class="linenos"> 911</span></a><span class="sd">            value (float): The x coordinate to set.</span>
</span><span id="Canvas-912"><a href="#Canvas-912"><span class="linenos"> 912</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Canvas-913"><a href="#Canvas-913"><span class="linenos"> 913</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">pos</span> <span class="o">=</span> <span class="p">[</span><span class="n">value</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">pos</span><span class="p">[</span><span class="mi">1</span><span class="p">]]</span>
</span><span id="Canvas-914"><a href="#Canvas-914"><span class="linenos"> 914</span></a>
</span><span id="Canvas-915"><a href="#Canvas-915"><span class="linenos"> 915</span></a>    <span class="nd">@property</span>
</span><span id="Canvas-916"><a href="#Canvas-916"><span class="linenos"> 916</span></a>    <span class="k">def</span> <span class="nf">y</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
</span><span id="Canvas-917"><a href="#Canvas-917"><span class="linenos"> 917</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Canvas-918"><a href="#Canvas-918"><span class="linenos"> 918</span></a><span class="sd">        The y coordinate of the canvas origin.</span>
</span><span id="Canvas-919"><a href="#Canvas-919"><span class="linenos"> 919</span></a>
</span><span id="Canvas-920"><a href="#Canvas-920"><span class="linenos"> 920</span></a><span class="sd">        Returns:</span>
</span><span id="Canvas-921"><a href="#Canvas-921"><span class="linenos"> 921</span></a><span class="sd">            float: The y coordinate of the canvas origin.</span>
</span><span id="Canvas-922"><a href="#Canvas-922"><span class="linenos"> 922</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Canvas-923"><a href="#Canvas-923"><span class="linenos"> 923</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">pos</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
</span><span id="Canvas-924"><a href="#Canvas-924"><span class="linenos"> 924</span></a>
</span><span id="Canvas-925"><a href="#Canvas-925"><span class="linenos"> 925</span></a>    <span class="nd">@y</span><span class="o">.</span><span class="n">setter</span>
</span><span id="Canvas-926"><a href="#Canvas-926"><span class="linenos"> 926</span></a>    <span class="k">def</span> <span class="nf">y</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Canvas-927"><a href="#Canvas-927"><span class="linenos"> 927</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Canvas-928"><a href="#Canvas-928"><span class="linenos"> 928</span></a><span class="sd">        Set the y coordinate of the canvas origin.</span>
</span><span id="Canvas-929"><a href="#Canvas-929"><span class="linenos"> 929</span></a>
</span><span id="Canvas-930"><a href="#Canvas-930"><span class="linenos"> 930</span></a><span class="sd">        Args:</span>
</span><span id="Canvas-931"><a href="#Canvas-931"><span class="linenos"> 931</span></a><span class="sd">            value (float): The y coordinate to set.</span>
</span><span id="Canvas-932"><a href="#Canvas-932"><span class="linenos"> 932</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Canvas-933"><a href="#Canvas-933"><span class="linenos"> 933</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">pos</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">pos</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">value</span><span class="p">]</span>
</span><span id="Canvas-934"><a href="#Canvas-934"><span class="linenos"> 934</span></a>
</span><span id="Canvas-935"><a href="#Canvas-935"><span class="linenos"> 935</span></a>    <span class="k">def</span> <span class="nf">batch_graph</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">batch</span><span class="p">:</span> <span class="s2">&quot;Batch&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">nx</span><span class="o">.</span><span class="n">DiGraph</span><span class="p">:</span>
</span><span id="Canvas-936"><a href="#Canvas-936"><span class="linenos"> 936</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Canvas-937"><a href="#Canvas-937"><span class="linenos"> 937</span></a><span class="sd">        Return a directed graph of the batch and its elements.</span>
</span><span id="Canvas-938"><a href="#Canvas-938"><span class="linenos"> 938</span></a><span class="sd">        Canvas is the root of the graph.</span>
</span><span id="Canvas-939"><a href="#Canvas-939"><span class="linenos"> 939</span></a><span class="sd">        Graph nodes are the ids of the elements.</span>
</span><span id="Canvas-940"><a href="#Canvas-940"><span class="linenos"> 940</span></a>
</span><span id="Canvas-941"><a href="#Canvas-941"><span class="linenos"> 941</span></a><span class="sd">        Args:</span>
</span><span id="Canvas-942"><a href="#Canvas-942"><span class="linenos"> 942</span></a><span class="sd">            batch (Batch): The batch to create the graph from.</span>
</span><span id="Canvas-943"><a href="#Canvas-943"><span class="linenos"> 943</span></a>
</span><span id="Canvas-944"><a href="#Canvas-944"><span class="linenos"> 944</span></a><span class="sd">        Returns:</span>
</span><span id="Canvas-945"><a href="#Canvas-945"><span class="linenos"> 945</span></a><span class="sd">            nx.DiGraph: The directed graph of the batch and its elements.</span>
</span><span id="Canvas-946"><a href="#Canvas-946"><span class="linenos"> 946</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Canvas-947"><a href="#Canvas-947"><span class="linenos"> 947</span></a>
</span><span id="Canvas-948"><a href="#Canvas-948"><span class="linenos"> 948</span></a>        <span class="k">def</span> <span class="nf">add_batch</span><span class="p">(</span><span class="n">batch</span><span class="p">,</span> <span class="n">graph</span><span class="p">):</span>
</span><span id="Canvas-949"><a href="#Canvas-949"><span class="linenos"> 949</span></a>            <span class="n">graph</span><span class="o">.</span><span class="n">add_node</span><span class="p">(</span><span class="n">batch</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
</span><span id="Canvas-950"><a href="#Canvas-950"><span class="linenos"> 950</span></a>            <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">batch</span><span class="o">.</span><span class="n">elements</span><span class="p">:</span>
</span><span id="Canvas-951"><a href="#Canvas-951"><span class="linenos"> 951</span></a>                <span class="n">graph</span><span class="o">.</span><span class="n">add_edge</span><span class="p">(</span><span class="n">batch</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="n">item</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
</span><span id="Canvas-952"><a href="#Canvas-952"><span class="linenos"> 952</span></a>                <span class="k">if</span> <span class="n">item</span><span class="o">.</span><span class="n">subtype</span> <span class="o">==</span> <span class="n">Types</span><span class="o">.</span><span class="n">BATCH</span><span class="p">:</span>
</span><span id="Canvas-953"><a href="#Canvas-953"><span class="linenos"> 953</span></a>                    <span class="n">add_batch</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="n">graph</span><span class="p">)</span>
</span><span id="Canvas-954"><a href="#Canvas-954"><span class="linenos"> 954</span></a>            <span class="k">return</span> <span class="n">graph</span>
</span><span id="Canvas-955"><a href="#Canvas-955"><span class="linenos"> 955</span></a>
</span><span id="Canvas-956"><a href="#Canvas-956"><span class="linenos"> 956</span></a>        <span class="n">di_graph</span> <span class="o">=</span> <span class="n">nx</span><span class="o">.</span><span class="n">DiGraph</span><span class="p">()</span>
</span><span id="Canvas-957"><a href="#Canvas-957"><span class="linenos"> 957</span></a>        <span class="n">di_graph</span><span class="o">.</span><span class="n">add_edge</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="n">batch</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
</span><span id="Canvas-958"><a href="#Canvas-958"><span class="linenos"> 958</span></a>        <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">batch</span><span class="o">.</span><span class="n">elements</span><span class="p">:</span>
</span><span id="Canvas-959"><a href="#Canvas-959"><span class="linenos"> 959</span></a>            <span class="k">if</span> <span class="n">item</span><span class="o">.</span><span class="n">subtype</span> <span class="o">==</span> <span class="n">Types</span><span class="o">.</span><span class="n">BATCH</span><span class="p">:</span>
</span><span id="Canvas-960"><a href="#Canvas-960"><span class="linenos"> 960</span></a>                <span class="n">di_graph</span><span class="o">.</span><span class="n">add_edge</span><span class="p">(</span><span class="n">batch</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="n">item</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
</span><span id="Canvas-961"><a href="#Canvas-961"><span class="linenos"> 961</span></a>                <span class="n">add_batch</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="n">di_graph</span><span class="p">)</span>
</span><span id="Canvas-962"><a href="#Canvas-962"><span class="linenos"> 962</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="Canvas-963"><a href="#Canvas-963"><span class="linenos"> 963</span></a>                <span class="n">di_graph</span><span class="o">.</span><span class="n">add_edge</span><span class="p">(</span><span class="n">batch</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="n">item</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
</span><span id="Canvas-964"><a href="#Canvas-964"><span class="linenos"> 964</span></a>
</span><span id="Canvas-965"><a href="#Canvas-965"><span class="linenos"> 965</span></a>        <span class="k">return</span> <span class="n">di_graph</span>
</span><span id="Canvas-966"><a href="#Canvas-966"><span class="linenos"> 966</span></a>
</span><span id="Canvas-967"><a href="#Canvas-967"><span class="linenos"> 967</span></a>    <span class="k">def</span> <span class="nf">_resolve_property</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item</span><span class="p">:</span> <span class="n">Drawable</span><span class="p">,</span> <span class="n">property_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
</span><span id="Canvas-968"><a href="#Canvas-968"><span class="linenos"> 968</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Canvas-969"><a href="#Canvas-969"><span class="linenos"> 969</span></a><span class="sd">        Handles None values for properties.</span>
</span><span id="Canvas-970"><a href="#Canvas-970"><span class="linenos"> 970</span></a><span class="sd">        try item.property_name first,</span>
</span><span id="Canvas-971"><a href="#Canvas-971"><span class="linenos"> 971</span></a><span class="sd">        then try canvas.property_name,</span>
</span><span id="Canvas-972"><a href="#Canvas-972"><span class="linenos"> 972</span></a><span class="sd">        finally use the default value.</span>
</span><span id="Canvas-973"><a href="#Canvas-973"><span class="linenos"> 973</span></a>
</span><span id="Canvas-974"><a href="#Canvas-974"><span class="linenos"> 974</span></a><span class="sd">        Args:</span>
</span><span id="Canvas-975"><a href="#Canvas-975"><span class="linenos"> 975</span></a><span class="sd">            item (Drawable): The item to resolve the property for.</span>
</span><span id="Canvas-976"><a href="#Canvas-976"><span class="linenos"> 976</span></a><span class="sd">            property_name (str): The name of the property to resolve.</span>
</span><span id="Canvas-977"><a href="#Canvas-977"><span class="linenos"> 977</span></a>
</span><span id="Canvas-978"><a href="#Canvas-978"><span class="linenos"> 978</span></a><span class="sd">        Returns:</span>
</span><span id="Canvas-979"><a href="#Canvas-979"><span class="linenos"> 979</span></a><span class="sd">            Any: The resolved property value.</span>
</span><span id="Canvas-980"><a href="#Canvas-980"><span class="linenos"> 980</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Canvas-981"><a href="#Canvas-981"><span class="linenos"> 981</span></a>        <span class="n">value</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="n">property_name</span><span class="p">)</span>
</span><span id="Canvas-982"><a href="#Canvas-982"><span class="linenos"> 982</span></a>        <span class="k">if</span> <span class="n">value</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Canvas-983"><a href="#Canvas-983"><span class="linenos"> 983</span></a>            <span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__dict__</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">property_name</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
</span><span id="Canvas-984"><a href="#Canvas-984"><span class="linenos"> 984</span></a>            <span class="k">if</span> <span class="n">value</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Canvas-985"><a href="#Canvas-985"><span class="linenos"> 985</span></a>                <span class="n">value</span> <span class="o">=</span> <span class="n">defaults</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">property_name</span><span class="p">,</span> <span class="n">VOID</span><span class="p">)</span>
</span><span id="Canvas-986"><a href="#Canvas-986"><span class="linenos"> 986</span></a>            <span class="k">if</span> <span class="n">value</span> <span class="o">==</span> <span class="n">VOID</span><span class="p">:</span>
</span><span id="Canvas-987"><a href="#Canvas-987"><span class="linenos"> 987</span></a>                <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Property </span><span class="si">{</span><span class="n">property_name</span><span class="si">}</span><span class="s2"> is not in defaults.&quot;</span><span class="p">)</span>
</span><span id="Canvas-988"><a href="#Canvas-988"><span class="linenos"> 988</span></a>                <span class="n">value</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="Canvas-989"><a href="#Canvas-989"><span class="linenos"> 989</span></a>        <span class="k">return</span> <span class="n">value</span>
</span><span id="Canvas-990"><a href="#Canvas-990"><span class="linenos"> 990</span></a>
</span><span id="Canvas-991"><a href="#Canvas-991"><span class="linenos"> 991</span></a>    <span class="k">def</span> <span class="nf">get_fonts_list</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
</span><span id="Canvas-992"><a href="#Canvas-992"><span class="linenos"> 992</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Canvas-993"><a href="#Canvas-993"><span class="linenos"> 993</span></a><span class="sd">        Get the list of fonts used in the canvas.</span>
</span><span id="Canvas-994"><a href="#Canvas-994"><span class="linenos"> 994</span></a>
</span><span id="Canvas-995"><a href="#Canvas-995"><span class="linenos"> 995</span></a><span class="sd">        Returns:</span>
</span><span id="Canvas-996"><a href="#Canvas-996"><span class="linenos"> 996</span></a><span class="sd">            list[str]: The list of fonts used in the canvas.</span>
</span><span id="Canvas-997"><a href="#Canvas-997"><span class="linenos"> 997</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Canvas-998"><a href="#Canvas-998"><span class="linenos"> 998</span></a>        <span class="n">user_fonts</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_font_list</span><span class="p">)</span>
</span><span id="Canvas-999"><a href="#Canvas-999"><span class="linenos"> 999</span></a>
</span><span id="Canvas-1000"><a href="#Canvas-1000"><span class="linenos">1000</span></a>        <span class="n">latex_fonts</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span>
</span><span id="Canvas-1001"><a href="#Canvas-1001"><span class="linenos">1001</span></a>            <span class="p">[</span>
</span><span id="Canvas-1002"><a href="#Canvas-1002"><span class="linenos">1002</span></a>                <span class="n">defaults</span><span class="p">[</span><span class="s2">&quot;main_font&quot;</span><span class="p">],</span>
</span><span id="Canvas-1003"><a href="#Canvas-1003"><span class="linenos">1003</span></a>                <span class="n">defaults</span><span class="p">[</span><span class="s2">&quot;sans_font&quot;</span><span class="p">],</span>
</span><span id="Canvas-1004"><a href="#Canvas-1004"><span class="linenos">1004</span></a>                <span class="n">defaults</span><span class="p">[</span><span class="s2">&quot;mono_font&quot;</span><span class="p">],</span>
</span><span id="Canvas-1005"><a href="#Canvas-1005"><span class="linenos">1005</span></a>                <span class="s2">&quot;serif&quot;</span><span class="p">,</span>
</span><span id="Canvas-1006"><a href="#Canvas-1006"><span class="linenos">1006</span></a>                <span class="s2">&quot;sansserif&quot;</span><span class="p">,</span>
</span><span id="Canvas-1007"><a href="#Canvas-1007"><span class="linenos">1007</span></a>                <span class="s2">&quot;monospace&quot;</span><span class="p">,</span>
</span><span id="Canvas-1008"><a href="#Canvas-1008"><span class="linenos">1008</span></a>            <span class="p">]</span>
</span><span id="Canvas-1009"><a href="#Canvas-1009"><span class="linenos">1009</span></a>        <span class="p">)</span>
</span><span id="Canvas-1010"><a href="#Canvas-1010"><span class="linenos">1010</span></a>        <span class="k">for</span> <span class="n">sketch</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">active_page</span><span class="o">.</span><span class="n">sketches</span><span class="p">:</span>
</span><span id="Canvas-1011"><a href="#Canvas-1011"><span class="linenos">1011</span></a>            <span class="k">if</span> <span class="n">sketch</span><span class="o">.</span><span class="n">subtype</span> <span class="o">==</span> <span class="n">Types</span><span class="o">.</span><span class="n">TAG_SKETCH</span><span class="p">:</span>
</span><span id="Canvas-1012"><a href="#Canvas-1012"><span class="linenos">1012</span></a>                <span class="n">name</span> <span class="o">=</span> <span class="n">sketch</span><span class="o">.</span><span class="n">font_family</span>
</span><span id="Canvas-1013"><a href="#Canvas-1013"><span class="linenos">1013</span></a>                <span class="k">if</span> <span class="n">name</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">latex_fonts</span><span class="p">:</span>
</span><span id="Canvas-1014"><a href="#Canvas-1014"><span class="linenos">1014</span></a>                    <span class="n">user_fonts</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
</span><span id="Canvas-1015"><a href="#Canvas-1015"><span class="linenos">1015</span></a>        <span class="k">return</span> <span class="nb">list</span><span class="p">(</span><span class="n">user_fonts</span><span class="o">.</span><span class="n">difference</span><span class="p">(</span><span class="n">latex_fonts</span><span class="p">))</span>
</span><span id="Canvas-1016"><a href="#Canvas-1016"><span class="linenos">1016</span></a>
</span><span id="Canvas-1017"><a href="#Canvas-1017"><span class="linenos">1017</span></a>    <span class="k">def</span> <span class="nf">_calculate_size</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">border</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">b_box</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span> <span class="nb">float</span><span class="p">]:</span>
</span><span id="Canvas-1018"><a href="#Canvas-1018"><span class="linenos">1018</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Canvas-1019"><a href="#Canvas-1019"><span class="linenos">1019</span></a><span class="sd">        Calculate the size of the canvas based on the bounding box and border.</span>
</span><span id="Canvas-1020"><a href="#Canvas-1020"><span class="linenos">1020</span></a>
</span><span id="Canvas-1021"><a href="#Canvas-1021"><span class="linenos">1021</span></a><span class="sd">        Args:</span>
</span><span id="Canvas-1022"><a href="#Canvas-1022"><span class="linenos">1022</span></a><span class="sd">            border (float, optional): The border of the canvas, defaults to None.</span>
</span><span id="Canvas-1023"><a href="#Canvas-1023"><span class="linenos">1023</span></a><span class="sd">            b_box (Any, optional): The bounding box of the canvas, defaults to None.</span>
</span><span id="Canvas-1024"><a href="#Canvas-1024"><span class="linenos">1024</span></a>
</span><span id="Canvas-1025"><a href="#Canvas-1025"><span class="linenos">1025</span></a><span class="sd">        Returns:</span>
</span><span id="Canvas-1026"><a href="#Canvas-1026"><span class="linenos">1026</span></a><span class="sd">            Tuple[float, float]: The size of the canvas.</span>
</span><span id="Canvas-1027"><a href="#Canvas-1027"><span class="linenos">1027</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Canvas-1028"><a href="#Canvas-1028"><span class="linenos">1028</span></a>        <span class="n">vertices</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_all_vertices</span>
</span><span id="Canvas-1029"><a href="#Canvas-1029"><span class="linenos">1029</span></a>        <span class="k">if</span> <span class="n">vertices</span><span class="p">:</span>
</span><span id="Canvas-1030"><a href="#Canvas-1030"><span class="linenos">1030</span></a>            <span class="k">if</span> <span class="n">b_box</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Canvas-1031"><a href="#Canvas-1031"><span class="linenos">1031</span></a>                <span class="n">b_box</span> <span class="o">=</span> <span class="n">bounding_box</span><span class="p">(</span><span class="n">vertices</span><span class="p">)</span>
</span><span id="Canvas-1032"><a href="#Canvas-1032"><span class="linenos">1032</span></a>
</span><span id="Canvas-1033"><a href="#Canvas-1033"><span class="linenos">1033</span></a>            <span class="k">if</span> <span class="n">border</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Canvas-1034"><a href="#Canvas-1034"><span class="linenos">1034</span></a>                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">border</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Canvas-1035"><a href="#Canvas-1035"><span class="linenos">1035</span></a>                    <span class="n">border</span> <span class="o">=</span> <span class="n">defaults</span><span class="p">[</span><span class="s2">&quot;border&quot;</span><span class="p">]</span>
</span><span id="Canvas-1036"><a href="#Canvas-1036"><span class="linenos">1036</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="Canvas-1037"><a href="#Canvas-1037"><span class="linenos">1037</span></a>                    <span class="n">border</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">border</span>
</span><span id="Canvas-1038"><a href="#Canvas-1038"><span class="linenos">1038</span></a>            <span class="n">w</span> <span class="o">=</span> <span class="n">b_box</span><span class="o">.</span><span class="n">width</span> <span class="o">+</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">border</span>
</span><span id="Canvas-1039"><a href="#Canvas-1039"><span class="linenos">1039</span></a>            <span class="n">h</span> <span class="o">=</span> <span class="n">b_box</span><span class="o">.</span><span class="n">height</span> <span class="o">+</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">border</span>
</span><span id="Canvas-1040"><a href="#Canvas-1040"><span class="linenos">1040</span></a>            <span class="n">offset_x</span><span class="p">,</span> <span class="n">offset_y</span> <span class="o">=</span> <span class="n">b_box</span><span class="o">.</span><span class="n">southwest</span>
</span><span id="Canvas-1041"><a href="#Canvas-1041"><span class="linenos">1041</span></a>            <span class="n">res</span> <span class="o">=</span> <span class="n">w</span><span class="p">,</span> <span class="n">h</span><span class="p">,</span> <span class="n">offset_x</span> <span class="o">-</span> <span class="n">border</span><span class="p">,</span> <span class="n">offset_y</span> <span class="o">-</span> <span class="n">border</span>
</span><span id="Canvas-1042"><a href="#Canvas-1042"><span class="linenos">1042</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="Canvas-1043"><a href="#Canvas-1043"><span class="linenos">1043</span></a>            <span class="n">res</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="Canvas-1044"><a href="#Canvas-1044"><span class="linenos">1044</span></a>        <span class="k">return</span> <span class="n">res</span>
</span><span id="Canvas-1045"><a href="#Canvas-1045"><span class="linenos">1045</span></a>
</span><span id="Canvas-1046"><a href="#Canvas-1046"><span class="linenos">1046</span></a>    <span class="k">def</span> <span class="nf">_show_browser</span><span class="p">(</span>
</span><span id="Canvas-1047"><a href="#Canvas-1047"><span class="linenos">1047</span></a>        <span class="bp">self</span><span class="p">,</span> <span class="n">file_path</span><span class="p">:</span> <span class="n">Path</span><span class="p">,</span> <span class="n">show_browser</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span> <span class="n">multi_page_svg</span><span class="p">:</span> <span class="nb">bool</span>
</span><span id="Canvas-1048"><a href="#Canvas-1048"><span class="linenos">1048</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Canvas-1049"><a href="#Canvas-1049"><span class="linenos">1049</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Canvas-1050"><a href="#Canvas-1050"><span class="linenos">1050</span></a><span class="sd">        Show the file in the browser.</span>
</span><span id="Canvas-1051"><a href="#Canvas-1051"><span class="linenos">1051</span></a>
</span><span id="Canvas-1052"><a href="#Canvas-1052"><span class="linenos">1052</span></a><span class="sd">        Args:</span>
</span><span id="Canvas-1053"><a href="#Canvas-1053"><span class="linenos">1053</span></a><span class="sd">            file_path (Path): The path to the file.</span>
</span><span id="Canvas-1054"><a href="#Canvas-1054"><span class="linenos">1054</span></a><span class="sd">            show_browser (bool): Whether to show the file in the browser.</span>
</span><span id="Canvas-1055"><a href="#Canvas-1055"><span class="linenos">1055</span></a><span class="sd">            multi_page_svg (bool): Whether the file is a multi-page SVG.</span>
</span><span id="Canvas-1056"><a href="#Canvas-1056"><span class="linenos">1056</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Canvas-1057"><a href="#Canvas-1057"><span class="linenos">1057</span></a>        <span class="k">if</span> <span class="n">show_browser</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Canvas-1058"><a href="#Canvas-1058"><span class="linenos">1058</span></a>            <span class="n">show_browser</span> <span class="o">=</span> <span class="n">defaults</span><span class="p">[</span><span class="s2">&quot;show_browser&quot;</span><span class="p">]</span>
</span><span id="Canvas-1059"><a href="#Canvas-1059"><span class="linenos">1059</span></a>        <span class="k">if</span> <span class="n">show_browser</span><span class="p">:</span>
</span><span id="Canvas-1060"><a href="#Canvas-1060"><span class="linenos">1060</span></a>            <span class="n">file_path</span> <span class="o">=</span> <span class="s2">&quot;file:///&quot;</span> <span class="o">+</span> <span class="n">file_path</span>
</span><span id="Canvas-1061"><a href="#Canvas-1061"><span class="linenos">1061</span></a>            <span class="k">if</span> <span class="n">multi_page_svg</span><span class="p">:</span>
</span><span id="Canvas-1062"><a href="#Canvas-1062"><span class="linenos">1062</span></a>                <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pages</span><span class="p">):</span>
</span><span id="Canvas-1063"><a href="#Canvas-1063"><span class="linenos">1063</span></a>                    <span class="n">f_path</span> <span class="o">=</span> <span class="n">file_path</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;.svg&quot;</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;_page</span><span class="si">{</span><span class="n">i</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="si">}</span><span class="s2">.svg&quot;</span><span class="p">)</span>
</span><span id="Canvas-1064"><a href="#Canvas-1064"><span class="linenos">1064</span></a>                    <span class="n">webbrowser</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">f_path</span><span class="p">)</span>
</span><span id="Canvas-1065"><a href="#Canvas-1065"><span class="linenos">1065</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="Canvas-1066"><a href="#Canvas-1066"><span class="linenos">1066</span></a>                <span class="n">webbrowser</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">file_path</span><span class="p">)</span>
</span><span id="Canvas-1067"><a href="#Canvas-1067"><span class="linenos">1067</span></a>
</span><span id="Canvas-1068"><a href="#Canvas-1068"><span class="linenos">1068</span></a>    <span class="k">def</span> <span class="nf">save</span><span class="p">(</span>
</span><span id="Canvas-1069"><a href="#Canvas-1069"><span class="linenos">1069</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="Canvas-1070"><a href="#Canvas-1070"><span class="linenos">1070</span></a>        <span class="n">file_path</span><span class="p">:</span> <span class="n">Path</span><span class="p">,</span>
</span><span id="Canvas-1071"><a href="#Canvas-1071"><span class="linenos">1071</span></a>        <span class="n">overwrite</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="Canvas-1072"><a href="#Canvas-1072"><span class="linenos">1072</span></a>        <span class="n">show</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="Canvas-1073"><a href="#Canvas-1073"><span class="linenos">1073</span></a>        <span class="n">print_output</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
</span><span id="Canvas-1074"><a href="#Canvas-1074"><span class="linenos">1074</span></a>        <span class="n">remove_aux</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
</span><span id="Canvas-1075"><a href="#Canvas-1075"><span class="linenos">1075</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Self</span><span class="p">:</span>
</span><span id="Canvas-1076"><a href="#Canvas-1076"><span class="linenos">1076</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Canvas-1077"><a href="#Canvas-1077"><span class="linenos">1077</span></a><span class="sd">        Save the canvas to a file.</span>
</span><span id="Canvas-1078"><a href="#Canvas-1078"><span class="linenos">1078</span></a>
</span><span id="Canvas-1079"><a href="#Canvas-1079"><span class="linenos">1079</span></a><span class="sd">        Args:</span>
</span><span id="Canvas-1080"><a href="#Canvas-1080"><span class="linenos">1080</span></a><span class="sd">            file_path (Path, optional): The path to save the file.</span>
</span><span id="Canvas-1081"><a href="#Canvas-1081"><span class="linenos">1081</span></a><span class="sd">            overwrite (bool, optional): Whether to overwrite the file if it exists.</span>
</span><span id="Canvas-1082"><a href="#Canvas-1082"><span class="linenos">1082</span></a><span class="sd">            show (bool, optional): Whether to show the file in the browser.</span>
</span><span id="Canvas-1083"><a href="#Canvas-1083"><span class="linenos">1083</span></a><span class="sd">            print_output (bool, optional): Whether to print the output of the compilation.</span>
</span><span id="Canvas-1084"><a href="#Canvas-1084"><span class="linenos">1084</span></a>
</span><span id="Canvas-1085"><a href="#Canvas-1085"><span class="linenos">1085</span></a><span class="sd">        Returns:</span>
</span><span id="Canvas-1086"><a href="#Canvas-1086"><span class="linenos">1086</span></a><span class="sd">            Self: The canvas object.</span>
</span><span id="Canvas-1087"><a href="#Canvas-1087"><span class="linenos">1087</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Canvas-1088"><a href="#Canvas-1088"><span class="linenos">1088</span></a>
</span><span id="Canvas-1089"><a href="#Canvas-1089"><span class="linenos">1089</span></a>        <span class="k">def</span> <span class="nf">validate_file_path</span><span class="p">(</span><span class="n">file_path</span><span class="p">:</span> <span class="n">Path</span><span class="p">,</span> <span class="n">overwrite</span><span class="p">:</span> <span class="nb">bool</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Result</span><span class="p">:</span>
</span><span id="Canvas-1090"><a href="#Canvas-1090"><span class="linenos">1090</span></a><span class="w">            </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Canvas-1091"><a href="#Canvas-1091"><span class="linenos">1091</span></a><span class="sd">            Validate the file path.</span>
</span><span id="Canvas-1092"><a href="#Canvas-1092"><span class="linenos">1092</span></a>
</span><span id="Canvas-1093"><a href="#Canvas-1093"><span class="linenos">1093</span></a><span class="sd">            Args:</span>
</span><span id="Canvas-1094"><a href="#Canvas-1094"><span class="linenos">1094</span></a><span class="sd">                file_path (Path): The path to the file.</span>
</span><span id="Canvas-1095"><a href="#Canvas-1095"><span class="linenos">1095</span></a><span class="sd">                overwrite (bool): Whether to overwrite the file if it exists.</span>
</span><span id="Canvas-1096"><a href="#Canvas-1096"><span class="linenos">1096</span></a>
</span><span id="Canvas-1097"><a href="#Canvas-1097"><span class="linenos">1097</span></a><span class="sd">            Returns:</span>
</span><span id="Canvas-1098"><a href="#Canvas-1098"><span class="linenos">1098</span></a><span class="sd">                Result: The parent directory, file name, and extension.</span>
</span><span id="Canvas-1099"><a href="#Canvas-1099"><span class="linenos">1099</span></a><span class="sd">            &quot;&quot;&quot;</span>
</span><span id="Canvas-1100"><a href="#Canvas-1100"><span class="linenos">1100</span></a>            <span class="n">path_exists</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">file_path</span><span class="p">)</span>
</span><span id="Canvas-1101"><a href="#Canvas-1101"><span class="linenos">1101</span></a>            <span class="k">if</span> <span class="n">path_exists</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">overwrite</span><span class="p">:</span>
</span><span id="Canvas-1102"><a href="#Canvas-1102"><span class="linenos">1102</span></a>                <span class="k">raise</span> <span class="ne">FileExistsError</span><span class="p">(</span>
</span><span id="Canvas-1103"><a href="#Canvas-1103"><span class="linenos">1103</span></a>                    <span class="sa">f</span><span class="s2">&quot;File </span><span class="si">{</span><span class="n">file_path</span><span class="si">}</span><span class="s2"> already exists. </span><span class="se">\n</span><span class="s2">&quot;</span>
</span><span id="Canvas-1104"><a href="#Canvas-1104"><span class="linenos">1104</span></a>                    <span class="s2">&quot;Use canvas.save(file_path, overwrite=True) to overwrite the file.&quot;</span>
</span><span id="Canvas-1105"><a href="#Canvas-1105"><span class="linenos">1105</span></a>                <span class="p">)</span>
</span><span id="Canvas-1106"><a href="#Canvas-1106"><span class="linenos">1106</span></a>            <span class="n">parent_dir</span><span class="p">,</span> <span class="n">file_name</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">file_path</span><span class="p">)</span>
</span><span id="Canvas-1107"><a href="#Canvas-1107"><span class="linenos">1107</span></a>            <span class="n">file_name</span><span class="p">,</span> <span class="n">extension</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">splitext</span><span class="p">(</span><span class="n">file_name</span><span class="p">)</span>
</span><span id="Canvas-1108"><a href="#Canvas-1108"><span class="linenos">1108</span></a>            <span class="k">if</span> <span class="n">extension</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;.pdf&quot;</span><span class="p">,</span> <span class="s2">&quot;.eps&quot;</span><span class="p">,</span> <span class="s2">&quot;.ps&quot;</span><span class="p">,</span> <span class="s2">&quot;.svg&quot;</span><span class="p">,</span> <span class="s2">&quot;.png&quot;</span><span class="p">,</span> <span class="s2">&quot;.tex&quot;</span><span class="p">]:</span>
</span><span id="Canvas-1109"><a href="#Canvas-1109"><span class="linenos">1109</span></a>                <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s2">&quot;File type is not supported.&quot;</span><span class="p">)</span>
</span><span id="Canvas-1110"><a href="#Canvas-1110"><span class="linenos">1110</span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">parent_dir</span><span class="p">):</span>
</span><span id="Canvas-1111"><a href="#Canvas-1111"><span class="linenos">1111</span></a>                <span class="k">raise</span> <span class="ne">NotADirectoryError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Directory </span><span class="si">{</span><span class="n">parent_dir</span><span class="si">}</span><span class="s2"> does not exist.&quot;</span><span class="p">)</span>
</span><span id="Canvas-1112"><a href="#Canvas-1112"><span class="linenos">1112</span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">access</span><span class="p">(</span><span class="n">parent_dir</span><span class="p">,</span> <span class="n">os</span><span class="o">.</span><span class="n">W_OK</span><span class="p">):</span>
</span><span id="Canvas-1113"><a href="#Canvas-1113"><span class="linenos">1113</span></a>                <span class="k">raise</span> <span class="ne">PermissionError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Directory </span><span class="si">{</span><span class="n">parent_dir</span><span class="si">}</span><span class="s2"> is not writable.&quot;</span><span class="p">)</span>
</span><span id="Canvas-1114"><a href="#Canvas-1114"><span class="linenos">1114</span></a>
</span><span id="Canvas-1115"><a href="#Canvas-1115"><span class="linenos">1115</span></a>            <span class="k">return</span> <span class="n">parent_dir</span><span class="p">,</span> <span class="n">file_name</span><span class="p">,</span> <span class="n">extension</span>
</span><span id="Canvas-1116"><a href="#Canvas-1116"><span class="linenos">1116</span></a>
</span><span id="Canvas-1117"><a href="#Canvas-1117"><span class="linenos">1117</span></a>        <span class="k">def</span> <span class="nf">compile_tex</span><span class="p">(</span><span class="n">cmd</span><span class="p">):</span>
</span><span id="Canvas-1118"><a href="#Canvas-1118"><span class="linenos">1118</span></a><span class="w">            </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Canvas-1119"><a href="#Canvas-1119"><span class="linenos">1119</span></a><span class="sd">            Compile the TeX file.</span>
</span><span id="Canvas-1120"><a href="#Canvas-1120"><span class="linenos">1120</span></a>
</span><span id="Canvas-1121"><a href="#Canvas-1121"><span class="linenos">1121</span></a><span class="sd">            Args:</span>
</span><span id="Canvas-1122"><a href="#Canvas-1122"><span class="linenos">1122</span></a><span class="sd">                cmd (str): The command to compile the TeX file.</span>
</span><span id="Canvas-1123"><a href="#Canvas-1123"><span class="linenos">1123</span></a>
</span><span id="Canvas-1124"><a href="#Canvas-1124"><span class="linenos">1124</span></a><span class="sd">            Returns:</span>
</span><span id="Canvas-1125"><a href="#Canvas-1125"><span class="linenos">1125</span></a><span class="sd">                str: The output of the compilation.</span>
</span><span id="Canvas-1126"><a href="#Canvas-1126"><span class="linenos">1126</span></a><span class="sd">            &quot;&quot;&quot;</span>
</span><span id="Canvas-1127"><a href="#Canvas-1127"><span class="linenos">1127</span></a>            <span class="n">os</span><span class="o">.</span><span class="n">chdir</span><span class="p">(</span><span class="n">parent_dir</span><span class="p">)</span>
</span><span id="Canvas-1128"><a href="#Canvas-1128"><span class="linenos">1128</span></a>            <span class="k">with</span> <span class="n">subprocess</span><span class="o">.</span><span class="n">Popen</span><span class="p">(</span>
</span><span id="Canvas-1129"><a href="#Canvas-1129"><span class="linenos">1129</span></a>                <span class="n">cmd</span><span class="p">,</span>
</span><span id="Canvas-1130"><a href="#Canvas-1130"><span class="linenos">1130</span></a>                <span class="n">stdin</span><span class="o">=</span><span class="n">subprocess</span><span class="o">.</span><span class="n">PIPE</span><span class="p">,</span>
</span><span id="Canvas-1131"><a href="#Canvas-1131"><span class="linenos">1131</span></a>                <span class="n">stdout</span><span class="o">=</span><span class="n">subprocess</span><span class="o">.</span><span class="n">PIPE</span><span class="p">,</span>
</span><span id="Canvas-1132"><a href="#Canvas-1132"><span class="linenos">1132</span></a>                <span class="n">shell</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
</span><span id="Canvas-1133"><a href="#Canvas-1133"><span class="linenos">1133</span></a>                <span class="n">text</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
</span><span id="Canvas-1134"><a href="#Canvas-1134"><span class="linenos">1134</span></a>            <span class="p">)</span> <span class="k">as</span> <span class="n">p</span><span class="p">:</span>
</span><span id="Canvas-1135"><a href="#Canvas-1135"><span class="linenos">1135</span></a>                <span class="n">output</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="n">communicate</span><span class="p">(</span><span class="s2">&quot;_s</span><span class="se">\n</span><span class="s2">_l</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="Canvas-1136"><a href="#Canvas-1136"><span class="linenos">1136</span></a>            <span class="k">if</span> <span class="n">print_output</span><span class="p">:</span>
</span><span id="Canvas-1137"><a href="#Canvas-1137"><span class="linenos">1137</span></a>                <span class="nb">print</span><span class="p">(</span><span class="n">output</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)[</span><span class="o">-</span><span class="mi">3</span><span class="p">:])</span>
</span><span id="Canvas-1138"><a href="#Canvas-1138"><span class="linenos">1138</span></a>            <span class="k">return</span> <span class="n">output</span>
</span><span id="Canvas-1139"><a href="#Canvas-1139"><span class="linenos">1139</span></a>
</span><span id="Canvas-1140"><a href="#Canvas-1140"><span class="linenos">1140</span></a>        <span class="k">def</span> <span class="nf">remove_aux_files</span><span class="p">(</span><span class="n">file_path</span><span class="p">):</span>
</span><span id="Canvas-1141"><a href="#Canvas-1141"><span class="linenos">1141</span></a><span class="w">            </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Canvas-1142"><a href="#Canvas-1142"><span class="linenos">1142</span></a><span class="sd">            Remove auxiliary files generated during compilation.</span>
</span><span id="Canvas-1143"><a href="#Canvas-1143"><span class="linenos">1143</span></a>
</span><span id="Canvas-1144"><a href="#Canvas-1144"><span class="linenos">1144</span></a><span class="sd">            Args:</span>
</span><span id="Canvas-1145"><a href="#Canvas-1145"><span class="linenos">1145</span></a><span class="sd">                file_path (Path): The path to the file.</span>
</span><span id="Canvas-1146"><a href="#Canvas-1146"><span class="linenos">1146</span></a><span class="sd">            &quot;&quot;&quot;</span>
</span><span id="Canvas-1147"><a href="#Canvas-1147"><span class="linenos">1147</span></a>            <span class="n">time_out</span> <span class="o">=</span> <span class="mi">1</span>  <span class="c1"># seconds</span>
</span><span id="Canvas-1148"><a href="#Canvas-1148"><span class="linenos">1148</span></a>            <span class="n">parent_dir</span><span class="p">,</span> <span class="n">file_name</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">file_path</span><span class="p">)</span>
</span><span id="Canvas-1149"><a href="#Canvas-1149"><span class="linenos">1149</span></a>            <span class="n">file_name</span><span class="p">,</span> <span class="n">extension</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">splitext</span><span class="p">(</span><span class="n">file_name</span><span class="p">)</span>
</span><span id="Canvas-1150"><a href="#Canvas-1150"><span class="linenos">1150</span></a>            <span class="n">aux_file</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">parent_dir</span><span class="p">,</span> <span class="n">file_name</span> <span class="o">+</span> <span class="s2">&quot;.aux&quot;</span><span class="p">)</span>
</span><span id="Canvas-1151"><a href="#Canvas-1151"><span class="linenos">1151</span></a>            <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">aux_file</span><span class="p">):</span>
</span><span id="Canvas-1152"><a href="#Canvas-1152"><span class="linenos">1152</span></a>                <span class="k">if</span> <span class="ow">not</span> <span class="n">wait_for_file_availability</span><span class="p">(</span><span class="n">aux_file</span><span class="p">,</span> <span class="n">time_out</span><span class="p">):</span>
</span><span id="Canvas-1153"><a href="#Canvas-1153"><span class="linenos">1153</span></a>                    <span class="nb">print</span><span class="p">(</span>
</span><span id="Canvas-1154"><a href="#Canvas-1154"><span class="linenos">1154</span></a>                        <span class="p">(</span>
</span><span id="Canvas-1155"><a href="#Canvas-1155"><span class="linenos">1155</span></a>                            <span class="sa">f</span><span class="s2">&quot;File &#39;</span><span class="si">{</span><span class="n">aux_file</span><span class="si">}</span><span class="s2">&#39; is not available after waiting for &quot;</span>
</span><span id="Canvas-1156"><a href="#Canvas-1156"><span class="linenos">1156</span></a>                            <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">time_out</span><span class="si">}</span><span class="s2"> seconds.&quot;</span>
</span><span id="Canvas-1157"><a href="#Canvas-1157"><span class="linenos">1157</span></a>                        <span class="p">)</span>
</span><span id="Canvas-1158"><a href="#Canvas-1158"><span class="linenos">1158</span></a>                    <span class="p">)</span>
</span><span id="Canvas-1159"><a href="#Canvas-1159"><span class="linenos">1159</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="Canvas-1160"><a href="#Canvas-1160"><span class="linenos">1160</span></a>                    <span class="n">os</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">aux_file</span><span class="p">)</span>
</span><span id="Canvas-1161"><a href="#Canvas-1161"><span class="linenos">1161</span></a>            <span class="n">log_file</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">parent_dir</span><span class="p">,</span> <span class="n">file_name</span> <span class="o">+</span> <span class="s2">&quot;.log&quot;</span><span class="p">)</span>
</span><span id="Canvas-1162"><a href="#Canvas-1162"><span class="linenos">1162</span></a>            <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">log_file</span><span class="p">):</span>
</span><span id="Canvas-1163"><a href="#Canvas-1163"><span class="linenos">1163</span></a>                <span class="k">if</span> <span class="ow">not</span> <span class="n">wait_for_file_availability</span><span class="p">(</span><span class="n">log_file</span><span class="p">,</span> <span class="n">time_out</span><span class="p">):</span>
</span><span id="Canvas-1164"><a href="#Canvas-1164"><span class="linenos">1164</span></a>                    <span class="nb">print</span><span class="p">(</span>
</span><span id="Canvas-1165"><a href="#Canvas-1165"><span class="linenos">1165</span></a>                        <span class="p">(</span>
</span><span id="Canvas-1166"><a href="#Canvas-1166"><span class="linenos">1166</span></a>                            <span class="sa">f</span><span class="s2">&quot;File &#39;</span><span class="si">{</span><span class="n">log_file</span><span class="si">}</span><span class="s2">&#39; is not available after waiting for &quot;</span>
</span><span id="Canvas-1167"><a href="#Canvas-1167"><span class="linenos">1167</span></a>                            <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">time_out</span><span class="si">}</span><span class="s2"> seconds.&quot;</span>
</span><span id="Canvas-1168"><a href="#Canvas-1168"><span class="linenos">1168</span></a>                        <span class="p">)</span>
</span><span id="Canvas-1169"><a href="#Canvas-1169"><span class="linenos">1169</span></a>                    <span class="p">)</span>
</span><span id="Canvas-1170"><a href="#Canvas-1170"><span class="linenos">1170</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="Canvas-1171"><a href="#Canvas-1171"><span class="linenos">1171</span></a>                    <span class="k">if</span> <span class="ow">not</span> <span class="n">defaults</span><span class="p">[</span><span class="s2">&quot;keep_log_files&quot;</span><span class="p">]:</span>
</span><span id="Canvas-1172"><a href="#Canvas-1172"><span class="linenos">1172</span></a>                        <span class="n">os</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">log_file</span><span class="p">)</span>
</span><span id="Canvas-1173"><a href="#Canvas-1173"><span class="linenos">1173</span></a>            <span class="n">tex_file</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">parent_dir</span><span class="p">,</span> <span class="n">file_name</span> <span class="o">+</span> <span class="s2">&quot;.tex&quot;</span><span class="p">)</span>
</span><span id="Canvas-1174"><a href="#Canvas-1174"><span class="linenos">1174</span></a>            <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">tex_file</span><span class="p">):</span>
</span><span id="Canvas-1175"><a href="#Canvas-1175"><span class="linenos">1175</span></a>                <span class="k">if</span> <span class="ow">not</span> <span class="n">wait_for_file_availability</span><span class="p">(</span><span class="n">tex_file</span><span class="p">,</span> <span class="n">time_out</span><span class="p">):</span>
</span><span id="Canvas-1176"><a href="#Canvas-1176"><span class="linenos">1176</span></a>                    <span class="nb">print</span><span class="p">(</span>
</span><span id="Canvas-1177"><a href="#Canvas-1177"><span class="linenos">1177</span></a>                        <span class="p">(</span>
</span><span id="Canvas-1178"><a href="#Canvas-1178"><span class="linenos">1178</span></a>                            <span class="sa">f</span><span class="s2">&quot;File &#39;</span><span class="si">{</span><span class="n">tex_file</span><span class="si">}</span><span class="s2">&#39; is not available after waiting for &quot;</span>
</span><span id="Canvas-1179"><a href="#Canvas-1179"><span class="linenos">1179</span></a>                            <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">time_out</span><span class="si">}</span><span class="s2"> seconds.&quot;</span>
</span><span id="Canvas-1180"><a href="#Canvas-1180"><span class="linenos">1180</span></a>                        <span class="p">)</span>
</span><span id="Canvas-1181"><a href="#Canvas-1181"><span class="linenos">1181</span></a>                    <span class="p">)</span>
</span><span id="Canvas-1182"><a href="#Canvas-1182"><span class="linenos">1182</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="Canvas-1183"><a href="#Canvas-1183"><span class="linenos">1183</span></a>                    <span class="n">os</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">tex_file</span><span class="p">)</span>
</span><span id="Canvas-1184"><a href="#Canvas-1184"><span class="linenos">1184</span></a>            <span class="n">file_name</span><span class="p">,</span> <span class="n">extension</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">splitext</span><span class="p">(</span><span class="n">file_name</span><span class="p">)</span>
</span><span id="Canvas-1185"><a href="#Canvas-1185"><span class="linenos">1185</span></a>            <span class="k">if</span> <span class="n">extension</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;.pdf&quot;</span><span class="p">,</span> <span class="s2">&quot;.tex&quot;</span><span class="p">]:</span>
</span><span id="Canvas-1186"><a href="#Canvas-1186"><span class="linenos">1186</span></a>                <span class="n">pdf_file</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">parent_dir</span><span class="p">,</span> <span class="n">file_name</span> <span class="o">+</span> <span class="s2">&quot;.pdf&quot;</span><span class="p">)</span>
</span><span id="Canvas-1187"><a href="#Canvas-1187"><span class="linenos">1187</span></a>                <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">pdf_file</span><span class="p">):</span>
</span><span id="Canvas-1188"><a href="#Canvas-1188"><span class="linenos">1188</span></a>                    <span class="k">if</span> <span class="ow">not</span> <span class="n">wait_for_file_availability</span><span class="p">(</span><span class="n">pdf_file</span><span class="p">,</span> <span class="n">time_out</span><span class="p">):</span>
</span><span id="Canvas-1189"><a href="#Canvas-1189"><span class="linenos">1189</span></a>                        <span class="nb">print</span><span class="p">(</span>
</span><span id="Canvas-1190"><a href="#Canvas-1190"><span class="linenos">1190</span></a>                            <span class="p">(</span>
</span><span id="Canvas-1191"><a href="#Canvas-1191"><span class="linenos">1191</span></a>                                <span class="sa">f</span><span class="s2">&quot;File &#39;</span><span class="si">{</span><span class="n">pdf_file</span><span class="si">}</span><span class="s2">&#39; is not available after waiting for &quot;</span>
</span><span id="Canvas-1192"><a href="#Canvas-1192"><span class="linenos">1192</span></a>                                <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">time_out</span><span class="si">}</span><span class="s2"> seconds.&quot;</span>
</span><span id="Canvas-1193"><a href="#Canvas-1193"><span class="linenos">1193</span></a>                            <span class="p">)</span>
</span><span id="Canvas-1194"><a href="#Canvas-1194"><span class="linenos">1194</span></a>                        <span class="p">)</span>
</span><span id="Canvas-1195"><a href="#Canvas-1195"><span class="linenos">1195</span></a>                    <span class="k">else</span><span class="p">:</span>
</span><span id="Canvas-1196"><a href="#Canvas-1196"><span class="linenos">1196</span></a>                        <span class="c1"># os.remove(pdf_file)</span>
</span><span id="Canvas-1197"><a href="#Canvas-1197"><span class="linenos">1197</span></a>                        <span class="k">pass</span>
</span><span id="Canvas-1198"><a href="#Canvas-1198"><span class="linenos">1198</span></a>            <span class="n">log_file</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">parent_dir</span><span class="p">,</span> <span class="s2">&quot;simetri.log&quot;</span><span class="p">)</span>
</span><span id="Canvas-1199"><a href="#Canvas-1199"><span class="linenos">1199</span></a>            <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">log_file</span><span class="p">):</span>
</span><span id="Canvas-1200"><a href="#Canvas-1200"><span class="linenos">1200</span></a>                <span class="k">try</span><span class="p">:</span>
</span><span id="Canvas-1201"><a href="#Canvas-1201"><span class="linenos">1201</span></a>                    <span class="n">os</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">log_file</span><span class="p">)</span>
</span><span id="Canvas-1202"><a href="#Canvas-1202"><span class="linenos">1202</span></a>                <span class="k">except</span> <span class="ne">PermissionError</span><span class="p">:</span>
</span><span id="Canvas-1203"><a href="#Canvas-1203"><span class="linenos">1203</span></a>                    <span class="c1"># to do: log the error</span>
</span><span id="Canvas-1204"><a href="#Canvas-1204"><span class="linenos">1204</span></a>                    <span class="k">pass</span>
</span><span id="Canvas-1205"><a href="#Canvas-1205"><span class="linenos">1205</span></a>
</span><span id="Canvas-1206"><a href="#Canvas-1206"><span class="linenos">1206</span></a>        <span class="k">def</span> <span class="nf">run_job</span><span class="p">():</span>
</span><span id="Canvas-1207"><a href="#Canvas-1207"><span class="linenos">1207</span></a><span class="w">            </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Canvas-1208"><a href="#Canvas-1208"><span class="linenos">1208</span></a><span class="sd">            Run the job to compile and save the file.</span>
</span><span id="Canvas-1209"><a href="#Canvas-1209"><span class="linenos">1209</span></a>
</span><span id="Canvas-1210"><a href="#Canvas-1210"><span class="linenos">1210</span></a><span class="sd">            Returns:</span>
</span><span id="Canvas-1211"><a href="#Canvas-1211"><span class="linenos">1211</span></a><span class="sd">                None</span>
</span><span id="Canvas-1212"><a href="#Canvas-1212"><span class="linenos">1212</span></a><span class="sd">            &quot;&quot;&quot;</span>
</span><span id="Canvas-1213"><a href="#Canvas-1213"><span class="linenos">1213</span></a>            <span class="n">output_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">parent_dir</span><span class="p">,</span> <span class="n">file_name</span> <span class="o">+</span> <span class="n">extension</span><span class="p">)</span>
</span><span id="Canvas-1214"><a href="#Canvas-1214"><span class="linenos">1214</span></a>            <span class="n">cmd</span> <span class="o">=</span> <span class="s2">&quot;xelatex &quot;</span> <span class="o">+</span> <span class="n">tex_path</span> <span class="o">+</span> <span class="s2">&quot; --output-directory &quot;</span> <span class="o">+</span> <span class="n">parent_dir</span>
</span><span id="Canvas-1215"><a href="#Canvas-1215"><span class="linenos">1215</span></a>            <span class="n">res</span> <span class="o">=</span> <span class="n">compile_tex</span><span class="p">(</span><span class="n">cmd</span><span class="p">)</span>
</span><span id="Canvas-1216"><a href="#Canvas-1216"><span class="linenos">1216</span></a>            <span class="k">if</span> <span class="s2">&quot;No pages of output&quot;</span> <span class="ow">in</span> <span class="n">res</span><span class="p">:</span>
</span><span id="Canvas-1217"><a href="#Canvas-1217"><span class="linenos">1217</span></a>                <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s2">&quot;Failed to compile the tex file.&quot;</span><span class="p">)</span>
</span><span id="Canvas-1218"><a href="#Canvas-1218"><span class="linenos">1218</span></a>            <span class="n">pdf_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">parent_dir</span><span class="p">,</span> <span class="n">file_name</span> <span class="o">+</span> <span class="s2">&quot;.pdf&quot;</span><span class="p">)</span>
</span><span id="Canvas-1219"><a href="#Canvas-1219"><span class="linenos">1219</span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">pdf_path</span><span class="p">):</span>
</span><span id="Canvas-1220"><a href="#Canvas-1220"><span class="linenos">1220</span></a>                <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s2">&quot;Failed to compile the tex file.&quot;</span><span class="p">)</span>
</span><span id="Canvas-1221"><a href="#Canvas-1221"><span class="linenos">1221</span></a>
</span><span id="Canvas-1222"><a href="#Canvas-1222"><span class="linenos">1222</span></a>            <span class="k">if</span> <span class="n">extension</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;.eps&quot;</span><span class="p">,</span> <span class="s2">&quot;.ps&quot;</span><span class="p">]:</span>
</span><span id="Canvas-1223"><a href="#Canvas-1223"><span class="linenos">1223</span></a>                <span class="n">ps_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">parent_dir</span><span class="p">,</span> <span class="n">file_name</span> <span class="o">+</span> <span class="n">extension</span><span class="p">)</span>
</span><span id="Canvas-1224"><a href="#Canvas-1224"><span class="linenos">1224</span></a>                <span class="n">os</span><span class="o">.</span><span class="n">chdir</span><span class="p">(</span><span class="n">parent_dir</span><span class="p">)</span>
</span><span id="Canvas-1225"><a href="#Canvas-1225"><span class="linenos">1225</span></a>                <span class="n">cmd</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;pdf2ps </span><span class="si">{</span><span class="n">pdf_path</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">ps_path</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="Canvas-1226"><a href="#Canvas-1226"><span class="linenos">1226</span></a>                <span class="n">res</span> <span class="o">=</span> <span class="n">subprocess</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">cmd</span><span class="p">,</span> <span class="n">shell</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">check</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</span><span id="Canvas-1227"><a href="#Canvas-1227"><span class="linenos">1227</span></a>                <span class="k">if</span> <span class="n">res</span><span class="o">.</span><span class="n">returncode</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="Canvas-1228"><a href="#Canvas-1228"><span class="linenos">1228</span></a>                    <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s2">&quot;Failed to convert pdf to ps.&quot;</span><span class="p">)</span>
</span><span id="Canvas-1229"><a href="#Canvas-1229"><span class="linenos">1229</span></a>            <span class="k">elif</span> <span class="n">extension</span> <span class="o">==</span> <span class="s2">&quot;.svg&quot;</span><span class="p">:</span>
</span><span id="Canvas-1230"><a href="#Canvas-1230"><span class="linenos">1230</span></a>                <span class="n">doc</span> <span class="o">=</span> <span class="n">fitz</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">pdf_path</span><span class="p">)</span>
</span><span id="Canvas-1231"><a href="#Canvas-1231"><span class="linenos">1231</span></a>                <span class="n">page</span> <span class="o">=</span> <span class="n">doc</span><span class="o">.</span><span class="n">load_page</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
</span><span id="Canvas-1232"><a href="#Canvas-1232"><span class="linenos">1232</span></a>                <span class="n">svg</span> <span class="o">=</span> <span class="n">page</span><span class="o">.</span><span class="n">get_svg_image</span><span class="p">()</span>
</span><span id="Canvas-1233"><a href="#Canvas-1233"><span class="linenos">1233</span></a>                <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">output_path</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s2">&quot;utf-8&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
</span><span id="Canvas-1234"><a href="#Canvas-1234"><span class="linenos">1234</span></a>                    <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">svg</span><span class="p">)</span>
</span><span id="Canvas-1235"><a href="#Canvas-1235"><span class="linenos">1235</span></a>            <span class="k">elif</span> <span class="n">extension</span> <span class="o">==</span> <span class="s2">&quot;.png&quot;</span><span class="p">:</span>
</span><span id="Canvas-1236"><a href="#Canvas-1236"><span class="linenos">1236</span></a>                <span class="n">pdf_file</span> <span class="o">=</span> <span class="n">fitz</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">pdf_path</span><span class="p">)</span>
</span><span id="Canvas-1237"><a href="#Canvas-1237"><span class="linenos">1237</span></a>                <span class="n">page</span> <span class="o">=</span> <span class="n">pdf_file</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="Canvas-1238"><a href="#Canvas-1238"><span class="linenos">1238</span></a>                <span class="n">pix</span> <span class="o">=</span> <span class="n">page</span><span class="o">.</span><span class="n">get_pixmap</span><span class="p">()</span>
</span><span id="Canvas-1239"><a href="#Canvas-1239"><span class="linenos">1239</span></a>                <span class="n">pix</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">output_path</span><span class="p">)</span>
</span><span id="Canvas-1240"><a href="#Canvas-1240"><span class="linenos">1240</span></a>                <span class="n">pdf_file</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</span><span id="Canvas-1241"><a href="#Canvas-1241"><span class="linenos">1241</span></a>
</span><span id="Canvas-1242"><a href="#Canvas-1242"><span class="linenos">1242</span></a>        <span class="n">parent_dir</span><span class="p">,</span> <span class="n">file_name</span><span class="p">,</span> <span class="n">extension</span> <span class="o">=</span> <span class="n">validate_file_path</span><span class="p">(</span><span class="n">file_path</span><span class="p">,</span> <span class="n">overwrite</span><span class="p">)</span>
</span><span id="Canvas-1243"><a href="#Canvas-1243"><span class="linenos">1243</span></a>
</span><span id="Canvas-1244"><a href="#Canvas-1244"><span class="linenos">1244</span></a>        <span class="n">tex_code</span> <span class="o">=</span> <span class="n">get_tex_code</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</span><span id="Canvas-1245"><a href="#Canvas-1245"><span class="linenos">1245</span></a>        <span class="n">tex_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">parent_dir</span><span class="p">,</span> <span class="n">file_name</span> <span class="o">+</span> <span class="s2">&quot;.tex&quot;</span><span class="p">)</span>
</span><span id="Canvas-1246"><a href="#Canvas-1246"><span class="linenos">1246</span></a>        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">tex_path</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s2">&quot;utf-8&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
</span><span id="Canvas-1247"><a href="#Canvas-1247"><span class="linenos">1247</span></a>            <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">tex_code</span><span class="p">)</span>
</span><span id="Canvas-1248"><a href="#Canvas-1248"><span class="linenos">1248</span></a>        <span class="k">if</span> <span class="n">extension</span> <span class="o">==</span> <span class="s2">&quot;.tex&quot;</span><span class="p">:</span>
</span><span id="Canvas-1249"><a href="#Canvas-1249"><span class="linenos">1249</span></a>            <span class="k">return</span> <span class="bp">self</span>
</span><span id="Canvas-1250"><a href="#Canvas-1250"><span class="linenos">1250</span></a>
</span><span id="Canvas-1251"><a href="#Canvas-1251"><span class="linenos">1251</span></a>        <span class="n">run_job</span><span class="p">()</span>
</span><span id="Canvas-1252"><a href="#Canvas-1252"><span class="linenos">1252</span></a>        <span class="k">if</span> <span class="n">remove_aux</span><span class="p">:</span>
</span><span id="Canvas-1253"><a href="#Canvas-1253"><span class="linenos">1253</span></a>            <span class="n">remove_aux_files</span><span class="p">(</span><span class="n">file_path</span><span class="p">)</span>
</span><span id="Canvas-1254"><a href="#Canvas-1254"><span class="linenos">1254</span></a>
</span><span id="Canvas-1255"><a href="#Canvas-1255"><span class="linenos">1255</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_show_browser</span><span class="p">(</span><span class="n">file_path</span><span class="o">=</span><span class="n">file_path</span><span class="p">,</span> <span class="n">show_browser</span><span class="o">=</span><span class="n">show</span><span class="p">,</span> <span class="n">multi_page_svg</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</span><span id="Canvas-1256"><a href="#Canvas-1256"><span class="linenos">1256</span></a>        <span class="k">return</span> <span class="bp">self</span>
</span><span id="Canvas-1257"><a href="#Canvas-1257"><span class="linenos">1257</span></a>
</span><span id="Canvas-1258"><a href="#Canvas-1258"><span class="linenos">1258</span></a>    <span class="k">def</span> <span class="nf">new_page</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Self</span><span class="p">:</span>
</span><span id="Canvas-1259"><a href="#Canvas-1259"><span class="linenos">1259</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Canvas-1260"><a href="#Canvas-1260"><span class="linenos">1260</span></a><span class="sd">        Create a new page and add it to the canvas.pages.</span>
</span><span id="Canvas-1261"><a href="#Canvas-1261"><span class="linenos">1261</span></a>
</span><span id="Canvas-1262"><a href="#Canvas-1262"><span class="linenos">1262</span></a><span class="sd">        Args:</span>
</span><span id="Canvas-1263"><a href="#Canvas-1263"><span class="linenos">1263</span></a><span class="sd">            kwargs (dict): Additional keyword arguments.</span>
</span><span id="Canvas-1264"><a href="#Canvas-1264"><span class="linenos">1264</span></a>
</span><span id="Canvas-1265"><a href="#Canvas-1265"><span class="linenos">1265</span></a><span class="sd">        Returns:</span>
</span><span id="Canvas-1266"><a href="#Canvas-1266"><span class="linenos">1266</span></a><span class="sd">            Self: The canvas object.</span>
</span><span id="Canvas-1267"><a href="#Canvas-1267"><span class="linenos">1267</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Canvas-1268"><a href="#Canvas-1268"><span class="linenos">1268</span></a>        <span class="n">page</span> <span class="o">=</span> <span class="n">Page</span><span class="p">()</span>
</span><span id="Canvas-1269"><a href="#Canvas-1269"><span class="linenos">1269</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">pages</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">page</span><span class="p">)</span>
</span><span id="Canvas-1270"><a href="#Canvas-1270"><span class="linenos">1270</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">active_page</span> <span class="o">=</span> <span class="n">page</span>
</span><span id="Canvas-1271"><a href="#Canvas-1271"><span class="linenos">1271</span></a>        <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
</span><span id="Canvas-1272"><a href="#Canvas-1272"><span class="linenos">1272</span></a>            <span class="nb">setattr</span><span class="p">(</span><span class="n">page</span><span class="p">,</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span><span class="p">)</span>
</span><span id="Canvas-1273"><a href="#Canvas-1273"><span class="linenos">1273</span></a>        <span class="k">return</span> <span class="bp">self</span>
</span></pre></div>


            <div class="docstring"><p>Canvas class for drawing shapes and text on a page. All drawing
operations are handled by the Canvas class. Canvas class can draw all
graphics objects and text objects. It also provides methods for
drawing basic shapes like lines, circles, and polygons.</p>
</div>


                            <div id="Canvas.__init__" class="classattr">
                                        <input id="Canvas.__init__-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="name">Canvas</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="n">back_color</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n"><a href="../colors/colors.html#Color">simetri.colors.colors.Color</a></span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>,</span><span class="param">	<span class="n">border</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>,</span><span class="param">	<span class="n">size</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Tuple</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span> <span class="nb">float</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span>,</span><span class="param">	<span class="o">**</span><span class="n">kwargs</span></span>)</span>

                <label class="view-source-button" for="Canvas.__init__-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Canvas.__init__"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Canvas.__init__-65"><a href="#Canvas.__init__-65"><span class="linenos"> 65</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
</span><span id="Canvas.__init__-66"><a href="#Canvas.__init__-66"><span class="linenos"> 66</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="Canvas.__init__-67"><a href="#Canvas.__init__-67"><span class="linenos"> 67</span></a>        <span class="n">back_color</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="s1">&#39;Color&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="Canvas.__init__-68"><a href="#Canvas.__init__-68"><span class="linenos"> 68</span></a>        <span class="n">border</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="Canvas.__init__-69"><a href="#Canvas.__init__-69"><span class="linenos"> 69</span></a>        <span class="n">size</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Vec2</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="Canvas.__init__-70"><a href="#Canvas.__init__-70"><span class="linenos"> 70</span></a>        <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
</span><span id="Canvas.__init__-71"><a href="#Canvas.__init__-71"><span class="linenos"> 71</span></a>    <span class="p">):</span>
</span><span id="Canvas.__init__-72"><a href="#Canvas.__init__-72"><span class="linenos"> 72</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Canvas.__init__-73"><a href="#Canvas.__init__-73"><span class="linenos"> 73</span></a><span class="sd">        Initialize the Canvas.</span>
</span><span id="Canvas.__init__-74"><a href="#Canvas.__init__-74"><span class="linenos"> 74</span></a>
</span><span id="Canvas.__init__-75"><a href="#Canvas.__init__-75"><span class="linenos"> 75</span></a><span class="sd">        Args:</span>
</span><span id="Canvas.__init__-76"><a href="#Canvas.__init__-76"><span class="linenos"> 76</span></a><span class="sd">            back_color (Optional[Color]): The background color of the canvas.</span>
</span><span id="Canvas.__init__-77"><a href="#Canvas.__init__-77"><span class="linenos"> 77</span></a><span class="sd">            border (Optional[float]): The border width of the canvas.</span>
</span><span id="Canvas.__init__-78"><a href="#Canvas.__init__-78"><span class="linenos"> 78</span></a><span class="sd">            size (Vec2, optional): The size of the canvas with canvas.origin at (0, 0).</span>
</span><span id="Canvas.__init__-79"><a href="#Canvas.__init__-79"><span class="linenos"> 79</span></a><span class="sd">            kwargs (dict): Additional keyword arguments. Rarely used.</span>
</span><span id="Canvas.__init__-80"><a href="#Canvas.__init__-80"><span class="linenos"> 80</span></a>
</span><span id="Canvas.__init__-81"><a href="#Canvas.__init__-81"><span class="linenos"> 81</span></a><span class="sd">            You should not need to specify &quot;size&quot; since it is calculated.</span>
</span><span id="Canvas.__init__-82"><a href="#Canvas.__init__-82"><span class="linenos"> 82</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Canvas.__init__-83"><a href="#Canvas.__init__-83"><span class="linenos"> 83</span></a>        <span class="n">validate_args</span><span class="p">(</span><span class="n">kwargs</span><span class="p">,</span> <span class="n">canvas_args</span><span class="p">)</span>
</span><span id="Canvas.__init__-84"><a href="#Canvas.__init__-84"><span class="linenos"> 84</span></a>        <span class="n">_set_Nones</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="p">[</span><span class="s2">&quot;back_color&quot;</span><span class="p">,</span> <span class="s2">&quot;border&quot;</span><span class="p">],</span> <span class="p">[</span><span class="n">back_color</span><span class="p">,</span> <span class="n">border</span><span class="p">])</span>
</span><span id="Canvas.__init__-85"><a href="#Canvas.__init__-85"><span class="linenos"> 85</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_size</span> <span class="o">=</span> <span class="n">size</span>
</span><span id="Canvas.__init__-86"><a href="#Canvas.__init__-86"><span class="linenos"> 86</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">border</span> <span class="o">=</span> <span class="n">border</span>
</span><span id="Canvas.__init__-87"><a href="#Canvas.__init__-87"><span class="linenos"> 87</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;This value is added to the bounding box of the canvas to expand the output size.&quot;&quot;&quot;</span>
</span><span id="Canvas.__init__-88"><a href="#Canvas.__init__-88"><span class="linenos"> 88</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">type</span> <span class="o">=</span> <span class="n">Types</span><span class="o">.</span><span class="n">CANVAS</span>
</span><span id="Canvas.__init__-89"><a href="#Canvas.__init__-89"><span class="linenos"> 89</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Used internally to identify the type of object. Do not change it!.</span>
</span><span id="Canvas.__init__-90"><a href="#Canvas.__init__-90"><span class="linenos"> 90</span></a><span class="sd">        Most objects in simetri has a type and subtype attribute. See ... for</span>
</span><span id="Canvas.__init__-91"><a href="#Canvas.__init__-91"><span class="linenos"> 91</span></a><span class="sd">        using this for user defined objects.</span>
</span><span id="Canvas.__init__-92"><a href="#Canvas.__init__-92"><span class="linenos"> 92</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Canvas.__init__-93"><a href="#Canvas.__init__-93"><span class="linenos"> 93</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">subtype</span> <span class="o">=</span> <span class="n">Types</span><span class="o">.</span><span class="n">CANVAS</span>
</span><span id="Canvas.__init__-94"><a href="#Canvas.__init__-94"><span class="linenos"> 94</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Used internally to identify the type of object. Do not change it!.</span>
</span><span id="Canvas.__init__-95"><a href="#Canvas.__init__-95"><span class="linenos"> 95</span></a><span class="sd">        Most objects in simetri has a type and subtype attribute. See ... for</span>
</span><span id="Canvas.__init__-96"><a href="#Canvas.__init__-96"><span class="linenos"> 96</span></a><span class="sd">        using this for user defined objects.</span>
</span><span id="Canvas.__init__-97"><a href="#Canvas.__init__-97"><span class="linenos"> 97</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Canvas.__init__-98"><a href="#Canvas.__init__-98"><span class="linenos"> 98</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_code</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="Canvas.__init__-99"><a href="#Canvas.__init__-99"><span class="linenos"> 99</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_font_list</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="Canvas.__init__-100"><a href="#Canvas.__init__-100"><span class="linenos">100</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">preamble</span> <span class="o">=</span> <span class="n">defaults</span><span class="p">[</span><span class="s2">&quot;preamble&quot;</span><span class="p">]</span>
</span><span id="Canvas.__init__-101"><a href="#Canvas.__init__-101"><span class="linenos">101</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Used for generating TikZ code.&quot;&quot;&quot;</span>
</span><span id="Canvas.__init__-102"><a href="#Canvas.__init__-102"><span class="linenos">102</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">back_color</span> <span class="o">=</span> <span class="n">back_color</span>
</span><span id="Canvas.__init__-103"><a href="#Canvas.__init__-103"><span class="linenos">103</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Background color of the canvas.&quot;&quot;&quot;</span>
</span><span id="Canvas.__init__-104"><a href="#Canvas.__init__-104"><span class="linenos">104</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">pages</span> <span class="o">=</span> <span class="p">[</span><span class="n">Page</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">size</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">back_color</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">border</span><span class="p">)]</span>
</span><span id="Canvas.__init__-105"><a href="#Canvas.__init__-105"><span class="linenos">105</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Each page of the canvas is a Page object.</span>
</span><span id="Canvas.__init__-106"><a href="#Canvas.__init__-106"><span class="linenos">106</span></a><span class="sd">        The canvas can have multiple pages that result in multi-page PDF output,</span>
</span><span id="Canvas.__init__-107"><a href="#Canvas.__init__-107"><span class="linenos">107</span></a><span class="sd">        or multiple images with image_name_1.svg, image_name_2.svg, etc.&quot;&quot;&quot;</span>
</span><span id="Canvas.__init__-108"><a href="#Canvas.__init__-108"><span class="linenos">108</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">active_page</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pages</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="Canvas.__init__-109"><a href="#Canvas.__init__-109"><span class="linenos">109</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;canvas.draw() draws on the active page. If there are multiple pages,</span>
</span><span id="Canvas.__init__-110"><a href="#Canvas.__init__-110"><span class="linenos">110</span></a><span class="sd">        the active page is the last page created.&quot;&quot;&quot;</span>
</span><span id="Canvas.__init__-111"><a href="#Canvas.__init__-111"><span class="linenos">111</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_all_vertices</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="Canvas.__init__-112"><a href="#Canvas.__init__-112"><span class="linenos">112</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">blend_mode</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="Canvas.__init__-113"><a href="#Canvas.__init__-113"><span class="linenos">113</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">blend_group</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="Canvas.__init__-114"><a href="#Canvas.__init__-114"><span class="linenos">114</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">transparency_group</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="Canvas.__init__-115"><a href="#Canvas.__init__-115"><span class="linenos">115</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">alpha</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="Canvas.__init__-116"><a href="#Canvas.__init__-116"><span class="linenos">116</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">line_alpha</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="Canvas.__init__-117"><a href="#Canvas.__init__-117"><span class="linenos">117</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">fill_alpha</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="Canvas.__init__-118"><a href="#Canvas.__init__-118"><span class="linenos">118</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">text_alpha</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="Canvas.__init__-119"><a href="#Canvas.__init__-119"><span class="linenos">119</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">clip</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># if True then clip the canvas to the mask</span>
</span><span id="Canvas.__init__-120"><a href="#Canvas.__init__-120"><span class="linenos">120</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">mask</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># Mask object</span>
</span><span id="Canvas.__init__-121"><a href="#Canvas.__init__-121"><span class="linenos">121</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">even_odd_rule</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># True or False</span>
</span><span id="Canvas.__init__-122"><a href="#Canvas.__init__-122"><span class="linenos">122</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">draw_grid</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="Canvas.__init__-123"><a href="#Canvas.__init__-123"><span class="linenos">123</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_origin</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span>
</span><span id="Canvas.__init__-124"><a href="#Canvas.__init__-124"><span class="linenos">124</span></a>        <span class="n">common_properties</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</span><span id="Canvas.__init__-125"><a href="#Canvas.__init__-125"><span class="linenos">125</span></a>
</span><span id="Canvas.__init__-126"><a href="#Canvas.__init__-126"><span class="linenos">126</span></a>        <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
</span><span id="Canvas.__init__-127"><a href="#Canvas.__init__-127"><span class="linenos">127</span></a>            <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span><span class="p">)</span>
</span><span id="Canvas.__init__-128"><a href="#Canvas.__init__-128"><span class="linenos">128</span></a>
</span><span id="Canvas.__init__-129"><a href="#Canvas.__init__-129"><span class="linenos">129</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_xform_matrix</span> <span class="o">=</span> <span class="n">identity_matrix</span><span class="p">()</span>
</span><span id="Canvas.__init__-130"><a href="#Canvas.__init__-130"><span class="linenos">130</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_sketch_xform_matrix</span> <span class="o">=</span> <span class="n">identity_matrix</span><span class="p">()</span>
</span><span id="Canvas.__init__-131"><a href="#Canvas.__init__-131"><span class="linenos">131</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">tex</span><span class="p">:</span> <span class="n">Tex</span> <span class="o">=</span> <span class="n">Tex</span><span class="p">()</span>
</span><span id="Canvas.__init__-132"><a href="#Canvas.__init__-132"><span class="linenos">132</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">render</span> <span class="o">=</span> <span class="n">defaults</span><span class="p">[</span><span class="s2">&quot;render&quot;</span><span class="p">]</span>
</span><span id="Canvas.__init__-133"><a href="#Canvas.__init__-133"><span class="linenos">133</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_size</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Canvas.__init__-134"><a href="#Canvas.__init__-134"><span class="linenos">134</span></a>            <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">origin</span><span class="p">[:</span><span class="mi">2</span><span class="p">]</span>
</span><span id="Canvas.__init__-135"><a href="#Canvas.__init__-135"><span class="linenos">135</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_limits</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">x</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">size</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">y</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">size</span><span class="p">[</span><span class="mi">1</span><span class="p">]]</span>
</span><span id="Canvas.__init__-136"><a href="#Canvas.__init__-136"><span class="linenos">136</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="Canvas.__init__-137"><a href="#Canvas.__init__-137"><span class="linenos">137</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_limits</span> <span class="o">=</span> <span class="kc">None</span>
</span></pre></div>


            <div class="docstring"><p>Initialize the Canvas.</p>

<p>Args:
    back_color (Optional[Color]): The background color of the canvas.
    border (Optional[float]): The border width of the canvas.
    size (Vec2, optional): The size of the canvas with canvas.origin at (0, 0).
    kwargs (dict): Additional keyword arguments. Rarely used.</p>

<pre><code>You should not need to specify "size" since it is calculated.
</code></pre>
</div>


                            </div>
                            <div id="Canvas.border" class="classattr">
                                <div class="attr variable">
            <span class="name">border</span>

        
    </div>
    <a class="headerlink" href="#Canvas.border"></a>
    
            <div class="docstring"><p>This value is added to the bounding box of the canvas to expand the output size.</p>
</div>


                            </div>
                            <div id="Canvas.type" class="classattr">
                                <div class="attr variable">
            <span class="name">type</span>

        
    </div>
    <a class="headerlink" href="#Canvas.type"></a>
    
            <div class="docstring"><p>Used internally to identify the type of object. Do not change it!.
Most objects in simetri has a type and subtype attribute. See ... for
using this for user defined objects.</p>
</div>


                            </div>
                            <div id="Canvas.subtype" class="classattr">
                                <div class="attr variable">
            <span class="name">subtype</span>

        
    </div>
    <a class="headerlink" href="#Canvas.subtype"></a>
    
            <div class="docstring"><p>Used internally to identify the type of object. Do not change it!.
Most objects in simetri has a type and subtype attribute. See ... for
using this for user defined objects.</p>
</div>


                            </div>
                            <div id="Canvas.preamble" class="classattr">
                                <div class="attr variable">
            <span class="name">preamble</span>

        
    </div>
    <a class="headerlink" href="#Canvas.preamble"></a>
    
            <div class="docstring"><p>Used for generating TikZ code.</p>
</div>


                            </div>
                            <div id="Canvas.back_color" class="classattr">
                                <div class="attr variable">
            <span class="name">back_color</span>

        
    </div>
    <a class="headerlink" href="#Canvas.back_color"></a>
    
            <div class="docstring"><p>Background color of the canvas.</p>
</div>


                            </div>
                            <div id="Canvas.pages" class="classattr">
                                <div class="attr variable">
            <span class="name">pages</span>

        
    </div>
    <a class="headerlink" href="#Canvas.pages"></a>
    
            <div class="docstring"><p>Each page of the canvas is a Page object.
The canvas can have multiple pages that result in multi-page PDF output,
or multiple images with image_name_1.svg, image_name_2.svg, etc.</p>
</div>


                            </div>
                            <div id="Canvas.active_page" class="classattr">
                                <div class="attr variable">
            <span class="name">active_page</span>

        
    </div>
    <a class="headerlink" href="#Canvas.active_page"></a>
    
            <div class="docstring"><p>canvas.draw() draws on the active page. If there are multiple pages,
the active page is the last page created.</p>
</div>


                            </div>
                            <div id="Canvas.blend_mode" class="classattr">
                                <div class="attr variable">
            <span class="name">blend_mode</span>

        
    </div>
    <a class="headerlink" href="#Canvas.blend_mode"></a>
    
    

                            </div>
                            <div id="Canvas.blend_group" class="classattr">
                                <div class="attr variable">
            <span class="name">blend_group</span>

        
    </div>
    <a class="headerlink" href="#Canvas.blend_group"></a>
    
    

                            </div>
                            <div id="Canvas.transparency_group" class="classattr">
                                <div class="attr variable">
            <span class="name">transparency_group</span>

        
    </div>
    <a class="headerlink" href="#Canvas.transparency_group"></a>
    
    

                            </div>
                            <div id="Canvas.alpha" class="classattr">
                                <div class="attr variable">
            <span class="name">alpha</span>

        
    </div>
    <a class="headerlink" href="#Canvas.alpha"></a>
    
    

                            </div>
                            <div id="Canvas.line_alpha" class="classattr">
                                <div class="attr variable">
            <span class="name">line_alpha</span>

        
    </div>
    <a class="headerlink" href="#Canvas.line_alpha"></a>
    
    

                            </div>
                            <div id="Canvas.fill_alpha" class="classattr">
                                <div class="attr variable">
            <span class="name">fill_alpha</span>

        
    </div>
    <a class="headerlink" href="#Canvas.fill_alpha"></a>
    
    

                            </div>
                            <div id="Canvas.text_alpha" class="classattr">
                                <div class="attr variable">
            <span class="name">text_alpha</span>

        
    </div>
    <a class="headerlink" href="#Canvas.text_alpha"></a>
    
    

                            </div>
                            <div id="Canvas.clip" class="classattr">
                                <div class="attr variable">
            <span class="name">clip</span>

        
    </div>
    <a class="headerlink" href="#Canvas.clip"></a>
    
    

                            </div>
                            <div id="Canvas.mask" class="classattr">
                                <div class="attr variable">
            <span class="name">mask</span>

        
    </div>
    <a class="headerlink" href="#Canvas.mask"></a>
    
    

                            </div>
                            <div id="Canvas.even_odd_rule" class="classattr">
                                <div class="attr variable">
            <span class="name">even_odd_rule</span>

        
    </div>
    <a class="headerlink" href="#Canvas.even_odd_rule"></a>
    
    

                            </div>
                            <div id="Canvas.draw_grid" class="classattr">
                                <div class="attr variable">
            <span class="name">draw_grid</span>

        
    </div>
    <a class="headerlink" href="#Canvas.draw_grid"></a>
    
    

                            </div>
                            <div id="Canvas.tex" class="classattr">
                                <div class="attr variable">
            <span class="name">tex</span><span class="annotation">: <a href="../tikz/tikz.html#Tex">simetri.tikz.tikz.Tex</a></span>

        
    </div>
    <a class="headerlink" href="#Canvas.tex"></a>
    
    

                            </div>
                            <div id="Canvas.render" class="classattr">
                                <div class="attr variable">
            <span class="name">render</span>

        
    </div>
    <a class="headerlink" href="#Canvas.render"></a>
    
    

                            </div>
                            <div id="Canvas.display" class="classattr">
                                        <input id="Canvas.display-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">display</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="n">typing_extensions</span><span class="o">.</span><span class="n">Self</span>:</span></span>

                <label class="view-source-button" for="Canvas.display-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Canvas.display"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Canvas.display-169"><a href="#Canvas.display-169"><span class="linenos">169</span></a>    <span class="k">def</span> <span class="nf">display</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Self</span><span class="p">:</span>
</span><span id="Canvas.display-170"><a href="#Canvas.display-170"><span class="linenos">170</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Show the canvas in a notebook cell.&quot;&quot;&quot;</span>
</span><span id="Canvas.display-171"><a href="#Canvas.display-171"><span class="linenos">171</span></a>        <span class="n">display</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Show the canvas in a notebook cell.</p>
</div>


                            </div>
                            <div id="Canvas.size" class="classattr">
                                        <input id="Canvas.size-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">size</span><span class="annotation">: Tuple[float, float]</span>

                <label class="view-source-button" for="Canvas.size-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Canvas.size"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Canvas.size-173"><a href="#Canvas.size-173"><span class="linenos">173</span></a>    <span class="nd">@property</span>
</span><span id="Canvas.size-174"><a href="#Canvas.size-174"><span class="linenos">174</span></a>    <span class="k">def</span> <span class="nf">size</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Vec2</span><span class="p">:</span>
</span><span id="Canvas.size-175"><a href="#Canvas.size-175"><span class="linenos">175</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Canvas.size-176"><a href="#Canvas.size-176"><span class="linenos">176</span></a><span class="sd">        The size of the canvas.</span>
</span><span id="Canvas.size-177"><a href="#Canvas.size-177"><span class="linenos">177</span></a>
</span><span id="Canvas.size-178"><a href="#Canvas.size-178"><span class="linenos">178</span></a><span class="sd">        Returns:</span>
</span><span id="Canvas.size-179"><a href="#Canvas.size-179"><span class="linenos">179</span></a><span class="sd">            Vec2: The size of the canvas.</span>
</span><span id="Canvas.size-180"><a href="#Canvas.size-180"><span class="linenos">180</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Canvas.size-181"><a href="#Canvas.size-181"><span class="linenos">181</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_size</span>
</span></pre></div>


            <div class="docstring"><p>The size of the canvas.</p>

<p>Returns:
    Vec2: The size of the canvas.</p>
</div>


                            </div>
                            <div id="Canvas.origin" class="classattr">
                                        <input id="Canvas.origin-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">origin</span><span class="annotation">: Tuple[float, float]</span>

                <label class="view-source-button" for="Canvas.origin-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Canvas.origin"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Canvas.origin-199"><a href="#Canvas.origin-199"><span class="linenos">199</span></a>    <span class="nd">@property</span>
</span><span id="Canvas.origin-200"><a href="#Canvas.origin-200"><span class="linenos">200</span></a>    <span class="k">def</span> <span class="nf">origin</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Vec2</span><span class="p">:</span>
</span><span id="Canvas.origin-201"><a href="#Canvas.origin-201"><span class="linenos">201</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Canvas.origin-202"><a href="#Canvas.origin-202"><span class="linenos">202</span></a><span class="sd">        The origin of the canvas.</span>
</span><span id="Canvas.origin-203"><a href="#Canvas.origin-203"><span class="linenos">203</span></a>
</span><span id="Canvas.origin-204"><a href="#Canvas.origin-204"><span class="linenos">204</span></a><span class="sd">        Returns:</span>
</span><span id="Canvas.origin-205"><a href="#Canvas.origin-205"><span class="linenos">205</span></a><span class="sd">            Vec2: The origin of the canvas.</span>
</span><span id="Canvas.origin-206"><a href="#Canvas.origin-206"><span class="linenos">206</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Canvas.origin-207"><a href="#Canvas.origin-207"><span class="linenos">207</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_origin</span><span class="p">[:</span><span class="mi">2</span><span class="p">]</span>
</span></pre></div>


            <div class="docstring"><p>The origin of the canvas.</p>

<p>Returns:
    Vec2: The origin of the canvas.</p>
</div>


                            </div>
                            <div id="Canvas.limits" class="classattr">
                                        <input id="Canvas.limits-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">limits</span><span class="annotation">: Tuple[float, float]</span>

                <label class="view-source-button" for="Canvas.limits-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Canvas.limits"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Canvas.limits-222"><a href="#Canvas.limits-222"><span class="linenos">222</span></a>    <span class="nd">@property</span>
</span><span id="Canvas.limits-223"><a href="#Canvas.limits-223"><span class="linenos">223</span></a>    <span class="k">def</span> <span class="nf">limits</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Vec2</span><span class="p">:</span>
</span><span id="Canvas.limits-224"><a href="#Canvas.limits-224"><span class="linenos">224</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Canvas.limits-225"><a href="#Canvas.limits-225"><span class="linenos">225</span></a><span class="sd">        The limits of the canvas.</span>
</span><span id="Canvas.limits-226"><a href="#Canvas.limits-226"><span class="linenos">226</span></a><span class="sd">        [min_x, min_y, max_x, max_y]</span>
</span><span id="Canvas.limits-227"><a href="#Canvas.limits-227"><span class="linenos">227</span></a>
</span><span id="Canvas.limits-228"><a href="#Canvas.limits-228"><span class="linenos">228</span></a><span class="sd">        Returns:</span>
</span><span id="Canvas.limits-229"><a href="#Canvas.limits-229"><span class="linenos">229</span></a><span class="sd">            Vec2: The limits of the canvas.</span>
</span><span id="Canvas.limits-230"><a href="#Canvas.limits-230"><span class="linenos">230</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Canvas.limits-231"><a href="#Canvas.limits-231"><span class="linenos">231</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">size</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Canvas.limits-232"><a href="#Canvas.limits-232"><span class="linenos">232</span></a>            <span class="n">res</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="Canvas.limits-233"><a href="#Canvas.limits-233"><span class="linenos">233</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="Canvas.limits-234"><a href="#Canvas.limits-234"><span class="linenos">234</span></a>            <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">origin</span><span class="p">[:</span><span class="mi">2</span><span class="p">]</span>
</span><span id="Canvas.limits-235"><a href="#Canvas.limits-235"><span class="linenos">235</span></a>            <span class="n">w</span><span class="p">,</span> <span class="n">h</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">size</span>
</span><span id="Canvas.limits-236"><a href="#Canvas.limits-236"><span class="linenos">236</span></a>            <span class="n">res</span> <span class="o">=</span> <span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">x</span> <span class="o">+</span> <span class="n">w</span><span class="p">,</span> <span class="n">y</span> <span class="o">+</span> <span class="n">h</span><span class="p">)</span>
</span><span id="Canvas.limits-237"><a href="#Canvas.limits-237"><span class="linenos">237</span></a>
</span><span id="Canvas.limits-238"><a href="#Canvas.limits-238"><span class="linenos">238</span></a>        <span class="k">return</span> <span class="n">res</span>
</span></pre></div>


            <div class="docstring"><p>The limits of the canvas.
[min_x, min_y, max_x, max_y]</p>

<p>Returns:
    Vec2: The limits of the canvas.</p>
</div>


                            </div>
                            <div id="Canvas.image" class="classattr">
                                        <input id="Canvas.image-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">image</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="o">**</span><span class="n">kwargs</span></span><span class="return-annotation">) -> <span class="n"><a href="../image/image.html#Image">simetri.image.image.Image</a></span>:</span></span>

                <label class="view-source-button" for="Canvas.image-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Canvas.image"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Canvas.image-256"><a href="#Canvas.image-256"><span class="linenos">256</span></a>    <span class="k">def</span> <span class="nf">image</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Image</span><span class="p">:</span>
</span><span id="Canvas.image-257"><a href="#Canvas.image-257"><span class="linenos">257</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Canvas.image-258"><a href="#Canvas.image-258"><span class="linenos">258</span></a><span class="sd">        Create an image from the canvas.</span>
</span><span id="Canvas.image-259"><a href="#Canvas.image-259"><span class="linenos">259</span></a>
</span><span id="Canvas.image-260"><a href="#Canvas.image-260"><span class="linenos">260</span></a><span class="sd">        Returns:</span>
</span><span id="Canvas.image-261"><a href="#Canvas.image-261"><span class="linenos">261</span></a><span class="sd">            Image: The Image object.</span>
</span><span id="Canvas.image-262"><a href="#Canvas.image-262"><span class="linenos">262</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Canvas.image-263"><a href="#Canvas.image-263"><span class="linenos">263</span></a>        <span class="n">tmpdirname</span> <span class="o">=</span> <span class="n">tempfile</span><span class="o">.</span><span class="n">TemporaryDirectory</span><span class="p">()</span><span class="o">.</span><span class="n">name</span>
</span><span id="Canvas.image-264"><a href="#Canvas.image-264"><span class="linenos">264</span></a>        <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">tmpdirname</span><span class="p">,</span> <span class="n">exist_ok</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="Canvas.image-265"><a href="#Canvas.image-265"><span class="linenos">265</span></a>        <span class="n">file_name</span> <span class="o">=</span> <span class="nb">next</span><span class="p">(</span><span class="n">tempfile</span><span class="o">.</span><span class="n">_get_candidate_names</span><span class="p">())</span>
</span><span id="Canvas.image-266"><a href="#Canvas.image-266"><span class="linenos">266</span></a>        <span class="n">file_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">tmpdirname</span><span class="p">,</span> <span class="n">file_name</span> <span class="o">+</span> <span class="s2">&quot;.ps&quot;</span><span class="p">)</span>
</span><span id="Canvas.image-267"><a href="#Canvas.image-267"><span class="linenos">267</span></a>
</span><span id="Canvas.image-268"><a href="#Canvas.image-268"><span class="linenos">268</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">file_path</span><span class="p">,</span> <span class="n">show</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">print_output</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">remove_aux</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</span><span id="Canvas.image-269"><a href="#Canvas.image-269"><span class="linenos">269</span></a>        <span class="n">wait_for_file_availability</span><span class="p">(</span><span class="n">file_path</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
</span><span id="Canvas.image-270"><a href="#Canvas.image-270"><span class="linenos">270</span></a>        <span class="n">temp_img</span> <span class="o">=</span> <span class="n">create_image_from_data</span><span class="p">(</span><span class="n">file_path</span><span class="p">)</span>
</span><span id="Canvas.image-271"><a href="#Canvas.image-271"><span class="linenos">271</span></a>
</span><span id="Canvas.image-272"><a href="#Canvas.image-272"><span class="linenos">272</span></a>        <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
</span><span id="Canvas.image-273"><a href="#Canvas.image-273"><span class="linenos">273</span></a>        <span class="n">shutil</span><span class="o">.</span><span class="n">rmtree</span><span class="p">(</span><span class="n">tmpdirname</span><span class="p">,</span> <span class="n">ignore_errors</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="Canvas.image-274"><a href="#Canvas.image-274"><span class="linenos">274</span></a>        <span class="k">return</span> <span class="n">temp_img</span>
</span></pre></div>


            <div class="docstring"><p>Create an image from the canvas.</p>

<p>Returns:
    Image: The Image object.</p>
</div>


                            </div>
                            <div id="Canvas.insert_code" class="classattr">
                                        <input id="Canvas.insert_code-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">insert_code</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">code</span>,</span><span class="param">	<span class="n">loc</span><span class="p">:</span> <span class="n"><a href="../graphics/all_enums.html#TexLoc">simetri.graphics.all_enums.TexLoc</a></span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">TexLoc</span><span class="o">.</span><span class="n">PICTURE</span><span class="p">:</span> <span class="s1">&#39;PICTURE&#39;</span><span class="o">&gt;</span></span><span class="return-annotation">) -> <span class="n">typing_extensions</span><span class="o">.</span><span class="n">Self</span>:</span></span>

                <label class="view-source-button" for="Canvas.insert_code-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Canvas.insert_code"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Canvas.insert_code-279"><a href="#Canvas.insert_code-279"><span class="linenos">279</span></a>    <span class="k">def</span> <span class="nf">insert_code</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">code</span><span class="p">,</span> <span class="n">loc</span><span class="p">:</span> <span class="n">TexLoc</span> <span class="o">=</span> <span class="n">TexLoc</span><span class="o">.</span><span class="n">PICTURE</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Self</span><span class="p">:</span>
</span><span id="Canvas.insert_code-280"><a href="#Canvas.insert_code-280"><span class="linenos">280</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Canvas.insert_code-281"><a href="#Canvas.insert_code-281"><span class="linenos">281</span></a><span class="sd">        Insert code into the canvas.</span>
</span><span id="Canvas.insert_code-282"><a href="#Canvas.insert_code-282"><span class="linenos">282</span></a>
</span><span id="Canvas.insert_code-283"><a href="#Canvas.insert_code-283"><span class="linenos">283</span></a><span class="sd">        Args:</span>
</span><span id="Canvas.insert_code-284"><a href="#Canvas.insert_code-284"><span class="linenos">284</span></a><span class="sd">            code (str): The code to insert.</span>
</span><span id="Canvas.insert_code-285"><a href="#Canvas.insert_code-285"><span class="linenos">285</span></a><span class="sd">            loc (TexLoc): The location to insert the code.</span>
</span><span id="Canvas.insert_code-286"><a href="#Canvas.insert_code-286"><span class="linenos">286</span></a>
</span><span id="Canvas.insert_code-287"><a href="#Canvas.insert_code-287"><span class="linenos">287</span></a><span class="sd">        Returns:</span>
</span><span id="Canvas.insert_code-288"><a href="#Canvas.insert_code-288"><span class="linenos">288</span></a><span class="sd">            Self: The canvas object.</span>
</span><span id="Canvas.insert_code-289"><a href="#Canvas.insert_code-289"><span class="linenos">289</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Canvas.insert_code-290"><a href="#Canvas.insert_code-290"><span class="linenos">290</span></a>        <span class="n">draw</span><span class="o">.</span><span class="n">insert_code</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">code</span><span class="p">,</span> <span class="n">loc</span><span class="p">)</span>
</span><span id="Canvas.insert_code-291"><a href="#Canvas.insert_code-291"><span class="linenos">291</span></a>        <span class="k">return</span> <span class="bp">self</span>
</span></pre></div>


            <div class="docstring"><p>Insert code into the canvas.</p>

<p>Args:
    code (str): The code to insert.
    loc (TexLoc): The location to insert the code.</p>

<p>Returns:
    Self: The canvas object.</p>
</div>


                            </div>
                            <div id="Canvas.arc" class="classattr">
                                        <input id="Canvas.arc-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">arc</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">center</span><span class="p">:</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span>,</span><span class="param">	<span class="n">radius_x</span><span class="p">:</span> <span class="nb">float</span>,</span><span class="param">	<span class="n">radius_y</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="kc">None</span>,</span><span class="param">	<span class="n">start_angle</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mi">0</span>,</span><span class="param">	<span class="n">span_angle</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">1.5707963267948966</span>,</span><span class="param">	<span class="n">rot_angle</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mi">0</span>,</span><span class="param">	<span class="o">**</span><span class="n">kwargs</span></span><span class="return-annotation">) -> <span class="n">typing_extensions</span><span class="o">.</span><span class="n">Self</span>:</span></span>

                <label class="view-source-button" for="Canvas.arc-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Canvas.arc"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Canvas.arc-293"><a href="#Canvas.arc-293"><span class="linenos">293</span></a>    <span class="k">def</span> <span class="nf">arc</span><span class="p">(</span>
</span><span id="Canvas.arc-294"><a href="#Canvas.arc-294"><span class="linenos">294</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="Canvas.arc-295"><a href="#Canvas.arc-295"><span class="linenos">295</span></a>        <span class="n">center</span><span class="p">:</span> <span class="n">Point</span><span class="p">,</span>
</span><span id="Canvas.arc-296"><a href="#Canvas.arc-296"><span class="linenos">296</span></a>        <span class="n">radius_x</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="Canvas.arc-297"><a href="#Canvas.arc-297"><span class="linenos">297</span></a>        <span class="n">radius_y</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="Canvas.arc-298"><a href="#Canvas.arc-298"><span class="linenos">298</span></a>        <span class="n">start_angle</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
</span><span id="Canvas.arc-299"><a href="#Canvas.arc-299"><span class="linenos">299</span></a>        <span class="n">span_angle</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">pi</span> <span class="o">/</span> <span class="mi">2</span><span class="p">,</span>
</span><span id="Canvas.arc-300"><a href="#Canvas.arc-300"><span class="linenos">300</span></a>        <span class="n">rot_angle</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
</span><span id="Canvas.arc-301"><a href="#Canvas.arc-301"><span class="linenos">301</span></a>        <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
</span><span id="Canvas.arc-302"><a href="#Canvas.arc-302"><span class="linenos">302</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Self</span><span class="p">:</span>
</span><span id="Canvas.arc-303"><a href="#Canvas.arc-303"><span class="linenos">303</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Canvas.arc-304"><a href="#Canvas.arc-304"><span class="linenos">304</span></a><span class="sd">        Draw an arc with the given center, radius, start angle and end angle.</span>
</span><span id="Canvas.arc-305"><a href="#Canvas.arc-305"><span class="linenos">305</span></a>
</span><span id="Canvas.arc-306"><a href="#Canvas.arc-306"><span class="linenos">306</span></a><span class="sd">        Args:</span>
</span><span id="Canvas.arc-307"><a href="#Canvas.arc-307"><span class="linenos">307</span></a><span class="sd">            center (Point): The center of the arc.</span>
</span><span id="Canvas.arc-308"><a href="#Canvas.arc-308"><span class="linenos">308</span></a><span class="sd">            radius_x (float): The radius of the arc.</span>
</span><span id="Canvas.arc-309"><a href="#Canvas.arc-309"><span class="linenos">309</span></a><span class="sd">            radius_y (float, optional): The second radius of the arc, defaults to None.</span>
</span><span id="Canvas.arc-310"><a href="#Canvas.arc-310"><span class="linenos">310</span></a><span class="sd">            start_angle (float): The start angle of the arc.</span>
</span><span id="Canvas.arc-311"><a href="#Canvas.arc-311"><span class="linenos">311</span></a><span class="sd">            end_angle (float): The end angle of the arc.</span>
</span><span id="Canvas.arc-312"><a href="#Canvas.arc-312"><span class="linenos">312</span></a><span class="sd">            rot_angle (float, optional): The rotation angle of the arc, defaults to 0.</span>
</span><span id="Canvas.arc-313"><a href="#Canvas.arc-313"><span class="linenos">313</span></a><span class="sd">            kwargs (dict): Additional keyword arguments.</span>
</span><span id="Canvas.arc-314"><a href="#Canvas.arc-314"><span class="linenos">314</span></a>
</span><span id="Canvas.arc-315"><a href="#Canvas.arc-315"><span class="linenos">315</span></a><span class="sd">        Returns:</span>
</span><span id="Canvas.arc-316"><a href="#Canvas.arc-316"><span class="linenos">316</span></a><span class="sd">            Self: The canvas object.</span>
</span><span id="Canvas.arc-317"><a href="#Canvas.arc-317"><span class="linenos">317</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Canvas.arc-318"><a href="#Canvas.arc-318"><span class="linenos">318</span></a>        <span class="k">if</span> <span class="n">radius_y</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Canvas.arc-319"><a href="#Canvas.arc-319"><span class="linenos">319</span></a>            <span class="n">radius_y</span> <span class="o">=</span> <span class="n">radius_x</span>
</span><span id="Canvas.arc-320"><a href="#Canvas.arc-320"><span class="linenos">320</span></a>        <span class="n">draw</span><span class="o">.</span><span class="n">arc</span><span class="p">(</span>
</span><span id="Canvas.arc-321"><a href="#Canvas.arc-321"><span class="linenos">321</span></a>            <span class="bp">self</span><span class="p">,</span>
</span><span id="Canvas.arc-322"><a href="#Canvas.arc-322"><span class="linenos">322</span></a>            <span class="n">center</span><span class="p">,</span>
</span><span id="Canvas.arc-323"><a href="#Canvas.arc-323"><span class="linenos">323</span></a>            <span class="n">radius_x</span><span class="p">,</span>
</span><span id="Canvas.arc-324"><a href="#Canvas.arc-324"><span class="linenos">324</span></a>            <span class="n">radius_y</span><span class="p">,</span>
</span><span id="Canvas.arc-325"><a href="#Canvas.arc-325"><span class="linenos">325</span></a>            <span class="n">start_angle</span><span class="p">,</span>
</span><span id="Canvas.arc-326"><a href="#Canvas.arc-326"><span class="linenos">326</span></a>            <span class="n">span_angle</span><span class="p">,</span>
</span><span id="Canvas.arc-327"><a href="#Canvas.arc-327"><span class="linenos">327</span></a>            <span class="n">rot_angle</span><span class="p">,</span>
</span><span id="Canvas.arc-328"><a href="#Canvas.arc-328"><span class="linenos">328</span></a>            <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
</span><span id="Canvas.arc-329"><a href="#Canvas.arc-329"><span class="linenos">329</span></a>        <span class="p">)</span>
</span><span id="Canvas.arc-330"><a href="#Canvas.arc-330"><span class="linenos">330</span></a>        <span class="k">return</span> <span class="bp">self</span>
</span></pre></div>


            <div class="docstring"><p>Draw an arc with the given center, radius, start angle and end angle.</p>

<p>Args:
    center (Point): The center of the arc.
    radius_x (float): The radius of the arc.
    radius_y (float, optional): The second radius of the arc, defaults to None.
    start_angle (float): The start angle of the arc.
    end_angle (float): The end angle of the arc.
    rot_angle (float, optional): The rotation angle of the arc, defaults to 0.
    kwargs (dict): Additional keyword arguments.</p>

<p>Returns:
    Self: The canvas object.</p>
</div>


                            </div>
                            <div id="Canvas.bezier" class="classattr">
                                        <input id="Canvas.bezier-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">bezier</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">control_points</span><span class="p">:</span> <span class="n">Sequence</span><span class="p">[</span><span class="n">Sequence</span><span class="p">[</span><span class="nb">float</span><span class="p">]]</span>,</span><span class="param">	<span class="o">**</span><span class="n">kwargs</span></span><span class="return-annotation">) -> <span class="n">typing_extensions</span><span class="o">.</span><span class="n">Self</span>:</span></span>

                <label class="view-source-button" for="Canvas.bezier-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Canvas.bezier"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Canvas.bezier-332"><a href="#Canvas.bezier-332"><span class="linenos">332</span></a>    <span class="k">def</span> <span class="nf">bezier</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">control_points</span><span class="p">:</span> <span class="n">Sequence</span><span class="p">[</span><span class="n">Point</span><span class="p">],</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Self</span><span class="p">:</span>
</span><span id="Canvas.bezier-333"><a href="#Canvas.bezier-333"><span class="linenos">333</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Canvas.bezier-334"><a href="#Canvas.bezier-334"><span class="linenos">334</span></a><span class="sd">        Draw a bezier curve.</span>
</span><span id="Canvas.bezier-335"><a href="#Canvas.bezier-335"><span class="linenos">335</span></a>
</span><span id="Canvas.bezier-336"><a href="#Canvas.bezier-336"><span class="linenos">336</span></a><span class="sd">        Args:</span>
</span><span id="Canvas.bezier-337"><a href="#Canvas.bezier-337"><span class="linenos">337</span></a><span class="sd">            control_points (Sequence[Point]): The control points of the bezier curve.</span>
</span><span id="Canvas.bezier-338"><a href="#Canvas.bezier-338"><span class="linenos">338</span></a><span class="sd">            kwargs (dict): Additional keyword arguments.</span>
</span><span id="Canvas.bezier-339"><a href="#Canvas.bezier-339"><span class="linenos">339</span></a>
</span><span id="Canvas.bezier-340"><a href="#Canvas.bezier-340"><span class="linenos">340</span></a><span class="sd">        Returns:</span>
</span><span id="Canvas.bezier-341"><a href="#Canvas.bezier-341"><span class="linenos">341</span></a><span class="sd">            Self: The canvas object.</span>
</span><span id="Canvas.bezier-342"><a href="#Canvas.bezier-342"><span class="linenos">342</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Canvas.bezier-343"><a href="#Canvas.bezier-343"><span class="linenos">343</span></a>        <span class="n">draw</span><span class="o">.</span><span class="n">bezier</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">control_points</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</span><span id="Canvas.bezier-344"><a href="#Canvas.bezier-344"><span class="linenos">344</span></a>        <span class="k">return</span> <span class="bp">self</span>
</span></pre></div>


            <div class="docstring"><p>Draw a bezier curve.</p>

<p>Args:
    control_points (Sequence[Point]): The control points of the bezier curve.
    kwargs (dict): Additional keyword arguments.</p>

<p>Returns:
    Self: The canvas object.</p>
</div>


                            </div>
                            <div id="Canvas.circle" class="classattr">
                                        <input id="Canvas.circle-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">circle</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">center</span><span class="p">:</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span>,</span><span class="param">	<span class="n">radius</span><span class="p">:</span> <span class="nb">float</span>,</span><span class="param">	<span class="o">**</span><span class="n">kwargs</span></span><span class="return-annotation">) -> <span class="n">typing_extensions</span><span class="o">.</span><span class="n">Self</span>:</span></span>

                <label class="view-source-button" for="Canvas.circle-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Canvas.circle"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Canvas.circle-346"><a href="#Canvas.circle-346"><span class="linenos">346</span></a>    <span class="k">def</span> <span class="nf">circle</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">center</span><span class="p">:</span> <span class="n">Point</span><span class="p">,</span> <span class="n">radius</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Self</span><span class="p">:</span>
</span><span id="Canvas.circle-347"><a href="#Canvas.circle-347"><span class="linenos">347</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Canvas.circle-348"><a href="#Canvas.circle-348"><span class="linenos">348</span></a><span class="sd">        Draw a circle with the given center and radius.</span>
</span><span id="Canvas.circle-349"><a href="#Canvas.circle-349"><span class="linenos">349</span></a>
</span><span id="Canvas.circle-350"><a href="#Canvas.circle-350"><span class="linenos">350</span></a><span class="sd">        Args:</span>
</span><span id="Canvas.circle-351"><a href="#Canvas.circle-351"><span class="linenos">351</span></a><span class="sd">            center (Point): The center of the circle.</span>
</span><span id="Canvas.circle-352"><a href="#Canvas.circle-352"><span class="linenos">352</span></a><span class="sd">            radius (float): The radius of the circle.</span>
</span><span id="Canvas.circle-353"><a href="#Canvas.circle-353"><span class="linenos">353</span></a><span class="sd">            kwargs (dict): Additional keyword arguments.</span>
</span><span id="Canvas.circle-354"><a href="#Canvas.circle-354"><span class="linenos">354</span></a>
</span><span id="Canvas.circle-355"><a href="#Canvas.circle-355"><span class="linenos">355</span></a><span class="sd">        Returns:</span>
</span><span id="Canvas.circle-356"><a href="#Canvas.circle-356"><span class="linenos">356</span></a><span class="sd">            Self: The canvas object.</span>
</span><span id="Canvas.circle-357"><a href="#Canvas.circle-357"><span class="linenos">357</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Canvas.circle-358"><a href="#Canvas.circle-358"><span class="linenos">358</span></a>        <span class="n">draw</span><span class="o">.</span><span class="n">circle</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">center</span><span class="p">,</span> <span class="n">radius</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</span><span id="Canvas.circle-359"><a href="#Canvas.circle-359"><span class="linenos">359</span></a>        <span class="k">return</span> <span class="bp">self</span>
</span></pre></div>


            <div class="docstring"><p>Draw a circle with the given center and radius.</p>

<p>Args:
    center (Point): The center of the circle.
    radius (float): The radius of the circle.
    kwargs (dict): Additional keyword arguments.</p>

<p>Returns:
    Self: The canvas object.</p>
</div>


                            </div>
                            <div id="Canvas.ellipse" class="classattr">
                                        <input id="Canvas.ellipse-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">ellipse</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">center</span><span class="p">:</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span>,</span><span class="param">	<span class="n">width</span><span class="p">:</span> <span class="nb">float</span>,</span><span class="param">	<span class="n">height</span><span class="p">:</span> <span class="nb">float</span>,</span><span class="param">	<span class="n">angle</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mi">0</span>,</span><span class="param">	<span class="o">**</span><span class="n">kwargs</span></span><span class="return-annotation">) -> <span class="n">typing_extensions</span><span class="o">.</span><span class="n">Self</span>:</span></span>

                <label class="view-source-button" for="Canvas.ellipse-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Canvas.ellipse"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Canvas.ellipse-361"><a href="#Canvas.ellipse-361"><span class="linenos">361</span></a>    <span class="k">def</span> <span class="nf">ellipse</span><span class="p">(</span>
</span><span id="Canvas.ellipse-362"><a href="#Canvas.ellipse-362"><span class="linenos">362</span></a>        <span class="bp">self</span><span class="p">,</span> <span class="n">center</span><span class="p">:</span> <span class="n">Point</span><span class="p">,</span> <span class="n">width</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">height</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">angle</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span>
</span><span id="Canvas.ellipse-363"><a href="#Canvas.ellipse-363"><span class="linenos">363</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Self</span><span class="p">:</span>
</span><span id="Canvas.ellipse-364"><a href="#Canvas.ellipse-364"><span class="linenos">364</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Canvas.ellipse-365"><a href="#Canvas.ellipse-365"><span class="linenos">365</span></a><span class="sd">        Draw an ellipse with the given center and radius.</span>
</span><span id="Canvas.ellipse-366"><a href="#Canvas.ellipse-366"><span class="linenos">366</span></a>
</span><span id="Canvas.ellipse-367"><a href="#Canvas.ellipse-367"><span class="linenos">367</span></a><span class="sd">        Args:</span>
</span><span id="Canvas.ellipse-368"><a href="#Canvas.ellipse-368"><span class="linenos">368</span></a><span class="sd">            center (Point): The center of the ellipse.</span>
</span><span id="Canvas.ellipse-369"><a href="#Canvas.ellipse-369"><span class="linenos">369</span></a><span class="sd">            width (float): The width of the ellipse.</span>
</span><span id="Canvas.ellipse-370"><a href="#Canvas.ellipse-370"><span class="linenos">370</span></a><span class="sd">            height (float): The height of the ellipse.</span>
</span><span id="Canvas.ellipse-371"><a href="#Canvas.ellipse-371"><span class="linenos">371</span></a><span class="sd">            angle (float, optional): The angle of the ellipse, defaults to 0.</span>
</span><span id="Canvas.ellipse-372"><a href="#Canvas.ellipse-372"><span class="linenos">372</span></a><span class="sd">            kwargs (dict): Additional keyword arguments.</span>
</span><span id="Canvas.ellipse-373"><a href="#Canvas.ellipse-373"><span class="linenos">373</span></a>
</span><span id="Canvas.ellipse-374"><a href="#Canvas.ellipse-374"><span class="linenos">374</span></a><span class="sd">        Returns:</span>
</span><span id="Canvas.ellipse-375"><a href="#Canvas.ellipse-375"><span class="linenos">375</span></a><span class="sd">            Self: The canvas object.</span>
</span><span id="Canvas.ellipse-376"><a href="#Canvas.ellipse-376"><span class="linenos">376</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Canvas.ellipse-377"><a href="#Canvas.ellipse-377"><span class="linenos">377</span></a>        <span class="n">draw</span><span class="o">.</span><span class="n">ellipse</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">center</span><span class="p">,</span> <span class="n">width</span><span class="p">,</span> <span class="n">height</span><span class="p">,</span> <span class="n">angle</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</span><span id="Canvas.ellipse-378"><a href="#Canvas.ellipse-378"><span class="linenos">378</span></a>        <span class="k">return</span> <span class="bp">self</span>
</span></pre></div>


            <div class="docstring"><p>Draw an ellipse with the given center and radius.</p>

<p>Args:
    center (Point): The center of the ellipse.
    width (float): The width of the ellipse.
    height (float): The height of the ellipse.
    angle (float, optional): The angle of the ellipse, defaults to 0.
    kwargs (dict): Additional keyword arguments.</p>

<p>Returns:
    Self: The canvas object.</p>
</div>


                            </div>
                            <div id="Canvas.text" class="classattr">
                                        <input id="Canvas.text-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">text</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">text</span><span class="p">:</span> <span class="nb">str</span>,</span><span class="param">	<span class="n">pos</span><span class="p">:</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span>,</span><span class="param">	<span class="n">font_family</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span>,</span><span class="param">	<span class="n">font_size</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span>,</span><span class="param">	<span class="n">anchor</span><span class="p">:</span> <span class="n"><a href="../graphics/all_enums.html#Anchor">simetri.graphics.all_enums.Anchor</a></span> <span class="o">=</span> <span class="kc">None</span>,</span><span class="param">	<span class="n">align</span><span class="p">:</span> <span class="n"><a href="../graphics/all_enums.html#Align">simetri.graphics.all_enums.Align</a></span> <span class="o">=</span> <span class="kc">None</span>,</span><span class="param">	<span class="o">**</span><span class="n">kwargs</span></span><span class="return-annotation">) -> <span class="n">typing_extensions</span><span class="o">.</span><span class="n">Self</span>:</span></span>

                <label class="view-source-button" for="Canvas.text-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Canvas.text"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Canvas.text-380"><a href="#Canvas.text-380"><span class="linenos">380</span></a>    <span class="k">def</span> <span class="nf">text</span><span class="p">(</span>
</span><span id="Canvas.text-381"><a href="#Canvas.text-381"><span class="linenos">381</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="Canvas.text-382"><a href="#Canvas.text-382"><span class="linenos">382</span></a>        <span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
</span><span id="Canvas.text-383"><a href="#Canvas.text-383"><span class="linenos">383</span></a>        <span class="n">pos</span><span class="p">:</span> <span class="n">Point</span><span class="p">,</span>
</span><span id="Canvas.text-384"><a href="#Canvas.text-384"><span class="linenos">384</span></a>        <span class="n">font_family</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="Canvas.text-385"><a href="#Canvas.text-385"><span class="linenos">385</span></a>        <span class="n">font_size</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="Canvas.text-386"><a href="#Canvas.text-386"><span class="linenos">386</span></a>        <span class="n">anchor</span><span class="p">:</span> <span class="n">Anchor</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="Canvas.text-387"><a href="#Canvas.text-387"><span class="linenos">387</span></a>        <span class="n">align</span><span class="p">:</span> <span class="n">Align</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="Canvas.text-388"><a href="#Canvas.text-388"><span class="linenos">388</span></a>        <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
</span><span id="Canvas.text-389"><a href="#Canvas.text-389"><span class="linenos">389</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Self</span><span class="p">:</span>
</span><span id="Canvas.text-390"><a href="#Canvas.text-390"><span class="linenos">390</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Canvas.text-391"><a href="#Canvas.text-391"><span class="linenos">391</span></a><span class="sd">        Draw text at the given point.</span>
</span><span id="Canvas.text-392"><a href="#Canvas.text-392"><span class="linenos">392</span></a>
</span><span id="Canvas.text-393"><a href="#Canvas.text-393"><span class="linenos">393</span></a><span class="sd">        Args:</span>
</span><span id="Canvas.text-394"><a href="#Canvas.text-394"><span class="linenos">394</span></a><span class="sd">            text (str): The text to draw.</span>
</span><span id="Canvas.text-395"><a href="#Canvas.text-395"><span class="linenos">395</span></a><span class="sd">            pos (Point): The position to draw the text.</span>
</span><span id="Canvas.text-396"><a href="#Canvas.text-396"><span class="linenos">396</span></a><span class="sd">            font_family (str, optional): The font family of the text, defaults to None.</span>
</span><span id="Canvas.text-397"><a href="#Canvas.text-397"><span class="linenos">397</span></a><span class="sd">            font_size (int, optional): The font size of the text, defaults to None.</span>
</span><span id="Canvas.text-398"><a href="#Canvas.text-398"><span class="linenos">398</span></a><span class="sd">            anchor (Anchor, optional): The anchor of the text, defaults to None.</span>
</span><span id="Canvas.text-399"><a href="#Canvas.text-399"><span class="linenos">399</span></a><span class="sd">            anchor options: BASE, BASE_EAST, BASE_WEST, BOTTOM, CENTER, EAST, NORTH,</span>
</span><span id="Canvas.text-400"><a href="#Canvas.text-400"><span class="linenos">400</span></a><span class="sd">            NORTHEAST, NORTHWEST, SOUTH, SOUTHEAST, SOUTHWEST, WEST, MIDEAST, MIDWEST, RIGHT,</span>
</span><span id="Canvas.text-401"><a href="#Canvas.text-401"><span class="linenos">401</span></a><span class="sd">            LEFT, TOP</span>
</span><span id="Canvas.text-402"><a href="#Canvas.text-402"><span class="linenos">402</span></a><span class="sd">            align (Align, optional): The alignment of the text, defaults to Align.CENTER.</span>
</span><span id="Canvas.text-403"><a href="#Canvas.text-403"><span class="linenos">403</span></a><span class="sd">            align options: CENTER, FLUSH_CENTER, FLUSH_LEFT, FLUSH_RIGHT, JUSTIFY, LEFT, RIGHT</span>
</span><span id="Canvas.text-404"><a href="#Canvas.text-404"><span class="linenos">404</span></a><span class="sd">            kwargs (dict): Additional keyword arguments.</span>
</span><span id="Canvas.text-405"><a href="#Canvas.text-405"><span class="linenos">405</span></a><span class="sd">            common kwargs: fill_color, line_color, line_width, fill, line, alpha, font_color</span>
</span><span id="Canvas.text-406"><a href="#Canvas.text-406"><span class="linenos">406</span></a>
</span><span id="Canvas.text-407"><a href="#Canvas.text-407"><span class="linenos">407</span></a><span class="sd">        Returns:</span>
</span><span id="Canvas.text-408"><a href="#Canvas.text-408"><span class="linenos">408</span></a><span class="sd">            Self: The canvas object.</span>
</span><span id="Canvas.text-409"><a href="#Canvas.text-409"><span class="linenos">409</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Canvas.text-410"><a href="#Canvas.text-410"><span class="linenos">410</span></a>        <span class="n">pos</span> <span class="o">=</span> <span class="p">[</span><span class="n">pos</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">pos</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="mi">1</span><span class="p">]</span>
</span><span id="Canvas.text-411"><a href="#Canvas.text-411"><span class="linenos">411</span></a>        <span class="n">pos</span> <span class="o">=</span> <span class="n">pos</span> <span class="o">@</span> <span class="bp">self</span><span class="o">.</span><span class="n">_xform_matrix</span>
</span><span id="Canvas.text-412"><a href="#Canvas.text-412"><span class="linenos">412</span></a>        <span class="n">draw</span><span class="o">.</span><span class="n">text</span><span class="p">(</span>
</span><span id="Canvas.text-413"><a href="#Canvas.text-413"><span class="linenos">413</span></a>            <span class="bp">self</span><span class="p">,</span>
</span><span id="Canvas.text-414"><a href="#Canvas.text-414"><span class="linenos">414</span></a>            <span class="n">txt</span><span class="o">=</span><span class="n">text</span><span class="p">,</span>
</span><span id="Canvas.text-415"><a href="#Canvas.text-415"><span class="linenos">415</span></a>            <span class="n">pos</span><span class="o">=</span><span class="n">pos</span><span class="p">,</span>
</span><span id="Canvas.text-416"><a href="#Canvas.text-416"><span class="linenos">416</span></a>            <span class="n">font_family</span><span class="o">=</span><span class="n">font_family</span><span class="p">,</span>
</span><span id="Canvas.text-417"><a href="#Canvas.text-417"><span class="linenos">417</span></a>            <span class="n">font_size</span><span class="o">=</span><span class="n">font_size</span><span class="p">,</span>
</span><span id="Canvas.text-418"><a href="#Canvas.text-418"><span class="linenos">418</span></a>            <span class="n">anchor</span><span class="o">=</span><span class="n">anchor</span><span class="p">,</span>
</span><span id="Canvas.text-419"><a href="#Canvas.text-419"><span class="linenos">419</span></a>            <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
</span><span id="Canvas.text-420"><a href="#Canvas.text-420"><span class="linenos">420</span></a>        <span class="p">)</span>
</span><span id="Canvas.text-421"><a href="#Canvas.text-421"><span class="linenos">421</span></a>        <span class="k">return</span> <span class="bp">self</span>
</span></pre></div>


            <div class="docstring"><p>Draw text at the given point.</p>

<p>Args:
    text (str): The text to draw.
    pos (Point): The position to draw the text.
    font_family (str, optional): The font family of the text, defaults to None.
    font_size (int, optional): The font size of the text, defaults to None.
    anchor (Anchor, optional): The anchor of the text, defaults to None.
    anchor options: BASE, BASE_EAST, BASE_WEST, BOTTOM, CENTER, EAST, NORTH,
    NORTHEAST, NORTHWEST, SOUTH, SOUTHEAST, SOUTHWEST, WEST, MIDEAST, MIDWEST, RIGHT,
    LEFT, TOP
    align (Align, optional): The alignment of the text, defaults to Align.CENTER.
    align options: CENTER, FLUSH_CENTER, FLUSH_LEFT, FLUSH_RIGHT, JUSTIFY, LEFT, RIGHT
    kwargs (dict): Additional keyword arguments.
    common kwargs: fill_color, line_color, line_width, fill, line, alpha, font_color</p>

<p>Returns:
    Self: The canvas object.</p>
</div>


                            </div>
                            <div id="Canvas.help_lines" class="classattr">
                                        <input id="Canvas.help_lines-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">help_lines</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">pos</span><span class="o">=</span><span class="p">(</span><span class="o">-</span><span class="mi">100</span><span class="p">,</span> <span class="o">-</span><span class="mi">100</span><span class="p">)</span>,</span><span class="param">	<span class="n">width</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mi">400</span>,</span><span class="param">	<span class="n">height</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mi">400</span>,</span><span class="param">	<span class="n">spacing</span><span class="o">=</span><span class="mi">25</span>,</span><span class="param">	<span class="n">cs_size</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mi">25</span>,</span><span class="param">	<span class="o">**</span><span class="n">kwargs</span></span><span class="return-annotation">) -> <span class="n">typing_extensions</span><span class="o">.</span><span class="n">Self</span>:</span></span>

                <label class="view-source-button" for="Canvas.help_lines-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Canvas.help_lines"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Canvas.help_lines-423"><a href="#Canvas.help_lines-423"><span class="linenos">423</span></a>    <span class="k">def</span> <span class="nf">help_lines</span><span class="p">(</span>
</span><span id="Canvas.help_lines-424"><a href="#Canvas.help_lines-424"><span class="linenos">424</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="Canvas.help_lines-425"><a href="#Canvas.help_lines-425"><span class="linenos">425</span></a>        <span class="n">pos</span><span class="o">=</span><span class="p">(</span><span class="o">-</span><span class="mi">100</span><span class="p">,</span> <span class="o">-</span><span class="mi">100</span><span class="p">),</span>
</span><span id="Canvas.help_lines-426"><a href="#Canvas.help_lines-426"><span class="linenos">426</span></a>        <span class="n">width</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mi">400</span><span class="p">,</span>
</span><span id="Canvas.help_lines-427"><a href="#Canvas.help_lines-427"><span class="linenos">427</span></a>        <span class="n">height</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mi">400</span><span class="p">,</span>
</span><span id="Canvas.help_lines-428"><a href="#Canvas.help_lines-428"><span class="linenos">428</span></a>        <span class="n">spacing</span><span class="o">=</span><span class="mi">25</span><span class="p">,</span>
</span><span id="Canvas.help_lines-429"><a href="#Canvas.help_lines-429"><span class="linenos">429</span></a>        <span class="n">cs_size</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mi">25</span><span class="p">,</span>
</span><span id="Canvas.help_lines-430"><a href="#Canvas.help_lines-430"><span class="linenos">430</span></a>        <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
</span><span id="Canvas.help_lines-431"><a href="#Canvas.help_lines-431"><span class="linenos">431</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Self</span><span class="p">:</span>
</span><span id="Canvas.help_lines-432"><a href="#Canvas.help_lines-432"><span class="linenos">432</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Canvas.help_lines-433"><a href="#Canvas.help_lines-433"><span class="linenos">433</span></a><span class="sd">        Draw help lines on the canvas.</span>
</span><span id="Canvas.help_lines-434"><a href="#Canvas.help_lines-434"><span class="linenos">434</span></a>
</span><span id="Canvas.help_lines-435"><a href="#Canvas.help_lines-435"><span class="linenos">435</span></a><span class="sd">        Args:</span>
</span><span id="Canvas.help_lines-436"><a href="#Canvas.help_lines-436"><span class="linenos">436</span></a><span class="sd">            pos (tuple): The lower-left corner of the grid.</span>
</span><span id="Canvas.help_lines-437"><a href="#Canvas.help_lines-437"><span class="linenos">437</span></a><span class="sd">            width (float): The length of the help lines along the x-axis.</span>
</span><span id="Canvas.help_lines-438"><a href="#Canvas.help_lines-438"><span class="linenos">438</span></a><span class="sd">            height (float): The length of the help lines along the y-axis.</span>
</span><span id="Canvas.help_lines-439"><a href="#Canvas.help_lines-439"><span class="linenos">439</span></a><span class="sd">            spacing (int): The spacing between the help lines.</span>
</span><span id="Canvas.help_lines-440"><a href="#Canvas.help_lines-440"><span class="linenos">440</span></a><span class="sd">            cs_size (float): The size of the coordinate system.</span>
</span><span id="Canvas.help_lines-441"><a href="#Canvas.help_lines-441"><span class="linenos">441</span></a><span class="sd">            kwargs (dict): Additional keyword arguments.</span>
</span><span id="Canvas.help_lines-442"><a href="#Canvas.help_lines-442"><span class="linenos">442</span></a>
</span><span id="Canvas.help_lines-443"><a href="#Canvas.help_lines-443"><span class="linenos">443</span></a><span class="sd">        Returns:</span>
</span><span id="Canvas.help_lines-444"><a href="#Canvas.help_lines-444"><span class="linenos">444</span></a><span class="sd">            Self: The canvas object.</span>
</span><span id="Canvas.help_lines-445"><a href="#Canvas.help_lines-445"><span class="linenos">445</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Canvas.help_lines-446"><a href="#Canvas.help_lines-446"><span class="linenos">446</span></a>        <span class="n">draw</span><span class="o">.</span><span class="n">help_lines</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pos</span><span class="p">,</span> <span class="n">width</span><span class="p">,</span> <span class="n">height</span><span class="p">,</span> <span class="n">spacing</span><span class="p">,</span> <span class="n">cs_size</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</span><span id="Canvas.help_lines-447"><a href="#Canvas.help_lines-447"><span class="linenos">447</span></a>        <span class="k">return</span> <span class="bp">self</span>
</span></pre></div>


            <div class="docstring"><p>Draw help lines on the canvas.</p>

<p>Args:
    pos (tuple): The lower-left corner of the grid.
    width (float): The length of the help lines along the x-axis.
    height (float): The length of the help lines along the y-axis.
    spacing (int): The spacing between the help lines.
    cs_size (float): The size of the coordinate system.
    kwargs (dict): Additional keyword arguments.</p>

<p>Returns:
    Self: The canvas object.</p>
</div>


                            </div>
                            <div id="Canvas.grid" class="classattr">
                                        <input id="Canvas.grid-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">grid</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">pos</span><span class="p">:</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span>,</span><span class="param">	<span class="n">width</span><span class="p">:</span> <span class="nb">float</span>,</span><span class="param">	<span class="n">height</span><span class="p">:</span> <span class="nb">float</span>,</span><span class="param">	<span class="n">spacing</span><span class="p">:</span> <span class="nb">float</span>,</span><span class="param">	<span class="o">**</span><span class="n">kwargs</span></span><span class="return-annotation">) -> <span class="n">typing_extensions</span><span class="o">.</span><span class="n">Self</span>:</span></span>

                <label class="view-source-button" for="Canvas.grid-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Canvas.grid"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Canvas.grid-449"><a href="#Canvas.grid-449"><span class="linenos">449</span></a>    <span class="k">def</span> <span class="nf">grid</span><span class="p">(</span>
</span><span id="Canvas.grid-450"><a href="#Canvas.grid-450"><span class="linenos">450</span></a>        <span class="bp">self</span><span class="p">,</span> <span class="n">pos</span><span class="p">:</span> <span class="n">Point</span><span class="p">,</span> <span class="n">width</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">height</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">spacing</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span>
</span><span id="Canvas.grid-451"><a href="#Canvas.grid-451"><span class="linenos">451</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Self</span><span class="p">:</span>
</span><span id="Canvas.grid-452"><a href="#Canvas.grid-452"><span class="linenos">452</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Canvas.grid-453"><a href="#Canvas.grid-453"><span class="linenos">453</span></a><span class="sd">        Draw a grid with the given size and spacing.</span>
</span><span id="Canvas.grid-454"><a href="#Canvas.grid-454"><span class="linenos">454</span></a>
</span><span id="Canvas.grid-455"><a href="#Canvas.grid-455"><span class="linenos">455</span></a><span class="sd">        Args:</span>
</span><span id="Canvas.grid-456"><a href="#Canvas.grid-456"><span class="linenos">456</span></a><span class="sd">            pos (Point): The position to start drawing the grid.</span>
</span><span id="Canvas.grid-457"><a href="#Canvas.grid-457"><span class="linenos">457</span></a><span class="sd">            width (float): The length of the grid along the x-axis.</span>
</span><span id="Canvas.grid-458"><a href="#Canvas.grid-458"><span class="linenos">458</span></a><span class="sd">            height (float): The length of the grid along the y-axis.</span>
</span><span id="Canvas.grid-459"><a href="#Canvas.grid-459"><span class="linenos">459</span></a><span class="sd">            spacing (float): The spacing between the grid lines.</span>
</span><span id="Canvas.grid-460"><a href="#Canvas.grid-460"><span class="linenos">460</span></a><span class="sd">            kwargs (dict): Additional keyword arguments.</span>
</span><span id="Canvas.grid-461"><a href="#Canvas.grid-461"><span class="linenos">461</span></a>
</span><span id="Canvas.grid-462"><a href="#Canvas.grid-462"><span class="linenos">462</span></a><span class="sd">        Returns:</span>
</span><span id="Canvas.grid-463"><a href="#Canvas.grid-463"><span class="linenos">463</span></a><span class="sd">            Self: The canvas object.</span>
</span><span id="Canvas.grid-464"><a href="#Canvas.grid-464"><span class="linenos">464</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Canvas.grid-465"><a href="#Canvas.grid-465"><span class="linenos">465</span></a>        <span class="n">draw</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pos</span><span class="p">,</span> <span class="n">width</span><span class="p">,</span> <span class="n">height</span><span class="p">,</span> <span class="n">spacing</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</span><span id="Canvas.grid-466"><a href="#Canvas.grid-466"><span class="linenos">466</span></a>        <span class="k">return</span> <span class="bp">self</span>
</span></pre></div>


            <div class="docstring"><p>Draw a grid with the given size and spacing.</p>

<p>Args:
    pos (Point): The position to start drawing the grid.
    width (float): The length of the grid along the x-axis.
    height (float): The length of the grid along the y-axis.
    spacing (float): The spacing between the grid lines.
    kwargs (dict): Additional keyword arguments.</p>

<p>Returns:
    Self: The canvas object.</p>
</div>


                            </div>
                            <div id="Canvas.line" class="classattr">
                                        <input id="Canvas.line-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">line</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">start</span><span class="p">:</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span>,</span><span class="param">	<span class="n">end</span><span class="p">:</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span>,</span><span class="param">	<span class="o">**</span><span class="n">kwargs</span></span><span class="return-annotation">) -> <span class="n">typing_extensions</span><span class="o">.</span><span class="n">Self</span>:</span></span>

                <label class="view-source-button" for="Canvas.line-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Canvas.line"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Canvas.line-468"><a href="#Canvas.line-468"><span class="linenos">468</span></a>    <span class="k">def</span> <span class="nf">line</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">start</span><span class="p">:</span> <span class="n">Point</span><span class="p">,</span> <span class="n">end</span><span class="p">:</span> <span class="n">Point</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Self</span><span class="p">:</span>
</span><span id="Canvas.line-469"><a href="#Canvas.line-469"><span class="linenos">469</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Canvas.line-470"><a href="#Canvas.line-470"><span class="linenos">470</span></a><span class="sd">        Draw a line from start to end.</span>
</span><span id="Canvas.line-471"><a href="#Canvas.line-471"><span class="linenos">471</span></a>
</span><span id="Canvas.line-472"><a href="#Canvas.line-472"><span class="linenos">472</span></a><span class="sd">        Args:</span>
</span><span id="Canvas.line-473"><a href="#Canvas.line-473"><span class="linenos">473</span></a><span class="sd">            start (Point): The starting point of the line.</span>
</span><span id="Canvas.line-474"><a href="#Canvas.line-474"><span class="linenos">474</span></a><span class="sd">            end (Point): The ending point of the line.</span>
</span><span id="Canvas.line-475"><a href="#Canvas.line-475"><span class="linenos">475</span></a><span class="sd">            kwargs (dict): Additional keyword arguments.</span>
</span><span id="Canvas.line-476"><a href="#Canvas.line-476"><span class="linenos">476</span></a>
</span><span id="Canvas.line-477"><a href="#Canvas.line-477"><span class="linenos">477</span></a><span class="sd">        Returns:</span>
</span><span id="Canvas.line-478"><a href="#Canvas.line-478"><span class="linenos">478</span></a><span class="sd">            Self: The canvas object.</span>
</span><span id="Canvas.line-479"><a href="#Canvas.line-479"><span class="linenos">479</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Canvas.line-480"><a href="#Canvas.line-480"><span class="linenos">480</span></a>        <span class="n">draw</span><span class="o">.</span><span class="n">line</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">start</span><span class="p">,</span> <span class="n">end</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</span><span id="Canvas.line-481"><a href="#Canvas.line-481"><span class="linenos">481</span></a>        <span class="k">return</span> <span class="bp">self</span>
</span></pre></div>


            <div class="docstring"><p>Draw a line from start to end.</p>

<p>Args:
    start (Point): The starting point of the line.
    end (Point): The ending point of the line.
    kwargs (dict): Additional keyword arguments.</p>

<p>Returns:
    Self: The canvas object.</p>
</div>


                            </div>
                            <div id="Canvas.rectangle" class="classattr">
                                        <input id="Canvas.rectangle-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">rectangle</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">center</span><span class="p">:</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>,</span><span class="param">	<span class="n">width</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mi">100</span>,</span><span class="param">	<span class="n">height</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mi">100</span>,</span><span class="param">	<span class="n">angle</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mi">0</span>,</span><span class="param">	<span class="o">**</span><span class="n">kwargs</span></span><span class="return-annotation">) -> <span class="n">typing_extensions</span><span class="o">.</span><span class="n">Self</span>:</span></span>

                <label class="view-source-button" for="Canvas.rectangle-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Canvas.rectangle"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Canvas.rectangle-483"><a href="#Canvas.rectangle-483"><span class="linenos">483</span></a>    <span class="k">def</span> <span class="nf">rectangle</span><span class="p">(</span>
</span><span id="Canvas.rectangle-484"><a href="#Canvas.rectangle-484"><span class="linenos">484</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="Canvas.rectangle-485"><a href="#Canvas.rectangle-485"><span class="linenos">485</span></a>        <span class="n">center</span><span class="p">:</span> <span class="n">Point</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
</span><span id="Canvas.rectangle-486"><a href="#Canvas.rectangle-486"><span class="linenos">486</span></a>        <span class="n">width</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mi">100</span><span class="p">,</span>
</span><span id="Canvas.rectangle-487"><a href="#Canvas.rectangle-487"><span class="linenos">487</span></a>        <span class="n">height</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mi">100</span><span class="p">,</span>
</span><span id="Canvas.rectangle-488"><a href="#Canvas.rectangle-488"><span class="linenos">488</span></a>        <span class="n">angle</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
</span><span id="Canvas.rectangle-489"><a href="#Canvas.rectangle-489"><span class="linenos">489</span></a>        <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
</span><span id="Canvas.rectangle-490"><a href="#Canvas.rectangle-490"><span class="linenos">490</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Self</span><span class="p">:</span>
</span><span id="Canvas.rectangle-491"><a href="#Canvas.rectangle-491"><span class="linenos">491</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Canvas.rectangle-492"><a href="#Canvas.rectangle-492"><span class="linenos">492</span></a><span class="sd">        Draw a rectangle.</span>
</span><span id="Canvas.rectangle-493"><a href="#Canvas.rectangle-493"><span class="linenos">493</span></a>
</span><span id="Canvas.rectangle-494"><a href="#Canvas.rectangle-494"><span class="linenos">494</span></a><span class="sd">        Args:</span>
</span><span id="Canvas.rectangle-495"><a href="#Canvas.rectangle-495"><span class="linenos">495</span></a><span class="sd">            center (Point): The center of the rectangle.</span>
</span><span id="Canvas.rectangle-496"><a href="#Canvas.rectangle-496"><span class="linenos">496</span></a><span class="sd">            width (float): The width of the rectangle.</span>
</span><span id="Canvas.rectangle-497"><a href="#Canvas.rectangle-497"><span class="linenos">497</span></a><span class="sd">            height (float): The height of the rectangle.</span>
</span><span id="Canvas.rectangle-498"><a href="#Canvas.rectangle-498"><span class="linenos">498</span></a><span class="sd">            angle (float, optional): The angle of the rectangle, defaults to 0.</span>
</span><span id="Canvas.rectangle-499"><a href="#Canvas.rectangle-499"><span class="linenos">499</span></a><span class="sd">            kwargs (dict): Additional keyword arguments.</span>
</span><span id="Canvas.rectangle-500"><a href="#Canvas.rectangle-500"><span class="linenos">500</span></a>
</span><span id="Canvas.rectangle-501"><a href="#Canvas.rectangle-501"><span class="linenos">501</span></a><span class="sd">        Returns:</span>
</span><span id="Canvas.rectangle-502"><a href="#Canvas.rectangle-502"><span class="linenos">502</span></a><span class="sd">            Self: The canvas object.</span>
</span><span id="Canvas.rectangle-503"><a href="#Canvas.rectangle-503"><span class="linenos">503</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Canvas.rectangle-504"><a href="#Canvas.rectangle-504"><span class="linenos">504</span></a>        <span class="n">draw</span><span class="o">.</span><span class="n">rectangle</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">center</span><span class="p">,</span> <span class="n">width</span><span class="p">,</span> <span class="n">height</span><span class="p">,</span> <span class="n">angle</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</span><span id="Canvas.rectangle-505"><a href="#Canvas.rectangle-505"><span class="linenos">505</span></a>        <span class="k">return</span> <span class="bp">self</span>
</span></pre></div>


            <div class="docstring"><p>Draw a rectangle.</p>

<p>Args:
    center (Point): The center of the rectangle.
    width (float): The width of the rectangle.
    height (float): The height of the rectangle.
    angle (float, optional): The angle of the rectangle, defaults to 0.
    kwargs (dict): Additional keyword arguments.</p>

<p>Returns:
    Self: The canvas object.</p>
</div>


                            </div>
                            <div id="Canvas.square" class="classattr">
                                        <input id="Canvas.square-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">square</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">center</span><span class="p">:</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>,</span><span class="param">	<span class="n">size</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mi">100</span>,</span><span class="param">	<span class="n">angle</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mi">0</span>,</span><span class="param">	<span class="o">**</span><span class="n">kwargs</span></span><span class="return-annotation">) -> <span class="n">typing_extensions</span><span class="o">.</span><span class="n">Self</span>:</span></span>

                <label class="view-source-button" for="Canvas.square-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Canvas.square"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Canvas.square-507"><a href="#Canvas.square-507"><span class="linenos">507</span></a>    <span class="k">def</span> <span class="nf">square</span><span class="p">(</span>
</span><span id="Canvas.square-508"><a href="#Canvas.square-508"><span class="linenos">508</span></a>        <span class="bp">self</span><span class="p">,</span> <span class="n">center</span><span class="p">:</span> <span class="n">Point</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="n">size</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mi">100</span><span class="p">,</span> <span class="n">angle</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span>
</span><span id="Canvas.square-509"><a href="#Canvas.square-509"><span class="linenos">509</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Self</span><span class="p">:</span>
</span><span id="Canvas.square-510"><a href="#Canvas.square-510"><span class="linenos">510</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Canvas.square-511"><a href="#Canvas.square-511"><span class="linenos">511</span></a><span class="sd">        Draw a square with the given center and size.</span>
</span><span id="Canvas.square-512"><a href="#Canvas.square-512"><span class="linenos">512</span></a>
</span><span id="Canvas.square-513"><a href="#Canvas.square-513"><span class="linenos">513</span></a><span class="sd">        Args:</span>
</span><span id="Canvas.square-514"><a href="#Canvas.square-514"><span class="linenos">514</span></a><span class="sd">            center (Point): The center of the square.</span>
</span><span id="Canvas.square-515"><a href="#Canvas.square-515"><span class="linenos">515</span></a><span class="sd">            size (float): The size of the square.</span>
</span><span id="Canvas.square-516"><a href="#Canvas.square-516"><span class="linenos">516</span></a><span class="sd">            angle (float, optional): The angle of the square, defaults to 0.</span>
</span><span id="Canvas.square-517"><a href="#Canvas.square-517"><span class="linenos">517</span></a><span class="sd">            kwargs (dict): Additional keyword arguments.</span>
</span><span id="Canvas.square-518"><a href="#Canvas.square-518"><span class="linenos">518</span></a>
</span><span id="Canvas.square-519"><a href="#Canvas.square-519"><span class="linenos">519</span></a><span class="sd">        Returns:</span>
</span><span id="Canvas.square-520"><a href="#Canvas.square-520"><span class="linenos">520</span></a><span class="sd">            Self: The canvas object.</span>
</span><span id="Canvas.square-521"><a href="#Canvas.square-521"><span class="linenos">521</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Canvas.square-522"><a href="#Canvas.square-522"><span class="linenos">522</span></a>        <span class="n">draw</span><span class="o">.</span><span class="n">rectangle</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">center</span><span class="p">,</span> <span class="n">size</span><span class="p">,</span> <span class="n">size</span><span class="p">,</span> <span class="n">angle</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</span><span id="Canvas.square-523"><a href="#Canvas.square-523"><span class="linenos">523</span></a>        <span class="k">return</span> <span class="bp">self</span>
</span></pre></div>


            <div class="docstring"><p>Draw a square with the given center and size.</p>

<p>Args:
    center (Point): The center of the square.
    size (float): The size of the square.
    angle (float, optional): The angle of the square, defaults to 0.
    kwargs (dict): Additional keyword arguments.</p>

<p>Returns:
    Self: The canvas object.</p>
</div>


                            </div>
                            <div id="Canvas.lines" class="classattr">
                                        <input id="Canvas.lines-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">lines</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">points</span><span class="p">:</span> <span class="n">Sequence</span><span class="p">[</span><span class="n">Sequence</span><span class="p">[</span><span class="nb">float</span><span class="p">]]</span>,</span><span class="param">	<span class="o">**</span><span class="n">kwargs</span></span><span class="return-annotation">) -> <span class="n">typing_extensions</span><span class="o">.</span><span class="n">Self</span>:</span></span>

                <label class="view-source-button" for="Canvas.lines-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Canvas.lines"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Canvas.lines-525"><a href="#Canvas.lines-525"><span class="linenos">525</span></a>    <span class="k">def</span> <span class="nf">lines</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">points</span><span class="p">:</span> <span class="n">Sequence</span><span class="p">[</span><span class="n">Point</span><span class="p">],</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Self</span><span class="p">:</span>
</span><span id="Canvas.lines-526"><a href="#Canvas.lines-526"><span class="linenos">526</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Canvas.lines-527"><a href="#Canvas.lines-527"><span class="linenos">527</span></a><span class="sd">        Draw a polyline through the given points.</span>
</span><span id="Canvas.lines-528"><a href="#Canvas.lines-528"><span class="linenos">528</span></a>
</span><span id="Canvas.lines-529"><a href="#Canvas.lines-529"><span class="linenos">529</span></a><span class="sd">        Args:</span>
</span><span id="Canvas.lines-530"><a href="#Canvas.lines-530"><span class="linenos">530</span></a><span class="sd">            points (Sequence[Point]): The points to draw the polyline through.</span>
</span><span id="Canvas.lines-531"><a href="#Canvas.lines-531"><span class="linenos">531</span></a><span class="sd">            kwargs (dict): Additional keyword arguments.</span>
</span><span id="Canvas.lines-532"><a href="#Canvas.lines-532"><span class="linenos">532</span></a>
</span><span id="Canvas.lines-533"><a href="#Canvas.lines-533"><span class="linenos">533</span></a><span class="sd">        Returns:</span>
</span><span id="Canvas.lines-534"><a href="#Canvas.lines-534"><span class="linenos">534</span></a><span class="sd">            Self: The canvas object.</span>
</span><span id="Canvas.lines-535"><a href="#Canvas.lines-535"><span class="linenos">535</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Canvas.lines-536"><a href="#Canvas.lines-536"><span class="linenos">536</span></a>        <span class="n">draw</span><span class="o">.</span><span class="n">lines</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">points</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</span><span id="Canvas.lines-537"><a href="#Canvas.lines-537"><span class="linenos">537</span></a>        <span class="k">return</span> <span class="bp">self</span>
</span></pre></div>


            <div class="docstring"><p>Draw a polyline through the given points.</p>

<p>Args:
    points (Sequence[Point]): The points to draw the polyline through.
    kwargs (dict): Additional keyword arguments.</p>

<p>Returns:
    Self: The canvas object.</p>
</div>


                            </div>
                            <div id="Canvas.draw_lace" class="classattr">
                                        <input id="Canvas.draw_lace-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">draw_lace</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">lace</span><span class="p">:</span> <span class="n"><a href="../graphics/batch.html#Batch">simetri.graphics.batch.Batch</a></span>,</span><span class="param">	<span class="o">**</span><span class="n">kwargs</span></span><span class="return-annotation">) -> <span class="n">typing_extensions</span><span class="o">.</span><span class="n">Self</span>:</span></span>

                <label class="view-source-button" for="Canvas.draw_lace-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Canvas.draw_lace"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Canvas.draw_lace-539"><a href="#Canvas.draw_lace-539"><span class="linenos">539</span></a>    <span class="k">def</span> <span class="nf">draw_lace</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">lace</span><span class="p">:</span> <span class="n">Batch</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Self</span><span class="p">:</span>
</span><span id="Canvas.draw_lace-540"><a href="#Canvas.draw_lace-540"><span class="linenos">540</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Canvas.draw_lace-541"><a href="#Canvas.draw_lace-541"><span class="linenos">541</span></a><span class="sd">        Draw the lace.</span>
</span><span id="Canvas.draw_lace-542"><a href="#Canvas.draw_lace-542"><span class="linenos">542</span></a>
</span><span id="Canvas.draw_lace-543"><a href="#Canvas.draw_lace-543"><span class="linenos">543</span></a><span class="sd">        Args:</span>
</span><span id="Canvas.draw_lace-544"><a href="#Canvas.draw_lace-544"><span class="linenos">544</span></a><span class="sd">            lace (Batch): The lace to draw.</span>
</span><span id="Canvas.draw_lace-545"><a href="#Canvas.draw_lace-545"><span class="linenos">545</span></a><span class="sd">            kwargs (dict): Additional keyword arguments.</span>
</span><span id="Canvas.draw_lace-546"><a href="#Canvas.draw_lace-546"><span class="linenos">546</span></a>
</span><span id="Canvas.draw_lace-547"><a href="#Canvas.draw_lace-547"><span class="linenos">547</span></a><span class="sd">        Returns:</span>
</span><span id="Canvas.draw_lace-548"><a href="#Canvas.draw_lace-548"><span class="linenos">548</span></a><span class="sd">            Self: The canvas object.</span>
</span><span id="Canvas.draw_lace-549"><a href="#Canvas.draw_lace-549"><span class="linenos">549</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Canvas.draw_lace-550"><a href="#Canvas.draw_lace-550"><span class="linenos">550</span></a>        <span class="n">draw</span><span class="o">.</span><span class="n">draw_lace</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">lace</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</span><span id="Canvas.draw_lace-551"><a href="#Canvas.draw_lace-551"><span class="linenos">551</span></a>        <span class="k">return</span> <span class="bp">self</span>
</span></pre></div>


            <div class="docstring"><p>Draw the lace.</p>

<p>Args:
    lace (Batch): The lace to draw.
    kwargs (dict): Additional keyword arguments.</p>

<p>Returns:
    Self: The canvas object.</p>
</div>


                            </div>
                            <div id="Canvas.draw_dimension" class="classattr">
                                        <input id="Canvas.draw_dimension-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">draw_dimension</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">dim</span><span class="p">:</span> <span class="n"><a href="../graphics/shape.html#Shape">simetri.graphics.shape.Shape</a></span>,</span><span class="param">	<span class="o">**</span><span class="n">kwargs</span></span><span class="return-annotation">) -> <span class="n">typing_extensions</span><span class="o">.</span><span class="n">Self</span>:</span></span>

                <label class="view-source-button" for="Canvas.draw_dimension-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Canvas.draw_dimension"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Canvas.draw_dimension-553"><a href="#Canvas.draw_dimension-553"><span class="linenos">553</span></a>    <span class="k">def</span> <span class="nf">draw_dimension</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dim</span><span class="p">:</span> <span class="n">Shape</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Self</span><span class="p">:</span>
</span><span id="Canvas.draw_dimension-554"><a href="#Canvas.draw_dimension-554"><span class="linenos">554</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Canvas.draw_dimension-555"><a href="#Canvas.draw_dimension-555"><span class="linenos">555</span></a><span class="sd">        Draw the dimension.</span>
</span><span id="Canvas.draw_dimension-556"><a href="#Canvas.draw_dimension-556"><span class="linenos">556</span></a>
</span><span id="Canvas.draw_dimension-557"><a href="#Canvas.draw_dimension-557"><span class="linenos">557</span></a><span class="sd">        Args:</span>
</span><span id="Canvas.draw_dimension-558"><a href="#Canvas.draw_dimension-558"><span class="linenos">558</span></a><span class="sd">            dim (Shape): The dimension to draw.</span>
</span><span id="Canvas.draw_dimension-559"><a href="#Canvas.draw_dimension-559"><span class="linenos">559</span></a><span class="sd">            kwargs (dict): Additional keyword arguments.</span>
</span><span id="Canvas.draw_dimension-560"><a href="#Canvas.draw_dimension-560"><span class="linenos">560</span></a>
</span><span id="Canvas.draw_dimension-561"><a href="#Canvas.draw_dimension-561"><span class="linenos">561</span></a><span class="sd">        Returns:</span>
</span><span id="Canvas.draw_dimension-562"><a href="#Canvas.draw_dimension-562"><span class="linenos">562</span></a><span class="sd">            Self: The canvas object.</span>
</span><span id="Canvas.draw_dimension-563"><a href="#Canvas.draw_dimension-563"><span class="linenos">563</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Canvas.draw_dimension-564"><a href="#Canvas.draw_dimension-564"><span class="linenos">564</span></a>        <span class="n">draw</span><span class="o">.</span><span class="n">draw_dimension</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dim</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</span><span id="Canvas.draw_dimension-565"><a href="#Canvas.draw_dimension-565"><span class="linenos">565</span></a>        <span class="k">return</span> <span class="bp">self</span>
</span></pre></div>


            <div class="docstring"><p>Draw the dimension.</p>

<p>Args:
    dim (Shape): The dimension to draw.
    kwargs (dict): Additional keyword arguments.</p>

<p>Returns:
    Self: The canvas object.</p>
</div>


                            </div>
                            <div id="Canvas.draw" class="classattr">
                                        <input id="Canvas.draw-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">draw</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">item_s</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">ForwardRef</span><span class="p">(</span><span class="o">&lt;</span><span class="n">Types</span><span class="o">.</span><span class="n">ARC</span><span class="p">:</span> <span class="s1">&#39;ARC&#39;</span><span class="o">&gt;</span><span class="p">),</span> <span class="n">ForwardRef</span><span class="p">(</span><span class="o">&lt;</span><span class="n">Types</span><span class="o">.</span><span class="n">ARC_ARROW</span><span class="p">:</span> <span class="s1">&#39;ARC_ARROW&#39;</span><span class="o">&gt;</span><span class="p">),</span> <span class="n">ForwardRef</span><span class="p">(</span><span class="o">&lt;</span><span class="n">Types</span><span class="o">.</span><span class="n">ARROW</span><span class="p">:</span> <span class="s1">&#39;ARROW&#39;</span><span class="o">&gt;</span><span class="p">),</span> <span class="n">ForwardRef</span><span class="p">(</span><span class="o">&lt;</span><span class="n">Types</span><span class="o">.</span><span class="n">ARROW_HEAD</span><span class="p">:</span> <span class="s1">&#39;ARROW_HEAD&#39;</span><span class="o">&gt;</span><span class="p">),</span> <span class="n">ForwardRef</span><span class="p">(</span><span class="o">&lt;</span><span class="n">Types</span><span class="o">.</span><span class="n">BATCH</span><span class="p">:</span> <span class="s1">&#39;BATCH&#39;</span><span class="o">&gt;</span><span class="p">),</span> <span class="n">ForwardRef</span><span class="p">(</span><span class="o">&lt;</span><span class="n">Types</span><span class="o">.</span><span class="n">CIRCLE</span><span class="p">:</span> <span class="s1">&#39;CIRCLE&#39;</span><span class="o">&gt;</span><span class="p">),</span> <span class="n">ForwardRef</span><span class="p">(</span><span class="o">&lt;</span><span class="n">Types</span><span class="o">.</span><span class="n">CIRCULAR_GRID</span><span class="p">:</span> <span class="s1">&#39;CIRCULAR_GRID&#39;</span><span class="o">&gt;</span><span class="p">),</span> <span class="n">ForwardRef</span><span class="p">(</span><span class="o">&lt;</span><span class="n">Types</span><span class="o">.</span><span class="n">DIMENSION</span><span class="p">:</span> <span class="s1">&#39;DIMENSION&#39;</span><span class="o">&gt;</span><span class="p">),</span> <span class="n">ForwardRef</span><span class="p">(</span><span class="o">&lt;</span><span class="n">Types</span><span class="o">.</span><span class="n">DOT</span><span class="p">:</span> <span class="s1">&#39;DOT&#39;</span><span class="o">&gt;</span><span class="p">),</span> <span class="n">ForwardRef</span><span class="p">(</span><span class="o">&lt;</span><span class="n">Types</span><span class="o">.</span><span class="n">DOTS</span><span class="p">:</span> <span class="s1">&#39;DOTS&#39;</span><span class="o">&gt;</span><span class="p">),</span> <span class="n">ForwardRef</span><span class="p">(</span><span class="o">&lt;</span><span class="n">Types</span><span class="o">.</span><span class="n">EDGE</span><span class="p">:</span> <span class="s1">&#39;EDGE&#39;</span><span class="o">&gt;</span><span class="p">),</span> <span class="n">ForwardRef</span><span class="p">(</span><span class="o">&lt;</span><span class="n">Types</span><span class="o">.</span><span class="n">ELLIPSE</span><span class="p">:</span> <span class="s1">&#39;ELLIPSE&#39;</span><span class="o">&gt;</span><span class="p">),</span> <span class="n">ForwardRef</span><span class="p">(</span><span class="o">&lt;</span><span class="n">Types</span><span class="o">.</span><span class="n">FRAGMENT</span><span class="p">:</span> <span class="s1">&#39;FRAGMENT&#39;</span><span class="o">&gt;</span><span class="p">),</span> <span class="n">ForwardRef</span><span class="p">(</span><span class="o">&lt;</span><span class="n">Types</span><span class="o">.</span><span class="n">HEX_GRID</span><span class="p">:</span> <span class="s1">&#39;HEX_GRID&#39;</span><span class="o">&gt;</span><span class="p">),</span> <span class="n">ForwardRef</span><span class="p">(</span><span class="o">&lt;</span><span class="n">Types</span><span class="o">.</span><span class="n">IMAGE</span><span class="p">:</span> <span class="s1">&#39;IMAGE&#39;</span><span class="o">&gt;</span><span class="p">),</span> <span class="n">ForwardRef</span><span class="p">(</span><span class="o">&lt;</span><span class="n">Types</span><span class="o">.</span><span class="n">INTERSECTION</span><span class="p">:</span> <span class="s1">&#39;INTERSECTION&#39;</span><span class="o">&gt;</span><span class="p">),</span> <span class="n">ForwardRef</span><span class="p">(</span><span class="o">&lt;</span><span class="n">Types</span><span class="o">.</span><span class="n">LACE</span><span class="p">:</span> <span class="s1">&#39;LACE&#39;</span><span class="o">&gt;</span><span class="p">),</span> <span class="n">ForwardRef</span><span class="p">(</span><span class="o">&lt;</span><span class="n">Types</span><span class="o">.</span><span class="n">LINPATH</span><span class="p">:</span> <span class="s1">&#39;LINPATH&#39;</span><span class="o">&gt;</span><span class="p">),</span> <span class="n">ForwardRef</span><span class="p">(</span><span class="o">&lt;</span><span class="n">Types</span><span class="o">.</span><span class="n">MIXED_GRID</span><span class="p">:</span> <span class="s1">&#39;MIXED_GRID&#39;</span><span class="o">&gt;</span><span class="p">),</span> <span class="n">ForwardRef</span><span class="p">(</span><span class="o">&lt;</span><span class="n">Types</span><span class="o">.</span><span class="n">OUTLINE</span><span class="p">:</span> <span class="s1">&#39;OUTLINE&#39;</span><span class="o">&gt;</span><span class="p">),</span> <span class="n">ForwardRef</span><span class="p">(</span><span class="o">&lt;</span><span class="n">Types</span><span class="o">.</span><span class="n">OVERLAP</span><span class="p">:</span> <span class="s1">&#39;OVERLAP&#39;</span><span class="o">&gt;</span><span class="p">),</span> <span class="n">ForwardRef</span><span class="p">(</span><span class="o">&lt;</span><span class="n">Types</span><span class="o">.</span><span class="n">PARALLEL_POLYLINE</span><span class="p">:</span> <span class="s1">&#39;PARALLEL_POLYLINE&#39;</span><span class="o">&gt;</span><span class="p">),</span> <span class="n">ForwardRef</span><span class="p">(</span><span class="o">&lt;</span><span class="n">Types</span><span class="o">.</span><span class="n">PATTERN</span><span class="p">:</span> <span class="s1">&#39;PATTERN&#39;</span><span class="o">&gt;</span><span class="p">),</span> <span class="n">ForwardRef</span><span class="p">(</span><span class="o">&lt;</span><span class="n">Types</span><span class="o">.</span><span class="n">PLAIT</span><span class="p">:</span> <span class="s1">&#39;PLAIT&#39;</span><span class="o">&gt;</span><span class="p">),</span> <span class="n">ForwardRef</span><span class="p">(</span><span class="o">&lt;</span><span class="n">Types</span><span class="o">.</span><span class="n">POLYLINE</span><span class="p">:</span> <span class="s1">&#39;POLYLINE&#39;</span><span class="o">&gt;</span><span class="p">),</span> <span class="n">ForwardRef</span><span class="p">(</span><span class="o">&lt;</span><span class="n">Types</span><span class="o">.</span><span class="n">RECTANGLE</span><span class="p">:</span> <span class="s1">&#39;RECTANGLE&#39;</span><span class="o">&gt;</span><span class="p">),</span> <span class="n">ForwardRef</span><span class="p">(</span><span class="o">&lt;</span><span class="n">Types</span><span class="o">.</span><span class="n">SECTION</span><span class="p">:</span> <span class="s1">&#39;SECTION&#39;</span><span class="o">&gt;</span><span class="p">),</span> <span class="n">ForwardRef</span><span class="p">(</span><span class="o">&lt;</span><span class="n">Types</span><span class="o">.</span><span class="n">SEGMENT</span><span class="p">:</span> <span class="s1">&#39;SEGMENT&#39;</span><span class="o">&gt;</span><span class="p">),</span> <span class="n">ForwardRef</span><span class="p">(</span><span class="o">&lt;</span><span class="n">Types</span><span class="o">.</span><span class="n">SHAPE</span><span class="p">:</span> <span class="s1">&#39;SHAPE&#39;</span><span class="o">&gt;</span><span class="p">),</span> <span class="n">ForwardRef</span><span class="p">(</span><span class="o">&lt;</span><span class="n">Types</span><span class="o">.</span><span class="n">SINE_WAVE</span><span class="p">:</span> <span class="s1">&#39;SINE_WAVE&#39;</span><span class="o">&gt;</span><span class="p">),</span> <span class="n">ForwardRef</span><span class="p">(</span><span class="o">&lt;</span><span class="n">Types</span><span class="o">.</span><span class="n">SQUARE_GRID</span><span class="p">:</span> <span class="s1">&#39;SQUARE_GRID&#39;</span><span class="o">&gt;</span><span class="p">),</span> <span class="n">ForwardRef</span><span class="p">(</span><span class="o">&lt;</span><span class="n">Types</span><span class="o">.</span><span class="n">STAR</span><span class="p">:</span> <span class="s1">&#39;STAR&#39;</span><span class="o">&gt;</span><span class="p">),</span> <span class="n">ForwardRef</span><span class="p">(</span><span class="o">&lt;</span><span class="n">Types</span><span class="o">.</span><span class="n">SVG_PATH</span><span class="p">:</span> <span class="s1">&#39;SVG_PATH&#39;</span><span class="o">&gt;</span><span class="p">),</span> <span class="n">ForwardRef</span><span class="p">(</span><span class="o">&lt;</span><span class="n">Types</span><span class="o">.</span><span class="n">TAG</span><span class="p">:</span> <span class="s1">&#39;TAG&#39;</span><span class="o">&gt;</span><span class="p">),</span> <span class="n">ForwardRef</span><span class="p">(</span><span class="o">&lt;</span><span class="n">Types</span><span class="o">.</span><span class="n">TURTLE</span><span class="p">:</span> <span class="s1">&#39;TURTLE&#39;</span><span class="o">&gt;</span><span class="p">),</span> <span class="nb">list</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">]</span>,</span><span class="param">	<span class="n">pos</span><span class="p">:</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>,</span><span class="param">	<span class="n">angle</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mi">0</span>,</span><span class="param">	<span class="n">rotocenter</span><span class="p">:</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>,</span><span class="param">	<span class="n">scale</span><span class="o">=</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>,</span><span class="param">	<span class="n">about</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>,</span><span class="param">	<span class="o">**</span><span class="n">kwargs</span></span><span class="return-annotation">) -> <span class="n">typing_extensions</span><span class="o">.</span><span class="n">Self</span>:</span></span>

                <label class="view-source-button" for="Canvas.draw-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Canvas.draw"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Canvas.draw-567"><a href="#Canvas.draw-567"><span class="linenos">567</span></a>    <span class="k">def</span> <span class="nf">draw</span><span class="p">(</span>
</span><span id="Canvas.draw-568"><a href="#Canvas.draw-568"><span class="linenos">568</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="Canvas.draw-569"><a href="#Canvas.draw-569"><span class="linenos">569</span></a>        <span class="n">item_s</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">Drawable</span><span class="p">,</span> <span class="nb">list</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">],</span>
</span><span id="Canvas.draw-570"><a href="#Canvas.draw-570"><span class="linenos">570</span></a>        <span class="n">pos</span><span class="p">:</span> <span class="n">Point</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="Canvas.draw-571"><a href="#Canvas.draw-571"><span class="linenos">571</span></a>        <span class="n">angle</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
</span><span id="Canvas.draw-572"><a href="#Canvas.draw-572"><span class="linenos">572</span></a>        <span class="n">rotocenter</span><span class="p">:</span> <span class="n">Point</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
</span><span id="Canvas.draw-573"><a href="#Canvas.draw-573"><span class="linenos">573</span></a>        <span class="n">scale</span><span class="o">=</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
</span><span id="Canvas.draw-574"><a href="#Canvas.draw-574"><span class="linenos">574</span></a>        <span class="n">about</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
</span><span id="Canvas.draw-575"><a href="#Canvas.draw-575"><span class="linenos">575</span></a>        <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
</span><span id="Canvas.draw-576"><a href="#Canvas.draw-576"><span class="linenos">576</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Self</span><span class="p">:</span>
</span><span id="Canvas.draw-577"><a href="#Canvas.draw-577"><span class="linenos">577</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Canvas.draw-578"><a href="#Canvas.draw-578"><span class="linenos">578</span></a><span class="sd">        Draw the item_s. item_s can be a single item or a list of items.</span>
</span><span id="Canvas.draw-579"><a href="#Canvas.draw-579"><span class="linenos">579</span></a>
</span><span id="Canvas.draw-580"><a href="#Canvas.draw-580"><span class="linenos">580</span></a><span class="sd">        Args:</span>
</span><span id="Canvas.draw-581"><a href="#Canvas.draw-581"><span class="linenos">581</span></a><span class="sd">            item_s (Union[Drawable, list, tuple]): The item(s) to draw.</span>
</span><span id="Canvas.draw-582"><a href="#Canvas.draw-582"><span class="linenos">582</span></a><span class="sd">            pos (Point, optional): The position to draw the item(s), defaults to None.</span>
</span><span id="Canvas.draw-583"><a href="#Canvas.draw-583"><span class="linenos">583</span></a><span class="sd">            angle (float, optional): The angle to rotate the item(s), defaults to 0.</span>
</span><span id="Canvas.draw-584"><a href="#Canvas.draw-584"><span class="linenos">584</span></a><span class="sd">            rotocenter (Point, optional): The point about which to rotate, defaults to (0, 0).</span>
</span><span id="Canvas.draw-585"><a href="#Canvas.draw-585"><span class="linenos">585</span></a><span class="sd">            scale (tuple, optional): The scale factors for the x and y axes, defaults to (1, 1).</span>
</span><span id="Canvas.draw-586"><a href="#Canvas.draw-586"><span class="linenos">586</span></a><span class="sd">            about (tuple, optional): The point about which to scale, defaults to (0, 0).</span>
</span><span id="Canvas.draw-587"><a href="#Canvas.draw-587"><span class="linenos">587</span></a><span class="sd">            kwargs (dict): Additional keyword arguments.</span>
</span><span id="Canvas.draw-588"><a href="#Canvas.draw-588"><span class="linenos">588</span></a>
</span><span id="Canvas.draw-589"><a href="#Canvas.draw-589"><span class="linenos">589</span></a><span class="sd">        Returns:</span>
</span><span id="Canvas.draw-590"><a href="#Canvas.draw-590"><span class="linenos">590</span></a><span class="sd">            Self: The canvas object.</span>
</span><span id="Canvas.draw-591"><a href="#Canvas.draw-591"><span class="linenos">591</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Canvas.draw-592"><a href="#Canvas.draw-592"><span class="linenos">592</span></a>        <span class="n">sketch_xform</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_sketch_xform_matrix</span>
</span><span id="Canvas.draw-593"><a href="#Canvas.draw-593"><span class="linenos">593</span></a>        <span class="k">if</span> <span class="n">pos</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Canvas.draw-594"><a href="#Canvas.draw-594"><span class="linenos">594</span></a>            <span class="n">sketch_xform</span> <span class="o">=</span> <span class="n">translation_matrix</span><span class="p">(</span><span class="o">*</span><span class="n">pos</span><span class="p">[:</span><span class="mi">2</span><span class="p">])</span> <span class="o">@</span> <span class="n">sketch_xform</span>
</span><span id="Canvas.draw-595"><a href="#Canvas.draw-595"><span class="linenos">595</span></a>        <span class="k">if</span> <span class="n">scale</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">!=</span> <span class="mi">1</span> <span class="ow">or</span> <span class="n">scale</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">!=</span> <span class="mi">1</span><span class="p">:</span>
</span><span id="Canvas.draw-596"><a href="#Canvas.draw-596"><span class="linenos">596</span></a>            <span class="n">sketch_xform</span> <span class="o">=</span> <span class="n">scale_in_place_matrix</span><span class="p">(</span><span class="o">*</span><span class="n">pos</span><span class="p">[:</span><span class="mi">2</span><span class="p">],</span> <span class="n">about</span><span class="p">)</span> <span class="o">@</span> <span class="n">sketch_xform</span>
</span><span id="Canvas.draw-597"><a href="#Canvas.draw-597"><span class="linenos">597</span></a>        <span class="k">if</span> <span class="n">angle</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="Canvas.draw-598"><a href="#Canvas.draw-598"><span class="linenos">598</span></a>            <span class="n">sketch_xform</span> <span class="o">=</span> <span class="n">rotation_matrix</span><span class="p">(</span><span class="n">angle</span><span class="p">,</span> <span class="n">rotocenter</span><span class="p">)</span> <span class="o">@</span> <span class="n">sketch_xform</span>
</span><span id="Canvas.draw-599"><a href="#Canvas.draw-599"><span class="linenos">599</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_sketch_xform_matrix</span> <span class="o">=</span> <span class="n">sketch_xform</span> <span class="o">@</span> <span class="bp">self</span><span class="o">.</span><span class="n">_xform_matrix</span>
</span><span id="Canvas.draw-600"><a href="#Canvas.draw-600"><span class="linenos">600</span></a>
</span><span id="Canvas.draw-601"><a href="#Canvas.draw-601"><span class="linenos">601</span></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">item_s</span><span class="p">,</span> <span class="p">(</span><span class="nb">list</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">)):</span>
</span><span id="Canvas.draw-602"><a href="#Canvas.draw-602"><span class="linenos">602</span></a>            <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">item_s</span><span class="p">:</span>
</span><span id="Canvas.draw-603"><a href="#Canvas.draw-603"><span class="linenos">603</span></a>                <span class="n">draw</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</span><span id="Canvas.draw-604"><a href="#Canvas.draw-604"><span class="linenos">604</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="Canvas.draw-605"><a href="#Canvas.draw-605"><span class="linenos">605</span></a>            <span class="n">draw</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item_s</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</span><span id="Canvas.draw-606"><a href="#Canvas.draw-606"><span class="linenos">606</span></a>
</span><span id="Canvas.draw-607"><a href="#Canvas.draw-607"><span class="linenos">607</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_sketch_xform_matrix</span> <span class="o">=</span> <span class="n">identity_matrix</span><span class="p">()</span>
</span><span id="Canvas.draw-608"><a href="#Canvas.draw-608"><span class="linenos">608</span></a>
</span><span id="Canvas.draw-609"><a href="#Canvas.draw-609"><span class="linenos">609</span></a>        <span class="k">return</span> <span class="bp">self</span>
</span></pre></div>


            <div class="docstring"><p>Draw the item_s. item_s can be a single item or a list of items.</p>

<p>Args:
    item_s (Union[Drawable, list, tuple]): The item(s) to draw.
    pos (Point, optional): The position to draw the item(s), defaults to None.
    angle (float, optional): The angle to rotate the item(s), defaults to 0.
    rotocenter (Point, optional): The point about which to rotate, defaults to (0, 0).
    scale (tuple, optional): The scale factors for the x and y axes, defaults to (1, 1).
    about (tuple, optional): The point about which to scale, defaults to (0, 0).
    kwargs (dict): Additional keyword arguments.</p>

<p>Returns:
    Self: The canvas object.</p>
</div>


                            </div>
                            <div id="Canvas.draw_CS" class="classattr">
                                        <input id="Canvas.draw_CS-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">draw_CS</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">size</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="kc">None</span>, </span><span class="param"><span class="o">**</span><span class="n">kwargs</span></span><span class="return-annotation">) -> <span class="n">typing_extensions</span><span class="o">.</span><span class="n">Self</span>:</span></span>

                <label class="view-source-button" for="Canvas.draw_CS-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Canvas.draw_CS"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Canvas.draw_CS-611"><a href="#Canvas.draw_CS-611"><span class="linenos">611</span></a>    <span class="k">def</span> <span class="nf">draw_CS</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">size</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Self</span><span class="p">:</span>
</span><span id="Canvas.draw_CS-612"><a href="#Canvas.draw_CS-612"><span class="linenos">612</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Canvas.draw_CS-613"><a href="#Canvas.draw_CS-613"><span class="linenos">613</span></a><span class="sd">        Draw the Canvas coordinate system.</span>
</span><span id="Canvas.draw_CS-614"><a href="#Canvas.draw_CS-614"><span class="linenos">614</span></a>
</span><span id="Canvas.draw_CS-615"><a href="#Canvas.draw_CS-615"><span class="linenos">615</span></a><span class="sd">        Args:</span>
</span><span id="Canvas.draw_CS-616"><a href="#Canvas.draw_CS-616"><span class="linenos">616</span></a><span class="sd">            size (float, optional): The size of the coordinate system, defaults to None.</span>
</span><span id="Canvas.draw_CS-617"><a href="#Canvas.draw_CS-617"><span class="linenos">617</span></a><span class="sd">            kwargs (dict): Additional keyword arguments.</span>
</span><span id="Canvas.draw_CS-618"><a href="#Canvas.draw_CS-618"><span class="linenos">618</span></a>
</span><span id="Canvas.draw_CS-619"><a href="#Canvas.draw_CS-619"><span class="linenos">619</span></a><span class="sd">        Returns:</span>
</span><span id="Canvas.draw_CS-620"><a href="#Canvas.draw_CS-620"><span class="linenos">620</span></a><span class="sd">            Self: The canvas object.</span>
</span><span id="Canvas.draw_CS-621"><a href="#Canvas.draw_CS-621"><span class="linenos">621</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Canvas.draw_CS-622"><a href="#Canvas.draw_CS-622"><span class="linenos">622</span></a>        <span class="n">draw</span><span class="o">.</span><span class="n">draw_CS</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">size</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</span><span id="Canvas.draw_CS-623"><a href="#Canvas.draw_CS-623"><span class="linenos">623</span></a>        <span class="k">return</span> <span class="bp">self</span>
</span></pre></div>


            <div class="docstring"><p>Draw the Canvas coordinate system.</p>

<p>Args:
    size (float, optional): The size of the coordinate system, defaults to None.
    kwargs (dict): Additional keyword arguments.</p>

<p>Returns:
    Self: The canvas object.</p>
</div>


                            </div>
                            <div id="Canvas.draw_image" class="classattr">
                                        <input id="Canvas.draw_image-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">draw_image</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">image</span><span class="p">:</span> <span class="n"><a href="../image/image.html#Image">simetri.image.image.Image</a></span></span><span class="return-annotation">) -> <span class="n">typing_extensions</span><span class="o">.</span><span class="n">Self</span>:</span></span>

                <label class="view-source-button" for="Canvas.draw_image-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Canvas.draw_image"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Canvas.draw_image-625"><a href="#Canvas.draw_image-625"><span class="linenos">625</span></a>    <span class="k">def</span> <span class="nf">draw_image</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">image</span><span class="p">:</span><span class="n">Image</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Self</span><span class="p">:</span>
</span><span id="Canvas.draw_image-626"><a href="#Canvas.draw_image-626"><span class="linenos">626</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Canvas.draw_image-627"><a href="#Canvas.draw_image-627"><span class="linenos">627</span></a><span class="sd">        Draw an image on the canvas.</span>
</span><span id="Canvas.draw_image-628"><a href="#Canvas.draw_image-628"><span class="linenos">628</span></a>
</span><span id="Canvas.draw_image-629"><a href="#Canvas.draw_image-629"><span class="linenos">629</span></a><span class="sd">        Args:</span>
</span><span id="Canvas.draw_image-630"><a href="#Canvas.draw_image-630"><span class="linenos">630</span></a><span class="sd">            image (Image): The image to draw.</span>
</span><span id="Canvas.draw_image-631"><a href="#Canvas.draw_image-631"><span class="linenos">631</span></a>
</span><span id="Canvas.draw_image-632"><a href="#Canvas.draw_image-632"><span class="linenos">632</span></a><span class="sd">        Returns:</span>
</span><span id="Canvas.draw_image-633"><a href="#Canvas.draw_image-633"><span class="linenos">633</span></a><span class="sd">            Self: The canvas object.</span>
</span><span id="Canvas.draw_image-634"><a href="#Canvas.draw_image-634"><span class="linenos">634</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Canvas.draw_image-635"><a href="#Canvas.draw_image-635"><span class="linenos">635</span></a>        <span class="n">draw</span><span class="o">.</span><span class="n">draw_image</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">image</span><span class="p">)</span>
</span><span id="Canvas.draw_image-636"><a href="#Canvas.draw_image-636"><span class="linenos">636</span></a>        <span class="k">return</span> <span class="bp">self</span>
</span></pre></div>


            <div class="docstring"><p>Draw an image on the canvas.</p>

<p>Args:
    image (Image): The image to draw.</p>

<p>Returns:
    Self: The canvas object.</p>
</div>


                            </div>
                            <div id="Canvas.draw_frame" class="classattr">
                                        <input id="Canvas.draw_frame-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">draw_frame</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">margin</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>,</span><span class="param">	<span class="n">width</span><span class="o">=</span><span class="kc">None</span>,</span><span class="param">	<span class="o">**</span><span class="n">kwargs</span></span><span class="return-annotation">) -> <span class="n">typing_extensions</span><span class="o">.</span><span class="n">Self</span>:</span></span>

                <label class="view-source-button" for="Canvas.draw_frame-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Canvas.draw_frame"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Canvas.draw_frame-638"><a href="#Canvas.draw_frame-638"><span class="linenos">638</span></a>    <span class="k">def</span> <span class="nf">draw_frame</span><span class="p">(</span>
</span><span id="Canvas.draw_frame-639"><a href="#Canvas.draw_frame-639"><span class="linenos">639</span></a>        <span class="bp">self</span><span class="p">,</span> <span class="n">margin</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span>
</span><span id="Canvas.draw_frame-640"><a href="#Canvas.draw_frame-640"><span class="linenos">640</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Self</span><span class="p">:</span>
</span><span id="Canvas.draw_frame-641"><a href="#Canvas.draw_frame-641"><span class="linenos">641</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Canvas.draw_frame-642"><a href="#Canvas.draw_frame-642"><span class="linenos">642</span></a><span class="sd">        Draw a frame around the canvas.</span>
</span><span id="Canvas.draw_frame-643"><a href="#Canvas.draw_frame-643"><span class="linenos">643</span></a>
</span><span id="Canvas.draw_frame-644"><a href="#Canvas.draw_frame-644"><span class="linenos">644</span></a><span class="sd">        Args:</span>
</span><span id="Canvas.draw_frame-645"><a href="#Canvas.draw_frame-645"><span class="linenos">645</span></a><span class="sd">            margins (Union[float, Sequence]): The margins of the frame.</span>
</span><span id="Canvas.draw_frame-646"><a href="#Canvas.draw_frame-646"><span class="linenos">646</span></a><span class="sd">            kwargs (dict): Additional keyword arguments.</span>
</span><span id="Canvas.draw_frame-647"><a href="#Canvas.draw_frame-647"><span class="linenos">647</span></a>
</span><span id="Canvas.draw_frame-648"><a href="#Canvas.draw_frame-648"><span class="linenos">648</span></a><span class="sd">        Returns:</span>
</span><span id="Canvas.draw_frame-649"><a href="#Canvas.draw_frame-649"><span class="linenos">649</span></a><span class="sd">            Self: The canvas object.</span>
</span><span id="Canvas.draw_frame-650"><a href="#Canvas.draw_frame-650"><span class="linenos">650</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Canvas.draw_frame-651"><a href="#Canvas.draw_frame-651"><span class="linenos">651</span></a>        <span class="c1"># to do: add shadow and frame color, shadow width. Check canvas.clip.</span>
</span><span id="Canvas.draw_frame-652"><a href="#Canvas.draw_frame-652"><span class="linenos">652</span></a>        <span class="k">if</span> <span class="n">margin</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Canvas.draw_frame-653"><a href="#Canvas.draw_frame-653"><span class="linenos">653</span></a>            <span class="n">margin</span> <span class="o">=</span> <span class="n">defaults</span><span class="p">[</span><span class="s2">&quot;canvas_frame_margin&quot;</span><span class="p">]</span>
</span><span id="Canvas.draw_frame-654"><a href="#Canvas.draw_frame-654"><span class="linenos">654</span></a>        <span class="k">if</span> <span class="n">width</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Canvas.draw_frame-655"><a href="#Canvas.draw_frame-655"><span class="linenos">655</span></a>            <span class="n">width</span> <span class="o">=</span> <span class="n">defaults</span><span class="p">[</span><span class="s2">&quot;canvas_frame_width&quot;</span><span class="p">]</span>
</span><span id="Canvas.draw_frame-656"><a href="#Canvas.draw_frame-656"><span class="linenos">656</span></a>        <span class="n">b_box</span> <span class="o">=</span> <span class="n">bounding_box</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_all_vertices</span><span class="p">)</span>
</span><span id="Canvas.draw_frame-657"><a href="#Canvas.draw_frame-657"><span class="linenos">657</span></a>        <span class="n">box2</span> <span class="o">=</span> <span class="n">b_box</span><span class="o">.</span><span class="n">get_inflated_b_box</span><span class="p">(</span><span class="n">margin</span><span class="p">)</span>
</span><span id="Canvas.draw_frame-658"><a href="#Canvas.draw_frame-658"><span class="linenos">658</span></a>        <span class="n">box3</span> <span class="o">=</span> <span class="n">box2</span><span class="o">.</span><span class="n">get_inflated_b_box</span><span class="p">(</span><span class="mi">15</span><span class="p">)</span>
</span><span id="Canvas.draw_frame-659"><a href="#Canvas.draw_frame-659"><span class="linenos">659</span></a>        <span class="n">shadow</span> <span class="o">=</span> <span class="n">Shape</span><span class="p">([</span><span class="n">box3</span><span class="o">.</span><span class="n">northwest</span><span class="p">,</span> <span class="n">box3</span><span class="o">.</span><span class="n">southwest</span><span class="p">,</span> <span class="n">box3</span><span class="o">.</span><span class="n">southeast</span><span class="p">])</span>
</span><span id="Canvas.draw_frame-660"><a href="#Canvas.draw_frame-660"><span class="linenos">660</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="n">shadow</span><span class="p">,</span> <span class="n">line_color</span><span class="o">=</span><span class="n">light_gray</span><span class="p">,</span> <span class="n">line_width</span><span class="o">=</span><span class="n">width</span><span class="p">)</span>
</span><span id="Canvas.draw_frame-661"><a href="#Canvas.draw_frame-661"><span class="linenos">661</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="n">Shape</span><span class="p">(</span><span class="n">box2</span><span class="o">.</span><span class="n">corners</span><span class="p">,</span> <span class="n">closed</span><span class="o">=</span><span class="kc">True</span><span class="p">),</span> <span class="n">fill</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">line_width</span><span class="o">=</span><span class="n">width</span><span class="p">)</span>
</span><span id="Canvas.draw_frame-662"><a href="#Canvas.draw_frame-662"><span class="linenos">662</span></a>
</span><span id="Canvas.draw_frame-663"><a href="#Canvas.draw_frame-663"><span class="linenos">663</span></a>        <span class="k">return</span> <span class="bp">self</span>
</span></pre></div>


            <div class="docstring"><p>Draw a frame around the canvas.</p>

<p>Args:
    margins (Union[float, Sequence]): The margins of the frame.
    kwargs (dict): Additional keyword arguments.</p>

<p>Returns:
    Self: The canvas object.</p>
</div>


                            </div>
                            <div id="Canvas.reset" class="classattr">
                                        <input id="Canvas.reset-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">reset</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="n">typing_extensions</span><span class="o">.</span><span class="n">Self</span>:</span></span>

                <label class="view-source-button" for="Canvas.reset-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Canvas.reset"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Canvas.reset-665"><a href="#Canvas.reset-665"><span class="linenos">665</span></a>    <span class="k">def</span> <span class="nf">reset</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Self</span><span class="p">:</span>
</span><span id="Canvas.reset-666"><a href="#Canvas.reset-666"><span class="linenos">666</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Canvas.reset-667"><a href="#Canvas.reset-667"><span class="linenos">667</span></a><span class="sd">        Reset the canvas to its initial state.</span>
</span><span id="Canvas.reset-668"><a href="#Canvas.reset-668"><span class="linenos">668</span></a>
</span><span id="Canvas.reset-669"><a href="#Canvas.reset-669"><span class="linenos">669</span></a><span class="sd">        Returns:</span>
</span><span id="Canvas.reset-670"><a href="#Canvas.reset-670"><span class="linenos">670</span></a><span class="sd">            Self: The canvas object.</span>
</span><span id="Canvas.reset-671"><a href="#Canvas.reset-671"><span class="linenos">671</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Canvas.reset-672"><a href="#Canvas.reset-672"><span class="linenos">672</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_code</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="Canvas.reset-673"><a href="#Canvas.reset-673"><span class="linenos">673</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">preamble</span> <span class="o">=</span> <span class="n">defaults</span><span class="p">[</span><span class="s2">&quot;preamble&quot;</span><span class="p">]</span>
</span><span id="Canvas.reset-674"><a href="#Canvas.reset-674"><span class="linenos">674</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">pages</span> <span class="o">=</span> <span class="p">[</span><span class="n">Page</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">size</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">back_color</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">border</span><span class="p">)]</span>
</span><span id="Canvas.reset-675"><a href="#Canvas.reset-675"><span class="linenos">675</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">active_page</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pages</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="Canvas.reset-676"><a href="#Canvas.reset-676"><span class="linenos">676</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_all_vertices</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="Canvas.reset-677"><a href="#Canvas.reset-677"><span class="linenos">677</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">tex</span><span class="p">:</span> <span class="n">Tex</span> <span class="o">=</span> <span class="n">Tex</span><span class="p">()</span>
</span><span id="Canvas.reset-678"><a href="#Canvas.reset-678"><span class="linenos">678</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">clip</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>  <span class="c1"># if true then clip the canvas to the mask</span>
</span><span id="Canvas.reset-679"><a href="#Canvas.reset-679"><span class="linenos">679</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_xform_matrix</span> <span class="o">=</span> <span class="n">identity_matrix</span><span class="p">()</span>
</span><span id="Canvas.reset-680"><a href="#Canvas.reset-680"><span class="linenos">680</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_sketch_xform_matrix</span> <span class="o">=</span> <span class="n">identity_matrix</span><span class="p">()</span>
</span><span id="Canvas.reset-681"><a href="#Canvas.reset-681"><span class="linenos">681</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">active_page</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pages</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="Canvas.reset-682"><a href="#Canvas.reset-682"><span class="linenos">682</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_all_vertices</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="Canvas.reset-683"><a href="#Canvas.reset-683"><span class="linenos">683</span></a>        <span class="k">return</span> <span class="bp">self</span>
</span></pre></div>


            <div class="docstring"><p>Reset the canvas to its initial state.</p>

<p>Returns:
    Self: The canvas object.</p>
</div>


                            </div>
                            <div id="Canvas.pos" class="classattr">
                                        <input id="Canvas.pos-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">pos</span><span class="annotation">: Sequence[float]</span>

                <label class="view-source-button" for="Canvas.pos-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Canvas.pos"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Canvas.pos-703"><a href="#Canvas.pos-703"><span class="linenos">703</span></a>    <span class="nd">@property</span>
</span><span id="Canvas.pos-704"><a href="#Canvas.pos-704"><span class="linenos">704</span></a>    <span class="k">def</span> <span class="nf">pos</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Point</span><span class="p">:</span>
</span><span id="Canvas.pos-705"><a href="#Canvas.pos-705"><span class="linenos">705</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Canvas.pos-706"><a href="#Canvas.pos-706"><span class="linenos">706</span></a><span class="sd">        The position of the canvas.</span>
</span><span id="Canvas.pos-707"><a href="#Canvas.pos-707"><span class="linenos">707</span></a>
</span><span id="Canvas.pos-708"><a href="#Canvas.pos-708"><span class="linenos">708</span></a><span class="sd">        Args:</span>
</span><span id="Canvas.pos-709"><a href="#Canvas.pos-709"><span class="linenos">709</span></a><span class="sd">            point (Point, optional): The point to set the position to.</span>
</span><span id="Canvas.pos-710"><a href="#Canvas.pos-710"><span class="linenos">710</span></a>
</span><span id="Canvas.pos-711"><a href="#Canvas.pos-711"><span class="linenos">711</span></a><span class="sd">        Returns:</span>
</span><span id="Canvas.pos-712"><a href="#Canvas.pos-712"><span class="linenos">712</span></a><span class="sd">            Point: The position of the canvas.</span>
</span><span id="Canvas.pos-713"><a href="#Canvas.pos-713"><span class="linenos">713</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Canvas.pos-714"><a href="#Canvas.pos-714"><span class="linenos">714</span></a>
</span><span id="Canvas.pos-715"><a href="#Canvas.pos-715"><span class="linenos">715</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_xform_matrix</span><span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="p">:</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">tolist</span><span class="p">()[:</span><span class="mi">2</span><span class="p">]</span>
</span></pre></div>


            <div class="docstring"><p>The position of the canvas.</p>

<p>Args:
    point (Point, optional): The point to set the position to.</p>

<p>Returns:
    Point: The position of the canvas.</p>
</div>


                            </div>
                            <div id="Canvas.angle" class="classattr">
                                        <input id="Canvas.angle-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">angle</span><span class="annotation">: float</span>

                <label class="view-source-button" for="Canvas.angle-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Canvas.angle"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Canvas.angle-727"><a href="#Canvas.angle-727"><span class="linenos">727</span></a>    <span class="nd">@property</span>
</span><span id="Canvas.angle-728"><a href="#Canvas.angle-728"><span class="linenos">728</span></a>    <span class="k">def</span> <span class="nf">angle</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
</span><span id="Canvas.angle-729"><a href="#Canvas.angle-729"><span class="linenos">729</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Canvas.angle-730"><a href="#Canvas.angle-730"><span class="linenos">730</span></a><span class="sd">        The angle of the canvas.</span>
</span><span id="Canvas.angle-731"><a href="#Canvas.angle-731"><span class="linenos">731</span></a>
</span><span id="Canvas.angle-732"><a href="#Canvas.angle-732"><span class="linenos">732</span></a><span class="sd">        Returns:</span>
</span><span id="Canvas.angle-733"><a href="#Canvas.angle-733"><span class="linenos">733</span></a><span class="sd">            float: The angle of the canvas.</span>
</span><span id="Canvas.angle-734"><a href="#Canvas.angle-734"><span class="linenos">734</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Canvas.angle-735"><a href="#Canvas.angle-735"><span class="linenos">735</span></a>        <span class="n">xform</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_xform_matrix</span>
</span><span id="Canvas.angle-736"><a href="#Canvas.angle-736"><span class="linenos">736</span></a>
</span><span id="Canvas.angle-737"><a href="#Canvas.angle-737"><span class="linenos">737</span></a>        <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">arctan2</span><span class="p">(</span><span class="n">xform</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="n">xform</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">])</span>
</span></pre></div>


            <div class="docstring"><p>The angle of the canvas.</p>

<p>Returns:
    float: The angle of the canvas.</p>
</div>


                            </div>
                            <div id="Canvas.scale" class="classattr">
                                        <input id="Canvas.scale-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">scale</span><span class="annotation">: Tuple[float, float]</span>

                <label class="view-source-button" for="Canvas.scale-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Canvas.scale"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Canvas.scale-749"><a href="#Canvas.scale-749"><span class="linenos">749</span></a>    <span class="nd">@property</span>
</span><span id="Canvas.scale-750"><a href="#Canvas.scale-750"><span class="linenos">750</span></a>    <span class="k">def</span> <span class="nf">scale</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Vec2</span><span class="p">:</span>
</span><span id="Canvas.scale-751"><a href="#Canvas.scale-751"><span class="linenos">751</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Canvas.scale-752"><a href="#Canvas.scale-752"><span class="linenos">752</span></a><span class="sd">        The scale of the canvas.</span>
</span><span id="Canvas.scale-753"><a href="#Canvas.scale-753"><span class="linenos">753</span></a>
</span><span id="Canvas.scale-754"><a href="#Canvas.scale-754"><span class="linenos">754</span></a><span class="sd">        Returns:</span>
</span><span id="Canvas.scale-755"><a href="#Canvas.scale-755"><span class="linenos">755</span></a><span class="sd">            Vec2: The scale of the canvas.</span>
</span><span id="Canvas.scale-756"><a href="#Canvas.scale-756"><span class="linenos">756</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Canvas.scale-757"><a href="#Canvas.scale-757"><span class="linenos">757</span></a>        <span class="n">xform</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_xform_matrix</span>
</span><span id="Canvas.scale-758"><a href="#Canvas.scale-758"><span class="linenos">758</span></a>
</span><span id="Canvas.scale-759"><a href="#Canvas.scale-759"><span class="linenos">759</span></a>        <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">linalg</span><span class="o">.</span><span class="n">norm</span><span class="p">(</span><span class="n">xform</span><span class="p">[:</span><span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">]),</span> <span class="n">np</span><span class="o">.</span><span class="n">linalg</span><span class="o">.</span><span class="n">norm</span><span class="p">(</span><span class="n">xform</span><span class="p">[:</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">])</span>
</span></pre></div>


            <div class="docstring"><p>The scale of the canvas.</p>

<p>Returns:
    Vec2: The scale of the canvas.</p>
</div>


                            </div>
                            <div id="Canvas.xform_matrix" class="classattr">
                                        <input id="Canvas.xform_matrix-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">xform_matrix</span><span class="annotation">: numpy.ndarray</span>

                <label class="view-source-button" for="Canvas.xform_matrix-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Canvas.xform_matrix"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Canvas.xform_matrix-780"><a href="#Canvas.xform_matrix-780"><span class="linenos">780</span></a>    <span class="nd">@property</span>
</span><span id="Canvas.xform_matrix-781"><a href="#Canvas.xform_matrix-781"><span class="linenos">781</span></a>    <span class="k">def</span> <span class="nf">xform_matrix</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;np.ndarray&quot;</span><span class="p">:</span>
</span><span id="Canvas.xform_matrix-782"><a href="#Canvas.xform_matrix-782"><span class="linenos">782</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Canvas.xform_matrix-783"><a href="#Canvas.xform_matrix-783"><span class="linenos">783</span></a><span class="sd">        The transformation matrix of the canvas.</span>
</span><span id="Canvas.xform_matrix-784"><a href="#Canvas.xform_matrix-784"><span class="linenos">784</span></a>
</span><span id="Canvas.xform_matrix-785"><a href="#Canvas.xform_matrix-785"><span class="linenos">785</span></a><span class="sd">        Returns:</span>
</span><span id="Canvas.xform_matrix-786"><a href="#Canvas.xform_matrix-786"><span class="linenos">786</span></a><span class="sd">            np.ndarray: The transformation matrix of the canvas.</span>
</span><span id="Canvas.xform_matrix-787"><a href="#Canvas.xform_matrix-787"><span class="linenos">787</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Canvas.xform_matrix-788"><a href="#Canvas.xform_matrix-788"><span class="linenos">788</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_xform_matrix</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
</span></pre></div>


            <div class="docstring"><p>The transformation matrix of the canvas.</p>

<p>Returns:
    np.ndarray: The transformation matrix of the canvas.</p>
</div>


                            </div>
                            <div id="Canvas.transform" class="classattr">
                                        <input id="Canvas.transform-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">transform</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">transform_matrix</span><span class="p">:</span> <span class="n">numpy</span><span class="o">.</span><span class="n">ndarray</span></span><span class="return-annotation">) -> <span class="n">typing_extensions</span><span class="o">.</span><span class="n">Self</span>:</span></span>

                <label class="view-source-button" for="Canvas.transform-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Canvas.transform"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Canvas.transform-790"><a href="#Canvas.transform-790"><span class="linenos">790</span></a>    <span class="k">def</span> <span class="nf">transform</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">transform_matrix</span><span class="p">:</span> <span class="s2">&quot;np.ndarray&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Self</span><span class="p">:</span>
</span><span id="Canvas.transform-791"><a href="#Canvas.transform-791"><span class="linenos">791</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Canvas.transform-792"><a href="#Canvas.transform-792"><span class="linenos">792</span></a><span class="sd">        Transforms the canvas by the given transformation matrix.</span>
</span><span id="Canvas.transform-793"><a href="#Canvas.transform-793"><span class="linenos">793</span></a>
</span><span id="Canvas.transform-794"><a href="#Canvas.transform-794"><span class="linenos">794</span></a><span class="sd">        Args:</span>
</span><span id="Canvas.transform-795"><a href="#Canvas.transform-795"><span class="linenos">795</span></a><span class="sd">            transform_matrix (np.ndarray): The transformation matrix.</span>
</span><span id="Canvas.transform-796"><a href="#Canvas.transform-796"><span class="linenos">796</span></a>
</span><span id="Canvas.transform-797"><a href="#Canvas.transform-797"><span class="linenos">797</span></a><span class="sd">        Returns:</span>
</span><span id="Canvas.transform-798"><a href="#Canvas.transform-798"><span class="linenos">798</span></a><span class="sd">            Self: The Canvas object.</span>
</span><span id="Canvas.transform-799"><a href="#Canvas.transform-799"><span class="linenos">799</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Canvas.transform-800"><a href="#Canvas.transform-800"><span class="linenos">800</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_xform_matrix</span> <span class="o">=</span> <span class="n">transform_matrix</span> <span class="o">@</span> <span class="bp">self</span><span class="o">.</span><span class="n">_xform_matrix</span>
</span><span id="Canvas.transform-801"><a href="#Canvas.transform-801"><span class="linenos">801</span></a>
</span><span id="Canvas.transform-802"><a href="#Canvas.transform-802"><span class="linenos">802</span></a>        <span class="k">return</span> <span class="bp">self</span>
</span></pre></div>


            <div class="docstring"><p>Transforms the canvas by the given transformation matrix.</p>

<p>Args:
    transform_matrix (np.ndarray): The transformation matrix.</p>

<p>Returns:
    Self: The Canvas object.</p>
</div>


                            </div>
                            <div id="Canvas.reset_transform" class="classattr">
                                        <input id="Canvas.reset_transform-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">reset_transform</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="n">typing_extensions</span><span class="o">.</span><span class="n">Self</span>:</span></span>

                <label class="view-source-button" for="Canvas.reset_transform-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Canvas.reset_transform"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Canvas.reset_transform-804"><a href="#Canvas.reset_transform-804"><span class="linenos">804</span></a>    <span class="k">def</span> <span class="nf">reset_transform</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Self</span><span class="p">:</span>
</span><span id="Canvas.reset_transform-805"><a href="#Canvas.reset_transform-805"><span class="linenos">805</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Canvas.reset_transform-806"><a href="#Canvas.reset_transform-806"><span class="linenos">806</span></a><span class="sd">        Reset the transformation matrix of the canvas.</span>
</span><span id="Canvas.reset_transform-807"><a href="#Canvas.reset_transform-807"><span class="linenos">807</span></a><span class="sd">        The canvas origin is at (0, 0) and the orientation angle is 0.</span>
</span><span id="Canvas.reset_transform-808"><a href="#Canvas.reset_transform-808"><span class="linenos">808</span></a><span class="sd">        Transformation matrix is the identity matrix.</span>
</span><span id="Canvas.reset_transform-809"><a href="#Canvas.reset_transform-809"><span class="linenos">809</span></a>
</span><span id="Canvas.reset_transform-810"><a href="#Canvas.reset_transform-810"><span class="linenos">810</span></a><span class="sd">        Returns:</span>
</span><span id="Canvas.reset_transform-811"><a href="#Canvas.reset_transform-811"><span class="linenos">811</span></a><span class="sd">            Self: The canvas object.</span>
</span><span id="Canvas.reset_transform-812"><a href="#Canvas.reset_transform-812"><span class="linenos">812</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Canvas.reset_transform-813"><a href="#Canvas.reset_transform-813"><span class="linenos">813</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_xform_matrix</span> <span class="o">=</span> <span class="n">identity_matrix</span><span class="p">()</span>
</span><span id="Canvas.reset_transform-814"><a href="#Canvas.reset_transform-814"><span class="linenos">814</span></a>
</span><span id="Canvas.reset_transform-815"><a href="#Canvas.reset_transform-815"><span class="linenos">815</span></a>        <span class="k">return</span> <span class="bp">self</span>
</span></pre></div>


            <div class="docstring"><p>Reset the transformation matrix of the canvas.
The canvas origin is at (0, 0) and the orientation angle is 0.
Transformation matrix is the identity matrix.</p>

<p>Returns:
    Self: The canvas object.</p>
</div>


                            </div>
                            <div id="Canvas.translate" class="classattr">
                                        <input id="Canvas.translate-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">translate</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">dx</span><span class="p">:</span> <span class="nb">float</span>, </span><span class="param"><span class="n">dy</span><span class="p">:</span> <span class="nb">float</span></span><span class="return-annotation">) -> <span class="n">typing_extensions</span><span class="o">.</span><span class="n">Self</span>:</span></span>

                <label class="view-source-button" for="Canvas.translate-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Canvas.translate"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Canvas.translate-817"><a href="#Canvas.translate-817"><span class="linenos">817</span></a>    <span class="k">def</span> <span class="nf">translate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dx</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">dy</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Self</span><span class="p">:</span>
</span><span id="Canvas.translate-818"><a href="#Canvas.translate-818"><span class="linenos">818</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Canvas.translate-819"><a href="#Canvas.translate-819"><span class="linenos">819</span></a><span class="sd">        Translate the canvas by dx and dy.</span>
</span><span id="Canvas.translate-820"><a href="#Canvas.translate-820"><span class="linenos">820</span></a>
</span><span id="Canvas.translate-821"><a href="#Canvas.translate-821"><span class="linenos">821</span></a><span class="sd">        Args:</span>
</span><span id="Canvas.translate-822"><a href="#Canvas.translate-822"><span class="linenos">822</span></a><span class="sd">            dx (float): The translation distance along the x-axis.</span>
</span><span id="Canvas.translate-823"><a href="#Canvas.translate-823"><span class="linenos">823</span></a><span class="sd">            dy (float): The translation distance along the y-axis.</span>
</span><span id="Canvas.translate-824"><a href="#Canvas.translate-824"><span class="linenos">824</span></a>
</span><span id="Canvas.translate-825"><a href="#Canvas.translate-825"><span class="linenos">825</span></a><span class="sd">        Returns:</span>
</span><span id="Canvas.translate-826"><a href="#Canvas.translate-826"><span class="linenos">826</span></a><span class="sd">            Self: The canvas object.</span>
</span><span id="Canvas.translate-827"><a href="#Canvas.translate-827"><span class="linenos">827</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Canvas.translate-828"><a href="#Canvas.translate-828"><span class="linenos">828</span></a>
</span><span id="Canvas.translate-829"><a href="#Canvas.translate-829"><span class="linenos">829</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_xform_matrix</span> <span class="o">=</span> <span class="n">translation_matrix</span><span class="p">(</span><span class="n">dx</span><span class="p">,</span> <span class="n">dy</span><span class="p">)</span> <span class="o">@</span> <span class="bp">self</span><span class="o">.</span><span class="n">_xform_matrix</span>
</span><span id="Canvas.translate-830"><a href="#Canvas.translate-830"><span class="linenos">830</span></a>
</span><span id="Canvas.translate-831"><a href="#Canvas.translate-831"><span class="linenos">831</span></a>        <span class="k">return</span> <span class="bp">self</span>
</span></pre></div>


            <div class="docstring"><p>Translate the canvas by dx and dy.</p>

<p>Args:
    dx (float): The translation distance along the x-axis.
    dy (float): The translation distance along the y-axis.</p>

<p>Returns:
    Self: The canvas object.</p>
</div>


                            </div>
                            <div id="Canvas.rotate" class="classattr">
                                        <input id="Canvas.rotate-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">rotate</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">angle</span><span class="p">:</span> <span class="nb">float</span>, </span><span class="param"><span class="n">about</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span></span><span class="return-annotation">) -> <span class="n">typing_extensions</span><span class="o">.</span><span class="n">Self</span>:</span></span>

                <label class="view-source-button" for="Canvas.rotate-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Canvas.rotate"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Canvas.rotate-833"><a href="#Canvas.rotate-833"><span class="linenos">833</span></a>    <span class="k">def</span> <span class="nf">rotate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">angle</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">about</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span> <span class="o">-&gt;</span> <span class="n">Self</span><span class="p">:</span>
</span><span id="Canvas.rotate-834"><a href="#Canvas.rotate-834"><span class="linenos">834</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Canvas.rotate-835"><a href="#Canvas.rotate-835"><span class="linenos">835</span></a><span class="sd">        Rotate the canvas by angle in radians about the given point.</span>
</span><span id="Canvas.rotate-836"><a href="#Canvas.rotate-836"><span class="linenos">836</span></a>
</span><span id="Canvas.rotate-837"><a href="#Canvas.rotate-837"><span class="linenos">837</span></a><span class="sd">        Args:</span>
</span><span id="Canvas.rotate-838"><a href="#Canvas.rotate-838"><span class="linenos">838</span></a><span class="sd">            angle (float): The rotation angle in radians.</span>
</span><span id="Canvas.rotate-839"><a href="#Canvas.rotate-839"><span class="linenos">839</span></a><span class="sd">            about (tuple): The point about which to rotate the canvas.</span>
</span><span id="Canvas.rotate-840"><a href="#Canvas.rotate-840"><span class="linenos">840</span></a>
</span><span id="Canvas.rotate-841"><a href="#Canvas.rotate-841"><span class="linenos">841</span></a><span class="sd">        Returns:</span>
</span><span id="Canvas.rotate-842"><a href="#Canvas.rotate-842"><span class="linenos">842</span></a><span class="sd">            Self: The canvas object.</span>
</span><span id="Canvas.rotate-843"><a href="#Canvas.rotate-843"><span class="linenos">843</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Canvas.rotate-844"><a href="#Canvas.rotate-844"><span class="linenos">844</span></a>
</span><span id="Canvas.rotate-845"><a href="#Canvas.rotate-845"><span class="linenos">845</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_xform_matrix</span> <span class="o">=</span> <span class="n">rotation_matrix</span><span class="p">(</span><span class="n">angle</span><span class="p">,</span> <span class="n">about</span><span class="p">)</span> <span class="o">@</span> <span class="bp">self</span><span class="o">.</span><span class="n">_xform_matrix</span>
</span><span id="Canvas.rotate-846"><a href="#Canvas.rotate-846"><span class="linenos">846</span></a>
</span><span id="Canvas.rotate-847"><a href="#Canvas.rotate-847"><span class="linenos">847</span></a>        <span class="k">return</span> <span class="bp">self</span>
</span></pre></div>


            <div class="docstring"><p>Rotate the canvas by angle in radians about the given point.</p>

<p>Args:
    angle (float): The rotation angle in radians.
    about (tuple): The point about which to rotate the canvas.</p>

<p>Returns:
    Self: The canvas object.</p>
</div>


                            </div>
                            <div id="Canvas.flip_x_axis" class="classattr">
                                        <input id="Canvas.flip_x_axis-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">flip_x_axis</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="n">typing_extensions</span><span class="o">.</span><span class="n">Self</span>:</span></span>

                <label class="view-source-button" for="Canvas.flip_x_axis-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Canvas.flip_x_axis"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Canvas.flip_x_axis-870"><a href="#Canvas.flip_x_axis-870"><span class="linenos">870</span></a>    <span class="k">def</span> <span class="nf">flip_x_axis</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Self</span><span class="p">:</span>
</span><span id="Canvas.flip_x_axis-871"><a href="#Canvas.flip_x_axis-871"><span class="linenos">871</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Canvas.flip_x_axis-872"><a href="#Canvas.flip_x_axis-872"><span class="linenos">872</span></a><span class="sd">        Flip the x-axis direction. Warning: This will reverse the positive rotation direction.</span>
</span><span id="Canvas.flip_x_axis-873"><a href="#Canvas.flip_x_axis-873"><span class="linenos">873</span></a>
</span><span id="Canvas.flip_x_axis-874"><a href="#Canvas.flip_x_axis-874"><span class="linenos">874</span></a><span class="sd">        Returns:</span>
</span><span id="Canvas.flip_x_axis-875"><a href="#Canvas.flip_x_axis-875"><span class="linenos">875</span></a><span class="sd">            Self: The canvas object.</span>
</span><span id="Canvas.flip_x_axis-876"><a href="#Canvas.flip_x_axis-876"><span class="linenos">876</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Canvas.flip_x_axis-877"><a href="#Canvas.flip_x_axis-877"><span class="linenos">877</span></a>        <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span>
</span><span id="Canvas.flip_x_axis-878"><a href="#Canvas.flip_x_axis-878"><span class="linenos">878</span></a>            <span class="s2">&quot;Flipping the x-axis will change the positive rotation direction.&quot;</span>
</span><span id="Canvas.flip_x_axis-879"><a href="#Canvas.flip_x_axis-879"><span class="linenos">879</span></a>        <span class="p">)</span>
</span><span id="Canvas.flip_x_axis-880"><a href="#Canvas.flip_x_axis-880"><span class="linenos">880</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_flip</span><span class="p">(</span><span class="n">Axis</span><span class="o">.</span><span class="n">X</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Flip the x-axis direction. Warning: This will reverse the positive rotation direction.</p>

<p>Returns:
    Self: The canvas object.</p>
</div>


                            </div>
                            <div id="Canvas.flip_y_axis" class="classattr">
                                        <input id="Canvas.flip_y_axis-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">flip_y_axis</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="n">typing_extensions</span><span class="o">.</span><span class="n">Self</span>:</span></span>

                <label class="view-source-button" for="Canvas.flip_y_axis-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Canvas.flip_y_axis"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Canvas.flip_y_axis-882"><a href="#Canvas.flip_y_axis-882"><span class="linenos">882</span></a>    <span class="k">def</span> <span class="nf">flip_y_axis</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Self</span><span class="p">:</span>
</span><span id="Canvas.flip_y_axis-883"><a href="#Canvas.flip_y_axis-883"><span class="linenos">883</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Canvas.flip_y_axis-884"><a href="#Canvas.flip_y_axis-884"><span class="linenos">884</span></a><span class="sd">        Flip the y-axis direction.</span>
</span><span id="Canvas.flip_y_axis-885"><a href="#Canvas.flip_y_axis-885"><span class="linenos">885</span></a>
</span><span id="Canvas.flip_y_axis-886"><a href="#Canvas.flip_y_axis-886"><span class="linenos">886</span></a><span class="sd">        Returns:</span>
</span><span id="Canvas.flip_y_axis-887"><a href="#Canvas.flip_y_axis-887"><span class="linenos">887</span></a><span class="sd">            Self: The canvas object.</span>
</span><span id="Canvas.flip_y_axis-888"><a href="#Canvas.flip_y_axis-888"><span class="linenos">888</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Canvas.flip_y_axis-889"><a href="#Canvas.flip_y_axis-889"><span class="linenos">889</span></a>        <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span>
</span><span id="Canvas.flip_y_axis-890"><a href="#Canvas.flip_y_axis-890"><span class="linenos">890</span></a>            <span class="s2">&quot;Flipping the y-axis will reverse the positive rotation direction.&quot;</span>
</span><span id="Canvas.flip_y_axis-891"><a href="#Canvas.flip_y_axis-891"><span class="linenos">891</span></a>        <span class="p">)</span>
</span><span id="Canvas.flip_y_axis-892"><a href="#Canvas.flip_y_axis-892"><span class="linenos">892</span></a>
</span><span id="Canvas.flip_y_axis-893"><a href="#Canvas.flip_y_axis-893"><span class="linenos">893</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_flip</span><span class="p">(</span><span class="n">Axis</span><span class="o">.</span><span class="n">Y</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Flip the y-axis direction.</p>

<p>Returns:
    Self: The canvas object.</p>
</div>


                            </div>
                            <div id="Canvas.x" class="classattr">
                                        <input id="Canvas.x-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">x</span><span class="annotation">: float</span>

                <label class="view-source-button" for="Canvas.x-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Canvas.x"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Canvas.x-895"><a href="#Canvas.x-895"><span class="linenos">895</span></a>    <span class="nd">@property</span>
</span><span id="Canvas.x-896"><a href="#Canvas.x-896"><span class="linenos">896</span></a>    <span class="k">def</span> <span class="nf">x</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
</span><span id="Canvas.x-897"><a href="#Canvas.x-897"><span class="linenos">897</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Canvas.x-898"><a href="#Canvas.x-898"><span class="linenos">898</span></a><span class="sd">        The x coordinate of the canvas origin.</span>
</span><span id="Canvas.x-899"><a href="#Canvas.x-899"><span class="linenos">899</span></a>
</span><span id="Canvas.x-900"><a href="#Canvas.x-900"><span class="linenos">900</span></a><span class="sd">        Returns:</span>
</span><span id="Canvas.x-901"><a href="#Canvas.x-901"><span class="linenos">901</span></a><span class="sd">            float: The x coordinate of the canvas origin.</span>
</span><span id="Canvas.x-902"><a href="#Canvas.x-902"><span class="linenos">902</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Canvas.x-903"><a href="#Canvas.x-903"><span class="linenos">903</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">pos</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span></pre></div>


            <div class="docstring"><p>The x coordinate of the canvas origin.</p>

<p>Returns:
    float: The x coordinate of the canvas origin.</p>
</div>


                            </div>
                            <div id="Canvas.y" class="classattr">
                                        <input id="Canvas.y-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">y</span><span class="annotation">: float</span>

                <label class="view-source-button" for="Canvas.y-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Canvas.y"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Canvas.y-915"><a href="#Canvas.y-915"><span class="linenos">915</span></a>    <span class="nd">@property</span>
</span><span id="Canvas.y-916"><a href="#Canvas.y-916"><span class="linenos">916</span></a>    <span class="k">def</span> <span class="nf">y</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
</span><span id="Canvas.y-917"><a href="#Canvas.y-917"><span class="linenos">917</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Canvas.y-918"><a href="#Canvas.y-918"><span class="linenos">918</span></a><span class="sd">        The y coordinate of the canvas origin.</span>
</span><span id="Canvas.y-919"><a href="#Canvas.y-919"><span class="linenos">919</span></a>
</span><span id="Canvas.y-920"><a href="#Canvas.y-920"><span class="linenos">920</span></a><span class="sd">        Returns:</span>
</span><span id="Canvas.y-921"><a href="#Canvas.y-921"><span class="linenos">921</span></a><span class="sd">            float: The y coordinate of the canvas origin.</span>
</span><span id="Canvas.y-922"><a href="#Canvas.y-922"><span class="linenos">922</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Canvas.y-923"><a href="#Canvas.y-923"><span class="linenos">923</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">pos</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
</span></pre></div>


            <div class="docstring"><p>The y coordinate of the canvas origin.</p>

<p>Returns:
    float: The y coordinate of the canvas origin.</p>
</div>


                            </div>
                            <div id="Canvas.batch_graph" class="classattr">
                                        <input id="Canvas.batch_graph-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">batch_graph</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">batch</span><span class="p">:</span> <span class="n"><a href="../graphics/batch.html#Batch">simetri.graphics.batch.Batch</a></span></span><span class="return-annotation">) -> <span class="n">networkx</span><span class="o">.</span><span class="n">classes</span><span class="o">.</span><span class="n">digraph</span><span class="o">.</span><span class="n">DiGraph</span>:</span></span>

                <label class="view-source-button" for="Canvas.batch_graph-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Canvas.batch_graph"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Canvas.batch_graph-935"><a href="#Canvas.batch_graph-935"><span class="linenos">935</span></a>    <span class="k">def</span> <span class="nf">batch_graph</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">batch</span><span class="p">:</span> <span class="s2">&quot;Batch&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">nx</span><span class="o">.</span><span class="n">DiGraph</span><span class="p">:</span>
</span><span id="Canvas.batch_graph-936"><a href="#Canvas.batch_graph-936"><span class="linenos">936</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Canvas.batch_graph-937"><a href="#Canvas.batch_graph-937"><span class="linenos">937</span></a><span class="sd">        Return a directed graph of the batch and its elements.</span>
</span><span id="Canvas.batch_graph-938"><a href="#Canvas.batch_graph-938"><span class="linenos">938</span></a><span class="sd">        Canvas is the root of the graph.</span>
</span><span id="Canvas.batch_graph-939"><a href="#Canvas.batch_graph-939"><span class="linenos">939</span></a><span class="sd">        Graph nodes are the ids of the elements.</span>
</span><span id="Canvas.batch_graph-940"><a href="#Canvas.batch_graph-940"><span class="linenos">940</span></a>
</span><span id="Canvas.batch_graph-941"><a href="#Canvas.batch_graph-941"><span class="linenos">941</span></a><span class="sd">        Args:</span>
</span><span id="Canvas.batch_graph-942"><a href="#Canvas.batch_graph-942"><span class="linenos">942</span></a><span class="sd">            batch (Batch): The batch to create the graph from.</span>
</span><span id="Canvas.batch_graph-943"><a href="#Canvas.batch_graph-943"><span class="linenos">943</span></a>
</span><span id="Canvas.batch_graph-944"><a href="#Canvas.batch_graph-944"><span class="linenos">944</span></a><span class="sd">        Returns:</span>
</span><span id="Canvas.batch_graph-945"><a href="#Canvas.batch_graph-945"><span class="linenos">945</span></a><span class="sd">            nx.DiGraph: The directed graph of the batch and its elements.</span>
</span><span id="Canvas.batch_graph-946"><a href="#Canvas.batch_graph-946"><span class="linenos">946</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Canvas.batch_graph-947"><a href="#Canvas.batch_graph-947"><span class="linenos">947</span></a>
</span><span id="Canvas.batch_graph-948"><a href="#Canvas.batch_graph-948"><span class="linenos">948</span></a>        <span class="k">def</span> <span class="nf">add_batch</span><span class="p">(</span><span class="n">batch</span><span class="p">,</span> <span class="n">graph</span><span class="p">):</span>
</span><span id="Canvas.batch_graph-949"><a href="#Canvas.batch_graph-949"><span class="linenos">949</span></a>            <span class="n">graph</span><span class="o">.</span><span class="n">add_node</span><span class="p">(</span><span class="n">batch</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
</span><span id="Canvas.batch_graph-950"><a href="#Canvas.batch_graph-950"><span class="linenos">950</span></a>            <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">batch</span><span class="o">.</span><span class="n">elements</span><span class="p">:</span>
</span><span id="Canvas.batch_graph-951"><a href="#Canvas.batch_graph-951"><span class="linenos">951</span></a>                <span class="n">graph</span><span class="o">.</span><span class="n">add_edge</span><span class="p">(</span><span class="n">batch</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="n">item</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
</span><span id="Canvas.batch_graph-952"><a href="#Canvas.batch_graph-952"><span class="linenos">952</span></a>                <span class="k">if</span> <span class="n">item</span><span class="o">.</span><span class="n">subtype</span> <span class="o">==</span> <span class="n">Types</span><span class="o">.</span><span class="n">BATCH</span><span class="p">:</span>
</span><span id="Canvas.batch_graph-953"><a href="#Canvas.batch_graph-953"><span class="linenos">953</span></a>                    <span class="n">add_batch</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="n">graph</span><span class="p">)</span>
</span><span id="Canvas.batch_graph-954"><a href="#Canvas.batch_graph-954"><span class="linenos">954</span></a>            <span class="k">return</span> <span class="n">graph</span>
</span><span id="Canvas.batch_graph-955"><a href="#Canvas.batch_graph-955"><span class="linenos">955</span></a>
</span><span id="Canvas.batch_graph-956"><a href="#Canvas.batch_graph-956"><span class="linenos">956</span></a>        <span class="n">di_graph</span> <span class="o">=</span> <span class="n">nx</span><span class="o">.</span><span class="n">DiGraph</span><span class="p">()</span>
</span><span id="Canvas.batch_graph-957"><a href="#Canvas.batch_graph-957"><span class="linenos">957</span></a>        <span class="n">di_graph</span><span class="o">.</span><span class="n">add_edge</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="n">batch</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
</span><span id="Canvas.batch_graph-958"><a href="#Canvas.batch_graph-958"><span class="linenos">958</span></a>        <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">batch</span><span class="o">.</span><span class="n">elements</span><span class="p">:</span>
</span><span id="Canvas.batch_graph-959"><a href="#Canvas.batch_graph-959"><span class="linenos">959</span></a>            <span class="k">if</span> <span class="n">item</span><span class="o">.</span><span class="n">subtype</span> <span class="o">==</span> <span class="n">Types</span><span class="o">.</span><span class="n">BATCH</span><span class="p">:</span>
</span><span id="Canvas.batch_graph-960"><a href="#Canvas.batch_graph-960"><span class="linenos">960</span></a>                <span class="n">di_graph</span><span class="o">.</span><span class="n">add_edge</span><span class="p">(</span><span class="n">batch</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="n">item</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
</span><span id="Canvas.batch_graph-961"><a href="#Canvas.batch_graph-961"><span class="linenos">961</span></a>                <span class="n">add_batch</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="n">di_graph</span><span class="p">)</span>
</span><span id="Canvas.batch_graph-962"><a href="#Canvas.batch_graph-962"><span class="linenos">962</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="Canvas.batch_graph-963"><a href="#Canvas.batch_graph-963"><span class="linenos">963</span></a>                <span class="n">di_graph</span><span class="o">.</span><span class="n">add_edge</span><span class="p">(</span><span class="n">batch</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="n">item</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
</span><span id="Canvas.batch_graph-964"><a href="#Canvas.batch_graph-964"><span class="linenos">964</span></a>
</span><span id="Canvas.batch_graph-965"><a href="#Canvas.batch_graph-965"><span class="linenos">965</span></a>        <span class="k">return</span> <span class="n">di_graph</span>
</span></pre></div>


            <div class="docstring"><p>Return a directed graph of the batch and its elements.
Canvas is the root of the graph.
Graph nodes are the ids of the elements.</p>

<p>Args:
    batch (Batch): The batch to create the graph from.</p>

<p>Returns:
    nx.DiGraph: The directed graph of the batch and its elements.</p>
</div>


                            </div>
                            <div id="Canvas.get_fonts_list" class="classattr">
                                        <input id="Canvas.get_fonts_list-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_fonts_list</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>:</span></span>

                <label class="view-source-button" for="Canvas.get_fonts_list-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Canvas.get_fonts_list"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Canvas.get_fonts_list-991"><a href="#Canvas.get_fonts_list-991"><span class="linenos"> 991</span></a>    <span class="k">def</span> <span class="nf">get_fonts_list</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
</span><span id="Canvas.get_fonts_list-992"><a href="#Canvas.get_fonts_list-992"><span class="linenos"> 992</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Canvas.get_fonts_list-993"><a href="#Canvas.get_fonts_list-993"><span class="linenos"> 993</span></a><span class="sd">        Get the list of fonts used in the canvas.</span>
</span><span id="Canvas.get_fonts_list-994"><a href="#Canvas.get_fonts_list-994"><span class="linenos"> 994</span></a>
</span><span id="Canvas.get_fonts_list-995"><a href="#Canvas.get_fonts_list-995"><span class="linenos"> 995</span></a><span class="sd">        Returns:</span>
</span><span id="Canvas.get_fonts_list-996"><a href="#Canvas.get_fonts_list-996"><span class="linenos"> 996</span></a><span class="sd">            list[str]: The list of fonts used in the canvas.</span>
</span><span id="Canvas.get_fonts_list-997"><a href="#Canvas.get_fonts_list-997"><span class="linenos"> 997</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Canvas.get_fonts_list-998"><a href="#Canvas.get_fonts_list-998"><span class="linenos"> 998</span></a>        <span class="n">user_fonts</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_font_list</span><span class="p">)</span>
</span><span id="Canvas.get_fonts_list-999"><a href="#Canvas.get_fonts_list-999"><span class="linenos"> 999</span></a>
</span><span id="Canvas.get_fonts_list-1000"><a href="#Canvas.get_fonts_list-1000"><span class="linenos">1000</span></a>        <span class="n">latex_fonts</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span>
</span><span id="Canvas.get_fonts_list-1001"><a href="#Canvas.get_fonts_list-1001"><span class="linenos">1001</span></a>            <span class="p">[</span>
</span><span id="Canvas.get_fonts_list-1002"><a href="#Canvas.get_fonts_list-1002"><span class="linenos">1002</span></a>                <span class="n">defaults</span><span class="p">[</span><span class="s2">&quot;main_font&quot;</span><span class="p">],</span>
</span><span id="Canvas.get_fonts_list-1003"><a href="#Canvas.get_fonts_list-1003"><span class="linenos">1003</span></a>                <span class="n">defaults</span><span class="p">[</span><span class="s2">&quot;sans_font&quot;</span><span class="p">],</span>
</span><span id="Canvas.get_fonts_list-1004"><a href="#Canvas.get_fonts_list-1004"><span class="linenos">1004</span></a>                <span class="n">defaults</span><span class="p">[</span><span class="s2">&quot;mono_font&quot;</span><span class="p">],</span>
</span><span id="Canvas.get_fonts_list-1005"><a href="#Canvas.get_fonts_list-1005"><span class="linenos">1005</span></a>                <span class="s2">&quot;serif&quot;</span><span class="p">,</span>
</span><span id="Canvas.get_fonts_list-1006"><a href="#Canvas.get_fonts_list-1006"><span class="linenos">1006</span></a>                <span class="s2">&quot;sansserif&quot;</span><span class="p">,</span>
</span><span id="Canvas.get_fonts_list-1007"><a href="#Canvas.get_fonts_list-1007"><span class="linenos">1007</span></a>                <span class="s2">&quot;monospace&quot;</span><span class="p">,</span>
</span><span id="Canvas.get_fonts_list-1008"><a href="#Canvas.get_fonts_list-1008"><span class="linenos">1008</span></a>            <span class="p">]</span>
</span><span id="Canvas.get_fonts_list-1009"><a href="#Canvas.get_fonts_list-1009"><span class="linenos">1009</span></a>        <span class="p">)</span>
</span><span id="Canvas.get_fonts_list-1010"><a href="#Canvas.get_fonts_list-1010"><span class="linenos">1010</span></a>        <span class="k">for</span> <span class="n">sketch</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">active_page</span><span class="o">.</span><span class="n">sketches</span><span class="p">:</span>
</span><span id="Canvas.get_fonts_list-1011"><a href="#Canvas.get_fonts_list-1011"><span class="linenos">1011</span></a>            <span class="k">if</span> <span class="n">sketch</span><span class="o">.</span><span class="n">subtype</span> <span class="o">==</span> <span class="n">Types</span><span class="o">.</span><span class="n">TAG_SKETCH</span><span class="p">:</span>
</span><span id="Canvas.get_fonts_list-1012"><a href="#Canvas.get_fonts_list-1012"><span class="linenos">1012</span></a>                <span class="n">name</span> <span class="o">=</span> <span class="n">sketch</span><span class="o">.</span><span class="n">font_family</span>
</span><span id="Canvas.get_fonts_list-1013"><a href="#Canvas.get_fonts_list-1013"><span class="linenos">1013</span></a>                <span class="k">if</span> <span class="n">name</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">latex_fonts</span><span class="p">:</span>
</span><span id="Canvas.get_fonts_list-1014"><a href="#Canvas.get_fonts_list-1014"><span class="linenos">1014</span></a>                    <span class="n">user_fonts</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
</span><span id="Canvas.get_fonts_list-1015"><a href="#Canvas.get_fonts_list-1015"><span class="linenos">1015</span></a>        <span class="k">return</span> <span class="nb">list</span><span class="p">(</span><span class="n">user_fonts</span><span class="o">.</span><span class="n">difference</span><span class="p">(</span><span class="n">latex_fonts</span><span class="p">))</span>
</span></pre></div>


            <div class="docstring"><p>Get the list of fonts used in the canvas.</p>

<p>Returns:
    list[str]: The list of fonts used in the canvas.</p>
</div>


                            </div>
                            <div id="Canvas.save" class="classattr">
                                        <input id="Canvas.save-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">save</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">file_path</span><span class="p">:</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span>,</span><span class="param">	<span class="n">overwrite</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">None</span>,</span><span class="param">	<span class="n">show</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">None</span>,</span><span class="param">	<span class="n">print_output</span><span class="o">=</span><span class="kc">False</span>,</span><span class="param">	<span class="n">remove_aux</span><span class="o">=</span><span class="kc">True</span></span><span class="return-annotation">) -> <span class="n">typing_extensions</span><span class="o">.</span><span class="n">Self</span>:</span></span>

                <label class="view-source-button" for="Canvas.save-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Canvas.save"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Canvas.save-1068"><a href="#Canvas.save-1068"><span class="linenos">1068</span></a>    <span class="k">def</span> <span class="nf">save</span><span class="p">(</span>
</span><span id="Canvas.save-1069"><a href="#Canvas.save-1069"><span class="linenos">1069</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="Canvas.save-1070"><a href="#Canvas.save-1070"><span class="linenos">1070</span></a>        <span class="n">file_path</span><span class="p">:</span> <span class="n">Path</span><span class="p">,</span>
</span><span id="Canvas.save-1071"><a href="#Canvas.save-1071"><span class="linenos">1071</span></a>        <span class="n">overwrite</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="Canvas.save-1072"><a href="#Canvas.save-1072"><span class="linenos">1072</span></a>        <span class="n">show</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="Canvas.save-1073"><a href="#Canvas.save-1073"><span class="linenos">1073</span></a>        <span class="n">print_output</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
</span><span id="Canvas.save-1074"><a href="#Canvas.save-1074"><span class="linenos">1074</span></a>        <span class="n">remove_aux</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
</span><span id="Canvas.save-1075"><a href="#Canvas.save-1075"><span class="linenos">1075</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Self</span><span class="p">:</span>
</span><span id="Canvas.save-1076"><a href="#Canvas.save-1076"><span class="linenos">1076</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Canvas.save-1077"><a href="#Canvas.save-1077"><span class="linenos">1077</span></a><span class="sd">        Save the canvas to a file.</span>
</span><span id="Canvas.save-1078"><a href="#Canvas.save-1078"><span class="linenos">1078</span></a>
</span><span id="Canvas.save-1079"><a href="#Canvas.save-1079"><span class="linenos">1079</span></a><span class="sd">        Args:</span>
</span><span id="Canvas.save-1080"><a href="#Canvas.save-1080"><span class="linenos">1080</span></a><span class="sd">            file_path (Path, optional): The path to save the file.</span>
</span><span id="Canvas.save-1081"><a href="#Canvas.save-1081"><span class="linenos">1081</span></a><span class="sd">            overwrite (bool, optional): Whether to overwrite the file if it exists.</span>
</span><span id="Canvas.save-1082"><a href="#Canvas.save-1082"><span class="linenos">1082</span></a><span class="sd">            show (bool, optional): Whether to show the file in the browser.</span>
</span><span id="Canvas.save-1083"><a href="#Canvas.save-1083"><span class="linenos">1083</span></a><span class="sd">            print_output (bool, optional): Whether to print the output of the compilation.</span>
</span><span id="Canvas.save-1084"><a href="#Canvas.save-1084"><span class="linenos">1084</span></a>
</span><span id="Canvas.save-1085"><a href="#Canvas.save-1085"><span class="linenos">1085</span></a><span class="sd">        Returns:</span>
</span><span id="Canvas.save-1086"><a href="#Canvas.save-1086"><span class="linenos">1086</span></a><span class="sd">            Self: The canvas object.</span>
</span><span id="Canvas.save-1087"><a href="#Canvas.save-1087"><span class="linenos">1087</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Canvas.save-1088"><a href="#Canvas.save-1088"><span class="linenos">1088</span></a>
</span><span id="Canvas.save-1089"><a href="#Canvas.save-1089"><span class="linenos">1089</span></a>        <span class="k">def</span> <span class="nf">validate_file_path</span><span class="p">(</span><span class="n">file_path</span><span class="p">:</span> <span class="n">Path</span><span class="p">,</span> <span class="n">overwrite</span><span class="p">:</span> <span class="nb">bool</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Result</span><span class="p">:</span>
</span><span id="Canvas.save-1090"><a href="#Canvas.save-1090"><span class="linenos">1090</span></a><span class="w">            </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Canvas.save-1091"><a href="#Canvas.save-1091"><span class="linenos">1091</span></a><span class="sd">            Validate the file path.</span>
</span><span id="Canvas.save-1092"><a href="#Canvas.save-1092"><span class="linenos">1092</span></a>
</span><span id="Canvas.save-1093"><a href="#Canvas.save-1093"><span class="linenos">1093</span></a><span class="sd">            Args:</span>
</span><span id="Canvas.save-1094"><a href="#Canvas.save-1094"><span class="linenos">1094</span></a><span class="sd">                file_path (Path): The path to the file.</span>
</span><span id="Canvas.save-1095"><a href="#Canvas.save-1095"><span class="linenos">1095</span></a><span class="sd">                overwrite (bool): Whether to overwrite the file if it exists.</span>
</span><span id="Canvas.save-1096"><a href="#Canvas.save-1096"><span class="linenos">1096</span></a>
</span><span id="Canvas.save-1097"><a href="#Canvas.save-1097"><span class="linenos">1097</span></a><span class="sd">            Returns:</span>
</span><span id="Canvas.save-1098"><a href="#Canvas.save-1098"><span class="linenos">1098</span></a><span class="sd">                Result: The parent directory, file name, and extension.</span>
</span><span id="Canvas.save-1099"><a href="#Canvas.save-1099"><span class="linenos">1099</span></a><span class="sd">            &quot;&quot;&quot;</span>
</span><span id="Canvas.save-1100"><a href="#Canvas.save-1100"><span class="linenos">1100</span></a>            <span class="n">path_exists</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">file_path</span><span class="p">)</span>
</span><span id="Canvas.save-1101"><a href="#Canvas.save-1101"><span class="linenos">1101</span></a>            <span class="k">if</span> <span class="n">path_exists</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">overwrite</span><span class="p">:</span>
</span><span id="Canvas.save-1102"><a href="#Canvas.save-1102"><span class="linenos">1102</span></a>                <span class="k">raise</span> <span class="ne">FileExistsError</span><span class="p">(</span>
</span><span id="Canvas.save-1103"><a href="#Canvas.save-1103"><span class="linenos">1103</span></a>                    <span class="sa">f</span><span class="s2">&quot;File </span><span class="si">{</span><span class="n">file_path</span><span class="si">}</span><span class="s2"> already exists. </span><span class="se">\n</span><span class="s2">&quot;</span>
</span><span id="Canvas.save-1104"><a href="#Canvas.save-1104"><span class="linenos">1104</span></a>                    <span class="s2">&quot;Use canvas.save(file_path, overwrite=True) to overwrite the file.&quot;</span>
</span><span id="Canvas.save-1105"><a href="#Canvas.save-1105"><span class="linenos">1105</span></a>                <span class="p">)</span>
</span><span id="Canvas.save-1106"><a href="#Canvas.save-1106"><span class="linenos">1106</span></a>            <span class="n">parent_dir</span><span class="p">,</span> <span class="n">file_name</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">file_path</span><span class="p">)</span>
</span><span id="Canvas.save-1107"><a href="#Canvas.save-1107"><span class="linenos">1107</span></a>            <span class="n">file_name</span><span class="p">,</span> <span class="n">extension</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">splitext</span><span class="p">(</span><span class="n">file_name</span><span class="p">)</span>
</span><span id="Canvas.save-1108"><a href="#Canvas.save-1108"><span class="linenos">1108</span></a>            <span class="k">if</span> <span class="n">extension</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;.pdf&quot;</span><span class="p">,</span> <span class="s2">&quot;.eps&quot;</span><span class="p">,</span> <span class="s2">&quot;.ps&quot;</span><span class="p">,</span> <span class="s2">&quot;.svg&quot;</span><span class="p">,</span> <span class="s2">&quot;.png&quot;</span><span class="p">,</span> <span class="s2">&quot;.tex&quot;</span><span class="p">]:</span>
</span><span id="Canvas.save-1109"><a href="#Canvas.save-1109"><span class="linenos">1109</span></a>                <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s2">&quot;File type is not supported.&quot;</span><span class="p">)</span>
</span><span id="Canvas.save-1110"><a href="#Canvas.save-1110"><span class="linenos">1110</span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">parent_dir</span><span class="p">):</span>
</span><span id="Canvas.save-1111"><a href="#Canvas.save-1111"><span class="linenos">1111</span></a>                <span class="k">raise</span> <span class="ne">NotADirectoryError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Directory </span><span class="si">{</span><span class="n">parent_dir</span><span class="si">}</span><span class="s2"> does not exist.&quot;</span><span class="p">)</span>
</span><span id="Canvas.save-1112"><a href="#Canvas.save-1112"><span class="linenos">1112</span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">access</span><span class="p">(</span><span class="n">parent_dir</span><span class="p">,</span> <span class="n">os</span><span class="o">.</span><span class="n">W_OK</span><span class="p">):</span>
</span><span id="Canvas.save-1113"><a href="#Canvas.save-1113"><span class="linenos">1113</span></a>                <span class="k">raise</span> <span class="ne">PermissionError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Directory </span><span class="si">{</span><span class="n">parent_dir</span><span class="si">}</span><span class="s2"> is not writable.&quot;</span><span class="p">)</span>
</span><span id="Canvas.save-1114"><a href="#Canvas.save-1114"><span class="linenos">1114</span></a>
</span><span id="Canvas.save-1115"><a href="#Canvas.save-1115"><span class="linenos">1115</span></a>            <span class="k">return</span> <span class="n">parent_dir</span><span class="p">,</span> <span class="n">file_name</span><span class="p">,</span> <span class="n">extension</span>
</span><span id="Canvas.save-1116"><a href="#Canvas.save-1116"><span class="linenos">1116</span></a>
</span><span id="Canvas.save-1117"><a href="#Canvas.save-1117"><span class="linenos">1117</span></a>        <span class="k">def</span> <span class="nf">compile_tex</span><span class="p">(</span><span class="n">cmd</span><span class="p">):</span>
</span><span id="Canvas.save-1118"><a href="#Canvas.save-1118"><span class="linenos">1118</span></a><span class="w">            </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Canvas.save-1119"><a href="#Canvas.save-1119"><span class="linenos">1119</span></a><span class="sd">            Compile the TeX file.</span>
</span><span id="Canvas.save-1120"><a href="#Canvas.save-1120"><span class="linenos">1120</span></a>
</span><span id="Canvas.save-1121"><a href="#Canvas.save-1121"><span class="linenos">1121</span></a><span class="sd">            Args:</span>
</span><span id="Canvas.save-1122"><a href="#Canvas.save-1122"><span class="linenos">1122</span></a><span class="sd">                cmd (str): The command to compile the TeX file.</span>
</span><span id="Canvas.save-1123"><a href="#Canvas.save-1123"><span class="linenos">1123</span></a>
</span><span id="Canvas.save-1124"><a href="#Canvas.save-1124"><span class="linenos">1124</span></a><span class="sd">            Returns:</span>
</span><span id="Canvas.save-1125"><a href="#Canvas.save-1125"><span class="linenos">1125</span></a><span class="sd">                str: The output of the compilation.</span>
</span><span id="Canvas.save-1126"><a href="#Canvas.save-1126"><span class="linenos">1126</span></a><span class="sd">            &quot;&quot;&quot;</span>
</span><span id="Canvas.save-1127"><a href="#Canvas.save-1127"><span class="linenos">1127</span></a>            <span class="n">os</span><span class="o">.</span><span class="n">chdir</span><span class="p">(</span><span class="n">parent_dir</span><span class="p">)</span>
</span><span id="Canvas.save-1128"><a href="#Canvas.save-1128"><span class="linenos">1128</span></a>            <span class="k">with</span> <span class="n">subprocess</span><span class="o">.</span><span class="n">Popen</span><span class="p">(</span>
</span><span id="Canvas.save-1129"><a href="#Canvas.save-1129"><span class="linenos">1129</span></a>                <span class="n">cmd</span><span class="p">,</span>
</span><span id="Canvas.save-1130"><a href="#Canvas.save-1130"><span class="linenos">1130</span></a>                <span class="n">stdin</span><span class="o">=</span><span class="n">subprocess</span><span class="o">.</span><span class="n">PIPE</span><span class="p">,</span>
</span><span id="Canvas.save-1131"><a href="#Canvas.save-1131"><span class="linenos">1131</span></a>                <span class="n">stdout</span><span class="o">=</span><span class="n">subprocess</span><span class="o">.</span><span class="n">PIPE</span><span class="p">,</span>
</span><span id="Canvas.save-1132"><a href="#Canvas.save-1132"><span class="linenos">1132</span></a>                <span class="n">shell</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
</span><span id="Canvas.save-1133"><a href="#Canvas.save-1133"><span class="linenos">1133</span></a>                <span class="n">text</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
</span><span id="Canvas.save-1134"><a href="#Canvas.save-1134"><span class="linenos">1134</span></a>            <span class="p">)</span> <span class="k">as</span> <span class="n">p</span><span class="p">:</span>
</span><span id="Canvas.save-1135"><a href="#Canvas.save-1135"><span class="linenos">1135</span></a>                <span class="n">output</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="n">communicate</span><span class="p">(</span><span class="s2">&quot;_s</span><span class="se">\n</span><span class="s2">_l</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="Canvas.save-1136"><a href="#Canvas.save-1136"><span class="linenos">1136</span></a>            <span class="k">if</span> <span class="n">print_output</span><span class="p">:</span>
</span><span id="Canvas.save-1137"><a href="#Canvas.save-1137"><span class="linenos">1137</span></a>                <span class="nb">print</span><span class="p">(</span><span class="n">output</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)[</span><span class="o">-</span><span class="mi">3</span><span class="p">:])</span>
</span><span id="Canvas.save-1138"><a href="#Canvas.save-1138"><span class="linenos">1138</span></a>            <span class="k">return</span> <span class="n">output</span>
</span><span id="Canvas.save-1139"><a href="#Canvas.save-1139"><span class="linenos">1139</span></a>
</span><span id="Canvas.save-1140"><a href="#Canvas.save-1140"><span class="linenos">1140</span></a>        <span class="k">def</span> <span class="nf">remove_aux_files</span><span class="p">(</span><span class="n">file_path</span><span class="p">):</span>
</span><span id="Canvas.save-1141"><a href="#Canvas.save-1141"><span class="linenos">1141</span></a><span class="w">            </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Canvas.save-1142"><a href="#Canvas.save-1142"><span class="linenos">1142</span></a><span class="sd">            Remove auxiliary files generated during compilation.</span>
</span><span id="Canvas.save-1143"><a href="#Canvas.save-1143"><span class="linenos">1143</span></a>
</span><span id="Canvas.save-1144"><a href="#Canvas.save-1144"><span class="linenos">1144</span></a><span class="sd">            Args:</span>
</span><span id="Canvas.save-1145"><a href="#Canvas.save-1145"><span class="linenos">1145</span></a><span class="sd">                file_path (Path): The path to the file.</span>
</span><span id="Canvas.save-1146"><a href="#Canvas.save-1146"><span class="linenos">1146</span></a><span class="sd">            &quot;&quot;&quot;</span>
</span><span id="Canvas.save-1147"><a href="#Canvas.save-1147"><span class="linenos">1147</span></a>            <span class="n">time_out</span> <span class="o">=</span> <span class="mi">1</span>  <span class="c1"># seconds</span>
</span><span id="Canvas.save-1148"><a href="#Canvas.save-1148"><span class="linenos">1148</span></a>            <span class="n">parent_dir</span><span class="p">,</span> <span class="n">file_name</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">file_path</span><span class="p">)</span>
</span><span id="Canvas.save-1149"><a href="#Canvas.save-1149"><span class="linenos">1149</span></a>            <span class="n">file_name</span><span class="p">,</span> <span class="n">extension</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">splitext</span><span class="p">(</span><span class="n">file_name</span><span class="p">)</span>
</span><span id="Canvas.save-1150"><a href="#Canvas.save-1150"><span class="linenos">1150</span></a>            <span class="n">aux_file</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">parent_dir</span><span class="p">,</span> <span class="n">file_name</span> <span class="o">+</span> <span class="s2">&quot;.aux&quot;</span><span class="p">)</span>
</span><span id="Canvas.save-1151"><a href="#Canvas.save-1151"><span class="linenos">1151</span></a>            <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">aux_file</span><span class="p">):</span>
</span><span id="Canvas.save-1152"><a href="#Canvas.save-1152"><span class="linenos">1152</span></a>                <span class="k">if</span> <span class="ow">not</span> <span class="n">wait_for_file_availability</span><span class="p">(</span><span class="n">aux_file</span><span class="p">,</span> <span class="n">time_out</span><span class="p">):</span>
</span><span id="Canvas.save-1153"><a href="#Canvas.save-1153"><span class="linenos">1153</span></a>                    <span class="nb">print</span><span class="p">(</span>
</span><span id="Canvas.save-1154"><a href="#Canvas.save-1154"><span class="linenos">1154</span></a>                        <span class="p">(</span>
</span><span id="Canvas.save-1155"><a href="#Canvas.save-1155"><span class="linenos">1155</span></a>                            <span class="sa">f</span><span class="s2">&quot;File &#39;</span><span class="si">{</span><span class="n">aux_file</span><span class="si">}</span><span class="s2">&#39; is not available after waiting for &quot;</span>
</span><span id="Canvas.save-1156"><a href="#Canvas.save-1156"><span class="linenos">1156</span></a>                            <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">time_out</span><span class="si">}</span><span class="s2"> seconds.&quot;</span>
</span><span id="Canvas.save-1157"><a href="#Canvas.save-1157"><span class="linenos">1157</span></a>                        <span class="p">)</span>
</span><span id="Canvas.save-1158"><a href="#Canvas.save-1158"><span class="linenos">1158</span></a>                    <span class="p">)</span>
</span><span id="Canvas.save-1159"><a href="#Canvas.save-1159"><span class="linenos">1159</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="Canvas.save-1160"><a href="#Canvas.save-1160"><span class="linenos">1160</span></a>                    <span class="n">os</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">aux_file</span><span class="p">)</span>
</span><span id="Canvas.save-1161"><a href="#Canvas.save-1161"><span class="linenos">1161</span></a>            <span class="n">log_file</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">parent_dir</span><span class="p">,</span> <span class="n">file_name</span> <span class="o">+</span> <span class="s2">&quot;.log&quot;</span><span class="p">)</span>
</span><span id="Canvas.save-1162"><a href="#Canvas.save-1162"><span class="linenos">1162</span></a>            <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">log_file</span><span class="p">):</span>
</span><span id="Canvas.save-1163"><a href="#Canvas.save-1163"><span class="linenos">1163</span></a>                <span class="k">if</span> <span class="ow">not</span> <span class="n">wait_for_file_availability</span><span class="p">(</span><span class="n">log_file</span><span class="p">,</span> <span class="n">time_out</span><span class="p">):</span>
</span><span id="Canvas.save-1164"><a href="#Canvas.save-1164"><span class="linenos">1164</span></a>                    <span class="nb">print</span><span class="p">(</span>
</span><span id="Canvas.save-1165"><a href="#Canvas.save-1165"><span class="linenos">1165</span></a>                        <span class="p">(</span>
</span><span id="Canvas.save-1166"><a href="#Canvas.save-1166"><span class="linenos">1166</span></a>                            <span class="sa">f</span><span class="s2">&quot;File &#39;</span><span class="si">{</span><span class="n">log_file</span><span class="si">}</span><span class="s2">&#39; is not available after waiting for &quot;</span>
</span><span id="Canvas.save-1167"><a href="#Canvas.save-1167"><span class="linenos">1167</span></a>                            <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">time_out</span><span class="si">}</span><span class="s2"> seconds.&quot;</span>
</span><span id="Canvas.save-1168"><a href="#Canvas.save-1168"><span class="linenos">1168</span></a>                        <span class="p">)</span>
</span><span id="Canvas.save-1169"><a href="#Canvas.save-1169"><span class="linenos">1169</span></a>                    <span class="p">)</span>
</span><span id="Canvas.save-1170"><a href="#Canvas.save-1170"><span class="linenos">1170</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="Canvas.save-1171"><a href="#Canvas.save-1171"><span class="linenos">1171</span></a>                    <span class="k">if</span> <span class="ow">not</span> <span class="n">defaults</span><span class="p">[</span><span class="s2">&quot;keep_log_files&quot;</span><span class="p">]:</span>
</span><span id="Canvas.save-1172"><a href="#Canvas.save-1172"><span class="linenos">1172</span></a>                        <span class="n">os</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">log_file</span><span class="p">)</span>
</span><span id="Canvas.save-1173"><a href="#Canvas.save-1173"><span class="linenos">1173</span></a>            <span class="n">tex_file</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">parent_dir</span><span class="p">,</span> <span class="n">file_name</span> <span class="o">+</span> <span class="s2">&quot;.tex&quot;</span><span class="p">)</span>
</span><span id="Canvas.save-1174"><a href="#Canvas.save-1174"><span class="linenos">1174</span></a>            <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">tex_file</span><span class="p">):</span>
</span><span id="Canvas.save-1175"><a href="#Canvas.save-1175"><span class="linenos">1175</span></a>                <span class="k">if</span> <span class="ow">not</span> <span class="n">wait_for_file_availability</span><span class="p">(</span><span class="n">tex_file</span><span class="p">,</span> <span class="n">time_out</span><span class="p">):</span>
</span><span id="Canvas.save-1176"><a href="#Canvas.save-1176"><span class="linenos">1176</span></a>                    <span class="nb">print</span><span class="p">(</span>
</span><span id="Canvas.save-1177"><a href="#Canvas.save-1177"><span class="linenos">1177</span></a>                        <span class="p">(</span>
</span><span id="Canvas.save-1178"><a href="#Canvas.save-1178"><span class="linenos">1178</span></a>                            <span class="sa">f</span><span class="s2">&quot;File &#39;</span><span class="si">{</span><span class="n">tex_file</span><span class="si">}</span><span class="s2">&#39; is not available after waiting for &quot;</span>
</span><span id="Canvas.save-1179"><a href="#Canvas.save-1179"><span class="linenos">1179</span></a>                            <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">time_out</span><span class="si">}</span><span class="s2"> seconds.&quot;</span>
</span><span id="Canvas.save-1180"><a href="#Canvas.save-1180"><span class="linenos">1180</span></a>                        <span class="p">)</span>
</span><span id="Canvas.save-1181"><a href="#Canvas.save-1181"><span class="linenos">1181</span></a>                    <span class="p">)</span>
</span><span id="Canvas.save-1182"><a href="#Canvas.save-1182"><span class="linenos">1182</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="Canvas.save-1183"><a href="#Canvas.save-1183"><span class="linenos">1183</span></a>                    <span class="n">os</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">tex_file</span><span class="p">)</span>
</span><span id="Canvas.save-1184"><a href="#Canvas.save-1184"><span class="linenos">1184</span></a>            <span class="n">file_name</span><span class="p">,</span> <span class="n">extension</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">splitext</span><span class="p">(</span><span class="n">file_name</span><span class="p">)</span>
</span><span id="Canvas.save-1185"><a href="#Canvas.save-1185"><span class="linenos">1185</span></a>            <span class="k">if</span> <span class="n">extension</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;.pdf&quot;</span><span class="p">,</span> <span class="s2">&quot;.tex&quot;</span><span class="p">]:</span>
</span><span id="Canvas.save-1186"><a href="#Canvas.save-1186"><span class="linenos">1186</span></a>                <span class="n">pdf_file</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">parent_dir</span><span class="p">,</span> <span class="n">file_name</span> <span class="o">+</span> <span class="s2">&quot;.pdf&quot;</span><span class="p">)</span>
</span><span id="Canvas.save-1187"><a href="#Canvas.save-1187"><span class="linenos">1187</span></a>                <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">pdf_file</span><span class="p">):</span>
</span><span id="Canvas.save-1188"><a href="#Canvas.save-1188"><span class="linenos">1188</span></a>                    <span class="k">if</span> <span class="ow">not</span> <span class="n">wait_for_file_availability</span><span class="p">(</span><span class="n">pdf_file</span><span class="p">,</span> <span class="n">time_out</span><span class="p">):</span>
</span><span id="Canvas.save-1189"><a href="#Canvas.save-1189"><span class="linenos">1189</span></a>                        <span class="nb">print</span><span class="p">(</span>
</span><span id="Canvas.save-1190"><a href="#Canvas.save-1190"><span class="linenos">1190</span></a>                            <span class="p">(</span>
</span><span id="Canvas.save-1191"><a href="#Canvas.save-1191"><span class="linenos">1191</span></a>                                <span class="sa">f</span><span class="s2">&quot;File &#39;</span><span class="si">{</span><span class="n">pdf_file</span><span class="si">}</span><span class="s2">&#39; is not available after waiting for &quot;</span>
</span><span id="Canvas.save-1192"><a href="#Canvas.save-1192"><span class="linenos">1192</span></a>                                <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">time_out</span><span class="si">}</span><span class="s2"> seconds.&quot;</span>
</span><span id="Canvas.save-1193"><a href="#Canvas.save-1193"><span class="linenos">1193</span></a>                            <span class="p">)</span>
</span><span id="Canvas.save-1194"><a href="#Canvas.save-1194"><span class="linenos">1194</span></a>                        <span class="p">)</span>
</span><span id="Canvas.save-1195"><a href="#Canvas.save-1195"><span class="linenos">1195</span></a>                    <span class="k">else</span><span class="p">:</span>
</span><span id="Canvas.save-1196"><a href="#Canvas.save-1196"><span class="linenos">1196</span></a>                        <span class="c1"># os.remove(pdf_file)</span>
</span><span id="Canvas.save-1197"><a href="#Canvas.save-1197"><span class="linenos">1197</span></a>                        <span class="k">pass</span>
</span><span id="Canvas.save-1198"><a href="#Canvas.save-1198"><span class="linenos">1198</span></a>            <span class="n">log_file</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">parent_dir</span><span class="p">,</span> <span class="s2">&quot;simetri.log&quot;</span><span class="p">)</span>
</span><span id="Canvas.save-1199"><a href="#Canvas.save-1199"><span class="linenos">1199</span></a>            <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">log_file</span><span class="p">):</span>
</span><span id="Canvas.save-1200"><a href="#Canvas.save-1200"><span class="linenos">1200</span></a>                <span class="k">try</span><span class="p">:</span>
</span><span id="Canvas.save-1201"><a href="#Canvas.save-1201"><span class="linenos">1201</span></a>                    <span class="n">os</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">log_file</span><span class="p">)</span>
</span><span id="Canvas.save-1202"><a href="#Canvas.save-1202"><span class="linenos">1202</span></a>                <span class="k">except</span> <span class="ne">PermissionError</span><span class="p">:</span>
</span><span id="Canvas.save-1203"><a href="#Canvas.save-1203"><span class="linenos">1203</span></a>                    <span class="c1"># to do: log the error</span>
</span><span id="Canvas.save-1204"><a href="#Canvas.save-1204"><span class="linenos">1204</span></a>                    <span class="k">pass</span>
</span><span id="Canvas.save-1205"><a href="#Canvas.save-1205"><span class="linenos">1205</span></a>
</span><span id="Canvas.save-1206"><a href="#Canvas.save-1206"><span class="linenos">1206</span></a>        <span class="k">def</span> <span class="nf">run_job</span><span class="p">():</span>
</span><span id="Canvas.save-1207"><a href="#Canvas.save-1207"><span class="linenos">1207</span></a><span class="w">            </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Canvas.save-1208"><a href="#Canvas.save-1208"><span class="linenos">1208</span></a><span class="sd">            Run the job to compile and save the file.</span>
</span><span id="Canvas.save-1209"><a href="#Canvas.save-1209"><span class="linenos">1209</span></a>
</span><span id="Canvas.save-1210"><a href="#Canvas.save-1210"><span class="linenos">1210</span></a><span class="sd">            Returns:</span>
</span><span id="Canvas.save-1211"><a href="#Canvas.save-1211"><span class="linenos">1211</span></a><span class="sd">                None</span>
</span><span id="Canvas.save-1212"><a href="#Canvas.save-1212"><span class="linenos">1212</span></a><span class="sd">            &quot;&quot;&quot;</span>
</span><span id="Canvas.save-1213"><a href="#Canvas.save-1213"><span class="linenos">1213</span></a>            <span class="n">output_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">parent_dir</span><span class="p">,</span> <span class="n">file_name</span> <span class="o">+</span> <span class="n">extension</span><span class="p">)</span>
</span><span id="Canvas.save-1214"><a href="#Canvas.save-1214"><span class="linenos">1214</span></a>            <span class="n">cmd</span> <span class="o">=</span> <span class="s2">&quot;xelatex &quot;</span> <span class="o">+</span> <span class="n">tex_path</span> <span class="o">+</span> <span class="s2">&quot; --output-directory &quot;</span> <span class="o">+</span> <span class="n">parent_dir</span>
</span><span id="Canvas.save-1215"><a href="#Canvas.save-1215"><span class="linenos">1215</span></a>            <span class="n">res</span> <span class="o">=</span> <span class="n">compile_tex</span><span class="p">(</span><span class="n">cmd</span><span class="p">)</span>
</span><span id="Canvas.save-1216"><a href="#Canvas.save-1216"><span class="linenos">1216</span></a>            <span class="k">if</span> <span class="s2">&quot;No pages of output&quot;</span> <span class="ow">in</span> <span class="n">res</span><span class="p">:</span>
</span><span id="Canvas.save-1217"><a href="#Canvas.save-1217"><span class="linenos">1217</span></a>                <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s2">&quot;Failed to compile the tex file.&quot;</span><span class="p">)</span>
</span><span id="Canvas.save-1218"><a href="#Canvas.save-1218"><span class="linenos">1218</span></a>            <span class="n">pdf_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">parent_dir</span><span class="p">,</span> <span class="n">file_name</span> <span class="o">+</span> <span class="s2">&quot;.pdf&quot;</span><span class="p">)</span>
</span><span id="Canvas.save-1219"><a href="#Canvas.save-1219"><span class="linenos">1219</span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">pdf_path</span><span class="p">):</span>
</span><span id="Canvas.save-1220"><a href="#Canvas.save-1220"><span class="linenos">1220</span></a>                <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s2">&quot;Failed to compile the tex file.&quot;</span><span class="p">)</span>
</span><span id="Canvas.save-1221"><a href="#Canvas.save-1221"><span class="linenos">1221</span></a>
</span><span id="Canvas.save-1222"><a href="#Canvas.save-1222"><span class="linenos">1222</span></a>            <span class="k">if</span> <span class="n">extension</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;.eps&quot;</span><span class="p">,</span> <span class="s2">&quot;.ps&quot;</span><span class="p">]:</span>
</span><span id="Canvas.save-1223"><a href="#Canvas.save-1223"><span class="linenos">1223</span></a>                <span class="n">ps_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">parent_dir</span><span class="p">,</span> <span class="n">file_name</span> <span class="o">+</span> <span class="n">extension</span><span class="p">)</span>
</span><span id="Canvas.save-1224"><a href="#Canvas.save-1224"><span class="linenos">1224</span></a>                <span class="n">os</span><span class="o">.</span><span class="n">chdir</span><span class="p">(</span><span class="n">parent_dir</span><span class="p">)</span>
</span><span id="Canvas.save-1225"><a href="#Canvas.save-1225"><span class="linenos">1225</span></a>                <span class="n">cmd</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;pdf2ps </span><span class="si">{</span><span class="n">pdf_path</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">ps_path</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="Canvas.save-1226"><a href="#Canvas.save-1226"><span class="linenos">1226</span></a>                <span class="n">res</span> <span class="o">=</span> <span class="n">subprocess</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">cmd</span><span class="p">,</span> <span class="n">shell</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">check</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</span><span id="Canvas.save-1227"><a href="#Canvas.save-1227"><span class="linenos">1227</span></a>                <span class="k">if</span> <span class="n">res</span><span class="o">.</span><span class="n">returncode</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="Canvas.save-1228"><a href="#Canvas.save-1228"><span class="linenos">1228</span></a>                    <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s2">&quot;Failed to convert pdf to ps.&quot;</span><span class="p">)</span>
</span><span id="Canvas.save-1229"><a href="#Canvas.save-1229"><span class="linenos">1229</span></a>            <span class="k">elif</span> <span class="n">extension</span> <span class="o">==</span> <span class="s2">&quot;.svg&quot;</span><span class="p">:</span>
</span><span id="Canvas.save-1230"><a href="#Canvas.save-1230"><span class="linenos">1230</span></a>                <span class="n">doc</span> <span class="o">=</span> <span class="n">fitz</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">pdf_path</span><span class="p">)</span>
</span><span id="Canvas.save-1231"><a href="#Canvas.save-1231"><span class="linenos">1231</span></a>                <span class="n">page</span> <span class="o">=</span> <span class="n">doc</span><span class="o">.</span><span class="n">load_page</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
</span><span id="Canvas.save-1232"><a href="#Canvas.save-1232"><span class="linenos">1232</span></a>                <span class="n">svg</span> <span class="o">=</span> <span class="n">page</span><span class="o">.</span><span class="n">get_svg_image</span><span class="p">()</span>
</span><span id="Canvas.save-1233"><a href="#Canvas.save-1233"><span class="linenos">1233</span></a>                <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">output_path</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s2">&quot;utf-8&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
</span><span id="Canvas.save-1234"><a href="#Canvas.save-1234"><span class="linenos">1234</span></a>                    <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">svg</span><span class="p">)</span>
</span><span id="Canvas.save-1235"><a href="#Canvas.save-1235"><span class="linenos">1235</span></a>            <span class="k">elif</span> <span class="n">extension</span> <span class="o">==</span> <span class="s2">&quot;.png&quot;</span><span class="p">:</span>
</span><span id="Canvas.save-1236"><a href="#Canvas.save-1236"><span class="linenos">1236</span></a>                <span class="n">pdf_file</span> <span class="o">=</span> <span class="n">fitz</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">pdf_path</span><span class="p">)</span>
</span><span id="Canvas.save-1237"><a href="#Canvas.save-1237"><span class="linenos">1237</span></a>                <span class="n">page</span> <span class="o">=</span> <span class="n">pdf_file</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="Canvas.save-1238"><a href="#Canvas.save-1238"><span class="linenos">1238</span></a>                <span class="n">pix</span> <span class="o">=</span> <span class="n">page</span><span class="o">.</span><span class="n">get_pixmap</span><span class="p">()</span>
</span><span id="Canvas.save-1239"><a href="#Canvas.save-1239"><span class="linenos">1239</span></a>                <span class="n">pix</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">output_path</span><span class="p">)</span>
</span><span id="Canvas.save-1240"><a href="#Canvas.save-1240"><span class="linenos">1240</span></a>                <span class="n">pdf_file</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</span><span id="Canvas.save-1241"><a href="#Canvas.save-1241"><span class="linenos">1241</span></a>
</span><span id="Canvas.save-1242"><a href="#Canvas.save-1242"><span class="linenos">1242</span></a>        <span class="n">parent_dir</span><span class="p">,</span> <span class="n">file_name</span><span class="p">,</span> <span class="n">extension</span> <span class="o">=</span> <span class="n">validate_file_path</span><span class="p">(</span><span class="n">file_path</span><span class="p">,</span> <span class="n">overwrite</span><span class="p">)</span>
</span><span id="Canvas.save-1243"><a href="#Canvas.save-1243"><span class="linenos">1243</span></a>
</span><span id="Canvas.save-1244"><a href="#Canvas.save-1244"><span class="linenos">1244</span></a>        <span class="n">tex_code</span> <span class="o">=</span> <span class="n">get_tex_code</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</span><span id="Canvas.save-1245"><a href="#Canvas.save-1245"><span class="linenos">1245</span></a>        <span class="n">tex_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">parent_dir</span><span class="p">,</span> <span class="n">file_name</span> <span class="o">+</span> <span class="s2">&quot;.tex&quot;</span><span class="p">)</span>
</span><span id="Canvas.save-1246"><a href="#Canvas.save-1246"><span class="linenos">1246</span></a>        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">tex_path</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s2">&quot;utf-8&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
</span><span id="Canvas.save-1247"><a href="#Canvas.save-1247"><span class="linenos">1247</span></a>            <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">tex_code</span><span class="p">)</span>
</span><span id="Canvas.save-1248"><a href="#Canvas.save-1248"><span class="linenos">1248</span></a>        <span class="k">if</span> <span class="n">extension</span> <span class="o">==</span> <span class="s2">&quot;.tex&quot;</span><span class="p">:</span>
</span><span id="Canvas.save-1249"><a href="#Canvas.save-1249"><span class="linenos">1249</span></a>            <span class="k">return</span> <span class="bp">self</span>
</span><span id="Canvas.save-1250"><a href="#Canvas.save-1250"><span class="linenos">1250</span></a>
</span><span id="Canvas.save-1251"><a href="#Canvas.save-1251"><span class="linenos">1251</span></a>        <span class="n">run_job</span><span class="p">()</span>
</span><span id="Canvas.save-1252"><a href="#Canvas.save-1252"><span class="linenos">1252</span></a>        <span class="k">if</span> <span class="n">remove_aux</span><span class="p">:</span>
</span><span id="Canvas.save-1253"><a href="#Canvas.save-1253"><span class="linenos">1253</span></a>            <span class="n">remove_aux_files</span><span class="p">(</span><span class="n">file_path</span><span class="p">)</span>
</span><span id="Canvas.save-1254"><a href="#Canvas.save-1254"><span class="linenos">1254</span></a>
</span><span id="Canvas.save-1255"><a href="#Canvas.save-1255"><span class="linenos">1255</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_show_browser</span><span class="p">(</span><span class="n">file_path</span><span class="o">=</span><span class="n">file_path</span><span class="p">,</span> <span class="n">show_browser</span><span class="o">=</span><span class="n">show</span><span class="p">,</span> <span class="n">multi_page_svg</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</span><span id="Canvas.save-1256"><a href="#Canvas.save-1256"><span class="linenos">1256</span></a>        <span class="k">return</span> <span class="bp">self</span>
</span></pre></div>


            <div class="docstring"><p>Save the canvas to a file.</p>

<p>Args:
    file_path (Path, optional): The path to save the file.
    overwrite (bool, optional): Whether to overwrite the file if it exists.
    show (bool, optional): Whether to show the file in the browser.
    print_output (bool, optional): Whether to print the output of the compilation.</p>

<p>Returns:
    Self: The canvas object.</p>
</div>


                            </div>
                            <div id="Canvas.new_page" class="classattr">
                                        <input id="Canvas.new_page-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">new_page</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="o">**</span><span class="n">kwargs</span></span><span class="return-annotation">) -> <span class="n">typing_extensions</span><span class="o">.</span><span class="n">Self</span>:</span></span>

                <label class="view-source-button" for="Canvas.new_page-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Canvas.new_page"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Canvas.new_page-1258"><a href="#Canvas.new_page-1258"><span class="linenos">1258</span></a>    <span class="k">def</span> <span class="nf">new_page</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Self</span><span class="p">:</span>
</span><span id="Canvas.new_page-1259"><a href="#Canvas.new_page-1259"><span class="linenos">1259</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Canvas.new_page-1260"><a href="#Canvas.new_page-1260"><span class="linenos">1260</span></a><span class="sd">        Create a new page and add it to the canvas.pages.</span>
</span><span id="Canvas.new_page-1261"><a href="#Canvas.new_page-1261"><span class="linenos">1261</span></a>
</span><span id="Canvas.new_page-1262"><a href="#Canvas.new_page-1262"><span class="linenos">1262</span></a><span class="sd">        Args:</span>
</span><span id="Canvas.new_page-1263"><a href="#Canvas.new_page-1263"><span class="linenos">1263</span></a><span class="sd">            kwargs (dict): Additional keyword arguments.</span>
</span><span id="Canvas.new_page-1264"><a href="#Canvas.new_page-1264"><span class="linenos">1264</span></a>
</span><span id="Canvas.new_page-1265"><a href="#Canvas.new_page-1265"><span class="linenos">1265</span></a><span class="sd">        Returns:</span>
</span><span id="Canvas.new_page-1266"><a href="#Canvas.new_page-1266"><span class="linenos">1266</span></a><span class="sd">            Self: The canvas object.</span>
</span><span id="Canvas.new_page-1267"><a href="#Canvas.new_page-1267"><span class="linenos">1267</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Canvas.new_page-1268"><a href="#Canvas.new_page-1268"><span class="linenos">1268</span></a>        <span class="n">page</span> <span class="o">=</span> <span class="n">Page</span><span class="p">()</span>
</span><span id="Canvas.new_page-1269"><a href="#Canvas.new_page-1269"><span class="linenos">1269</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">pages</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">page</span><span class="p">)</span>
</span><span id="Canvas.new_page-1270"><a href="#Canvas.new_page-1270"><span class="linenos">1270</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">active_page</span> <span class="o">=</span> <span class="n">page</span>
</span><span id="Canvas.new_page-1271"><a href="#Canvas.new_page-1271"><span class="linenos">1271</span></a>        <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
</span><span id="Canvas.new_page-1272"><a href="#Canvas.new_page-1272"><span class="linenos">1272</span></a>            <span class="nb">setattr</span><span class="p">(</span><span class="n">page</span><span class="p">,</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span><span class="p">)</span>
</span><span id="Canvas.new_page-1273"><a href="#Canvas.new_page-1273"><span class="linenos">1273</span></a>        <span class="k">return</span> <span class="bp">self</span>
</span></pre></div>


            <div class="docstring"><p>Create a new page and add it to the canvas.pages.</p>

<p>Args:
    kwargs (dict): Additional keyword arguments.</p>

<p>Returns:
    Self: The canvas object.</p>
</div>


                            </div>
                </section>
                <section id="PageGrid">
                            <input id="PageGrid-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
                    <div class="decorator decorator-dataclass">@dataclass</div>

    <span class="def">class</span>
    <span class="name">PageGrid</span>:

                <label class="view-source-button" for="PageGrid-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#PageGrid"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="PageGrid-1276"><a href="#PageGrid-1276"><span class="linenos">1276</span></a><span class="nd">@dataclass</span>
</span><span id="PageGrid-1277"><a href="#PageGrid-1277"><span class="linenos">1277</span></a><span class="k">class</span> <span class="nc">PageGrid</span><span class="p">:</span>
</span><span id="PageGrid-1278"><a href="#PageGrid-1278"><span class="linenos">1278</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="PageGrid-1279"><a href="#PageGrid-1279"><span class="linenos">1279</span></a><span class="sd">    Grid class for drawing grids on a page.</span>
</span><span id="PageGrid-1280"><a href="#PageGrid-1280"><span class="linenos">1280</span></a>
</span><span id="PageGrid-1281"><a href="#PageGrid-1281"><span class="linenos">1281</span></a><span class="sd">    Args:</span>
</span><span id="PageGrid-1282"><a href="#PageGrid-1282"><span class="linenos">1282</span></a><span class="sd">        spacing (float, optional): The spacing between grid lines.</span>
</span><span id="PageGrid-1283"><a href="#PageGrid-1283"><span class="linenos">1283</span></a><span class="sd">        back_color (Color, optional): The background color of the grid.</span>
</span><span id="PageGrid-1284"><a href="#PageGrid-1284"><span class="linenos">1284</span></a><span class="sd">        line_color (Color, optional): The color of the grid lines.</span>
</span><span id="PageGrid-1285"><a href="#PageGrid-1285"><span class="linenos">1285</span></a><span class="sd">        line_width (float, optional): The width of the grid lines.</span>
</span><span id="PageGrid-1286"><a href="#PageGrid-1286"><span class="linenos">1286</span></a><span class="sd">        line_dash_array (Sequence[float], optional): The dash array for the grid lines.</span>
</span><span id="PageGrid-1287"><a href="#PageGrid-1287"><span class="linenos">1287</span></a><span class="sd">        x_shift (float, optional): The x-axis shift of the grid.</span>
</span><span id="PageGrid-1288"><a href="#PageGrid-1288"><span class="linenos">1288</span></a><span class="sd">        y_shift (float, optional): The y-axis shift of the grid.</span>
</span><span id="PageGrid-1289"><a href="#PageGrid-1289"><span class="linenos">1289</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="PageGrid-1290"><a href="#PageGrid-1290"><span class="linenos">1290</span></a>
</span><span id="PageGrid-1291"><a href="#PageGrid-1291"><span class="linenos">1291</span></a>    <span class="n">spacing</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="PageGrid-1292"><a href="#PageGrid-1292"><span class="linenos">1292</span></a>    <span class="n">back_color</span><span class="p">:</span> <span class="s1">&#39;Color&#39;</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="PageGrid-1293"><a href="#PageGrid-1293"><span class="linenos">1293</span></a>    <span class="n">line_color</span><span class="p">:</span> <span class="s1">&#39;Color&#39;</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="PageGrid-1294"><a href="#PageGrid-1294"><span class="linenos">1294</span></a>    <span class="n">line_width</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="PageGrid-1295"><a href="#PageGrid-1295"><span class="linenos">1295</span></a>    <span class="n">line_dash_array</span><span class="p">:</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="PageGrid-1296"><a href="#PageGrid-1296"><span class="linenos">1296</span></a>    <span class="n">x_shift</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="PageGrid-1297"><a href="#PageGrid-1297"><span class="linenos">1297</span></a>    <span class="n">y_shift</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="PageGrid-1298"><a href="#PageGrid-1298"><span class="linenos">1298</span></a>
</span><span id="PageGrid-1299"><a href="#PageGrid-1299"><span class="linenos">1299</span></a>    <span class="k">def</span> <span class="nf">__post_init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="PageGrid-1300"><a href="#PageGrid-1300"><span class="linenos">1300</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">type</span> <span class="o">=</span> <span class="n">Types</span><span class="o">.</span><span class="n">PAGE_GRID</span>
</span><span id="PageGrid-1301"><a href="#PageGrid-1301"><span class="linenos">1301</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">subtype</span> <span class="o">=</span> <span class="n">Types</span><span class="o">.</span><span class="n">RECTANGULAR</span>
</span><span id="PageGrid-1302"><a href="#PageGrid-1302"><span class="linenos">1302</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">spacing</span> <span class="o">=</span> <span class="n">defaults</span><span class="p">[</span><span class="s2">&quot;page_grid_spacing&quot;</span><span class="p">]</span>
</span><span id="PageGrid-1303"><a href="#PageGrid-1303"><span class="linenos">1303</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">back_color</span> <span class="o">=</span> <span class="n">defaults</span><span class="p">[</span><span class="s2">&quot;page_grid_back_color&quot;</span><span class="p">]</span>
</span><span id="PageGrid-1304"><a href="#PageGrid-1304"><span class="linenos">1304</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">line_color</span> <span class="o">=</span> <span class="n">defaults</span><span class="p">[</span><span class="s2">&quot;page_grid_line_color&quot;</span><span class="p">]</span>
</span><span id="PageGrid-1305"><a href="#PageGrid-1305"><span class="linenos">1305</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">line_width</span> <span class="o">=</span> <span class="n">defaults</span><span class="p">[</span><span class="s2">&quot;page_grid_line_width&quot;</span><span class="p">]</span>
</span><span id="PageGrid-1306"><a href="#PageGrid-1306"><span class="linenos">1306</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">line_dash_array</span> <span class="o">=</span> <span class="n">defaults</span><span class="p">[</span><span class="s2">&quot;page_grid_line_dash_array&quot;</span><span class="p">]</span>
</span><span id="PageGrid-1307"><a href="#PageGrid-1307"><span class="linenos">1307</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">x_shift</span> <span class="o">=</span> <span class="n">defaults</span><span class="p">[</span><span class="s2">&quot;page_grid_x_shift&quot;</span><span class="p">]</span>
</span><span id="PageGrid-1308"><a href="#PageGrid-1308"><span class="linenos">1308</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">y_shift</span> <span class="o">=</span> <span class="n">defaults</span><span class="p">[</span><span class="s2">&quot;page_grid_y_shift&quot;</span><span class="p">]</span>
</span><span id="PageGrid-1309"><a href="#PageGrid-1309"><span class="linenos">1309</span></a>        <span class="n">common_properties</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Grid class for drawing grids on a page.</p>

<p>Args:
    spacing (float, optional): The spacing between grid lines.
    back_color (Color, optional): The background color of the grid.
    line_color (Color, optional): The color of the grid lines.
    line_width (float, optional): The width of the grid lines.
    line_dash_array (Sequence[float], optional): The dash array for the grid lines.
    x_shift (float, optional): The x-axis shift of the grid.
    y_shift (float, optional): The y-axis shift of the grid.</p>
</div>


                            <div id="PageGrid.__init__" class="classattr">
                                <div class="attr function">
            
        <span class="name">PageGrid</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="n">spacing</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="kc">None</span>,</span><span class="param">	<span class="n">back_color</span><span class="p">:</span> <span class="n"><a href="../colors/colors.html#Color">simetri.colors.colors.Color</a></span> <span class="o">=</span> <span class="kc">None</span>,</span><span class="param">	<span class="n">line_color</span><span class="p">:</span> <span class="n"><a href="../colors/colors.html#Color">simetri.colors.colors.Color</a></span> <span class="o">=</span> <span class="kc">None</span>,</span><span class="param">	<span class="n">line_width</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="kc">None</span>,</span><span class="param">	<span class="n">line_dash_array</span><span class="p">:</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>,</span><span class="param">	<span class="n">x_shift</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="kc">None</span>,</span><span class="param">	<span class="n">y_shift</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="kc">None</span></span>)</span>

        
    </div>
    <a class="headerlink" href="#PageGrid.__init__"></a>
    
    

                            </div>
                            <div id="PageGrid.spacing" class="classattr">
                                <div class="attr variable">
            <span class="name">spacing</span><span class="annotation">: float</span>        =
<span class="default_value">None</span>

        
    </div>
    <a class="headerlink" href="#PageGrid.spacing"></a>
    
    

                            </div>
                            <div id="PageGrid.back_color" class="classattr">
                                <div class="attr variable">
            <span class="name">back_color</span><span class="annotation">: <a href="../colors/colors.html#Color">simetri.colors.colors.Color</a></span>        =
<span class="default_value">None</span>

        
    </div>
    <a class="headerlink" href="#PageGrid.back_color"></a>
    
    

                            </div>
                            <div id="PageGrid.line_color" class="classattr">
                                <div class="attr variable">
            <span class="name">line_color</span><span class="annotation">: <a href="../colors/colors.html#Color">simetri.colors.colors.Color</a></span>        =
<span class="default_value">None</span>

        
    </div>
    <a class="headerlink" href="#PageGrid.line_color"></a>
    
    

                            </div>
                            <div id="PageGrid.line_width" class="classattr">
                                <div class="attr variable">
            <span class="name">line_width</span><span class="annotation">: float</span>        =
<span class="default_value">None</span>

        
    </div>
    <a class="headerlink" href="#PageGrid.line_width"></a>
    
    

                            </div>
                            <div id="PageGrid.line_dash_array" class="classattr">
                                <div class="attr variable">
            <span class="name">line_dash_array</span><span class="annotation">: Sequence[float]</span>        =
<span class="default_value">None</span>

        
    </div>
    <a class="headerlink" href="#PageGrid.line_dash_array"></a>
    
    

                            </div>
                            <div id="PageGrid.x_shift" class="classattr">
                                <div class="attr variable">
            <span class="name">x_shift</span><span class="annotation">: float</span>        =
<span class="default_value">None</span>

        
    </div>
    <a class="headerlink" href="#PageGrid.x_shift"></a>
    
    

                            </div>
                            <div id="PageGrid.y_shift" class="classattr">
                                <div class="attr variable">
            <span class="name">y_shift</span><span class="annotation">: float</span>        =
<span class="default_value">None</span>

        
    </div>
    <a class="headerlink" href="#PageGrid.y_shift"></a>
    
    

                            </div>
                </section>
                <section id="Page">
                            <input id="Page-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
                    <div class="decorator decorator-dataclass">@dataclass</div>

    <span class="def">class</span>
    <span class="name">Page</span>:

                <label class="view-source-button" for="Page-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Page"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Page-1312"><a href="#Page-1312"><span class="linenos">1312</span></a><span class="nd">@dataclass</span>
</span><span id="Page-1313"><a href="#Page-1313"><span class="linenos">1313</span></a><span class="k">class</span> <span class="nc">Page</span><span class="p">:</span>
</span><span id="Page-1314"><a href="#Page-1314"><span class="linenos">1314</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Page-1315"><a href="#Page-1315"><span class="linenos">1315</span></a><span class="sd">    Page class for drawing sketches and text on a page. All drawing</span>
</span><span id="Page-1316"><a href="#Page-1316"><span class="linenos">1316</span></a><span class="sd">    operations result as sketches on the canvas.active_page.</span>
</span><span id="Page-1317"><a href="#Page-1317"><span class="linenos">1317</span></a>
</span><span id="Page-1318"><a href="#Page-1318"><span class="linenos">1318</span></a><span class="sd">    Args:</span>
</span><span id="Page-1319"><a href="#Page-1319"><span class="linenos">1319</span></a><span class="sd">        size (Vec2, optional): The size of the page.</span>
</span><span id="Page-1320"><a href="#Page-1320"><span class="linenos">1320</span></a><span class="sd">        back_color (Color, optional): The background color of the page.</span>
</span><span id="Page-1321"><a href="#Page-1321"><span class="linenos">1321</span></a><span class="sd">        mask (Any, optional): The mask of the page.</span>
</span><span id="Page-1322"><a href="#Page-1322"><span class="linenos">1322</span></a><span class="sd">        margins (Any, optional): The margins of the page (left, bottom, right, top).</span>
</span><span id="Page-1323"><a href="#Page-1323"><span class="linenos">1323</span></a><span class="sd">        recto (bool, optional): Whether the page is recto (True) or verso (False).</span>
</span><span id="Page-1324"><a href="#Page-1324"><span class="linenos">1324</span></a><span class="sd">        grid (PageGrid, optional): The grid of the page.</span>
</span><span id="Page-1325"><a href="#Page-1325"><span class="linenos">1325</span></a><span class="sd">        kwargs (dict, optional): Additional keyword arguments.</span>
</span><span id="Page-1326"><a href="#Page-1326"><span class="linenos">1326</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="Page-1327"><a href="#Page-1327"><span class="linenos">1327</span></a>
</span><span id="Page-1328"><a href="#Page-1328"><span class="linenos">1328</span></a>    <span class="n">size</span><span class="p">:</span> <span class="n">Vec2</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="Page-1329"><a href="#Page-1329"><span class="linenos">1329</span></a>    <span class="n">back_color</span><span class="p">:</span> <span class="s1">&#39;Color&#39;</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="Page-1330"><a href="#Page-1330"><span class="linenos">1330</span></a>    <span class="n">mask</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="Page-1331"><a href="#Page-1331"><span class="linenos">1331</span></a>    <span class="n">margins</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># left, bottom, right, top</span>
</span><span id="Page-1332"><a href="#Page-1332"><span class="linenos">1332</span></a>    <span class="n">recto</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span>  <span class="c1"># True if page is recto, False if verso</span>
</span><span id="Page-1333"><a href="#Page-1333"><span class="linenos">1333</span></a>    <span class="n">grid</span><span class="p">:</span> <span class="n">PageGrid</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="Page-1334"><a href="#Page-1334"><span class="linenos">1334</span></a>    <span class="n">kwargs</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="Page-1335"><a href="#Page-1335"><span class="linenos">1335</span></a>
</span><span id="Page-1336"><a href="#Page-1336"><span class="linenos">1336</span></a>    <span class="k">def</span> <span class="nf">__post_init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="Page-1337"><a href="#Page-1337"><span class="linenos">1337</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">type</span> <span class="o">=</span> <span class="n">Types</span><span class="o">.</span><span class="n">PAGE</span>
</span><span id="Page-1338"><a href="#Page-1338"><span class="linenos">1338</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">sketches</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="Page-1339"><a href="#Page-1339"><span class="linenos">1339</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">grid</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Page-1340"><a href="#Page-1340"><span class="linenos">1340</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">grid</span> <span class="o">=</span> <span class="n">PageGrid</span><span class="p">()</span>
</span><span id="Page-1341"><a href="#Page-1341"><span class="linenos">1341</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">:</span>
</span><span id="Page-1342"><a href="#Page-1342"><span class="linenos">1342</span></a>            <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
</span><span id="Page-1343"><a href="#Page-1343"><span class="linenos">1343</span></a>                <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span><span class="p">)</span>
</span><span id="Page-1344"><a href="#Page-1344"><span class="linenos">1344</span></a>        <span class="n">common_properties</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Page class for drawing sketches and text on a page. All drawing
operations result as sketches on the canvas.active_page.</p>

<p>Args:
    size (Vec2, optional): The size of the page.
    back_color (Color, optional): The background color of the page.
    mask (Any, optional): The mask of the page.
    margins (Any, optional): The margins of the page (left, bottom, right, top).
    recto (bool, optional): Whether the page is recto (True) or verso (False).
    grid (PageGrid, optional): The grid of the page.
    kwargs (dict, optional): Additional keyword arguments.</p>
</div>


                            <div id="Page.__init__" class="classattr">
                                <div class="attr function">
            
        <span class="name">Page</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="n">size</span><span class="p">:</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span> <span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>,</span><span class="param">	<span class="n">back_color</span><span class="p">:</span> <span class="n"><a href="../colors/colors.html#Color">simetri.colors.colors.Color</a></span> <span class="o">=</span> <span class="kc">None</span>,</span><span class="param">	<span class="n">recto</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span>,</span><span class="param">	<span class="n">grid</span><span class="p">:</span> <span class="n"><a href="#PageGrid">PageGrid</a></span> <span class="o">=</span> <span class="kc">None</span>,</span><span class="param">	<span class="n">kwargs</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="kc">None</span></span>)</span>

        
    </div>
    <a class="headerlink" href="#Page.__init__"></a>
    
    

                            </div>
                            <div id="Page.size" class="classattr">
                                <div class="attr variable">
            <span class="name">size</span><span class="annotation">: Tuple[float, float]</span>        =
<span class="default_value">None</span>

        
    </div>
    <a class="headerlink" href="#Page.size"></a>
    
    

                            </div>
                            <div id="Page.back_color" class="classattr">
                                <div class="attr variable">
            <span class="name">back_color</span><span class="annotation">: <a href="../colors/colors.html#Color">simetri.colors.colors.Color</a></span>        =
<span class="default_value">None</span>

        
    </div>
    <a class="headerlink" href="#Page.back_color"></a>
    
    

                            </div>
                            <div id="Page.mask" class="classattr">
                                <div class="attr variable">
            <span class="name">mask</span>        =
<span class="default_value">None</span>

        
    </div>
    <a class="headerlink" href="#Page.mask"></a>
    
    

                            </div>
                            <div id="Page.margins" class="classattr">
                                <div class="attr variable">
            <span class="name">margins</span>        =
<span class="default_value">None</span>

        
    </div>
    <a class="headerlink" href="#Page.margins"></a>
    
    

                            </div>
                            <div id="Page.recto" class="classattr">
                                <div class="attr variable">
            <span class="name">recto</span><span class="annotation">: bool</span>        =
<span class="default_value">True</span>

        
    </div>
    <a class="headerlink" href="#Page.recto"></a>
    
    

                            </div>
                            <div id="Page.grid" class="classattr">
                                <div class="attr variable">
            <span class="name">grid</span><span class="annotation">: <a href="#PageGrid">PageGrid</a></span>        =
<span class="default_value">None</span>

        
    </div>
    <a class="headerlink" href="#Page.grid"></a>
    
    

                            </div>
                            <div id="Page.kwargs" class="classattr">
                                <div class="attr variable">
            <span class="name">kwargs</span><span class="annotation">: dict</span>        =
<span class="default_value">None</span>

        
    </div>
    <a class="headerlink" href="#Page.kwargs"></a>
    
    

                            </div>
                </section>
                <section id="hello">
                            <input id="hello-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">hello</span><span class="signature pdoc-code condensed">(<span class="return-annotation">) -> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="hello-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#hello"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="hello-1347"><a href="#hello-1347"><span class="linenos">1347</span></a><span class="k">def</span> <span class="nf">hello</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="hello-1348"><a href="#hello-1348"><span class="linenos">1348</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="hello-1349"><a href="#hello-1349"><span class="linenos">1349</span></a><span class="sd">    Show a hello message.</span>
</span><span id="hello-1350"><a href="#hello-1350"><span class="linenos">1350</span></a><span class="sd">    Used for testing an installation of simetri.</span>
</span><span id="hello-1351"><a href="#hello-1351"><span class="linenos">1351</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="hello-1352"><a href="#hello-1352"><span class="linenos">1352</span></a>    <span class="n">canvas</span> <span class="o">=</span> <span class="n">Canvas</span><span class="p">()</span>
</span><span id="hello-1353"><a href="#hello-1353"><span class="linenos">1353</span></a>
</span><span id="hello-1354"><a href="#hello-1354"><span class="linenos">1354</span></a>    <span class="n">canvas</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="s2">&quot;Hello from simetri.graphics!&quot;</span><span class="p">,</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">130</span><span class="p">),</span> <span class="n">bold</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">font_size</span><span class="o">=</span><span class="mi">20</span><span class="p">)</span>
</span><span id="hello-1355"><a href="#hello-1355"><span class="linenos">1355</span></a>    <span class="n">canvas</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="n">logo</span><span class="p">())</span>
</span><span id="hello-1356"><a href="#hello-1356"><span class="linenos">1356</span></a>
</span><span id="hello-1357"><a href="#hello-1357"><span class="linenos">1357</span></a>    <span class="n">d_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="vm">__file__</span><span class="p">))</span>
</span><span id="hello-1358"><a href="#hello-1358"><span class="linenos">1358</span></a>    <span class="n">f_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">d_path</span><span class="p">,</span> <span class="s2">&quot;hello.pdf&quot;</span><span class="p">)</span>
</span><span id="hello-1359"><a href="#hello-1359"><span class="linenos">1359</span></a>
</span><span id="hello-1360"><a href="#hello-1360"><span class="linenos">1360</span></a>    <span class="n">canvas</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">f_path</span><span class="p">,</span> <span class="n">overwrite</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Show a hello message.
Used for testing an installation of simetri.</p>
</div>


                </section>
    </main>
<script>
    function escapeHTML(html) {
        return document.createElement('div').appendChild(document.createTextNode(html)).parentNode.innerHTML;
    }

    const originalContent = document.querySelector("main.pdoc");
    let currentContent = originalContent;

    function setContent(innerHTML) {
        let elem;
        if (innerHTML) {
            elem = document.createElement("main");
            elem.classList.add("pdoc");
            elem.innerHTML = innerHTML;
        } else {
            elem = originalContent;
        }
        if (currentContent !== elem) {
            currentContent.replaceWith(elem);
            currentContent = elem;
        }
    }

    function getSearchTerm() {
        return (new URL(window.location)).searchParams.get("search");
    }

    const searchBox = document.querySelector(".pdoc input[type=search]");
    searchBox.addEventListener("input", function () {
        let url = new URL(window.location);
        if (searchBox.value.trim()) {
            url.hash = "";
            url.searchParams.set("search", searchBox.value);
        } else {
            url.searchParams.delete("search");
        }
        history.replaceState("", "", url.toString());
        onInput();
    });
    window.addEventListener("popstate", onInput);


    let search, searchErr;

    async function initialize() {
        try {
            search = await new Promise((resolve, reject) => {
                const script = document.createElement("script");
                script.type = "text/javascript";
                script.async = true;
                script.onload = () => resolve(window.pdocSearch);
                script.onerror = (e) => reject(e);
                script.src = "../../search.js";
                document.getElementsByTagName("head")[0].appendChild(script);
            });
        } catch (e) {
            console.error("Cannot fetch pdoc search index");
            searchErr = "Cannot fetch search index.";
        }
        onInput();

        document.querySelector("nav.pdoc").addEventListener("click", e => {
            if (e.target.hash) {
                searchBox.value = "";
                searchBox.dispatchEvent(new Event("input"));
            }
        });
    }

    function onInput() {
        setContent((() => {
            const term = getSearchTerm();
            if (!term) {
                return null
            }
            if (searchErr) {
                return `<h3>Error: ${searchErr}</h3>`
            }
            if (!search) {
                return "<h3>Searching...</h3>"
            }

            window.scrollTo({top: 0, left: 0, behavior: 'auto'});

            const results = search(term);

            let html;
            if (results.length === 0) {
                html = `No search results for '${escapeHTML(term)}'.`
            } else {
                html = `<h4>${results.length} search result${results.length > 1 ? "s" : ""} for '${escapeHTML(term)}'.</h4>`;
            }
            for (let result of results.slice(0, 10)) {
                let doc = result.doc;
                let url = `../../${doc.modulename.replaceAll(".", "/")}.html`;
                if (doc.qualname) {
                    url += `#${doc.qualname}`;
                }

                let heading;
                switch (result.doc.kind) {
                    case "function":
                        if (doc.fullname.endsWith(".__init__")) {
                            heading = `<span class="name">${doc.fullname.replace(/\.__init__$/, "")}</span>${doc.signature}`;
                        } else {
                            heading = `<span class="def">${doc.funcdef}</span> <span class="name">${doc.fullname}</span>${doc.signature}`;
                        }
                        break;
                    case "class":
                        heading = `<span class="def">class</span> <span class="name">${doc.fullname}</span>`;
                        if (doc.bases)
                            heading += `<wbr>(<span class="base">${doc.bases}</span>)`;
                        heading += `:`;
                        break;
                    case "variable":
                        heading = `<span class="name">${doc.fullname}</span>`;
                        if (doc.annotation)
                            heading += `<span class="annotation">${doc.annotation}</span>`;
                        if (doc.default_value)
                            heading += `<span class="default_value"> = ${doc.default_value}</span>`;
                        break;
                    default:
                        heading = `<span class="name">${doc.fullname}</span>`;
                        break;
                }
                html += `
                        <section class="search-result">
                        <a href="${url}" class="attr ${doc.kind}">${heading}</a>
                        <div class="docstring">${doc.doc}</div>
                        </section>
                    `;

            }
            return html;
        })());
    }

    if (getSearchTerm()) {
        initialize();
        searchBox.value = getSearchTerm();
        onInput();
    } else {
        searchBox.addEventListener("focus", initialize, {once: true});
    }

    searchBox.addEventListener("keydown", e => {
        if (["ArrowDown", "ArrowUp", "Enter"].includes(e.key)) {
            let focused = currentContent.querySelector(".search-result.focused");
            if (!focused) {
                currentContent.querySelector(".search-result").classList.add("focused");
            } else if (
                e.key === "ArrowDown"
                && focused.nextElementSibling
                && focused.nextElementSibling.classList.contains("search-result")
            ) {
                focused.classList.remove("focused");
                focused.nextElementSibling.classList.add("focused");
                focused.nextElementSibling.scrollIntoView({
                    behavior: "smooth",
                    block: "nearest",
                    inline: "nearest"
                });
            } else if (
                e.key === "ArrowUp"
                && focused.previousElementSibling
                && focused.previousElementSibling.classList.contains("search-result")
            ) {
                focused.classList.remove("focused");
                focused.previousElementSibling.classList.add("focused");
                focused.previousElementSibling.scrollIntoView({
                    behavior: "smooth",
                    block: "nearest",
                    inline: "nearest"
                });
            } else if (
                e.key === "Enter"
            ) {
                focused.querySelector("a").click();
            }
        }
    });
</script></body>
</html>